function VC(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Eb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jb={exports:{}},Zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC=Symbol.for("react.transitional.element"),GC=Symbol.for("react.fragment");function Tb(t,e,n){var a=null;if(n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:QC,type:t,key:a,ref:e!==void 0?e:null,props:n}}Zu.Fragment=GC;Zu.jsx=Tb;Zu.jsxs=Tb;jb.exports=Zu;var r=jb.exports,Ab={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=Symbol.for("react.transitional.element"),$C=Symbol.for("react.portal"),WC=Symbol.for("react.fragment"),YC=Symbol.for("react.strict_mode"),KC=Symbol.for("react.profiler"),qC=Symbol.for("react.consumer"),XC=Symbol.for("react.context"),ZC=Symbol.for("react.forward_ref"),JC=Symbol.for("react.suspense"),eN=Symbol.for("react.memo"),Ib=Symbol.for("react.lazy"),tN=Symbol.for("react.activity"),g0=Symbol.iterator;function nN(t){return t===null||typeof t!="object"?null:(t=g0&&t[g0]||t["@@iterator"],typeof t=="function"?t:null)}var Rb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mb=Object.assign,Ob={};function Or(t,e,n){this.props=t,this.context=e,this.refs=Ob,this.updater=n||Rb}Or.prototype.isReactComponent={};Or.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Or.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Db(){}Db.prototype=Or.prototype;function Qm(t,e,n){this.props=t,this.context=e,this.refs=Ob,this.updater=n||Rb}var Gm=Qm.prototype=new Db;Gm.constructor=Qm;Mb(Gm,Or.prototype);Gm.isPureReactComponent=!0;var p0=Array.isArray;function mf(){}var Ue={H:null,A:null,T:null,S:null},Lb=Object.prototype.hasOwnProperty;function $m(t,e,n){var a=n.ref;return{$$typeof:Vm,type:t,key:e,ref:a!==void 0?a:null,props:n}}function aN(t,e){return $m(t.type,e,t.props)}function Wm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vm}function sN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y0=/\/+/g;function ih(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sN(""+t.key):e.toString(36)}function iN(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(mf,mf):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Fi(t,e,n,a,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"bigint":case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Vm:case $C:l=!0;break;case Ib:return l=t._init,Fi(l(t._payload),e,n,a,s)}}if(l)return s=s(t),l=a===""?"."+ih(t,0):a,p0(s)?(n="",l!=null&&(n=l.replace(y0,"$&/")+"/"),Fi(s,e,n,"",function(u){return u})):s!=null&&(Wm(s)&&(s=aN(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(y0,"$&/")+"/")+l)),e.push(s)),1;l=0;var o=a===""?".":a+":";if(p0(t))for(var c=0;c<t.length;c++)a=t[c],i=o+ih(a,c),l+=Fi(a,e,n,i,s);else if(c=nN(t),typeof c=="function")for(t=c.call(t),c=0;!(a=t.next()).done;)a=a.value,i=o+ih(a,c++),l+=Fi(a,e,n,i,s);else if(i==="object"){if(typeof t.then=="function")return Fi(iN(t),e,n,a,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return l}function ic(t,e,n){if(t==null)return t;var a=[],s=0;return Fi(t,a,"","",function(i){return e.call(n,i,s++)}),a}function rN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var x0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},lN={map:ic,forEach:function(t,e,n){ic(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ic(t,function(){e++}),e},toArray:function(t){return ic(t,function(e){return e})||[]},only:function(t){if(!Wm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Activity=tN;te.Children=lN;te.Component=Or;te.Fragment=WC;te.Profiler=KC;te.PureComponent=Qm;te.StrictMode=YC;te.Suspense=JC;te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue;te.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ue.H.useMemoCache(t)}};te.cache=function(t){return function(){return t.apply(null,arguments)}};te.cacheSignal=function(){return null};te.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var a=Mb({},t.props),s=t.key;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)!Lb.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(a[i]=e[i]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var l=Array(i),o=0;o<i;o++)l[o]=arguments[o+2];a.children=l}return $m(t.type,s,a)};te.createContext=function(t){return t={$$typeof:XC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:qC,_context:t},t};te.createElement=function(t,e,n){var a,s={},i=null;if(e!=null)for(a in e.key!==void 0&&(i=""+e.key),e)Lb.call(e,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(s[a]=e[a]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var o=Array(l),c=0;c<l;c++)o[c]=arguments[c+2];s.children=o}if(t&&t.defaultProps)for(a in l=t.defaultProps,l)s[a]===void 0&&(s[a]=l[a]);return $m(t,i,s)};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:ZC,render:t}};te.isValidElement=Wm;te.lazy=function(t){return{$$typeof:Ib,_payload:{_status:-1,_result:t},_init:rN}};te.memo=function(t,e){return{$$typeof:eN,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Ue.T,n={};Ue.T=n;try{var a=t(),s=Ue.S;s!==null&&s(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(mf,x0)}catch(i){x0(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ue.T=e}};te.unstable_useCacheRefresh=function(){return Ue.H.useCacheRefresh()};te.use=function(t){return Ue.H.use(t)};te.useActionState=function(t,e,n){return Ue.H.useActionState(t,e,n)};te.useCallback=function(t,e){return Ue.H.useCallback(t,e)};te.useContext=function(t){return Ue.H.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t,e){return Ue.H.useDeferredValue(t,e)};te.useEffect=function(t,e){return Ue.H.useEffect(t,e)};te.useEffectEvent=function(t){return Ue.H.useEffectEvent(t)};te.useId=function(){return Ue.H.useId()};te.useImperativeHandle=function(t,e,n){return Ue.H.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Ue.H.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Ue.H.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Ue.H.useMemo(t,e)};te.useOptimistic=function(t,e){return Ue.H.useOptimistic(t,e)};te.useReducer=function(t,e,n){return Ue.H.useReducer(t,e,n)};te.useRef=function(t){return Ue.H.useRef(t)};te.useState=function(t){return Ue.H.useState(t)};te.useSyncExternalStore=function(t,e,n){return Ue.H.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Ue.H.useTransition()};te.version="19.2.0";Ab.exports=te;var p=Ab.exports;const Dn=Eb(p),oN=VC({__proto__:null,default:Dn},[p]);var Pb={exports:{}},Ju={},Ub={exports:{}},Bb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,z){var O=A.length;A.push(z);e:for(;0<O;){var B=O-1>>>1,U=A[B];if(0<s(U,z))A[B]=z,A[O]=U,O=B;else break e}}function n(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var z=A[0],O=A.pop();if(O!==z){A[0]=O;e:for(var B=0,U=A.length,q=U>>>1;B<q;){var ae=2*(B+1)-1,P=A[ae],V=ae+1,le=A[V];if(0>s(P,O))V<U&&0>s(le,P)?(A[B]=le,A[V]=O,B=V):(A[B]=P,A[ae]=O,B=ae);else if(V<U&&0>s(le,O))A[B]=le,A[V]=O,B=V;else break e}}return z}function s(A,z){var O=A.sortIndex-z.sortIndex;return O!==0?O:A.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],f=1,d=null,h=3,m=!1,v=!1,b=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function _(A){for(var z=n(u);z!==null;){if(z.callback===null)a(u);else if(z.startTime<=A)a(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(u)}}function k(A){if(b=!1,_(A),!v)if(n(c)!==null)v=!0,E||(E=!0,W());else{var z=n(u);z!==null&&K(k,z.startTime-A)}}var E=!1,C=-1,S=5,T=-1;function I(){return w?!0:!(t.unstable_now()-T<S)}function N(){if(w=!1,E){var A=t.unstable_now();T=A;var z=!0;try{e:{v=!1,b&&(b=!1,g(C),C=-1),m=!0;var O=h;try{t:{for(_(A),d=n(c);d!==null&&!(d.expirationTime>A&&I());){var B=d.callback;if(typeof B=="function"){d.callback=null,h=d.priorityLevel;var U=B(d.expirationTime<=A);if(A=t.unstable_now(),typeof U=="function"){d.callback=U,_(A),z=!0;break t}d===n(c)&&a(c),_(A)}else a(c);d=n(c)}if(d!==null)z=!0;else{var q=n(u);q!==null&&K(k,q.startTime-A),z=!1}}break e}finally{d=null,h=O,m=!1}z=void 0}}finally{z?W():E=!1}}}var W;if(typeof x=="function")W=function(){x(N)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,fe=H.port2;H.port1.onmessage=N,W=function(){fe.postMessage(null)}}else W=function(){y(N,0)};function K(A,z){C=y(function(){A(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var O=h;h=z;try{return A()}finally{h=O}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(A,z){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var O=h;h=A;try{return z()}finally{h=O}},t.unstable_scheduleCallback=function(A,z,O){var B=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?B+O:B):O=B,A){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=O+U,A={id:f++,callback:z,priorityLevel:A,startTime:O,expirationTime:U,sortIndex:-1},O>B?(A.sortIndex=O,e(u,A),n(c)===null&&A===n(u)&&(b?(g(C),C=-1):b=!0,K(k,O-B))):(A.sortIndex=U,e(c,A),v||m||(v=!0,E||(E=!0,W()))),A},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(A){var z=h;return function(){var O=h;h=z;try{return A.apply(this,arguments)}finally{h=O}}}})(Bb);Ub.exports=Bb;var cN=Ub.exports,zb={exports:{}},Ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN=p;function Hb(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ya(){}var Ut={d:{f:Ya,r:function(){throw Error(Hb(522))},D:Ya,C:Ya,L:Ya,m:Ya,X:Ya,S:Ya,M:Ya},p:0,findDOMNode:null},dN=Symbol.for("react.portal");function hN(t,e,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dN,key:a==null?null:""+a,children:t,containerInfo:e,implementation:n}}var Cl=uN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ed(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ut;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Hb(299));return hN(t,e,null,n)};Ft.flushSync=function(t){var e=Cl.T,n=Ut.p;try{if(Cl.T=null,Ut.p=2,t)return t()}finally{Cl.T=e,Ut.p=n,Ut.d.f()}};Ft.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ut.d.C(t,e))};Ft.prefetchDNS=function(t){typeof t=="string"&&Ut.d.D(t)};Ft.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,a=ed(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ut.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:a,integrity:s,fetchPriority:i}):n==="script"&&Ut.d.X(t,{crossOrigin:a,integrity:s,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ft.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=ed(e.as,e.crossOrigin);Ut.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ut.d.M(t)};Ft.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,a=ed(n,e.crossOrigin);Ut.d.L(t,n,{crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ft.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=ed(e.as,e.crossOrigin);Ut.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ut.d.m(t)};Ft.requestFormReset=function(t){Ut.d.r(t)};Ft.unstable_batchedUpdates=function(t,e){return t(e)};Ft.useFormState=function(t,e,n){return Cl.H.useFormState(t,e,n)};Ft.useFormStatus=function(){return Cl.H.useHostTransitionStatus()};Ft.version="19.2.0";function Fb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fb)}catch(t){console.error(t)}}Fb(),zb.exports=Ft;var fN=zb.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=cN,Vb=p,mN=fN;function j(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $b(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b0(t){if(Ao(t)!==t)throw Error(j(188))}function gN(t){var e=t.alternate;if(!e){if(e=Ao(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,a=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return b0(s),t;if(i===a)return b0(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==a.return)n=s,a=i;else{for(var l=!1,o=s.child;o;){if(o===n){l=!0,n=s,a=i;break}if(o===a){l=!0,a=s,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,a=s;break}if(o===a){l=!0,a=i,n=s;break}o=o.sibling}if(!l)throw Error(j(189))}}if(n.alternate!==a)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Wb(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Wb(t),e!==null)return e;t=t.sibling}return null}var Be=Object.assign,pN=Symbol.for("react.element"),rc=Symbol.for("react.transitional.element"),pl=Symbol.for("react.portal"),Gi=Symbol.for("react.fragment"),Yb=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),Kb=Symbol.for("react.consumer"),va=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),yf=Symbol.for("react.suspense_list"),Km=Symbol.for("react.memo"),qa=Symbol.for("react.lazy"),xf=Symbol.for("react.activity"),yN=Symbol.for("react.memo_cache_sentinel"),v0=Symbol.iterator;function al(t){return t===null||typeof t!="object"?null:(t=v0&&t[v0]||t["@@iterator"],typeof t=="function"?t:null)}var xN=Symbol.for("react.client.reference");function bf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===xN?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gi:return"Fragment";case gf:return"Profiler";case Yb:return"StrictMode";case pf:return"Suspense";case yf:return"SuspenseList";case xf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case pl:return"Portal";case va:return t.displayName||"Context";case Kb:return(t._context.displayName||"Context")+".Consumer";case Ym:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Km:return e=t.displayName||null,e!==null?e:bf(t.type)||"Memo";case qa:e=t._payload,t=t._init;try{return bf(t(e))}catch{}}return null}var yl=Array.isArray,X=Vb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=mN.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ai={pending:!1,data:null,method:null,action:null},vf=[],$i=-1;function ia(t){return{current:t}}function wt(t){0>$i||(t.current=vf[$i],vf[$i]=null,$i--)}function Oe(t,e){$i++,vf[$i]=t.current,t.current=e}var Jn=ia(null),Yl=ia(null),us=ia(null),Gc=ia(null);function $c(t,e){switch(Oe(us,e),Oe(Yl,t),Oe(Jn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Sy(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Sy(e),t=g1(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}wt(Jn),Oe(Jn,t)}function gr(){wt(Jn),wt(Yl),wt(us)}function _f(t){t.memoizedState!==null&&Oe(Gc,t);var e=Jn.current,n=g1(e,t.type);e!==n&&(Oe(Yl,t),Oe(Jn,n))}function Wc(t){Yl.current===t&&(wt(Jn),wt(Yl)),Gc.current===t&&(wt(Gc),io._currentValue=ai)}var rh,_0;function Ws(t){if(rh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rh=e&&e[1]||"",_0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rh+t+_0}var lh=!1;function oh(t,e){if(!t||lh)return"";lh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var h=m}Reflect.construct(t,[],d)}else{try{d.call()}catch(m){h=m}t.call(d.prototype)}}else{try{throw Error()}catch(m){h=m}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=a.DetermineComponentFrameRoot(),l=i[0],o=i[1];if(l&&o){var c=l.split(`
`),u=o.split(`
`);for(s=a=0;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(a===c.length||s===u.length)for(a=c.length-1,s=u.length-1;1<=a&&0<=s&&c[a]!==u[s];)s--;for(;1<=a&&0<=s;a--,s--)if(c[a]!==u[s]){if(a!==1||s!==1)do if(a--,s--,0>s||c[a]!==u[s]){var f=`
`+c[a].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=a&&0<=s);break}}}finally{lh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ws(n):""}function bN(t,e){switch(t.tag){case 26:case 27:case 5:return Ws(t.type);case 16:return Ws("Lazy");case 13:return t.child!==e&&e!==null?Ws("Suspense Fallback"):Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return oh(t.type,!1);case 11:return oh(t.type.render,!1);case 1:return oh(t.type,!0);case 31:return Ws("Activity");default:return""}}function w0(t){try{var e="",n=null;do e+=bN(t,n),n=t,t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var wf=Object.prototype.hasOwnProperty,qm=gt.unstable_scheduleCallback,ch=gt.unstable_cancelCallback,vN=gt.unstable_shouldYield,_N=gt.unstable_requestPaint,cn=gt.unstable_now,wN=gt.unstable_getCurrentPriorityLevel,qb=gt.unstable_ImmediatePriority,Xb=gt.unstable_UserBlockingPriority,Yc=gt.unstable_NormalPriority,kN=gt.unstable_LowPriority,Zb=gt.unstable_IdlePriority,CN=gt.log,NN=gt.unstable_setDisableYieldValue,Io=null,un=null;function ns(t){if(typeof CN=="function"&&NN(t),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Io,t)}catch{}}var dn=Math.clz32?Math.clz32:jN,SN=Math.log,EN=Math.LN2;function jN(t){return t>>>=0,t===0?32:31-(SN(t)/EN|0)|0}var lc=256,oc=262144,cc=4194304;function Ys(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function td(t,e,n){var a=t.pendingLanes;if(a===0)return 0;var s=0,i=t.suspendedLanes,l=t.pingedLanes;t=t.warmLanes;var o=a&134217727;return o!==0?(a=o&~i,a!==0?s=Ys(a):(l&=o,l!==0?s=Ys(l):n||(n=o&~t,n!==0&&(s=Ys(n))))):(o=a&~i,o!==0?s=Ys(o):l!==0?s=Ys(l):n||(n=a&~t,n!==0&&(s=Ys(n)))),s===0?0:e!==0&&e!==s&&!(e&i)&&(i=s&-s,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:s}function Ro(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function TN(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jb(){var t=cc;return cc<<=1,!(cc&62914560)&&(cc=4194304),t}function uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mo(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function AN(t,e,n,a,s,i){var l=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(n=l&~n;0<n;){var f=31-dn(n),d=1<<f;o[f]=0,c[f]=-1;var h=u[f];if(h!==null)for(u[f]=null,f=0;f<h.length;f++){var m=h[f];m!==null&&(m.lane&=-536870913)}n&=~d}a!==0&&ev(t,a,0),i!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=i&~(l&~e))}function ev(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var a=31-dn(e);t.entangledLanes|=e,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function tv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var a=31-dn(n),s=1<<a;s&e|t[a]&e&&(t[a]|=e),n&=~s}}function nv(t,e){var n=e&-e;return n=n&42?1:Xm(n),n&(t.suspendedLanes|e)?0:n}function Xm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function av(){var t=ye.p;return t!==0?t:(t=window.event,t===void 0?32:S1(t.type))}function k0(t,e){var n=ye.p;try{return ye.p=t,e()}finally{ye.p=n}}var Us=Math.random().toString(36).slice(2),Et="__reactFiber$"+Us,Xt="__reactProps$"+Us,Dr="__reactContainer$"+Us,kf="__reactEvents$"+Us,IN="__reactListeners$"+Us,RN="__reactHandles$"+Us,C0="__reactResources$"+Us,Oo="__reactMarker$"+Us;function Jm(t){delete t[Et],delete t[Xt],delete t[kf],delete t[IN],delete t[RN]}function Wi(t){var e=t[Et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[Et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Iy(t);t!==null;){if(n=t[Et])return n;t=Iy(t)}return e}t=n,n=t.parentNode}return null}function Lr(t){if(t=t[Et]||t[Dr]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function xl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(j(33))}function ar(t){var e=t[C0];return e||(e=t[C0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function vt(t){t[Oo]=!0}var sv=new Set,iv={};function Ci(t,e){pr(t,e),pr(t+"Capture",e)}function pr(t,e){for(iv[t]=e,t=0;t<e.length;t++)sv.add(e[t])}var MN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),N0={},S0={};function ON(t){return wf.call(S0,t)?!0:wf.call(N0,t)?!1:MN.test(t)?S0[t]=!0:(N0[t]=!0,!1)}function Sc(t,e,n){if(ON(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var a=e.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function uc(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function oa(t,e,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+a)}}function xn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DN(t,e,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,i=a.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cf(t){if(!t._valueTracker){var e=rv(t)?"checked":"value";t._valueTracker=DN(t,e,""+t[e])}}function lv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),a="";return t&&(a=rv(t)?t.checked?"true":"false":t.value),t=a,t!==n?(e.setValue(t),!0):!1}function Kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var LN=/[\n"\\]/g;function _n(t){return t.replace(LN,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Nf(t,e,n,a,s,i,l,o){t.name="",l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.type=l:t.removeAttribute("type"),e!=null?l==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+xn(e)):t.value!==""+xn(e)&&(t.value=""+xn(e)):l!=="submit"&&l!=="reset"||t.removeAttribute("value"),e!=null?Sf(t,l,xn(e)):n!=null?Sf(t,l,xn(n)):a!=null&&t.removeAttribute("value"),s==null&&i!=null&&(t.defaultChecked=!!i),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+xn(o):t.removeAttribute("name")}function ov(t,e,n,a,s,i,l,o){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){Cf(t);return}n=n!=null?""+xn(n):"",e=e!=null?""+xn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}a=a??s,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=o?t.checked:!!a,t.defaultChecked=!!a,l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(t.name=l),Cf(t)}function Sf(t,e,n){e==="number"&&Kc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function sr(t,e,n,a){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&a&&(t[n].defaultSelected=!0)}else{for(n=""+xn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,a&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cv(t,e,n){if(e!=null&&(e=""+xn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+xn(n):""}function uv(t,e,n,a){if(e==null){if(a!=null){if(n!=null)throw Error(j(92));if(yl(a)){if(1<a.length)throw Error(j(93));a=a[0]}n=a}n==null&&(n=""),e=n}n=xn(e),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),Cf(t)}function yr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var PN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function E0(t,e,n){var a=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":a?t.setProperty(e,n):typeof n!="number"||n===0||PN.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function dv(t,e,n){if(e!=null&&typeof e!="object")throw Error(j(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||e!=null&&e.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var s in e)a=e[s],e.hasOwnProperty(s)&&n[s]!==a&&E0(t,s,a)}else for(var i in e)e.hasOwnProperty(i)&&E0(t,i,e[i])}function eg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ec(t){return BN.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function _a(){}var Ef=null;function tg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yi=null,ir=null;function j0(t){var e=Lr(t);if(e&&(t=e.stateNode)){var n=t[Xt]||null;e:switch(t=e.stateNode,e.type){case"input":if(Nf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+_n(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var a=n[e];if(a!==t&&a.form===t.form){var s=a[Xt]||null;if(!s)throw Error(j(90));Nf(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)a=n[e],a.form===t.form&&lv(a)}break e;case"textarea":cv(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&sr(t,!!n.multiple,e,!1)}}}var dh=!1;function hv(t,e,n){if(dh)return t(e,n);dh=!0;try{var a=t(e);return a}finally{if(dh=!1,(Yi!==null||ir!==null)&&(fd(),Yi&&(e=Yi,t=ir,ir=Yi=null,j0(e),t)))for(e=0;e<t.length;e++)j0(t[e])}}function Kl(t,e){var n=t.stateNode;if(n===null)return null;var a=n[Xt]||null;if(a===null)return null;n=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jf=!1;if(Ra)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){jf=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{jf=!1}var as=null,ng=null,jc=null;function fv(){if(jc)return jc;var t,e=ng,n=e.length,a,s="value"in as?as.value:as.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(a=1;a<=l&&e[n-a]===s[i-a];a++);return jc=s.slice(t,1<a?1-a:void 0)}function Tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dc(){return!0}function T0(){return!1}function Jt(t){function e(n,a,s,i,l){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dc:T0,this.isPropagationStopped=T0,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dc)},persist:function(){},isPersistent:dc}),e}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nd=Jt(Ni),Do=Be({},Ni,{view:0,detail:0}),zN=Jt(Do),hh,fh,il,ad=Be({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(hh=t.screenX-il.screenX,fh=t.screenY-il.screenY):fh=hh=0,il=t),hh)},movementY:function(t){return"movementY"in t?t.movementY:fh}}),A0=Jt(ad),HN=Be({},ad,{dataTransfer:0}),FN=Jt(HN),VN=Be({},Do,{relatedTarget:0}),mh=Jt(VN),QN=Be({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),GN=Jt(QN),$N=Be({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WN=Jt($N),YN=Be({},Ni,{data:0}),I0=Jt(YN),KN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XN[t])?!!e[t]:!1}function ag(){return ZN}var JN=Be({},Do,{key:function(t){if(t.key){var e=KN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ag,charCode:function(t){return t.type==="keypress"?Tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eS=Jt(JN),tS=Be({},ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R0=Jt(tS),nS=Be({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ag}),aS=Jt(nS),sS=Be({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),iS=Jt(sS),rS=Be({},ad,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lS=Jt(rS),oS=Be({},Ni,{newState:0,oldState:0}),cS=Jt(oS),uS=[9,13,27,32],sg=Ra&&"CompositionEvent"in window,Nl=null;Ra&&"documentMode"in document&&(Nl=document.documentMode);var dS=Ra&&"TextEvent"in window&&!Nl,mv=Ra&&(!sg||Nl&&8<Nl&&11>=Nl),M0=" ",O0=!1;function gv(t,e){switch(t){case"keyup":return uS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function hS(t,e){switch(t){case"compositionend":return pv(e);case"keypress":return e.which!==32?null:(O0=!0,M0);case"textInput":return t=e.data,t===M0&&O0?null:t;default:return null}}function fS(t,e){if(Ki)return t==="compositionend"||!sg&&gv(t,e)?(t=fv(),jc=ng=as=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mv&&e.locale!=="ko"?null:e.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mS[t.type]:e==="textarea"}function yv(t,e,n,a){Yi?ir?ir.push(a):ir=[a]:Yi=a,e=fu(e,"onChange"),0<e.length&&(n=new nd("onChange","change",null,n,a),t.push({event:n,listeners:e}))}var Sl=null,ql=null;function gS(t){h1(t,0)}function sd(t){var e=xl(t);if(lv(e))return t}function L0(t,e){if(t==="change")return e}var xv=!1;if(Ra){var gh;if(Ra){var ph="oninput"in document;if(!ph){var P0=document.createElement("div");P0.setAttribute("oninput","return;"),ph=typeof P0.oninput=="function"}gh=ph}else gh=!1;xv=gh&&(!document.documentMode||9<document.documentMode)}function U0(){Sl&&(Sl.detachEvent("onpropertychange",bv),ql=Sl=null)}function bv(t){if(t.propertyName==="value"&&sd(ql)){var e=[];yv(e,ql,t,tg(t)),hv(gS,e)}}function pS(t,e,n){t==="focusin"?(U0(),Sl=e,ql=n,Sl.attachEvent("onpropertychange",bv)):t==="focusout"&&U0()}function yS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sd(ql)}function xS(t,e){if(t==="click")return sd(e)}function bS(t,e){if(t==="input"||t==="change")return sd(e)}function vS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:vS;function Xl(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!wf.call(e,s)||!mn(t[s],e[s]))return!1}return!0}function B0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z0(t,e){var n=B0(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=e&&a>=e)return{node:n,offset:e-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B0(n)}}function vv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _v(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Kc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kc(t.document)}return e}function ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var _S=Ra&&"documentMode"in document&&11>=document.documentMode,qi=null,Tf=null,El=null,Af=!1;function H0(t,e,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Af||qi==null||qi!==Kc(a)||(a=qi,"selectionStart"in a&&ig(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),El&&Xl(El,a)||(El=a,a=fu(Tf,"onSelect"),0<a.length&&(e=new nd("onSelect","select",null,e,n),t.push({event:e,listeners:a}),e.target=qi)))}function Gs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xi={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},yh={},wv={};Ra&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function Si(t){if(yh[t])return yh[t];if(!Xi[t])return t;var e=Xi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wv)return yh[t]=e[n];return t}var kv=Si("animationend"),Cv=Si("animationiteration"),Nv=Si("animationstart"),wS=Si("transitionrun"),kS=Si("transitionstart"),CS=Si("transitioncancel"),Sv=Si("transitionend"),Ev=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function Fn(t,e){Ev.set(t,e),Ci(e,[t])}var qc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},yn=[],Zi=0,rg=0;function id(){for(var t=Zi,e=rg=Zi=0;e<t;){var n=yn[e];yn[e++]=null;var a=yn[e];yn[e++]=null;var s=yn[e];yn[e++]=null;var i=yn[e];if(yn[e++]=null,a!==null&&s!==null){var l=a.pending;l===null?s.next=s:(s.next=l.next,l.next=s),a.pending=s}i!==0&&jv(n,s,i)}}function rd(t,e,n,a){yn[Zi++]=t,yn[Zi++]=e,yn[Zi++]=n,yn[Zi++]=a,rg|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function lg(t,e,n,a){return rd(t,e,n,a),Xc(t)}function Ei(t,e){return rd(t,null,null,e),Xc(t)}function jv(t,e,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var s=!1,i=t.return;i!==null;)i.childLanes|=n,a=i.alternate,a!==null&&(a.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(s=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,s&&e!==null&&(s=31-dn(n),t=i.hiddenUpdates,a=t[s],a===null?t[s]=[e]:a.push(e),e.lane=n|536870912),i):null}function Xc(t){if(50<Ll)throw Ll=0,Zf=null,Error(j(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ji={};function NS(t,e,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,a){return new NS(t,e,n,a)}function og(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Sa(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Tv(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Ac(t,e,n,a,s,i){var l=0;if(a=t,typeof t=="function")og(t)&&(l=1);else if(typeof t=="string")l=AE(t,n,Jn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case xf:return t=rn(31,n,e,s),t.elementType=xf,t.lanes=i,t;case Gi:return si(n.children,s,i,e);case Yb:l=8,s|=24;break;case gf:return t=rn(12,n,e,s|2),t.elementType=gf,t.lanes=i,t;case pf:return t=rn(13,n,e,s),t.elementType=pf,t.lanes=i,t;case yf:return t=rn(19,n,e,s),t.elementType=yf,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case va:l=10;break e;case Kb:l=9;break e;case Ym:l=11;break e;case Km:l=14;break e;case qa:l=16,a=null;break e}l=29,n=Error(j(130,t===null?"null":typeof t,"")),a=null}return e=rn(l,n,e,s),e.elementType=t,e.type=a,e.lanes=i,e}function si(t,e,n,a){return t=rn(7,t,a,e),t.lanes=n,t}function xh(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function Av(t){var e=rn(18,null,null,0);return e.stateNode=t,e}function bh(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var F0=new WeakMap;function wn(t,e){if(typeof t=="object"&&t!==null){var n=F0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:w0(e)},F0.set(t,e),e)}return{value:t,source:e,stack:w0(e)}}var er=[],tr=0,Zc=null,Zl=0,bn=[],vn=0,Es=null,Kn=1,qn="";function ma(t,e){er[tr++]=Zl,er[tr++]=Zc,Zc=t,Zl=e}function Iv(t,e,n){bn[vn++]=Kn,bn[vn++]=qn,bn[vn++]=Es,Es=t;var a=Kn;t=qn;var s=32-dn(a)-1;a&=~(1<<s),n+=1;var i=32-dn(e)+s;if(30<i){var l=s-s%5;i=(a&(1<<l)-1).toString(32),a>>=l,s-=l,Kn=1<<32-dn(e)+s|n<<s|a,qn=i+t}else Kn=1<<i|n<<s|a,qn=t}function cg(t){t.return!==null&&(ma(t,1),Iv(t,1,0))}function ug(t){for(;t===Zc;)Zc=er[--tr],er[tr]=null,Zl=er[--tr],er[tr]=null;for(;t===Es;)Es=bn[--vn],bn[vn]=null,qn=bn[--vn],bn[vn]=null,Kn=bn[--vn],bn[vn]=null}function Rv(t,e){bn[vn++]=Kn,bn[vn++]=qn,bn[vn++]=Es,Kn=e.id,qn=e.overflow,Es=t}var jt=null,Pe=null,he=!1,ds=null,kn=!1,Rf=Error(j(519));function js(t){var e=Error(j(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(wn(e,t)),Rf}function V0(t){var e=t.stateNode,n=t.type,a=t.memoizedProps;switch(e[Et]=t,e[Xt]=a,n){case"dialog":oe("cancel",e),oe("close",e);break;case"iframe":case"object":case"embed":oe("load",e);break;case"video":case"audio":for(n=0;n<ao.length;n++)oe(ao[n],e);break;case"source":oe("error",e);break;case"img":case"image":case"link":oe("error",e),oe("load",e);break;case"details":oe("toggle",e);break;case"input":oe("invalid",e),ov(e,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":oe("invalid",e);break;case"textarea":oe("invalid",e),uv(e,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||a.suppressHydrationWarning===!0||m1(e.textContent,n)?(a.popover!=null&&(oe("beforetoggle",e),oe("toggle",e)),a.onScroll!=null&&oe("scroll",e),a.onScrollEnd!=null&&oe("scrollend",e),a.onClick!=null&&(e.onclick=_a),e=!0):e=!1,e||js(t,!0)}function Q0(t){for(jt=t.return;jt;)switch(jt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:jt=jt.return}}function Pi(t){if(t!==jt)return!1;if(!he)return Q0(t),he=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||am(t.type,t.memoizedProps)),n=!n),n&&Pe&&js(t),Q0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));Pe=Ay(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));Pe=Ay(t)}else e===27?(e=Pe,Bs(t.type)?(t=lm,lm=null,Pe=t):Pe=e):Pe=jt?En(t.stateNode.nextSibling):null;return!0}function ui(){Pe=jt=null,he=!1}function vh(){var t=ds;return t!==null&&(Yt===null?Yt=t:Yt.push.apply(Yt,t),ds=null),t}function Jl(t){ds===null?ds=[t]:ds.push(t)}var Mf=ia(null),ji=null,wa=null;function Za(t,e,n){Oe(Mf,e._currentValue),e._currentValue=n}function Ea(t){t._currentValue=Mf.current,wt(Mf)}function Of(t,e,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),t===n)break;t=t.return}}function Df(t,e,n,a){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){var l=s.child;i=i.firstContext;e:for(;i!==null;){var o=i;i=s;for(var c=0;c<e.length;c++)if(o.context===e[c]){i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Of(i.return,n,t),a||(l=null);break e}i=o.next}}else if(s.tag===18){if(l=s.return,l===null)throw Error(j(341));l.lanes|=n,i=l.alternate,i!==null&&(i.lanes|=n),Of(l,n,t),l=null}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}}function Pr(t,e,n,a){t=null;for(var s=e,i=!1;s!==null;){if(!i){if(s.flags&524288)i=!0;else if(s.flags&262144)break}if(s.tag===10){var l=s.alternate;if(l===null)throw Error(j(387));if(l=l.memoizedProps,l!==null){var o=s.type;mn(s.pendingProps.value,l.value)||(t!==null?t.push(o):t=[o])}}else if(s===Gc.current){if(l=s.alternate,l===null)throw Error(j(387));l.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(io):t=[io])}s=s.return}t!==null&&Df(e,t,n,a),e.flags|=262144}function Jc(t){for(t=t.firstContext;t!==null;){if(!mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function di(t){ji=t,wa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Tt(t){return Mv(ji,t)}function hc(t,e){return ji===null&&di(t),Mv(t,e)}function Mv(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},wa===null){if(t===null)throw Error(j(308));wa=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else wa=wa.next=e;return n}var SS=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},ES=gt.unstable_scheduleCallback,jS=gt.unstable_NormalPriority,ot={$$typeof:va,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dg(){return{controller:new SS,data:new Map,refCount:0}}function Lo(t){t.refCount--,t.refCount===0&&ES(jS,function(){t.controller.abort()})}var jl=null,Lf=0,xr=0,rr=null;function TS(t,e){if(jl===null){var n=jl=[];Lf=0,xr=Lg(),rr={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Lf++,e.then(G0,G0),e}function G0(){if(--Lf===0&&jl!==null){rr!==null&&(rr.status="fulfilled");var t=jl;jl=null,xr=0,rr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function AS(t,e){var n=[],a={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){a.status="fulfilled",a.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(a.status="rejected",a.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),a}var $0=X.S;X.S=function(t,e){W_=cn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&TS(t,e),$0!==null&&$0(t,e)};var ii=ia(null);function hg(){var t=ii.current;return t!==null?t:Te.pooledCache}function Ic(t,e){e===null?Oe(ii,ii.current):Oe(ii,e.pool)}function Ov(){var t=hg();return t===null?null:{parent:ot._currentValue,pool:t}}var Ur=Error(j(460)),fg=Error(j(474)),ld=Error(j(542)),eu={then:function(){}};function W0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Dv(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(_a,_a),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,K0(t),t;default:if(typeof e.status=="string")e.then(_a,_a);else{if(t=Te,t!==null&&100<t.shellSuspendCounter)throw Error(j(482));t=e,t.status="pending",t.then(function(a){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=a}},function(a){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=a}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,K0(t),t}throw ri=e,Ur}}function Ks(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ri=n,Ur):n}}var ri=null;function Y0(){if(ri===null)throw Error(j(459));var t=ri;return ri=null,t}function K0(t){if(t===Ur||t===ld)throw Error(j(483))}var lr=null,eo=0;function fc(t){var e=eo;return eo+=1,lr===null&&(lr=[]),Dv(lr,t,e)}function rl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function mc(t,e){throw e.$$typeof===pN?Error(j(525)):(t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Lv(t){function e(y,g){if(t){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function a(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(y,g){return y=Sa(y,g),y.index=0,y.sibling=null,y}function i(y,g,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=67108866,g):x):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function l(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function o(y,g,x,_){return g===null||g.tag!==6?(g=xh(x,y.mode,_),g.return=y,g):(g=s(g,x),g.return=y,g)}function c(y,g,x,_){var k=x.type;return k===Gi?f(y,g,x.props.children,_,x.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===qa&&Ks(k)===g.type)?(g=s(g,x.props),rl(g,x),g.return=y,g):(g=Ac(x.type,x.key,x.props,null,y.mode,_),rl(g,x),g.return=y,g)}function u(y,g,x,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=bh(x,y.mode,_),g.return=y,g):(g=s(g,x.children||[]),g.return=y,g)}function f(y,g,x,_,k){return g===null||g.tag!==7?(g=si(x,y.mode,_,k),g.return=y,g):(g=s(g,x),g.return=y,g)}function d(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=xh(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case rc:return x=Ac(g.type,g.key,g.props,null,y.mode,x),rl(x,g),x.return=y,x;case pl:return g=bh(g,y.mode,x),g.return=y,g;case qa:return g=Ks(g),d(y,g,x)}if(yl(g)||al(g))return g=si(g,y.mode,x,null),g.return=y,g;if(typeof g.then=="function")return d(y,fc(g),x);if(g.$$typeof===va)return d(y,hc(y,g),x);mc(y,g)}return null}function h(y,g,x,_){var k=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return k!==null?null:o(y,g,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rc:return x.key===k?c(y,g,x,_):null;case pl:return x.key===k?u(y,g,x,_):null;case qa:return x=Ks(x),h(y,g,x,_)}if(yl(x)||al(x))return k!==null?null:f(y,g,x,_,null);if(typeof x.then=="function")return h(y,g,fc(x),_);if(x.$$typeof===va)return h(y,g,hc(y,x),_);mc(y,x)}return null}function m(y,g,x,_,k){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return y=y.get(x)||null,o(g,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case rc:return y=y.get(_.key===null?x:_.key)||null,c(g,y,_,k);case pl:return y=y.get(_.key===null?x:_.key)||null,u(g,y,_,k);case qa:return _=Ks(_),m(y,g,x,_,k)}if(yl(_)||al(_))return y=y.get(x)||null,f(g,y,_,k,null);if(typeof _.then=="function")return m(y,g,x,fc(_),k);if(_.$$typeof===va)return m(y,g,x,hc(g,_),k);mc(g,_)}return null}function v(y,g,x,_){for(var k=null,E=null,C=g,S=g=0,T=null;C!==null&&S<x.length;S++){C.index>S?(T=C,C=null):T=C.sibling;var I=h(y,C,x[S],_);if(I===null){C===null&&(C=T);break}t&&C&&I.alternate===null&&e(y,C),g=i(I,g,S),E===null?k=I:E.sibling=I,E=I,C=T}if(S===x.length)return n(y,C),he&&ma(y,S),k;if(C===null){for(;S<x.length;S++)C=d(y,x[S],_),C!==null&&(g=i(C,g,S),E===null?k=C:E.sibling=C,E=C);return he&&ma(y,S),k}for(C=a(C);S<x.length;S++)T=m(C,y,S,x[S],_),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?S:T.key),g=i(T,g,S),E===null?k=T:E.sibling=T,E=T);return t&&C.forEach(function(N){return e(y,N)}),he&&ma(y,S),k}function b(y,g,x,_){if(x==null)throw Error(j(151));for(var k=null,E=null,C=g,S=g=0,T=null,I=x.next();C!==null&&!I.done;S++,I=x.next()){C.index>S?(T=C,C=null):T=C.sibling;var N=h(y,C,I.value,_);if(N===null){C===null&&(C=T);break}t&&C&&N.alternate===null&&e(y,C),g=i(N,g,S),E===null?k=N:E.sibling=N,E=N,C=T}if(I.done)return n(y,C),he&&ma(y,S),k;if(C===null){for(;!I.done;S++,I=x.next())I=d(y,I.value,_),I!==null&&(g=i(I,g,S),E===null?k=I:E.sibling=I,E=I);return he&&ma(y,S),k}for(C=a(C);!I.done;S++,I=x.next())I=m(C,y,S,I.value,_),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?S:I.key),g=i(I,g,S),E===null?k=I:E.sibling=I,E=I);return t&&C.forEach(function(W){return e(y,W)}),he&&ma(y,S),k}function w(y,g,x,_){if(typeof x=="object"&&x!==null&&x.type===Gi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case rc:e:{for(var k=x.key;g!==null;){if(g.key===k){if(k=x.type,k===Gi){if(g.tag===7){n(y,g.sibling),_=s(g,x.props.children),_.return=y,y=_;break e}}else if(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===qa&&Ks(k)===g.type){n(y,g.sibling),_=s(g,x.props),rl(_,x),_.return=y,y=_;break e}n(y,g);break}else e(y,g);g=g.sibling}x.type===Gi?(_=si(x.props.children,y.mode,_,x.key),_.return=y,y=_):(_=Ac(x.type,x.key,x.props,null,y.mode,_),rl(_,x),_.return=y,y=_)}return l(y);case pl:e:{for(k=x.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),_=s(g,x.children||[]),_.return=y,y=_;break e}else{n(y,g);break}else e(y,g);g=g.sibling}_=bh(x,y.mode,_),_.return=y,y=_}return l(y);case qa:return x=Ks(x),w(y,g,x,_)}if(yl(x))return v(y,g,x,_);if(al(x)){if(k=al(x),typeof k!="function")throw Error(j(150));return x=k.call(x),b(y,g,x,_)}if(typeof x.then=="function")return w(y,g,fc(x),_);if(x.$$typeof===va)return w(y,g,hc(y,x),_);mc(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),_=s(g,x),_.return=y,y=_):(n(y,g),_=xh(x,y.mode,_),_.return=y,y=_),l(y)):n(y,g)}return function(y,g,x,_){try{eo=0;var k=w(y,g,x,_);return lr=null,k}catch(C){if(C===Ur||C===ld)throw C;var E=rn(29,C,null,y.mode);return E.lanes=_,E.return=y,E}finally{}}}var hi=Lv(!0),Pv=Lv(!1),Xa=!1;function mg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function fs(t,e,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,pe&2){var s=a.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),a.pending=e,e=Xc(t),jv(t,null,n),e}return rd(t,a,e,n),Xc(t)}function Tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,tv(t,n)}}function _h(t,e){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Uf=!1;function Al(){if(Uf){var t=rr;if(t!==null)throw t}}function Il(t,e,n,a){Uf=!1;var s=t.updateQueue;Xa=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==l&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;l=0,f=u=c=null,o=i;do{var h=o.lane&-536870913,m=h!==o.lane;if(m?(de&h)===h:(a&h)===h){h!==0&&h===xr&&(Uf=!0),f!==null&&(f=f.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var v=t,b=o;h=e;var w=n;switch(b.tag){case 1:if(v=b.payload,typeof v=="function"){d=v.call(w,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,h=typeof v=="function"?v.call(w,d,h):v,h==null)break e;d=Be({},d,h);break e;case 2:Xa=!0}}h=o.callback,h!==null&&(t.flags|=64,m&&(t.flags|=8192),m=s.callbacks,m===null?s.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,l|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,i===null&&(s.shared.lanes=0),As|=l,t.lanes=l,t.memoizedState=d}}function Uv(t,e){if(typeof t!="function")throw Error(j(191,t));t.call(e)}function Bv(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Uv(n[t],e)}var br=ia(null),tu=ia(0);function q0(t,e){t=La,Oe(tu,t),Oe(br,e),La=t|e.baseLanes}function Bf(){Oe(tu,La),Oe(br,br.current)}function gg(){La=tu.current,wt(br),wt(tu)}var gn=ia(null),Sn=null;function Ja(t){var e=t.alternate;Oe(nt,nt.current&1),Oe(gn,t),Sn===null&&(e===null||br.current!==null||e.memoizedState!==null)&&(Sn=t)}function zf(t){Oe(nt,nt.current),Oe(gn,t),Sn===null&&(Sn=t)}function zv(t){t.tag===22?(Oe(nt,nt.current),Oe(gn,t),Sn===null&&(Sn=t)):es()}function es(){Oe(nt,nt.current),Oe(gn,gn.current)}function sn(t){wt(gn),Sn===t&&(Sn=null),wt(nt)}var nt=ia(0);function nu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||im(n)||rm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ma=0,ne=null,Ee=null,rt=null,au=!1,or=!1,fi=!1,su=0,to=0,cr=null,IS=0;function Ze(){throw Error(j(321))}function pg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function yg(t,e,n,a,s,i){return Ma=i,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,X.H=t===null||t.memoizedState===null?y_:jg,fi=!1,i=n(a,s),fi=!1,or&&(i=Fv(e,n,a,s)),Hv(t),i}function Hv(t){X.H=no;var e=Ee!==null&&Ee.next!==null;if(Ma=0,rt=Ee=ne=null,au=!1,to=0,cr=null,e)throw Error(j(300));t===null||ct||(t=t.dependencies,t!==null&&Jc(t)&&(ct=!0))}function Fv(t,e,n,a){ne=t;var s=0;do{if(or&&(cr=null),to=0,or=!1,25<=s)throw Error(j(301));if(s+=1,rt=Ee=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}X.H=x_,i=e(n,a)}while(or);return i}function RS(){var t=X.H,e=t.useState()[0];return e=typeof e.then=="function"?Po(e):e,t=t.useState()[0],(Ee!==null?Ee.memoizedState:null)!==t&&(ne.flags|=1024),e}function xg(){var t=su!==0;return su=0,t}function bg(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function vg(t){if(au){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}au=!1}Ma=0,rt=Ee=ne=null,or=!1,to=su=0,cr=null}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?ne.memoizedState=rt=t:rt=rt.next=t,rt}function st(){if(Ee===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=rt===null?ne.memoizedState:rt.next;if(e!==null)rt=e,Ee=t;else{if(t===null)throw ne.alternate===null?Error(j(467)):Error(j(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},rt===null?ne.memoizedState=rt=t:rt=rt.next=t}return rt}function od(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Po(t){var e=to;return to+=1,cr===null&&(cr=[]),t=Dv(cr,t,e),e=ne,(rt===null?e.memoizedState:rt.next)===null&&(e=e.alternate,X.H=e===null||e.memoizedState===null?y_:jg),t}function cd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Po(t);if(t.$$typeof===va)return Tt(t)}throw Error(j(438,String(t)))}function _g(t){var e=null,n=ne.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var a=ne.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(e={data:a.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=od(),ne.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),a=0;a<t;a++)n[a]=yN;return e.index++,n}function Oa(t,e){return typeof e=="function"?e(t):e}function Rc(t){var e=st();return wg(e,Ee,t)}function wg(t,e,n){var a=t.queue;if(a===null)throw Error(j(311));a.lastRenderedReducer=n;var s=t.baseQueue,i=a.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}e.baseQueue=s=i,a.pending=null}if(i=t.baseState,s===null)t.memoizedState=i;else{e=s.next;var o=l=null,c=null,u=e,f=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(de&d)===d:(Ma&d)===d){var h=u.revertLane;if(h===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===xr&&(f=!0);else if((Ma&h)===h){u=u.next,h===xr&&(f=!0);continue}else d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=d,l=i):c=c.next=d,ne.lanes|=h,As|=h;d=u.action,fi&&n(i,d),i=u.hasEagerState?u.eagerState:n(i,d)}else h={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=h,l=i):c=c.next=h,ne.lanes|=d,As|=d;u=u.next}while(u!==null&&u!==e);if(c===null?l=i:c.next=o,!mn(i,t.memoizedState)&&(ct=!0,f&&(n=rr,n!==null)))throw n;t.memoizedState=i,t.baseState=l,t.baseQueue=c,a.lastRenderedState=i}return s===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function wh(t){var e=st(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var a=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);mn(i,e.memoizedState)||(ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,a]}function Vv(t,e,n){var a=ne,s=st(),i=he;if(i){if(n===void 0)throw Error(j(407));n=n()}else n=e();var l=!mn((Ee||s).memoizedState,n);if(l&&(s.memoizedState=n,ct=!0),s=s.queue,kg($v.bind(null,a,s,t),[t]),s.getSnapshot!==e||l||rt!==null&&rt.memoizedState.tag&1){if(a.flags|=2048,vr(9,{destroy:void 0},Gv.bind(null,a,s,n,e),null),Te===null)throw Error(j(349));i||Ma&127||Qv(a,e,n)}return n}function Qv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e=od(),ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gv(t,e,n,a){e.value=n,e.getSnapshot=a,Wv(e)&&Yv(t)}function $v(t,e,n){return n(function(){Wv(e)&&Yv(t)})}function Wv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function Yv(t){var e=Ei(t,2);e!==null&&qt(e,t,2)}function Hf(t){var e=Pt();if(typeof t=="function"){var n=t;if(t=n(),fi){ns(!0);try{n()}finally{ns(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e}function Kv(t,e,n,a){return t.baseState=n,wg(t,Ee,typeof a=="function"?a:Oa)}function MS(t,e,n,a,s){if(dd(t))throw Error(j(485));if(t=e.action,t!==null){var i={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(l){i.listeners.push(l)}};X.T!==null?n(!0):i.isTransition=!1,a(i),n=e.pending,n===null?(i.next=e.pending=i,qv(e,i)):(i.next=n.next,e.pending=n.next=i)}}function qv(t,e){var n=e.action,a=e.payload,s=t.state;if(e.isTransition){var i=X.T,l={};X.T=l;try{var o=n(s,a),c=X.S;c!==null&&c(l,o),X0(t,e,o)}catch(u){Ff(t,e,u)}finally{i!==null&&l.types!==null&&(i.types=l.types),X.T=i}}else try{i=n(s,a),X0(t,e,i)}catch(u){Ff(t,e,u)}}function X0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Z0(t,e,a)},function(a){return Ff(t,e,a)}):Z0(t,e,n)}function Z0(t,e,n){e.status="fulfilled",e.value=n,Xv(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,qv(t,n)))}function Ff(t,e,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do e.status="rejected",e.reason=n,Xv(e),e=e.next;while(e!==a)}t.action=null}function Xv(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Zv(t,e){return e}function J0(t,e){if(he){var n=Te.formState;if(n!==null){e:{var a=ne;if(he){if(Pe){t:{for(var s=Pe,i=kn;s.nodeType!==8;){if(!i){s=null;break t}if(s=En(s.nextSibling),s===null){s=null;break t}}i=s.data,s=i==="F!"||i==="F"?s:null}if(s){Pe=En(s.nextSibling),a=s.data==="F!";break e}}js(a)}a=!1}a&&(e=n[0])}}return n=Pt(),n.memoizedState=n.baseState=e,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zv,lastRenderedState:e},n.queue=a,n=m_.bind(null,ne,a),a.dispatch=n,a=Hf(!1),i=Eg.bind(null,ne,!1,a.queue),a=Pt(),s={state:e,dispatch:null,action:t,pending:null},a.queue=s,n=MS.bind(null,ne,s,i,n),s.dispatch=n,a.memoizedState=t,[e,n,!1]}function ey(t){var e=st();return Jv(e,Ee,t)}function Jv(t,e,n){if(e=wg(t,e,Zv)[0],t=Rc(Oa)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var a=Po(e)}catch(l){throw l===Ur?ld:l}else a=e;e=st();var s=e.queue,i=s.dispatch;return n!==e.memoizedState&&(ne.flags|=2048,vr(9,{destroy:void 0},OS.bind(null,s,n),null)),[a,i,t]}function OS(t,e){t.action=e}function ty(t){var e=st(),n=Ee;if(n!==null)return Jv(e,n,t);st(),e=e.memoizedState,n=st();var a=n.queue.dispatch;return n.memoizedState=t,[e,a,!1]}function vr(t,e,n,a){return t={tag:t,create:n,deps:a,inst:e,next:null},e=ne.updateQueue,e===null&&(e=od(),ne.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,e.lastEffect=t),t}function e_(){return st().memoizedState}function Mc(t,e,n,a){var s=Pt();ne.flags|=t,s.memoizedState=vr(1|e,{destroy:void 0},n,a===void 0?null:a)}function ud(t,e,n,a){var s=st();a=a===void 0?null:a;var i=s.memoizedState.inst;Ee!==null&&a!==null&&pg(a,Ee.memoizedState.deps)?s.memoizedState=vr(e,i,n,a):(ne.flags|=t,s.memoizedState=vr(1|e,i,n,a))}function ny(t,e){Mc(8390656,8,t,e)}function kg(t,e){ud(2048,8,t,e)}function DS(t){ne.flags|=4;var e=ne.updateQueue;if(e===null)e=od(),ne.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function t_(t){var e=st().memoizedState;return DS({ref:e,nextImpl:t}),function(){if(pe&2)throw Error(j(440));return e.impl.apply(void 0,arguments)}}function n_(t,e){return ud(4,2,t,e)}function a_(t,e){return ud(4,4,t,e)}function s_(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i_(t,e,n){n=n!=null?n.concat([t]):null,ud(4,4,s_.bind(null,e,t),n)}function Cg(){}function r_(t,e){var n=st();e=e===void 0?null:e;var a=n.memoizedState;return e!==null&&pg(e,a[1])?a[0]:(n.memoizedState=[t,e],t)}function l_(t,e){var n=st();e=e===void 0?null:e;var a=n.memoizedState;if(e!==null&&pg(e,a[1]))return a[0];if(a=t(),fi){ns(!0);try{t()}finally{ns(!1)}}return n.memoizedState=[a,e],a}function Ng(t,e,n){return n===void 0||Ma&1073741824&&!(de&261930)?t.memoizedState=e:(t.memoizedState=n,t=K_(),ne.lanes|=t,As|=t,n)}function o_(t,e,n,a){return mn(n,e)?n:br.current!==null?(t=Ng(t,n,a),mn(t,e)||(ct=!0),t):!(Ma&42)||Ma&1073741824&&!(de&261930)?(ct=!0,t.memoizedState=n):(t=K_(),ne.lanes|=t,As|=t,e)}function c_(t,e,n,a,s){var i=ye.p;ye.p=i!==0&&8>i?i:8;var l=X.T,o={};X.T=o,Eg(t,!1,e,n);try{var c=s(),u=X.S;if(u!==null&&u(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=AS(c,a);Rl(t,e,f,hn(t))}else Rl(t,e,a,hn(t))}catch(d){Rl(t,e,{then:function(){},status:"rejected",reason:d},hn())}finally{ye.p=i,l!==null&&o.types!==null&&(l.types=o.types),X.T=l}}function LS(){}function Vf(t,e,n,a){if(t.tag!==5)throw Error(j(476));var s=u_(t).queue;c_(t,s,e,ai,n===null?LS:function(){return d_(t),n(a)})}function u_(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ai,baseState:ai,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:ai},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function d_(t){var e=u_(t);e.next===null&&(e=t.alternate.memoizedState),Rl(t,e.next.queue,{},hn())}function Sg(){return Tt(io)}function h_(){return st().memoizedState}function f_(){return st().memoizedState}function PS(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=hn();t=hs(n);var a=fs(e,t,n);a!==null&&(qt(a,e,n),Tl(a,e,n)),e={cache:dg()},t.payload=e;return}e=e.return}}function US(t,e,n){var a=hn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},dd(t)?g_(e,n):(n=lg(t,e,n,a),n!==null&&(qt(n,t,a),p_(n,e,a)))}function m_(t,e,n){var a=hn();Rl(t,e,n,a)}function Rl(t,e,n,a){var s={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(dd(t))g_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,o=i(l,n);if(s.hasEagerState=!0,s.eagerState=o,mn(o,l))return rd(t,e,s,0),Te===null&&id(),!1}catch{}finally{}if(n=lg(t,e,s,a),n!==null)return qt(n,t,a),p_(n,e,a),!0}return!1}function Eg(t,e,n,a){if(a={lane:2,revertLane:Lg(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},dd(t)){if(e)throw Error(j(479))}else e=lg(t,n,a,2),e!==null&&qt(e,t,2)}function dd(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function g_(t,e){or=au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function p_(t,e,n){if(n&4194048){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,tv(t,n)}}var no={readContext:Tt,use:cd,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};no.useEffectEvent=Ze;var y_={readContext:Tt,use:cd,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:Tt,useEffect:ny,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Mc(4194308,4,s_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mc(4194308,4,t,e)},useInsertionEffect:function(t,e){Mc(4,2,t,e)},useMemo:function(t,e){var n=Pt();e=e===void 0?null:e;var a=t();if(fi){ns(!0);try{t()}finally{ns(!1)}}return n.memoizedState=[a,e],a},useReducer:function(t,e,n){var a=Pt();if(n!==void 0){var s=n(e);if(fi){ns(!0);try{n(e)}finally{ns(!1)}}}else s=e;return a.memoizedState=a.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=US.bind(null,ne,t),[a.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:function(t){t=Hf(t);var e=t.queue,n=m_.bind(null,ne,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Cg,useDeferredValue:function(t,e){var n=Pt();return Ng(n,t,e)},useTransition:function(){var t=Hf(!1);return t=c_.bind(null,ne,t.queue,!0,!1),Pt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var a=ne,s=Pt();if(he){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Te===null)throw Error(j(349));de&127||Qv(a,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ny($v.bind(null,a,i,t),[t]),a.flags|=2048,vr(9,{destroy:void 0},Gv.bind(null,a,i,n,e),null),n},useId:function(){var t=Pt(),e=Te.identifierPrefix;if(he){var n=qn,a=Kn;n=(a&~(1<<32-dn(a)-1)).toString(32)+n,e="_"+e+"R_"+n,n=su++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=IS++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Sg,useFormState:J0,useActionState:J0,useOptimistic:function(t){var e=Pt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Eg.bind(null,ne,!0,n),n.dispatch=e,[t,e]},useMemoCache:_g,useCacheRefresh:function(){return Pt().memoizedState=PS.bind(null,ne)},useEffectEvent:function(t){var e=Pt(),n={impl:t};return e.memoizedState=n,function(){if(pe&2)throw Error(j(440));return n.impl.apply(void 0,arguments)}}},jg={readContext:Tt,use:cd,useCallback:r_,useContext:Tt,useEffect:kg,useImperativeHandle:i_,useInsertionEffect:n_,useLayoutEffect:a_,useMemo:l_,useReducer:Rc,useRef:e_,useState:function(){return Rc(Oa)},useDebugValue:Cg,useDeferredValue:function(t,e){var n=st();return o_(n,Ee.memoizedState,t,e)},useTransition:function(){var t=Rc(Oa)[0],e=st().memoizedState;return[typeof t=="boolean"?t:Po(t),e]},useSyncExternalStore:Vv,useId:h_,useHostTransitionStatus:Sg,useFormState:ey,useActionState:ey,useOptimistic:function(t,e){var n=st();return Kv(n,Ee,t,e)},useMemoCache:_g,useCacheRefresh:f_};jg.useEffectEvent=t_;var x_={readContext:Tt,use:cd,useCallback:r_,useContext:Tt,useEffect:kg,useImperativeHandle:i_,useInsertionEffect:n_,useLayoutEffect:a_,useMemo:l_,useReducer:wh,useRef:e_,useState:function(){return wh(Oa)},useDebugValue:Cg,useDeferredValue:function(t,e){var n=st();return Ee===null?Ng(n,t,e):o_(n,Ee.memoizedState,t,e)},useTransition:function(){var t=wh(Oa)[0],e=st().memoizedState;return[typeof t=="boolean"?t:Po(t),e]},useSyncExternalStore:Vv,useId:h_,useHostTransitionStatus:Sg,useFormState:ty,useActionState:ty,useOptimistic:function(t,e){var n=st();return Ee!==null?Kv(n,Ee,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:_g,useCacheRefresh:f_};x_.useEffectEvent=t_;function kh(t,e,n,a){e=t.memoizedState,n=n(a,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qf={enqueueSetState:function(t,e,n){t=t._reactInternals;var a=hn(),s=hs(a);s.payload=e,n!=null&&(s.callback=n),e=fs(t,s,a),e!==null&&(qt(e,t,a),Tl(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var a=hn(),s=hs(a);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fs(t,s,a),e!==null&&(qt(e,t,a),Tl(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),a=hs(n);a.tag=2,e!=null&&(a.callback=e),e=fs(t,a,n),e!==null&&(qt(e,t,n),Tl(e,t,n))}};function ay(t,e,n,a,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):e.prototype&&e.prototype.isPureReactComponent?!Xl(n,a)||!Xl(s,i):!0}function sy(t,e,n,a){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,a),e.state!==t&&Qf.enqueueReplaceState(e,e.state,null)}function mi(t,e){var n=e;if("ref"in e){n={};for(var a in e)a!=="ref"&&(n[a]=e[a])}if(t=t.defaultProps){n===e&&(n=Be({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function b_(t){qc(t)}function v_(t){console.error(t)}function __(t){qc(t)}function iu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(a){setTimeout(function(){throw a})}}function iy(t,e,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Gf(t,e,n){return n=hs(n),n.tag=3,n.payload={element:null},n.callback=function(){iu(t,e)},n}function w_(t){return t=hs(t),t.tag=3,t}function k_(t,e,n,a){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=a.value;t.payload=function(){return s(i)},t.callback=function(){iy(e,n,a)}}var l=n.stateNode;l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){iy(e,n,a),typeof s!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=a.stack;this.componentDidCatch(a.value,{componentStack:o!==null?o:""})})}function BS(t,e,n,a,s){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(e=n.alternate,e!==null&&Pr(e,n,s,!0),n=gn.current,n!==null){switch(n.tag){case 31:case 13:return Sn===null?uu():n.alternate===null&&Je===0&&(Je=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===eu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([a]):e.add(a),Oh(t,a,s)),!1;case 22:return n.flags|=65536,a===eu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([a]):n.add(a)),Oh(t,a,s)),!1}throw Error(j(435,n.tag))}return Oh(t,a,s),uu(),!1}if(he)return e=gn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,a!==Rf&&(t=Error(j(422),{cause:a}),Jl(wn(t,n)))):(a!==Rf&&(e=Error(j(423),{cause:a}),Jl(wn(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,a=wn(a,n),s=Gf(t.stateNode,a,s),_h(t,s),Je!==4&&(Je=2)),!1;var i=Error(j(520),{cause:a});if(i=wn(i,n),Dl===null?Dl=[i]:Dl.push(i),Je!==4&&(Je=2),e===null)return!0;a=wn(a,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Gf(n.stateNode,a,t),_h(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(ms===null||!ms.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,s=w_(s),k_(s,t,n,a),_h(n,s),!1}n=n.return}while(n!==null);return!1}var Tg=Error(j(461)),ct=!1;function St(t,e,n,a){e.child=t===null?Pv(e,null,n,a):hi(e,t.child,n,a)}function ry(t,e,n,a,s){n=n.render;var i=e.ref;if("ref"in a){var l={};for(var o in a)o!=="ref"&&(l[o]=a[o])}else l=a;return di(e),a=yg(t,e,n,l,i,s),o=xg(),t!==null&&!ct?(bg(t,e,s),Da(t,e,s)):(he&&o&&cg(e),e.flags|=1,St(t,e,a,s),e.child)}function ly(t,e,n,a,s){if(t===null){var i=n.type;return typeof i=="function"&&!og(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,C_(t,e,i,a,s)):(t=Ac(n.type,null,a,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!Ag(t,s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xl,n(l,a)&&t.ref===e.ref)return Da(t,e,s)}return e.flags|=1,t=Sa(i,a),t.ref=e.ref,t.return=e,e.child=t}function C_(t,e,n,a,s){if(t!==null){var i=t.memoizedProps;if(Xl(i,a)&&t.ref===e.ref)if(ct=!1,e.pendingProps=a=i,Ag(t,s))t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,Da(t,e,s)}return $f(t,e,n,a,s)}function N_(t,e,n,a){var s=a.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(a=e.child=t.child,s=0;a!==null;)s=s|a.lanes|a.childLanes,a=a.sibling;a=s&~i}else a=0,e.child=null;return oy(t,e,i,n,a)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ic(e,i!==null?i.cachePool:null),i!==null?q0(e,i):Bf(),zv(e);else return a=e.lanes=536870912,oy(t,e,i!==null?i.baseLanes|n:n,n,a)}else i!==null?(Ic(e,i.cachePool),q0(e,i),es(),e.memoizedState=null):(t!==null&&Ic(e,null),Bf(),es());return St(t,e,s,n),e.child}function bl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function oy(t,e,n,a,s){var i=hg();return i=i===null?null:{parent:ot._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&Ic(e,null),Bf(),zv(e),t!==null&&Pr(t,e,a,!0),e.childLanes=s,null}function Oc(t,e){return e=ru({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function cy(t,e,n){return hi(e,t.child,null,n),t=Oc(e,e.pendingProps),t.flags|=2,sn(e),e.memoizedState=null,t}function zS(t,e,n){var a=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(he){if(a.mode==="hidden")return t=Oc(e,a),e.lanes=536870912,bl(null,t);if(zf(e),(t=Pe)?(t=y1(t,kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Es!==null?{id:Kn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},n=Av(t),n.return=e,e.child=n,jt=e,Pe=null)):t=null,t===null)throw js(e);return e.lanes=536870912,null}return Oc(e,a)}var i=t.memoizedState;if(i!==null){var l=i.dehydrated;if(zf(e),s)if(e.flags&256)e.flags&=-257,e=cy(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(j(558));else if(ct||Pr(t,e,n,!1),s=(n&t.childLanes)!==0,ct||s){if(a=Te,a!==null&&(l=nv(a,n),l!==0&&l!==i.retryLane))throw i.retryLane=l,Ei(t,l),qt(a,t,l),Tg;uu(),e=cy(t,e,n)}else t=i.treeContext,Pe=En(l.nextSibling),jt=e,he=!0,ds=null,kn=!1,t!==null&&Rv(e,t),e=Oc(e,a),e.flags|=4096;return e}return t=Sa(t.child,{mode:a.mode,children:a.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Dc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(j(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function $f(t,e,n,a,s){return di(e),n=yg(t,e,n,a,void 0,s),a=xg(),t!==null&&!ct?(bg(t,e,s),Da(t,e,s)):(he&&a&&cg(e),e.flags|=1,St(t,e,n,s),e.child)}function uy(t,e,n,a,s,i){return di(e),e.updateQueue=null,n=Fv(e,a,n,s),Hv(t),a=xg(),t!==null&&!ct?(bg(t,e,i),Da(t,e,i)):(he&&a&&cg(e),e.flags|=1,St(t,e,n,i),e.child)}function dy(t,e,n,a,s){if(di(e),e.stateNode===null){var i=Ji,l=n.contextType;typeof l=="object"&&l!==null&&(i=Tt(l)),i=new n(a,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Qf,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=a,i.state=e.memoizedState,i.refs={},mg(e),l=n.contextType,i.context=typeof l=="object"&&l!==null?Tt(l):Ji,i.state=e.memoizedState,l=n.getDerivedStateFromProps,typeof l=="function"&&(kh(e,n,l,a),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(l=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),l!==i.state&&Qf.enqueueReplaceState(i,i.state,null),Il(e,a,i,s),Al(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),a=!0}else if(t===null){i=e.stateNode;var o=e.memoizedProps,c=mi(n,o);i.props=c;var u=i.context,f=n.contextType;l=Ji,typeof f=="object"&&f!==null&&(l=Tt(f));var d=n.getDerivedStateFromProps;f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o||u!==l)&&sy(e,i,a,l),Xa=!1;var h=e.memoizedState;i.state=h,Il(e,a,i,s),Al(),u=e.memoizedState,o||h!==u||Xa?(typeof d=="function"&&(kh(e,n,d,a),u=e.memoizedState),(c=Xa||ay(e,n,c,a,h,u,l))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=u),i.props=a,i.state=u,i.context=l,a=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{i=e.stateNode,Pf(t,e),l=e.memoizedProps,f=mi(n,l),i.props=f,d=e.pendingProps,h=i.context,u=n.contextType,c=Ji,typeof u=="object"&&u!==null&&(c=Tt(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||h!==c)&&sy(e,i,a,c),Xa=!1,h=e.memoizedState,i.state=h,Il(e,a,i,s),Al();var m=e.memoizedState;l!==d||h!==m||Xa||t!==null&&t.dependencies!==null&&Jc(t.dependencies)?(typeof o=="function"&&(kh(e,n,o,a),m=e.memoizedState),(f=Xa||ay(e,n,f,a,h,m,c)||t!==null&&t.dependencies!==null&&Jc(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=m),i.props=a,i.state=m,i.context=c,a=f):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),a=!1)}return i=a,Dc(t,e),a=(e.flags&128)!==0,i||a?(i=e.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&a?(e.child=hi(e,t.child,null,s),e.child=hi(e,null,n,s)):St(t,e,n,s),e.memoizedState=i.state,t=e.child):t=Da(t,e,s),t}function hy(t,e,n,a){return ui(),e.flags|=256,St(t,e,n,a),e.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nh(t){return{baseLanes:t,cachePool:Ov()}}function Sh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=on),t}function S_(t,e,n){var a=e.pendingProps,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),l&&(s=!0,e.flags&=-129),l=(e.flags&32)!==0,e.flags&=-33,t===null){if(he){if(s?Ja(e):es(),(t=Pe)?(t=y1(t,kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Es!==null?{id:Kn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},n=Av(t),n.return=e,e.child=n,jt=e,Pe=null)):t=null,t===null)throw js(e);return rm(t)?e.lanes=32:e.lanes=536870912,null}var o=a.children;return a=a.fallback,s?(es(),s=e.mode,o=ru({mode:"hidden",children:o},s),a=si(a,s,n,null),o.return=e,a.return=e,o.sibling=a,e.child=o,a=e.child,a.memoizedState=Nh(n),a.childLanes=Sh(t,l,n),e.memoizedState=Ch,bl(null,a)):(Ja(e),Wf(e,o))}var c=t.memoizedState;if(c!==null&&(o=c.dehydrated,o!==null)){if(i)e.flags&256?(Ja(e),e.flags&=-257,e=Eh(t,e,n)):e.memoizedState!==null?(es(),e.child=t.child,e.flags|=128,e=null):(es(),o=a.fallback,s=e.mode,a=ru({mode:"visible",children:a.children},s),o=si(o,s,n,null),o.flags|=2,a.return=e,o.return=e,a.sibling=o,e.child=a,hi(e,t.child,null,n),a=e.child,a.memoizedState=Nh(n),a.childLanes=Sh(t,l,n),e.memoizedState=Ch,e=bl(null,a));else if(Ja(e),rm(o)){if(l=o.nextSibling&&o.nextSibling.dataset,l)var u=l.dgst;l=u,a=Error(j(419)),a.stack="",a.digest=l,Jl({value:a,source:null,stack:null}),e=Eh(t,e,n)}else if(ct||Pr(t,e,n,!1),l=(n&t.childLanes)!==0,ct||l){if(l=Te,l!==null&&(a=nv(l,n),a!==0&&a!==c.retryLane))throw c.retryLane=a,Ei(t,a),qt(l,t,a),Tg;im(o)||uu(),e=Eh(t,e,n)}else im(o)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Pe=En(o.nextSibling),jt=e,he=!0,ds=null,kn=!1,t!==null&&Rv(e,t),e=Wf(e,a.children),e.flags|=4096);return e}return s?(es(),o=a.fallback,s=e.mode,c=t.child,u=c.sibling,a=Sa(c,{mode:"hidden",children:a.children}),a.subtreeFlags=c.subtreeFlags&65011712,u!==null?o=Sa(u,o):(o=si(o,s,n,null),o.flags|=2),o.return=e,a.return=e,a.sibling=o,e.child=a,bl(null,a),a=e.child,o=t.child.memoizedState,o===null?o=Nh(n):(s=o.cachePool,s!==null?(c=ot._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Ov(),o={baseLanes:o.baseLanes|n,cachePool:s}),a.memoizedState=o,a.childLanes=Sh(t,l,n),e.memoizedState=Ch,bl(t.child,a)):(Ja(e),n=t.child,t=n.sibling,n=Sa(n,{mode:"visible",children:a.children}),n.return=e,n.sibling=null,t!==null&&(l=e.deletions,l===null?(e.deletions=[t],e.flags|=16):l.push(t)),e.child=n,e.memoizedState=null,n)}function Wf(t,e){return e=ru({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function ru(t,e){return t=rn(22,t,null,e),t.lanes=0,t}function Eh(t,e,n){return hi(e,t.child,null,n),t=Wf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fy(t,e,n){t.lanes|=e;var a=t.alternate;a!==null&&(a.lanes|=e),Of(t.return,e,n)}function jh(t,e,n,a,s,i){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s,treeForkCount:i}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=n,l.tailMode=s,l.treeForkCount=i)}function E_(t,e,n){var a=e.pendingProps,s=a.revealOrder,i=a.tail;a=a.children;var l=nt.current,o=(l&2)!==0;if(o?(l=l&1|2,e.flags|=128):l&=1,Oe(nt,l),St(t,e,a,n),a=he?Zl:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,n,e);else if(t.tag===19)fy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&nu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jh(e,!1,s,n,i,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&nu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jh(e,!0,n,null,i,a);break;case"together":jh(e,!1,null,null,void 0,a);break;default:e.memoizedState=null}return e.child}function Da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(n&e.childLanes))if(t!==null){if(Pr(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Sa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ag(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Jc(t)))}function HS(t,e,n){switch(e.tag){case 3:$c(e,e.stateNode.containerInfo),Za(e,ot,t.memoizedState.cache),ui();break;case 27:case 5:_f(e);break;case 4:$c(e,e.stateNode.containerInfo);break;case 10:Za(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,zf(e),null;break;case 13:var a=e.memoizedState;if(a!==null)return a.dehydrated!==null?(Ja(e),e.flags|=128,null):n&e.child.childLanes?S_(t,e,n):(Ja(e),t=Da(t,e,n),t!==null?t.sibling:null);Ja(e);break;case 19:var s=(t.flags&128)!==0;if(a=(n&e.childLanes)!==0,a||(Pr(t,e,n,!1),a=(n&e.childLanes)!==0),s){if(a)return E_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(nt,nt.current),a)break;return null;case 22:return e.lanes=0,N_(t,e,n,e.pendingProps);case 24:Za(e,ot,t.memoizedState.cache)}return Da(t,e,n)}function j_(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ct=!0;else{if(!Ag(t,n)&&!(e.flags&128))return ct=!1,HS(t,e,n);ct=!!(t.flags&131072)}else ct=!1,he&&e.flags&1048576&&Iv(e,Zl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var a=e.pendingProps;if(t=Ks(e.elementType),e.type=t,typeof t=="function")og(t)?(a=mi(t,a),e.tag=1,e=dy(null,e,t,a,n)):(e.tag=0,e=$f(null,e,t,a,n));else{if(t!=null){var s=t.$$typeof;if(s===Ym){e.tag=11,e=ry(null,e,t,a,n);break e}else if(s===Km){e.tag=14,e=ly(null,e,t,a,n);break e}}throw e=bf(t)||t,Error(j(306,e,""))}}return e;case 0:return $f(t,e,e.type,e.pendingProps,n);case 1:return a=e.type,s=mi(a,e.pendingProps),dy(t,e,a,s,n);case 3:e:{if($c(e,e.stateNode.containerInfo),t===null)throw Error(j(387));a=e.pendingProps;var i=e.memoizedState;s=i.element,Pf(t,e),Il(e,a,null,n);var l=e.memoizedState;if(a=l.cache,Za(e,ot,a),a!==i.cache&&Df(e,[ot],n,!0),Al(),a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=hy(t,e,a,n);break e}else if(a!==s){s=wn(Error(j(424)),e),Jl(s),e=hy(t,e,a,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Pe=En(t.firstChild),jt=e,he=!0,ds=null,kn=!0,n=Pv(e,null,a,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ui(),a===s){e=Da(t,e,n);break e}St(t,e,a,n)}e=e.child}return e;case 26:return Dc(t,e),t===null?(n=My(e.type,null,e.pendingProps,null))?e.memoizedState=n:he||(n=e.type,t=e.pendingProps,a=mu(us.current).createElement(n),a[Et]=e,a[Xt]=t,At(a,n,t),vt(a),e.stateNode=a):e.memoizedState=My(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return _f(e),t===null&&he&&(a=e.stateNode=x1(e.type,e.pendingProps,us.current),jt=e,kn=!0,s=Pe,Bs(e.type)?(lm=s,Pe=En(a.firstChild)):Pe=s),St(t,e,e.pendingProps.children,n),Dc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&he&&((s=a=Pe)&&(a=yE(a,e.type,e.pendingProps,kn),a!==null?(e.stateNode=a,jt=e,Pe=En(a.firstChild),kn=!1,s=!0):s=!1),s||js(e)),_f(e),s=e.type,i=e.pendingProps,l=t!==null?t.memoizedProps:null,a=i.children,am(s,i)?a=null:l!==null&&am(s,l)&&(e.flags|=32),e.memoizedState!==null&&(s=yg(t,e,RS,null,null,n),io._currentValue=s),Dc(t,e),St(t,e,a,n),e.child;case 6:return t===null&&he&&((t=n=Pe)&&(n=xE(n,e.pendingProps,kn),n!==null?(e.stateNode=n,jt=e,Pe=null,t=!0):t=!1),t||js(e)),null;case 13:return S_(t,e,n);case 4:return $c(e,e.stateNode.containerInfo),a=e.pendingProps,t===null?e.child=hi(e,null,a,n):St(t,e,a,n),e.child;case 11:return ry(t,e,e.type,e.pendingProps,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:return a=e.pendingProps,Za(e,e.type,a.value),St(t,e,a.children,n),e.child;case 9:return s=e.type._context,a=e.pendingProps.children,di(e),s=Tt(s),a=a(s),e.flags|=1,St(t,e,a,n),e.child;case 14:return ly(t,e,e.type,e.pendingProps,n);case 15:return C_(t,e,e.type,e.pendingProps,n);case 19:return E_(t,e,n);case 31:return zS(t,e,n);case 22:return N_(t,e,n,e.pendingProps);case 24:return di(e),a=Tt(ot),t===null?(s=hg(),s===null&&(s=Te,i=dg(),s.pooledCache=i,i.refCount++,i!==null&&(s.pooledCacheLanes|=n),s=i),e.memoizedState={parent:a,cache:s},mg(e),Za(e,ot,s)):(t.lanes&n&&(Pf(t,e),Il(e,null,null,n),Al()),s=t.memoizedState,i=e.memoizedState,s.parent!==a?(s={parent:a,cache:a},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Za(e,ot,a)):(a=i.cache,Za(e,ot,a),a!==s.cache&&Df(e,[ot],n,!0))),St(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(j(156,e.tag))}function ca(t){t.flags|=4}function Th(t,e,n,a,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(Z_())t.flags|=8192;else throw ri=eu,fg}else t.flags&=-16777217}function my(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!_1(e))if(Z_())t.flags|=8192;else throw ri=eu,fg}function gc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Jb():536870912,t.lanes|=e,_r|=e)}function ll(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&65011712,a|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=a,t.childLanes=n,e}function FS(t,e,n){var a=e.pendingProps;switch(ug(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return Le(e),null;case 3:return n=e.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),Ea(ot),gr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Pi(e)?ca(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vh())),Le(e),null;case 26:var s=e.type,i=e.memoizedState;return t===null?(ca(e),i!==null?(Le(e),my(e,i)):(Le(e),Th(e,s,null,a,n))):i?i!==t.memoizedState?(ca(e),Le(e),my(e,i)):(Le(e),e.flags&=-16777217):(t=t.memoizedProps,t!==a&&ca(e),Le(e),Th(e,s,t,a,n)),null;case 27:if(Wc(e),n=us.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&ca(e);else{if(!a){if(e.stateNode===null)throw Error(j(166));return Le(e),null}t=Jn.current,Pi(e)?V0(e):(t=x1(s,a,n),e.stateNode=t,ca(e))}return Le(e),null;case 5:if(Wc(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&ca(e);else{if(!a){if(e.stateNode===null)throw Error(j(166));return Le(e),null}if(i=Jn.current,Pi(e))V0(e);else{var l=mu(us.current);switch(i){case 1:i=l.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:i=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":i=l.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":i=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":i=l.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof a.is=="string"?l.createElement("select",{is:a.is}):l.createElement("select"),a.multiple?i.multiple=!0:a.size&&(i.size=a.size);break;default:i=typeof a.is=="string"?l.createElement(s,{is:a.is}):l.createElement(s)}}i[Et]=e,i[Xt]=a;e:for(l=e.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===e)break e;for(;l.sibling===null;){if(l.return===null||l.return===e)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}e.stateNode=i;e:switch(At(i,s,a),s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ca(e)}}return Le(e),Th(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==a&&ca(e);else{if(typeof a!="string"&&e.stateNode===null)throw Error(j(166));if(t=us.current,Pi(e)){if(t=e.stateNode,n=e.memoizedProps,a=null,s=jt,s!==null)switch(s.tag){case 27:case 5:a=s.memoizedProps}t[Et]=e,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||m1(t.nodeValue,n)),t||js(e,!0)}else t=mu(t).createTextNode(a),t[Et]=e,e.stateNode=t}return Le(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(a=Pi(e),n!==null){if(t===null){if(!a)throw Error(j(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(557));t[Et]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),t=!1}else n=vh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(sn(e),e):(sn(e),null);if(e.flags&128)throw Error(j(558))}return Le(e),null;case 13:if(a=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Pi(e),a!==null&&a.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Et]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),s=!1}else s=vh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(sn(e),e):(sn(e),null)}return sn(e),e.flags&128?(e.lanes=n,e):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=e.child,s=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(s=a.alternate.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==s&&(a.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),gc(e,e.updateQueue),Le(e),null);case 4:return gr(),t===null&&Pg(e.stateNode.containerInfo),Le(e),null;case 10:return Ea(e.type),Le(e),null;case 19:if(wt(nt),a=e.memoizedState,a===null)return Le(e),null;if(s=(e.flags&128)!==0,i=a.rendering,i===null)if(s)ll(a,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=nu(t),i!==null){for(e.flags|=128,ll(a,!1),t=i.updateQueue,e.updateQueue=t,gc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Tv(n,t),n=n.sibling;return Oe(nt,nt.current&1|2),he&&ma(e,a.treeForkCount),e.child}t=t.sibling}a.tail!==null&&cn()>ou&&(e.flags|=128,s=!0,ll(a,!1),e.lanes=4194304)}else{if(!s)if(t=nu(i),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,gc(e,t),ll(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!he)return Le(e),null}else 2*cn()-a.renderingStartTime>ou&&n!==536870912&&(e.flags|=128,s=!0,ll(a,!1),e.lanes=4194304);a.isBackwards?(i.sibling=e.child,e.child=i):(t=a.last,t!==null?t.sibling=i:e.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=cn(),t.sibling=null,n=nt.current,Oe(nt,s?n&1|2:n&1),he&&ma(e,a.treeForkCount),t):(Le(e),null);case 22:case 23:return sn(e),gg(),a=e.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(e.flags|=8192):a&&(e.flags|=8192),a?n&536870912&&!(e.flags&128)&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),n=e.updateQueue,n!==null&&gc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),a!==n&&(e.flags|=2048),t!==null&&wt(ii),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ea(ot),Le(e),null;case 25:return null;case 30:return null}throw Error(j(156,e.tag))}function VS(t,e){switch(ug(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ea(ot),gr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Wc(e),null;case 31:if(e.memoizedState!==null){if(sn(e),e.alternate===null)throw Error(j(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(sn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wt(nt),null;case 4:return gr(),null;case 10:return Ea(e.type),null;case 22:case 23:return sn(e),gg(),t!==null&&wt(ii),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ea(ot),null;case 25:return null;default:return null}}function T_(t,e){switch(ug(e),e.tag){case 3:Ea(ot),gr();break;case 26:case 27:case 5:Wc(e);break;case 4:gr();break;case 31:e.memoizedState!==null&&sn(e);break;case 13:sn(e);break;case 19:wt(nt);break;case 10:Ea(e.type);break;case 22:case 23:sn(e),gg(),t!==null&&wt(ii);break;case 24:Ea(ot)}}function Uo(t,e){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var s=a.next;n=s;do{if((n.tag&t)===t){a=void 0;var i=n.create,l=n.inst;a=i(),l.destroy=a}n=n.next}while(n!==s)}}catch(o){_e(e,e.return,o)}}function Ts(t,e,n){try{var a=e.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var i=s.next;a=i;do{if((a.tag&t)===t){var l=a.inst,o=l.destroy;if(o!==void 0){l.destroy=void 0,s=e;var c=n,u=o;try{u()}catch(f){_e(s,c,f)}}}a=a.next}while(a!==i)}}catch(f){_e(e,e.return,f)}}function A_(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Bv(e,n)}catch(a){_e(t,t.return,a)}}}function I_(t,e,n){n.props=mi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){_e(t,e,a)}}function Ml(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(s){_e(t,e,s)}}function Xn(t,e){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(s){_e(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){_e(t,e,s)}else n.current=null}function R_(t){var e=t.type,n=t.memoizedProps,a=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){_e(t,t.return,s)}}function Ah(t,e,n){try{var a=t.stateNode;dE(a,t.type,n,e),a[Xt]=e}catch(s){_e(t,t.return,s)}}function M_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Bs(t.type)||t.tag===4}function Ih(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Bs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yf(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_a));else if(a!==4&&(a===27&&Bs(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Yf(t,e,n),t=t.sibling;t!==null;)Yf(t,e,n),t=t.sibling}function lu(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(a!==4&&(a===27&&Bs(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(lu(t,e,n),t=t.sibling;t!==null;)lu(t,e,n),t=t.sibling}function O_(t){var e=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);At(e,a,n),e[Et]=t,e[Xt]=n}catch(i){_e(t,t.return,i)}}var ga=!1,lt=!1,Rh=!1,gy=typeof WeakSet=="function"?WeakSet:Set,xt=null;function QS(t,e){if(t=t.containerInfo,tm=xu,t=_v(t),ig(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(o=l+s),d!==i||a!==0&&d.nodeType!==3||(c=l+a),d.nodeType===3&&(l+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++u===s&&(o=l),h===i&&++f===a&&(c=l),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nm={focusedElem:t,selectionRange:n},xu=!1,xt=e;xt!==null;)if(e=xt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xt=t;else for(;xt!==null;){switch(e=xt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,s=i.memoizedProps,i=i.memoizedState,a=n.stateNode;try{var v=mi(n.type,s);t=a.getSnapshotBeforeUpdate(v,i),a.__reactInternalSnapshotBeforeUpdate=t}catch(b){_e(n,n.return,b)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)sm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(j(163))}if(t=e.sibling,t!==null){t.return=e.return,xt=t;break}xt=e.return}}function D_(t,e,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:da(t,n),a&4&&Uo(5,n);break;case 1:if(da(t,n),a&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(l){_e(n,n.return,l)}else{var s=mi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(l){_e(n,n.return,l)}}a&64&&A_(n),a&512&&Ml(n,n.return);break;case 3:if(da(t,n),a&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Bv(t,e)}catch(l){_e(n,n.return,l)}}break;case 27:e===null&&a&4&&O_(n);case 26:case 5:da(t,n),e===null&&a&4&&R_(n),a&512&&Ml(n,n.return);break;case 12:da(t,n);break;case 31:da(t,n),a&4&&U_(t,n);break;case 13:da(t,n),a&4&&B_(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=JS.bind(null,n),bE(t,n))));break;case 22:if(a=n.memoizedState!==null||ga,!a){e=e!==null&&e.memoizedState!==null||lt,s=ga;var i=lt;ga=a,(lt=e)&&!i?fa(t,n,(n.subtreeFlags&8772)!==0):da(t,n),ga=s,lt=i}break;case 30:break;default:da(t,n)}}function L_(t){var e=t.alternate;e!==null&&(t.alternate=null,L_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Jm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,Wt=!1;function ua(t,e,n){for(n=n.child;n!==null;)P_(t,e,n),n=n.sibling}function P_(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Io,n)}catch{}switch(n.tag){case 26:lt||Xn(n,e),ua(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:lt||Xn(n,e);var a=Qe,s=Wt;Bs(n.type)&&(Qe=n.stateNode,Wt=!1),ua(t,e,n),Pl(n.stateNode),Qe=a,Wt=s;break;case 5:lt||Xn(n,e);case 6:if(a=Qe,s=Wt,Qe=null,ua(t,e,n),Qe=a,Wt=s,Qe!==null)if(Wt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(n.stateNode)}catch(i){_e(n,e,i)}else try{Qe.removeChild(n.stateNode)}catch(i){_e(n,e,i)}break;case 18:Qe!==null&&(Wt?(t=Qe,jy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Nr(t)):jy(Qe,n.stateNode));break;case 4:a=Qe,s=Wt,Qe=n.stateNode.containerInfo,Wt=!0,ua(t,e,n),Qe=a,Wt=s;break;case 0:case 11:case 14:case 15:Ts(2,n,e),lt||Ts(4,n,e),ua(t,e,n);break;case 1:lt||(Xn(n,e),a=n.stateNode,typeof a.componentWillUnmount=="function"&&I_(n,e,a)),ua(t,e,n);break;case 21:ua(t,e,n);break;case 22:lt=(a=lt)||n.memoizedState!==null,ua(t,e,n),lt=a;break;default:ua(t,e,n)}}function U_(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Nr(t)}catch(n){_e(e,e.return,n)}}}function B_(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nr(t)}catch(n){_e(e,e.return,n)}}function GS(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new gy),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new gy),e;default:throw Error(j(435,t.tag))}}function pc(t,e){var n=GS(t);e.forEach(function(a){if(!n.has(a)){n.add(a);var s=eE.bind(null,t,a);a.then(s,s)}})}function Gt(t,e){var n=e.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a],i=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 27:if(Bs(o.type)){Qe=o.stateNode,Wt=!1;break e}break;case 5:Qe=o.stateNode,Wt=!1;break e;case 3:case 4:Qe=o.stateNode.containerInfo,Wt=!0;break e}o=o.return}if(Qe===null)throw Error(j(160));P_(i,l,s),Qe=null,Wt=!1,i=s.alternate,i!==null&&(i.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)z_(e,t),e=e.sibling}var Ln=null;function z_(t,e){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gt(e,t),$t(t),a&4&&(Ts(3,t,t.return),Uo(3,t),Ts(5,t,t.return));break;case 1:Gt(e,t),$t(t),a&512&&(lt||n===null||Xn(n,n.return)),a&64&&ga&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var s=Ln;if(Gt(e,t),$t(t),a&512&&(lt||n===null||Xn(n,n.return)),a&4){var i=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){e:{a=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":i=s.getElementsByTagName("title")[0],(!i||i[Oo]||i[Et]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=s.createElement(a),s.head.insertBefore(i,s.querySelector("head > title"))),At(i,a,n),i[Et]=t,vt(i),a=i;break e;case"link":var l=Dy("link","href",s).get(a+(n.href||""));if(l){for(var o=0;o<l.length;o++)if(i=l[o],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){l.splice(o,1);break t}}i=s.createElement(a),At(i,a,n),s.head.appendChild(i);break;case"meta":if(l=Dy("meta","content",s).get(a+(n.content||""))){for(o=0;o<l.length;o++)if(i=l[o],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){l.splice(o,1);break t}}i=s.createElement(a),At(i,a,n),s.head.appendChild(i);break;default:throw Error(j(468,a))}i[Et]=t,vt(i),a=i}t.stateNode=a}else Ly(s,t.type,t.stateNode);else t.stateNode=Oy(s,a,t.memoizedProps);else i!==a?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,a===null?Ly(s,t.type,t.stateNode):Oy(s,a,t.memoizedProps)):a===null&&t.stateNode!==null&&Ah(t,t.memoizedProps,n.memoizedProps)}break;case 27:Gt(e,t),$t(t),a&512&&(lt||n===null||Xn(n,n.return)),n!==null&&a&4&&Ah(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Gt(e,t),$t(t),a&512&&(lt||n===null||Xn(n,n.return)),t.flags&32){s=t.stateNode;try{yr(s,"")}catch(v){_e(t,t.return,v)}}a&4&&t.stateNode!=null&&(s=t.memoizedProps,Ah(t,s,n!==null?n.memoizedProps:s)),a&1024&&(Rh=!0);break;case 6:if(Gt(e,t),$t(t),a&4){if(t.stateNode===null)throw Error(j(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(v){_e(t,t.return,v)}}break;case 3:if(Uc=null,s=Ln,Ln=gu(e.containerInfo),Gt(e,t),Ln=s,$t(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Nr(e.containerInfo)}catch(v){_e(t,t.return,v)}Rh&&(Rh=!1,H_(t));break;case 4:a=Ln,Ln=gu(t.stateNode.containerInfo),Gt(e,t),$t(t),Ln=a;break;case 12:Gt(e,t),$t(t);break;case 31:Gt(e,t),$t(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,pc(t,a)));break;case 13:Gt(e,t),$t(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(hd=cn()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,pc(t,a)));break;case 22:s=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=ga,f=lt;if(ga=u||s,lt=f||c,Gt(e,t),lt=f,ga=u,$t(t),a&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||c||ga||lt||qs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(i=c.stateNode,s)l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none";else{o=c.stateNode;var d=c.memoizedProps.style,h=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(v){_e(c,c.return,v)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(v){_e(c,c.return,v)}}}else if(e.tag===18){if(n===null){c=e;try{var m=c.stateNode;s?Ty(m,!0):Ty(c.stateNode,!1)}catch(v){_e(c,c.return,v)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,pc(t,n))));break;case 19:Gt(e,t),$t(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,pc(t,a)));break;case 30:break;case 21:break;default:Gt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{for(var n,a=t.return;a!==null;){if(M_(a)){n=a;break}a=a.return}if(n==null)throw Error(j(160));switch(n.tag){case 27:var s=n.stateNode,i=Ih(t);lu(t,i,s);break;case 5:var l=n.stateNode;n.flags&32&&(yr(l,""),n.flags&=-33);var o=Ih(t);lu(t,o,l);break;case 3:case 4:var c=n.stateNode.containerInfo,u=Ih(t);Yf(t,u,c);break;default:throw Error(j(161))}}catch(f){_e(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;H_(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function da(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)D_(t,e.alternate,e),e=e.sibling}function qs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ts(4,e,e.return),qs(e);break;case 1:Xn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&I_(e,e.return,n),qs(e);break;case 27:Pl(e.stateNode);case 26:case 5:Xn(e,e.return),qs(e);break;case 22:e.memoizedState===null&&qs(e);break;case 30:qs(e);break;default:qs(e)}t=t.sibling}}function fa(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var a=e.alternate,s=t,i=e,l=i.flags;switch(i.tag){case 0:case 11:case 15:fa(s,i,n),Uo(4,i);break;case 1:if(fa(s,i,n),a=i,s=a.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){_e(a,a.return,u)}if(a=i,s=a.updateQueue,s!==null){var o=a.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)Uv(c[s],o)}catch(u){_e(a,a.return,u)}}n&&l&64&&A_(i),Ml(i,i.return);break;case 27:O_(i);case 26:case 5:fa(s,i,n),n&&a===null&&l&4&&R_(i),Ml(i,i.return);break;case 12:fa(s,i,n);break;case 31:fa(s,i,n),n&&l&4&&U_(s,i);break;case 13:fa(s,i,n),n&&l&4&&B_(s,i);break;case 22:i.memoizedState===null&&fa(s,i,n),Ml(i,i.return);break;case 30:break;default:fa(s,i,n)}e=e.sibling}}function Ig(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Lo(n))}function Rg(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Lo(t))}function On(t,e,n,a){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)F_(t,e,n,a),e=e.sibling}function F_(t,e,n,a){var s=e.flags;switch(e.tag){case 0:case 11:case 15:On(t,e,n,a),s&2048&&Uo(9,e);break;case 1:On(t,e,n,a);break;case 3:On(t,e,n,a),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Lo(t)));break;case 12:if(s&2048){On(t,e,n,a),t=e.stateNode;try{var i=e.memoizedProps,l=i.id,o=i.onPostCommit;typeof o=="function"&&o(l,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){_e(e,e.return,c)}}else On(t,e,n,a);break;case 31:On(t,e,n,a);break;case 13:On(t,e,n,a);break;case 23:break;case 22:i=e.stateNode,l=e.alternate,e.memoizedState!==null?i._visibility&2?On(t,e,n,a):Ol(t,e):i._visibility&2?On(t,e,n,a):(i._visibility|=2,Vi(t,e,n,a,(e.subtreeFlags&10256)!==0||!1)),s&2048&&Ig(l,e);break;case 24:On(t,e,n,a),s&2048&&Rg(e.alternate,e);break;default:On(t,e,n,a)}}function Vi(t,e,n,a,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,l=e,o=n,c=a,u=l.flags;switch(l.tag){case 0:case 11:case 15:Vi(i,l,o,c,s),Uo(8,l);break;case 23:break;case 22:var f=l.stateNode;l.memoizedState!==null?f._visibility&2?Vi(i,l,o,c,s):Ol(i,l):(f._visibility|=2,Vi(i,l,o,c,s)),s&&u&2048&&Ig(l.alternate,l);break;case 24:Vi(i,l,o,c,s),s&&u&2048&&Rg(l.alternate,l);break;default:Vi(i,l,o,c,s)}e=e.sibling}}function Ol(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,a=e,s=a.flags;switch(a.tag){case 22:Ol(n,a),s&2048&&Ig(a.alternate,a);break;case 24:Ol(n,a),s&2048&&Rg(a.alternate,a);break;default:Ol(n,a)}e=e.sibling}}var vl=8192;function Ui(t,e,n){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)V_(t,e,n),t=t.sibling}function V_(t,e,n){switch(t.tag){case 26:Ui(t,e,n),t.flags&vl&&t.memoizedState!==null&&IE(n,Ln,t.memoizedState,t.memoizedProps);break;case 5:Ui(t,e,n);break;case 3:case 4:var a=Ln;Ln=gu(t.stateNode.containerInfo),Ui(t,e,n),Ln=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=vl,vl=16777216,Ui(t,e,n),vl=a):Ui(t,e,n));break;default:Ui(t,e,n)}}function Q_(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function ol(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];xt=a,$_(a,t)}Q_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)G_(t),t=t.sibling}function G_(t){switch(t.tag){case 0:case 11:case 15:ol(t),t.flags&2048&&Ts(9,t,t.return);break;case 3:ol(t);break;case 12:ol(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Lc(t)):ol(t);break;default:ol(t)}}function Lc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];xt=a,$_(a,t)}Q_(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ts(8,e,e.return),Lc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Lc(e));break;default:Lc(e)}t=t.sibling}}function $_(t,e){for(;xt!==null;){var n=xt;switch(n.tag){case 0:case 11:case 15:Ts(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Lo(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,xt=a;else e:for(n=t;xt!==null;){a=xt;var s=a.sibling,i=a.return;if(L_(a),a===n){xt=null;break e}if(s!==null){s.return=i,xt=s;break e}xt=i}}}var $S={getCacheForType:function(t){var e=Tt(ot),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Tt(ot).controller.signal}},WS=typeof WeakMap=="function"?WeakMap:Map,pe=0,Te=null,ce=null,de=0,be=0,an=null,ss=!1,Br=!1,Mg=!1,La=0,Je=0,As=0,li=0,Og=0,on=0,_r=0,Dl=null,Yt=null,Kf=!1,hd=0,W_=0,ou=1/0,cu=null,ms=null,ft=0,gs=null,wr=null,ja=0,qf=0,Xf=null,Y_=null,Ll=0,Zf=null;function hn(){return pe&2&&de!==0?de&-de:X.T!==null?Lg():av()}function K_(){if(on===0)if(!(de&536870912)||he){var t=oc;oc<<=1,!(oc&3932160)&&(oc=262144),on=t}else on=536870912;return t=gn.current,t!==null&&(t.flags|=32),on}function qt(t,e,n){(t===Te&&(be===2||be===9)||t.cancelPendingCommit!==null)&&(kr(t,0),is(t,de,on,!1)),Mo(t,n),(!(pe&2)||t!==Te)&&(t===Te&&(!(pe&2)&&(li|=n),Je===4&&is(t,de,on,!1)),ra(t))}function q_(t,e,n){if(pe&6)throw Error(j(327));var a=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Ro(t,e),s=a?qS(t,e):Mh(t,e,!0),i=a;do{if(s===0){Br&&!a&&is(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!YS(n)){s=Mh(t,e,!1),i=!1;continue}if(s===2){if(i=e,t.errorRecoveryDisabledLanes&i)var l=0;else l=t.pendingLanes&-536870913,l=l!==0?l:l&536870912?536870912:0;if(l!==0){e=l;e:{var o=t;s=Dl;var c=o.current.memoizedState.isDehydrated;if(c&&(kr(o,l).flags|=256),l=Mh(o,l,!1),l!==2){if(Mg&&!c){o.errorRecoveryDisabledLanes|=i,li|=i,s=4;break e}i=Yt,Yt=s,i!==null&&(Yt===null?Yt=i:Yt.push.apply(Yt,i))}s=l}if(i=!1,s!==2)continue}}if(s===1){kr(t,0),is(t,e,0,!0);break}e:{switch(a=t,i=s,i){case 0:case 1:throw Error(j(345));case 4:if((e&4194048)!==e)break;case 6:is(a,e,on,!ss);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(j(329))}if((e&62914560)===e&&(s=hd+300-cn(),10<s)){if(is(a,e,on,!ss),td(a,0,!0)!==0)break e;ja=e,a.timeoutHandle=p1(py.bind(null,a,n,Yt,cu,Kf,e,on,li,_r,ss,i,"Throttled",-0,0),s);break e}py(a,n,Yt,cu,Kf,e,on,li,_r,ss,i,null,-0,0)}}break}while(!0);ra(t)}function py(t,e,n,a,s,i,l,o,c,u,f,d,h,m){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_a},V_(e,i,d);var v=(i&62914560)===i?hd-cn():(i&4194048)===i?W_-cn():0;if(v=RE(d,v),v!==null){ja=i,t.cancelPendingCommit=v(xy.bind(null,t,e,i,n,a,s,l,o,c,f,d,null,h,m)),is(t,i,l,!u);return}}xy(t,e,i,n,a,s,l,o,c)}function YS(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var s=n[a],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e,n,a){e&=~Og,e&=~li,t.suspendedLanes|=e,t.pingedLanes&=~e,a&&(t.warmLanes|=e),a=t.expirationTimes;for(var s=e;0<s;){var i=31-dn(s),l=1<<i;a[i]=-1,s&=~l}n!==0&&ev(t,n,e)}function fd(){return pe&6?!0:(Bo(0),!1)}function Dg(){if(ce!==null){if(be===0)var t=ce.return;else t=ce,wa=ji=null,vg(t),lr=null,eo=0,t=ce;for(;t!==null;)T_(t.alternate,t),t=t.return;ce=null}}function kr(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,mE(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ja=0,Dg(),Te=t,ce=n=Sa(t.current,null),de=e,be=0,an=null,ss=!1,Br=Ro(t,e),Mg=!1,_r=on=Og=li=As=Je=0,Yt=Dl=null,Kf=!1,e&8&&(e|=e&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=e;0<a;){var s=31-dn(a),i=1<<s;e|=t[s],a&=~i}return La=e,id(),n}function X_(t,e){ne=null,X.H=no,e===Ur||e===ld?(e=Y0(),be=3):e===fg?(e=Y0(),be=4):be=e===Tg?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,an=e,ce===null&&(Je=1,iu(t,wn(e,t.current)))}function Z_(){var t=gn.current;return t===null?!0:(de&4194048)===de?Sn===null:(de&62914560)===de||de&536870912?t===Sn:!1}function J_(){var t=X.H;return X.H=no,t===null?no:t}function e1(){var t=X.A;return X.A=$S,t}function uu(){Je=4,ss||(de&4194048)!==de&&gn.current!==null||(Br=!0),!(As&134217727)&&!(li&134217727)||Te===null||is(Te,de,on,!1)}function Mh(t,e,n){var a=pe;pe|=2;var s=J_(),i=e1();(Te!==t||de!==e)&&(cu=null,kr(t,e)),e=!1;var l=Je;e:do try{if(be!==0&&ce!==null){var o=ce,c=an;switch(be){case 8:Dg(),l=6;break e;case 3:case 2:case 9:case 6:gn.current===null&&(e=!0);var u=be;if(be=0,an=null,nr(t,o,c,u),n&&Br){l=0;break e}break;default:u=be,be=0,an=null,nr(t,o,c,u)}}KS(),l=Je;break}catch(f){X_(t,f)}while(!0);return e&&t.shellSuspendCounter++,wa=ji=null,pe=a,X.H=s,X.A=i,ce===null&&(Te=null,de=0,id()),l}function KS(){for(;ce!==null;)t1(ce)}function qS(t,e){var n=pe;pe|=2;var a=J_(),s=e1();Te!==t||de!==e?(cu=null,ou=cn()+500,kr(t,e)):Br=Ro(t,e);e:do try{if(be!==0&&ce!==null){e=ce;var i=an;t:switch(be){case 1:be=0,an=null,nr(t,e,i,1);break;case 2:case 9:if(W0(i)){be=0,an=null,yy(e);break}e=function(){be!==2&&be!==9||Te!==t||(be=7),ra(t)},i.then(e,e);break e;case 3:be=7;break e;case 4:be=5;break e;case 7:W0(i)?(be=0,an=null,yy(e)):(be=0,an=null,nr(t,e,i,7));break;case 5:var l=null;switch(ce.tag){case 26:l=ce.memoizedState;case 5:case 27:var o=ce;if(l?_1(l):o.stateNode.complete){be=0,an=null;var c=o.sibling;if(c!==null)ce=c;else{var u=o.return;u!==null?(ce=u,md(u)):ce=null}break t}}be=0,an=null,nr(t,e,i,5);break;case 6:be=0,an=null,nr(t,e,i,6);break;case 8:Dg(),Je=6;break e;default:throw Error(j(462))}}XS();break}catch(f){X_(t,f)}while(!0);return wa=ji=null,X.H=a,X.A=s,pe=n,ce!==null?0:(Te=null,de=0,id(),Je)}function XS(){for(;ce!==null&&!vN();)t1(ce)}function t1(t){var e=j_(t.alternate,t,La);t.memoizedProps=t.pendingProps,e===null?md(t):ce=e}function yy(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=uy(n,e,e.pendingProps,e.type,void 0,de);break;case 11:e=uy(n,e,e.pendingProps,e.type.render,e.ref,de);break;case 5:vg(e);default:T_(n,e),e=ce=Tv(e,La),e=j_(n,e,La)}t.memoizedProps=t.pendingProps,e===null?md(t):ce=e}function nr(t,e,n,a){wa=ji=null,vg(e),lr=null,eo=0;var s=e.return;try{if(BS(t,s,e,n,de)){Je=1,iu(t,wn(n,t.current)),ce=null;return}}catch(i){if(s!==null)throw ce=s,i;Je=1,iu(t,wn(n,t.current)),ce=null;return}e.flags&32768?(he||a===1?t=!0:Br||de&536870912?t=!1:(ss=t=!0,(a===2||a===9||a===3||a===6)&&(a=gn.current,a!==null&&a.tag===13&&(a.flags|=16384))),n1(e,t)):md(e)}function md(t){var e=t;do{if(e.flags&32768){n1(e,ss);return}t=e.return;var n=FS(e.alternate,e,La);if(n!==null){ce=n;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);Je===0&&(Je=5)}function n1(t,e){do{var n=VS(t.alternate,t);if(n!==null){n.flags&=32767,ce=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ce=t;return}ce=t=n}while(t!==null);Je=6,ce=null}function xy(t,e,n,a,s,i,l,o,c){t.cancelPendingCommit=null;do gd();while(ft!==0);if(pe&6)throw Error(j(327));if(e!==null){if(e===t.current)throw Error(j(177));if(i=e.lanes|e.childLanes,i|=rg,AN(t,n,i,l,o,c),t===Te&&(ce=Te=null,de=0),wr=e,gs=t,ja=n,qf=i,Xf=s,Y_=a,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,tE(Yc,function(){return l1(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(e.flags&13878)!==0,e.subtreeFlags&13878||a){a=X.T,X.T=null,s=ye.p,ye.p=2,l=pe,pe|=4;try{QS(t,e,n)}finally{pe=l,ye.p=s,X.T=a}}ft=1,a1(),s1(),i1()}}function a1(){if(ft===1){ft=0;var t=gs,e=wr,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=X.T,X.T=null;var a=ye.p;ye.p=2;var s=pe;pe|=4;try{z_(e,t);var i=nm,l=_v(t.containerInfo),o=i.focusedElem,c=i.selectionRange;if(l!==o&&o&&o.ownerDocument&&vv(o.ownerDocument.documentElement,o)){if(c!==null&&ig(o)){var u=c.start,f=c.end;if(f===void 0&&(f=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(f,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),v=o.textContent.length,b=Math.min(c.start,v),w=c.end===void 0?b:Math.min(c.end,v);!m.extend&&b>w&&(l=w,w=b,b=l);var y=z0(o,b),g=z0(o,w);if(y&&g&&(m.rangeCount!==1||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var x=d.createRange();x.setStart(y.node,y.offset),m.removeAllRanges(),b>w?(m.addRange(x),m.extend(g.node,g.offset)):(x.setEnd(g.node,g.offset),m.addRange(x))}}}}for(d=[],m=o;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var _=d[o];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}xu=!!tm,nm=tm=null}finally{pe=s,ye.p=a,X.T=n}}t.current=e,ft=2}}function s1(){if(ft===2){ft=0;var t=gs,e=wr,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=X.T,X.T=null;var a=ye.p;ye.p=2;var s=pe;pe|=4;try{D_(t,e.alternate,e)}finally{pe=s,ye.p=a,X.T=n}}ft=3}}function i1(){if(ft===4||ft===3){ft=0,_N();var t=gs,e=wr,n=ja,a=Y_;e.subtreeFlags&10256||e.flags&10256?ft=5:(ft=0,wr=gs=null,r1(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(ms=null),Zm(n),e=e.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Io,e,void 0,(e.current.flags&128)===128)}catch{}if(a!==null){e=X.T,s=ye.p,ye.p=2,X.T=null;try{for(var i=t.onRecoverableError,l=0;l<a.length;l++){var o=a[l];i(o.value,{componentStack:o.stack})}}finally{X.T=e,ye.p=s}}ja&3&&gd(),ra(t),s=t.pendingLanes,n&261930&&s&42?t===Zf?Ll++:(Ll=0,Zf=t):Ll=0,Bo(0)}}function r1(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Lo(e)))}function gd(){return a1(),s1(),i1(),l1()}function l1(){if(ft!==5)return!1;var t=gs,e=qf;qf=0;var n=Zm(ja),a=X.T,s=ye.p;try{ye.p=32>n?32:n,X.T=null,n=Xf,Xf=null;var i=gs,l=ja;if(ft=0,wr=gs=null,ja=0,pe&6)throw Error(j(331));var o=pe;if(pe|=4,G_(i.current),F_(i,i.current,l,n),pe=o,Bo(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Io,i)}catch{}return!0}finally{ye.p=s,X.T=a,r1(t,e)}}function by(t,e,n){e=wn(n,e),e=Gf(t.stateNode,e,2),t=fs(t,e,2),t!==null&&(Mo(t,2),ra(t))}function _e(t,e,n){if(t.tag===3)by(t,t,n);else for(;e!==null;){if(e.tag===3){by(e,t,n);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ms===null||!ms.has(a))){t=wn(n,t),n=w_(2),a=fs(e,n,2),a!==null&&(k_(n,a,e,t),Mo(a,2),ra(a));break}}e=e.return}}function Oh(t,e,n){var a=t.pingCache;if(a===null){a=t.pingCache=new WS;var s=new Set;a.set(e,s)}else s=a.get(e),s===void 0&&(s=new Set,a.set(e,s));s.has(n)||(Mg=!0,s.add(n),t=ZS.bind(null,t,e,n),e.then(t,t))}function ZS(t,e,n){var a=t.pingCache;a!==null&&a.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Te===t&&(de&n)===n&&(Je===4||Je===3&&(de&62914560)===de&&300>cn()-hd?!(pe&2)&&kr(t,0):Og|=n,_r===de&&(_r=0)),ra(t)}function o1(t,e){e===0&&(e=Jb()),t=Ei(t,e),t!==null&&(Mo(t,e),ra(t))}function JS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o1(t,n)}function eE(t,e){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(j(314))}a!==null&&a.delete(e),o1(t,n)}function tE(t,e){return qm(t,e)}var du=null,Qi=null,Jf=!1,hu=!1,Dh=!1,rs=0;function ra(t){t!==Qi&&t.next===null&&(Qi===null?du=Qi=t:Qi=Qi.next=t),hu=!0,Jf||(Jf=!0,aE())}function Bo(t,e){if(!Dh&&hu){Dh=!0;do for(var n=!1,a=du;a!==null;){if(t!==0){var s=a.pendingLanes;if(s===0)var i=0;else{var l=a.suspendedLanes,o=a.pingedLanes;i=(1<<31-dn(42|t)+1)-1,i&=s&~(l&~o),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,vy(a,i))}else i=de,i=td(a,a===Te?i:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(i&3)||Ro(a,i)||(n=!0,vy(a,i));a=a.next}while(n);Dh=!1}}function nE(){c1()}function c1(){hu=Jf=!1;var t=0;rs!==0&&fE()&&(t=rs);for(var e=cn(),n=null,a=du;a!==null;){var s=a.next,i=u1(a,e);i===0?(a.next=null,n===null?du=s:n.next=s,s===null&&(Qi=n)):(n=a,(t!==0||i&3)&&(hu=!0)),a=s}ft!==0&&ft!==5||Bo(t),rs!==0&&(rs=0)}function u1(t,e){for(var n=t.suspendedLanes,a=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var l=31-dn(i),o=1<<l,c=s[l];c===-1?(!(o&n)||o&a)&&(s[l]=TN(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}if(e=Te,n=de,n=td(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===e&&(be===2||be===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&ch(a),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ro(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(a!==null&&ch(a),Zm(n)){case 2:case 8:n=Xb;break;case 32:n=Yc;break;case 268435456:n=Zb;break;default:n=Yc}return a=d1.bind(null,t),n=qm(n,a),t.callbackPriority=e,t.callbackNode=n,e}return a!==null&&a!==null&&ch(a),t.callbackPriority=2,t.callbackNode=null,2}function d1(t,e){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(gd()&&t.callbackNode!==n)return null;var a=de;return a=td(t,t===Te?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(q_(t,a,e),u1(t,cn()),t.callbackNode!=null&&t.callbackNode===n?d1.bind(null,t):null)}function vy(t,e){if(gd())return null;q_(t,e,!0)}function aE(){gE(function(){pe&6?qm(qb,nE):c1()})}function Lg(){if(rs===0){var t=xr;t===0&&(t=lc,lc<<=1,!(lc&261888)&&(lc=256)),rs=t}return rs}function _y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ec(""+t)}function wy(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function sE(t,e,n,a,s){if(e==="submit"&&n&&n.stateNode===s){var i=_y((s[Xt]||null).action),l=a.submitter;l&&(e=(e=l[Xt]||null)?_y(e.formAction):l.getAttribute("formAction"),e!==null&&(i=e,l=null));var o=new nd("action","action",null,a,s);t.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(rs!==0){var c=l?wy(s,l):new FormData(s);Vf(n,{pending:!0,data:c,method:s.method,action:i},null,c)}}else typeof i=="function"&&(o.preventDefault(),c=l?wy(s,l):new FormData(s),Vf(n,{pending:!0,data:c,method:s.method,action:i},i,c))},currentTarget:s}]})}}for(var Lh=0;Lh<If.length;Lh++){var Ph=If[Lh],iE=Ph.toLowerCase(),rE=Ph[0].toUpperCase()+Ph.slice(1);Fn(iE,"on"+rE)}Fn(kv,"onAnimationEnd");Fn(Cv,"onAnimationIteration");Fn(Nv,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(wS,"onTransitionRun");Fn(kS,"onTransitionStart");Fn(CS,"onTransitionCancel");Fn(Sv,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ao));function h1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],s=a.event;a=a.listeners;e:{var i=void 0;if(e)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=u;try{i(s)}catch(f){qc(f)}s.currentTarget=null,i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=u;try{i(s)}catch(f){qc(f)}s.currentTarget=null,i=c}}}}function oe(t,e){var n=e[kf];n===void 0&&(n=e[kf]=new Set);var a=t+"__bubble";n.has(a)||(f1(e,t,2,!1),n.add(a))}function Uh(t,e,n){var a=0;e&&(a|=4),f1(n,t,a,e)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Pg(t){if(!t[yc]){t[yc]=!0,sv.forEach(function(n){n!=="selectionchange"&&(lE.has(n)||Uh(n,!1,t),Uh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yc]||(e[yc]=!0,Uh("selectionchange",!1,e))}}function f1(t,e,n,a){switch(S1(e)){case 2:var s=DE;break;case 8:s=LE;break;default:s=Hg}n=s.bind(null,e,n,t),s=void 0,!jf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),a?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Bh(t,e,n,a,s){var i=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===s)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&l.stateNode.containerInfo===s)return;l=l.return}for(;o!==null;){if(l=Wi(o),l===null)return;if(c=l.tag,c===5||c===6||c===26||c===27){a=i=l;continue e}o=o.parentNode}}a=a.return}hv(function(){var u=i,f=tg(n),d=[];e:{var h=Ev.get(t);if(h!==void 0){var m=nd,v=t;switch(t){case"keypress":if(Tc(n)===0)break e;case"keydown":case"keyup":m=eS;break;case"focusin":v="focus",m=mh;break;case"focusout":v="blur",m=mh;break;case"beforeblur":case"afterblur":m=mh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=FN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=aS;break;case kv:case Cv:case Nv:m=GN;break;case Sv:m=iS;break;case"scroll":case"scrollend":m=zN;break;case"wheel":m=lS;break;case"copy":case"cut":case"paste":m=WN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=R0;break;case"toggle":case"beforetoggle":m=cS}var b=(e&4)!==0,w=!b&&(t==="scroll"||t==="scrollend"),y=b?h!==null?h+"Capture":null:h;b=[];for(var g=u,x;g!==null;){var _=g;if(x=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||x===null||y===null||(_=Kl(g,y),_!=null&&b.push(so(g,_,x))),w)break;g=g.return}0<b.length&&(h=new m(h,v,null,n,f),d.push({event:h,listeners:b}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Ef&&(v=n.relatedTarget||n.fromElement)&&(Wi(v)||v[Dr]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Wi(v):null,v!==null&&(w=Ao(v),b=v.tag,v!==w||b!==5&&b!==27&&b!==6)&&(v=null)):(m=null,v=u),m!==v)){if(b=A0,_="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(b=R0,_="onPointerLeave",y="onPointerEnter",g="pointer"),w=m==null?h:xl(m),x=v==null?h:xl(v),h=new b(_,g+"leave",m,n,f),h.target=w,h.relatedTarget=x,_=null,Wi(f)===u&&(b=new b(y,g+"enter",v,n,f),b.target=x,b.relatedTarget=w,_=b),w=_,m&&v)t:{for(b=oE,y=m,g=v,x=0,_=y;_;_=b(_))x++;_=0;for(var k=g;k;k=b(k))_++;for(;0<x-_;)y=b(y),x--;for(;0<_-x;)g=b(g),_--;for(;x--;){if(y===g||g!==null&&y===g.alternate){b=y;break t}y=b(y),g=b(g)}b=null}else b=null;m!==null&&ky(d,h,m,b,!1),v!==null&&w!==null&&ky(d,w,v,b,!0)}}e:{if(h=u?xl(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var E=L0;else if(D0(h))if(xv)E=bS;else{E=yS;var C=pS}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?u&&eg(u.elementType)&&(E=L0):E=xS;if(E&&(E=E(t,u))){yv(d,E,n,f);break e}C&&C(t,h,u),t==="focusout"&&u&&h.type==="number"&&u.memoizedProps.value!=null&&Sf(h,"number",h.value)}switch(C=u?xl(u):window,t){case"focusin":(D0(C)||C.contentEditable==="true")&&(qi=C,Tf=u,El=null);break;case"focusout":El=Tf=qi=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,H0(d,n,f);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":H0(d,n,f)}var S;if(sg)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ki?gv(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(mv&&n.locale!=="ko"&&(Ki||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ki&&(S=fv()):(as=f,ng="value"in as?as.value:as.textContent,Ki=!0)),C=fu(u,T),0<C.length&&(T=new I0(T,t,null,n,f),d.push({event:T,listeners:C}),S?T.data=S:(S=pv(n),S!==null&&(T.data=S)))),(S=dS?hS(t,n):fS(t,n))&&(T=fu(u,"onBeforeInput"),0<T.length&&(C=new I0("onBeforeInput","beforeinput",null,n,f),d.push({event:C,listeners:T}),C.data=S)),sE(d,t,u,n,f)}h1(d,e)})}function so(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fu(t,e){for(var n=e+"Capture",a=[];t!==null;){var s=t,i=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||i===null||(s=Kl(t,n),s!=null&&a.unshift(so(t,s,i)),s=Kl(t,e),s!=null&&a.push(so(t,s,i))),t.tag===3)return a;t=t.return}return[]}function oE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ky(t,e,n,a,s){for(var i=e._reactName,l=[];n!==null&&n!==a;){var o=n,c=o.alternate,u=o.stateNode;if(o=o.tag,c!==null&&c===a)break;o!==5&&o!==26&&o!==27||u===null||(c=u,s?(u=Kl(n,i),u!=null&&l.unshift(so(n,u,c))):s||(u=Kl(n,i),u!=null&&l.push(so(n,u,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var cE=/\r\n?/g,uE=/\u0000|\uFFFD/g;function Cy(t){return(typeof t=="string"?t:""+t).replace(cE,`
`).replace(uE,"")}function m1(t,e){return e=Cy(e),Cy(t)===e}function Se(t,e,n,a,s,i){switch(n){case"children":typeof a=="string"?e==="body"||e==="textarea"&&a===""||yr(t,a):(typeof a=="number"||typeof a=="bigint")&&e!=="body"&&yr(t,""+a);break;case"className":uc(t,"class",a);break;case"tabIndex":uc(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":uc(t,n,a);break;case"style":dv(t,a,i);break;case"data":if(e!=="object"){uc(t,"data",a);break}case"src":case"href":if(a===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Ec(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&Se(t,e,"name",s.name,s,null),Se(t,e,"formEncType",s.formEncType,s,null),Se(t,e,"formMethod",s.formMethod,s,null),Se(t,e,"formTarget",s.formTarget,s,null)):(Se(t,e,"encType",s.encType,s,null),Se(t,e,"method",s.method,s,null),Se(t,e,"target",s.target,s,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Ec(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=_a);break;case"onScroll":a!=null&&oe("scroll",t);break;case"onScrollEnd":a!=null&&oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(j(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=Ec(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":oe("beforetoggle",t),oe("toggle",t),Sc(t,"popover",a);break;case"xlinkActuate":oa(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":oa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":oa(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":oa(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":oa(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":oa(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":oa(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":oa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":oa(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Sc(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=UN.get(n)||n,Sc(t,n,a))}}function em(t,e,n,a,s,i){switch(n){case"style":dv(t,a,i);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(j(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"children":typeof a=="string"?yr(t,a):(typeof a=="number"||typeof a=="bigint")&&yr(t,""+a);break;case"onScroll":a!=null&&oe("scroll",t);break;case"onScrollEnd":a!=null&&oe("scrollend",t);break;case"onClick":a!=null&&(t.onclick=_a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),i=t[Xt]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,s),typeof a=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,a,s);break e}n in t?t[n]=a:a===!0?t.setAttribute(n,""):Sc(t,n,a)}}}function At(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",t),oe("load",t);var a=!1,s=!1,i;for(i in n)if(n.hasOwnProperty(i)){var l=n[i];if(l!=null)switch(i){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:Se(t,e,i,l,n,null)}}s&&Se(t,e,"srcSet",n.srcSet,n,null),a&&Se(t,e,"src",n.src,n,null);return;case"input":oe("invalid",t);var o=i=l=s=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var f=n[a];if(f!=null)switch(a){case"name":s=f;break;case"type":l=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":i=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(j(137,e));break;default:Se(t,e,a,f,n,null)}}ov(t,i,o,c,u,l,s,!1);return;case"select":oe("invalid",t),a=l=i=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":i=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:Se(t,e,s,o,n,null)}e=i,n=l,t.multiple=!!a,e!=null?sr(t,!!a,e,!1):n!=null&&sr(t,!!a,n,!0);return;case"textarea":oe("invalid",t),i=s=a=null;for(l in n)if(n.hasOwnProperty(l)&&(o=n[l],o!=null))switch(l){case"value":a=o;break;case"defaultValue":s=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(j(91));break;default:Se(t,e,l,o,n,null)}uv(t,a,s,i);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(a=n[c],a!=null))switch(c){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Se(t,e,c,a,n,null)}return;case"dialog":oe("beforetoggle",t),oe("toggle",t),oe("cancel",t),oe("close",t);break;case"iframe":case"object":oe("load",t);break;case"video":case"audio":for(a=0;a<ao.length;a++)oe(ao[a],t);break;case"image":oe("error",t),oe("load",t);break;case"details":oe("toggle",t);break;case"embed":case"source":case"link":oe("error",t),oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(a=n[u],a!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:Se(t,e,u,a,n,null)}return;default:if(eg(e)){for(f in n)n.hasOwnProperty(f)&&(a=n[f],a!==void 0&&em(t,e,f,a,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(a=n[o],a!=null&&Se(t,e,o,a,n,null))}function dE(t,e,n,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,l=null,o=null,c=null,u=null,f=null;for(m in n){var d=n[m];if(n.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=d;default:a.hasOwnProperty(m)||Se(t,e,m,null,a,d)}}for(var h in a){var m=a[h];if(d=n[h],a.hasOwnProperty(h)&&(m!=null||d!=null))switch(h){case"type":i=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":f=m;break;case"value":l=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(j(137,e));break;default:m!==d&&Se(t,e,h,m,a,d)}}Nf(t,l,o,c,u,f,i,s);return;case"select":m=l=o=h=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":m=c;default:a.hasOwnProperty(i)||Se(t,e,i,null,a,c)}for(s in a)if(i=a[s],c=n[s],a.hasOwnProperty(s)&&(i!=null||c!=null))switch(s){case"value":h=i;break;case"defaultValue":o=i;break;case"multiple":l=i;default:i!==c&&Se(t,e,s,i,a,c)}e=o,n=l,a=m,h!=null?sr(t,!!n,h,!1):!!a!=!!n&&(e!=null?sr(t,!!n,e,!0):sr(t,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(o in n)if(s=n[o],n.hasOwnProperty(o)&&s!=null&&!a.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Se(t,e,o,null,a,s)}for(l in a)if(s=a[l],i=n[l],a.hasOwnProperty(l)&&(s!=null||i!=null))switch(l){case"value":h=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(j(91));break;default:s!==i&&Se(t,e,l,s,a,i)}cv(t,h,m);return;case"option":for(var v in n)if(h=n[v],n.hasOwnProperty(v)&&h!=null&&!a.hasOwnProperty(v))switch(v){case"selected":t.selected=!1;break;default:Se(t,e,v,null,a,h)}for(c in a)if(h=a[c],m=n[c],a.hasOwnProperty(c)&&h!==m&&(h!=null||m!=null))switch(c){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Se(t,e,c,h,a,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!=null&&!a.hasOwnProperty(b)&&Se(t,e,b,null,a,h);for(u in a)if(h=a[u],m=n[u],a.hasOwnProperty(u)&&h!==m&&(h!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(j(137,e));break;default:Se(t,e,u,h,a,m)}return;default:if(eg(e)){for(var w in n)h=n[w],n.hasOwnProperty(w)&&h!==void 0&&!a.hasOwnProperty(w)&&em(t,e,w,void 0,a,h);for(f in a)h=a[f],m=n[f],!a.hasOwnProperty(f)||h===m||h===void 0&&m===void 0||em(t,e,f,h,a,m);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!a.hasOwnProperty(y)&&Se(t,e,y,null,a,h);for(d in a)h=a[d],m=n[d],!a.hasOwnProperty(d)||h===m||h==null&&m==null||Se(t,e,d,h,a,m)}function Ny(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var s=n[a],i=s.transferSize,l=s.initiatorType,o=s.duration;if(i&&o&&Ny(l)){for(l=0,o=s.responseEnd,a+=1;a<n.length;a++){var c=n[a],u=c.startTime;if(u>o)break;var f=c.transferSize,d=c.initiatorType;f&&Ny(d)&&(c=c.responseEnd,l+=f*(c<o?1:(o-u)/(c-u)))}if(--a,e+=8*(i+l)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var tm=null,nm=null;function mu(t){return t.nodeType===9?t:t.ownerDocument}function Sy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g1(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function am(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zh=null;function fE(){var t=window.event;return t&&t.type==="popstate"?t===zh?!1:(zh=t,!0):(zh=null,!1)}var p1=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,Ey=typeof Promise=="function"?Promise:void 0,gE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ey<"u"?function(t){return Ey.resolve(null).then(t).catch(pE)}:p1;function pE(t){setTimeout(function(){throw t})}function Bs(t){return t==="head"}function jy(t,e){var n=e,a=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(s),Nr(e);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Pl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Pl(n);for(var i=n.firstChild;i;){var l=i.nextSibling,o=i.nodeName;i[Oo]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=l}}else n==="body"&&Pl(t.ownerDocument.body);n=s}while(n);Nr(e)}function Ty(t,e){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function sm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sm(n),Jm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function yE(t,e,n,a){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Oo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=En(t.nextSibling),t===null)break}return null}function xE(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=En(t.nextSibling),t===null))return null;return t}function y1(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=En(t.nextSibling),t===null))return null;return t}function im(t){return t.data==="$?"||t.data==="$~"}function rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function bE(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var a=function(){e(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function En(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var lm=null;function Ay(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return En(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function x1(t,e,n){switch(e=mu(n),t){case"html":if(t=e.documentElement,!t)throw Error(j(452));return t;case"head":if(t=e.head,!t)throw Error(j(453));return t;case"body":if(t=e.body,!t)throw Error(j(454));return t;default:throw Error(j(451))}}function Pl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Jm(t)}var Tn=new Map,Ry=new Set;function gu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fa=ye.d;ye.d={f:vE,r:_E,D:wE,C:kE,L:CE,m:NE,X:EE,S:SE,M:jE};function vE(){var t=Fa.f(),e=fd();return t||e}function _E(t){var e=Lr(t);e!==null&&e.tag===5&&e.type==="form"?d_(e):Fa.r(t)}var zr=typeof document>"u"?null:document;function b1(t,e,n){var a=zr;if(a&&typeof e=="string"&&e){var s=_n(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Ry.has(s)||(Ry.add(s),t={rel:t,crossOrigin:n,href:e},a.querySelector(s)===null&&(e=a.createElement("link"),At(e,"link",t),vt(e),a.head.appendChild(e)))}}function wE(t){Fa.D(t),b1("dns-prefetch",t,null)}function kE(t,e){Fa.C(t,e),b1("preconnect",t,e)}function CE(t,e,n){Fa.L(t,e,n);var a=zr;if(a&&t&&e){var s='link[rel="preload"][as="'+_n(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+_n(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+_n(n.imageSizes)+'"]')):s+='[href="'+_n(t)+'"]';var i=s;switch(e){case"style":i=Cr(t);break;case"script":i=Hr(t)}Tn.has(i)||(t=Be({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Tn.set(i,t),a.querySelector(s)!==null||e==="style"&&a.querySelector(zo(i))||e==="script"&&a.querySelector(Ho(i))||(e=a.createElement("link"),At(e,"link",t),vt(e),a.head.appendChild(e)))}}function NE(t,e){Fa.m(t,e);var n=zr;if(n&&t){var a=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+_n(a)+'"][href="'+_n(t)+'"]',i=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Hr(t)}if(!Tn.has(i)&&(t=Be({rel:"modulepreload",href:t},e),Tn.set(i,t),n.querySelector(s)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ho(i)))return}a=n.createElement("link"),At(a,"link",t),vt(a),n.head.appendChild(a)}}}function SE(t,e,n){Fa.S(t,e,n);var a=zr;if(a&&t){var s=ar(a).hoistableStyles,i=Cr(t);e=e||"default";var l=s.get(i);if(!l){var o={loading:0,preload:null};if(l=a.querySelector(zo(i)))o.loading=5;else{t=Be({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Tn.get(i))&&Ug(t,n);var c=l=a.createElement("link");vt(c),At(c,"link",t),c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Pc(l,e,a)}l={type:"stylesheet",instance:l,count:1,state:o},s.set(i,l)}}}function EE(t,e){Fa.X(t,e);var n=zr;if(n&&t){var a=ar(n).hoistableScripts,s=Hr(t),i=a.get(s);i||(i=n.querySelector(Ho(s)),i||(t=Be({src:t,async:!0},e),(e=Tn.get(s))&&Bg(t,e),i=n.createElement("script"),vt(i),At(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(s,i))}}function jE(t,e){Fa.M(t,e);var n=zr;if(n&&t){var a=ar(n).hoistableScripts,s=Hr(t),i=a.get(s);i||(i=n.querySelector(Ho(s)),i||(t=Be({src:t,async:!0,type:"module"},e),(e=Tn.get(s))&&Bg(t,e),i=n.createElement("script"),vt(i),At(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(s,i))}}function My(t,e,n,a){var s=(s=us.current)?gu(s):null;if(!s)throw Error(j(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Cr(n.href),n=ar(s).hoistableStyles,a=n.get(e),a||(a={type:"style",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Cr(n.href);var i=ar(s).hoistableStyles,l=i.get(t);if(l||(s=s.ownerDocument||s,l={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,l),(i=s.querySelector(zo(t)))&&!i._p&&(l.instance=i,l.state.loading=5),Tn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Tn.set(t,n),i||TE(s,t,n,l.state))),e&&a===null)throw Error(j(528,""));return l}if(e&&a!==null)throw Error(j(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Hr(n),n=ar(s).hoistableScripts,a=n.get(e),a||(a={type:"script",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(j(444,t))}}function Cr(t){return'href="'+_n(t)+'"'}function zo(t){return'link[rel="stylesheet"]['+t+"]"}function v1(t){return Be({},t,{"data-precedence":t.precedence,precedence:null})}function TE(t,e,n,a){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?a.loading=1:(e=t.createElement("link"),a.preload=e,e.addEventListener("load",function(){return a.loading|=1}),e.addEventListener("error",function(){return a.loading|=2}),At(e,"link",n),vt(e),t.head.appendChild(e))}function Hr(t){return'[src="'+_n(t)+'"]'}function Ho(t){return"script[async]"+t}function Oy(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var a=t.querySelector('style[data-href~="'+_n(n.href)+'"]');if(a)return e.instance=a,vt(a),a;var s=Be({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),vt(a),At(a,"style",s),Pc(a,n.precedence,t),e.instance=a;case"stylesheet":s=Cr(n.href);var i=t.querySelector(zo(s));if(i)return e.state.loading|=4,e.instance=i,vt(i),i;a=v1(n),(s=Tn.get(s))&&Ug(a,s),i=(t.ownerDocument||t).createElement("link"),vt(i);var l=i;return l._p=new Promise(function(o,c){l.onload=o,l.onerror=c}),At(i,"link",a),e.state.loading|=4,Pc(i,n.precedence,t),e.instance=i;case"script":return i=Hr(n.src),(s=t.querySelector(Ho(i)))?(e.instance=s,vt(s),s):(a=n,(s=Tn.get(i))&&(a=Be({},n),Bg(a,s)),t=t.ownerDocument||t,s=t.createElement("script"),vt(s),At(s,"link",a),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(j(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(a=e.instance,e.state.loading|=4,Pc(a,n.precedence,t));return e.instance}function Pc(t,e,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,i=s,l=0;l<a.length;l++){var o=a[l];if(o.dataset.precedence===e)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Ug(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Bg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Uc=null;function Dy(t,e,n){if(Uc===null){var a=new Map,s=Uc=new Map;s.set(n,a)}else s=Uc,a=s.get(n),a||(a=new Map,s.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var i=n[s];if(!(i[Oo]||i[Et]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var l=i.getAttribute(e)||"";l=t+l;var o=a.get(l);o?o.push(i):a.set(l,[i])}}return a}function Ly(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function AE(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function _1(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function IE(t,e,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=Cr(a.href),i=e.querySelector(zo(s));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=pu.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,vt(i);return}i=e.ownerDocument||e,a=v1(a),(s=Tn.get(s))&&Ug(a,s),i=i.createElement("link"),vt(i);var l=i;l._p=new Promise(function(o,c){l.onload=o,l.onerror=c}),At(i,"link",a),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=pu.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Hh=0;function RE(t,e){return t.stylesheets&&t.count===0&&Bc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&Bc(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&Hh===0&&(Hh=62500*hE());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Bc(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>Hh?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(s)}}:null}function pu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yu=null;function Bc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yu=new Map,e.forEach(ME,t),yu=null,pu.call(t))}function ME(t,e){if(!(e.state.loading&4)){var n=yu.get(t);if(n)var a=n.get(null);else{n=new Map,yu.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var l=s[i];(l.nodeName==="LINK"||l.getAttribute("media")!=="not all")&&(n.set(l.dataset.precedence,l),a=l)}a&&n.set(null,a)}s=e.instance,l=s.getAttribute("data-precedence"),i=n.get(l)||a,i===a&&n.set(null,s),n.set(l,s),this.count++,a=pu.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),i?i.parentNode.insertBefore(s,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var io={$$typeof:va,Provider:null,Consumer:null,_currentValue:ai,_currentValue2:ai,_threadCount:0};function OE(t,e,n,a,s,i,l,o,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=uh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uh(0),this.hiddenUpdates=uh(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function w1(t,e,n,a,s,i,l,o,c,u,f,d){return t=new OE(t,e,n,l,c,u,f,d,o),e=1,i===!0&&(e|=24),i=rn(3,null,null,e),t.current=i,i.stateNode=t,e=dg(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:a,isDehydrated:n,cache:e},mg(i),t}function k1(t){return t?(t=Ji,t):Ji}function C1(t,e,n,a,s,i){s=k1(s),a.context===null?a.context=s:a.pendingContext=s,a=hs(e),a.payload={element:n},i=i===void 0?null:i,i!==null&&(a.callback=i),n=fs(t,a,e),n!==null&&(qt(n,t,e),Tl(n,t,e))}function Py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zg(t,e){Py(t,e),(t=t.alternate)&&Py(t,e)}function N1(t){if(t.tag===13||t.tag===31){var e=Ei(t,67108864);e!==null&&qt(e,t,67108864),zg(t,67108864)}}function Uy(t){if(t.tag===13||t.tag===31){var e=hn();e=Xm(e);var n=Ei(t,e);n!==null&&qt(n,t,e),zg(t,e)}}var xu=!0;function DE(t,e,n,a){var s=X.T;X.T=null;var i=ye.p;try{ye.p=2,Hg(t,e,n,a)}finally{ye.p=i,X.T=s}}function LE(t,e,n,a){var s=X.T;X.T=null;var i=ye.p;try{ye.p=8,Hg(t,e,n,a)}finally{ye.p=i,X.T=s}}function Hg(t,e,n,a){if(xu){var s=om(a);if(s===null)Bh(t,e,a,bu,n),By(t,a);else if(UE(s,t,e,n,a))a.stopPropagation();else if(By(t,a),e&4&&-1<PE.indexOf(t)){for(;s!==null;){var i=Lr(s);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var l=Ys(i.pendingLanes);if(l!==0){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;l;){var c=1<<31-dn(l);o.entanglements[1]|=c,l&=~c}ra(i),!(pe&6)&&(ou=cn()+500,Bo(0))}}break;case 31:case 13:o=Ei(i,2),o!==null&&qt(o,i,2),fd(),zg(i,2)}if(i=om(a),i===null&&Bh(t,e,a,bu,n),i===s)break;s=i}s!==null&&a.stopPropagation()}else Bh(t,e,a,null,n)}}function om(t){return t=tg(t),Fg(t)}var bu=null;function Fg(t){if(bu=null,t=Wi(t),t!==null){var e=Ao(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Gb(e),t!==null)return t;t=null}else if(n===31){if(t=$b(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return bu=t,null}function S1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wN()){case qb:return 2;case Xb:return 8;case Yc:case kN:return 32;case Zb:return 268435456;default:return 32}default:return 32}}var cm=!1,ps=null,ys=null,xs=null,ro=new Map,lo=new Map,ts=[],PE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(e.pointerId)}}function cl(t,e,n,a,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lr(e),e!==null&&N1(e)),t):(t.eventSystemFlags|=a,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function UE(t,e,n,a,s){switch(e){case"focusin":return ps=cl(ps,t,e,n,a,s),!0;case"dragenter":return ys=cl(ys,t,e,n,a,s),!0;case"mouseover":return xs=cl(xs,t,e,n,a,s),!0;case"pointerover":var i=s.pointerId;return ro.set(i,cl(ro.get(i)||null,t,e,n,a,s)),!0;case"gotpointercapture":return i=s.pointerId,lo.set(i,cl(lo.get(i)||null,t,e,n,a,s)),!0}return!1}function E1(t){var e=Wi(t.target);if(e!==null){var n=Ao(e);if(n!==null){if(e=n.tag,e===13){if(e=Gb(n),e!==null){t.blockedOn=e,k0(t.priority,function(){Uy(n)});return}}else if(e===31){if(e=$b(n),e!==null){t.blockedOn=e,k0(t.priority,function(){Uy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=om(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Ef=a,n.target.dispatchEvent(a),Ef=null}else return e=Lr(n),e!==null&&N1(e),t.blockedOn=n,!1;e.shift()}return!0}function zy(t,e,n){zc(t)&&n.delete(e)}function BE(){cm=!1,ps!==null&&zc(ps)&&(ps=null),ys!==null&&zc(ys)&&(ys=null),xs!==null&&zc(xs)&&(xs=null),ro.forEach(zy),lo.forEach(zy)}function xc(t,e){t.blockedOn===e&&(t.blockedOn=null,cm||(cm=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,BE)))}var bc=null;function Hy(t){bc!==t&&(bc=t,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,function(){bc===t&&(bc=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],s=t[e+2];if(typeof a!="function"){if(Fg(a||n)===null)continue;break}var i=Lr(n);i!==null&&(t.splice(e,3),e-=3,Vf(i,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function Nr(t){function e(c){return xc(c,t)}ps!==null&&xc(ps,t),ys!==null&&xc(ys,t),xs!==null&&xc(xs,t),ro.forEach(e),lo.forEach(e);for(var n=0;n<ts.length;n++){var a=ts[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)E1(n),n.blockedOn===null&&ts.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var s=n[a],i=n[a+1],l=s[Xt]||null;if(typeof i=="function")l||Hy(n);else if(l){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,l=i[Xt]||null)o=l.formAction;else if(Fg(s)!==null)continue}else o=l.action;typeof o=="function"?n[a+1]=o:(n.splice(a,3),a-=3),Hy(n)}}}function j1(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(l){return s=l})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function Vg(t){this._internalRoot=t}pd.prototype.render=Vg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));var n=e.current,a=hn();C1(n,a,t,e,null,null)};pd.prototype.unmount=Vg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;C1(t.current,2,null,t,null,null),fd(),e[Dr]=null}};function pd(t){this._internalRoot=t}pd.prototype.unstable_scheduleHydration=function(t){if(t){var e=av();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ts.length&&e!==0&&e<ts[n].priority;n++);ts.splice(n,0,t),n===0&&E1(t)}};var Fy=Vb.version;if(Fy!=="19.2.0")throw Error(j(527,Fy,"19.2.0"));ye.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=gN(e),t=t!==null?Wb(t):null,t=t===null?null:t.stateNode,t};var zE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{Io=vc.inject(zE),un=vc}catch{}}Ju.createRoot=function(t,e){if(!Qb(t))throw Error(j(299));var n=!1,a="",s=b_,i=v_,l=__;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=w1(t,1,!1,null,null,n,a,null,s,i,l,j1),t[Dr]=e.current,Pg(t),new Vg(e)};Ju.hydrateRoot=function(t,e,n){if(!Qb(t))throw Error(j(299));var a=!1,s="",i=b_,l=v_,o=__,c=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(l=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=w1(t,1,!0,e,n??null,a,s,c,i,l,o,j1),e.context=k1(null),n=e.current,a=hn(),a=Xm(a),s=hs(a),s.callback=null,fs(n,s,a),n=a,e.current.lanes=n,Mo(e,n),ra(e),t[Dr]=e.current,Pg(t),new pd(e)};Ju.version="19.2.0";function T1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T1)}catch(t){console.error(t)}}T1(),Pb.exports=Ju;var HE=Pb.exports;const FE=Eb(HE);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oo.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const Vy="popstate";function VE(t){t===void 0&&(t={});function e(s,i){let{pathname:l="/",search:o="",hash:c=""}=Ti(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),um("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let l=s.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:vu(i))}function a(s,i){Qg(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return GE(e,n,a,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QE(){return Math.random().toString(36).substr(2,8)}function Qy(t,e){return{usr:t.state,key:t.key,idx:e}}function um(t,e,n,a){return n===void 0&&(n=null),oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ti(e):e,{state:n,key:e&&e.key||a||QE()})}function vu(t){let{pathname:e="/",search:n="",hash:a=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Ti(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substr(a),t=t.substr(0,a)),t&&(e.pathname=t)}return e}function GE(t,e,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,l=s.history,o=ls.Pop,c=null,u=f();u==null&&(u=0,l.replaceState(oo({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function d(){o=ls.Pop;let w=f(),y=w==null?null:w-u;u=w,c&&c({action:o,location:b.location,delta:y})}function h(w,y){o=ls.Push;let g=um(b.location,w,y);n&&n(g,w),u=f()+1;let x=Qy(g,u),_=b.createHref(g);try{l.pushState(x,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(_)}i&&c&&c({action:o,location:b.location,delta:1})}function m(w,y){o=ls.Replace;let g=um(b.location,w,y);n&&n(g,w),u=f();let x=Qy(g,u),_=b.createHref(g);l.replaceState(x,"",_),i&&c&&c({action:o,location:b.location,delta:0})}function v(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:vu(w);return g=g.replace(/ $/,"%20"),qe(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let b={get action(){return o},get location(){return t(s,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Vy,d),c=w,()=>{s.removeEventListener(Vy,d),c=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let y=v(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(w){return l.go(w)}};return b}var Gy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gy||(Gy={}));function $E(t,e,n){return n===void 0&&(n="/"),WE(t,e,n)}function WE(t,e,n,a){let s=typeof e=="string"?Ti(e):e,i=Sr(s.pathname||"/",n);if(i==null)return null;let l=A1(t);YE(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=ij(i);o=aj(l[c],u)}return o}function A1(t,e,n,a){e===void 0&&(e=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let u=bs([a,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),A1(i.children,e,f,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:tj(u,i.index),routesMeta:f})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,l);else for(let c of I1(i.path))s(i,l,c)}),e}function I1(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let l=I1(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function YE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nj(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const KE=/^:[\w-]+$/,qE=3,XE=2,ZE=1,JE=10,ej=-2,$y=t=>t==="*";function tj(t,e){let n=t.split("/"),a=n.length;return n.some($y)&&(a+=ej),e&&(a+=XE),n.filter(s=>!$y(s)).reduce((s,i)=>s+(KE.test(i)?qE:i===""?ZE:JE),a)}function nj(t,e){return t.length===e.length&&t.slice(0,-1).every((a,s)=>a===e[s])?t[t.length-1]-e[e.length-1]:0}function aj(t,e,n){let{routesMeta:a}=t,s={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],u=o===a.length-1,f=i==="/"?e:e.slice(i.length)||"/",d=dm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d)return null;Object.assign(s,d.params),l.push({params:s,pathname:bs([i,d.pathname]),pathnameBase:cj(bs([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=bs([i,d.pathnameBase]))}return l}function dm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=sj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:a.reduce((u,f,d)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let b=o[d]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[d];return m&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:t}}function sj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function ij(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Sr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function rj(t,e){e===void 0&&(e="/");let{pathname:n,search:a="",hash:s=""}=typeof t=="string"?Ti(t):t;return{pathname:n?n.startsWith("/")?n:lj(n,e):e,search:uj(a),hash:dj(s)}}function lj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fh(t,e,n,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gg(t,e){let n=oj(t);return e?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function $g(t,e,n,a){a===void 0&&(a=!1);let s;typeof t=="string"?s=Ti(t):(s=oo({},t),qe(!s.pathname||!s.pathname.includes("?"),Fh("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),Fh("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),Fh("#","search","hash",s)));let i=t===""||s.pathname==="",l=i?"/":s.pathname,o;if(l==null)o=n;else{let d=e.length-1;if(!a&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}o=d>=0?e[d]:"/"}let c=rj(s,o),u=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const bs=t=>t.join("/").replace(/\/\/+/g,"/"),cj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const R1=["post","put","patch","delete"];new Set(R1);const fj=["get",...R1];new Set(fj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},co.apply(this,arguments)}const yd=p.createContext(null),M1=p.createContext(null),Va=p.createContext(null),xd=p.createContext(null),zs=p.createContext({outlet:null,matches:[],isDataRoute:!1}),O1=p.createContext(null);function mj(t,e){let{relative:n}=e===void 0?{}:e;Fr()||qe(!1);let{basename:a,navigator:s}=p.useContext(Va),{hash:i,pathname:l,search:o}=bd(t,{relative:n}),c=l;return a!=="/"&&(c=l==="/"?a:bs([a,l])),s.createHref({pathname:c,search:o,hash:i})}function Fr(){return p.useContext(xd)!=null}function Qa(){return Fr()||qe(!1),p.useContext(xd).location}function D1(t){p.useContext(Va).static||p.useLayoutEffect(t)}function L1(){let{isDataRoute:t}=p.useContext(zs);return t?Ej():gj()}function gj(){Fr()||qe(!1);let t=p.useContext(yd),{basename:e,future:n,navigator:a}=p.useContext(Va),{matches:s}=p.useContext(zs),{pathname:i}=Qa(),l=JSON.stringify(Gg(s,n.v7_relativeSplatPath)),o=p.useRef(!1);return D1(()=>{o.current=!0}),p.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){a.go(u);return}let d=$g(u,JSON.parse(l),i,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:bs([e,d.pathname])),(f.replace?a.replace:a.push)(d,f.state,f)},[e,a,l,i,t])}function bd(t,e){let{relative:n}=e===void 0?{}:e,{future:a}=p.useContext(Va),{matches:s}=p.useContext(zs),{pathname:i}=Qa(),l=JSON.stringify(Gg(s,a.v7_relativeSplatPath));return p.useMemo(()=>$g(t,JSON.parse(l),i,n==="path"),[t,l,i,n])}function pj(t,e){return yj(t,e)}function yj(t,e,n,a){Fr()||qe(!1);let{navigator:s}=p.useContext(Va),{matches:i}=p.useContext(zs),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=Qa(),f;if(e){var d;let w=typeof e=="string"?Ti(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||qe(!1),f=w}else f=u;let h=f.pathname||"/",m=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=$E(t,{pathname:m}),b=wj(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:bs([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:bs([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,a);return e&&b?p.createElement(xd.Provider,{value:{location:co({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ls.Pop}},b):b}function xj(){let t=Sj(),e=hj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,null)}const bj=p.createElement(xj,null);class vj extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(zs.Provider,{value:this.props.routeContext},p.createElement(O1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _j(t){let{routeContext:e,match:n,children:a}=t,s=p.useContext(yd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(zs.Provider,{value:e},a)}function wj(t,e,n,a){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),a===void 0&&(a=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=a)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let f=l.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);f>=0||qe(!1),l=l.slice(0,Math.min(l.length,f+1))}let c=!1,u=-1;if(n&&a&&a.v7_partialHydration)for(let f=0;f<l.length;f++){let d=l[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:m}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,d,h)=>{let m,v=!1,b=null,w=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,b=d.route.errorElement||bj,c&&(u<0&&h===0?(jj("route-fallback"),v=!0,w=null):u===h&&(v=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(l.slice(0,h+1)),g=()=>{let x;return m?x=b:v?x=w:d.route.Component?x=p.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=f,p.createElement(_j,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?p.createElement(vj,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var P1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(P1||{}),U1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(U1||{});function kj(t){let e=p.useContext(yd);return e||qe(!1),e}function Cj(t){let e=p.useContext(M1);return e||qe(!1),e}function Nj(t){let e=p.useContext(zs);return e||qe(!1),e}function B1(t){let e=Nj(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function Sj(){var t;let e=p.useContext(O1),n=Cj(),a=B1();return e!==void 0?e:(t=n.errors)==null?void 0:t[a]}function Ej(){let{router:t}=kj(P1.UseNavigateStable),e=B1(U1.UseNavigateStable),n=p.useRef(!1);return D1(()=>{n.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,co({fromRouteId:e},i)))},[t,e])}const Wy={};function jj(t,e,n){Wy[t]||(Wy[t]=!0)}function Tj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Js(t){let{to:e,replace:n,state:a,relative:s}=t;Fr()||qe(!1);let{future:i,static:l}=p.useContext(Va),{matches:o}=p.useContext(zs),{pathname:c}=Qa(),u=L1(),f=$g(e,Gg(o,i.v7_relativeSplatPath),c,s==="path"),d=JSON.stringify(f);return p.useEffect(()=>u(JSON.parse(d),{replace:n,state:a,relative:s}),[u,d,s,n,a]),null}function We(t){qe(!1)}function Aj(t){let{basename:e="/",children:n=null,location:a,navigationType:s=ls.Pop,navigator:i,static:l=!1,future:o}=t;Fr()&&qe(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:l,future:co({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=Ti(a));let{pathname:f="/",search:d="",hash:h="",state:m=null,key:v="default"}=a,b=p.useMemo(()=>{let w=Sr(f,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:m,key:v},navigationType:s}},[c,f,d,h,m,v,s]);return b==null?null:p.createElement(Va.Provider,{value:u},p.createElement(xd.Provider,{children:n,value:b}))}function vd(t){let{children:e,location:n}=t;return pj(hm(e),n)}new Promise(()=>{});function hm(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(a,s)=>{if(!p.isValidElement(a))return;let i=[...e,s];if(a.type===p.Fragment){n.push.apply(n,hm(a.props.children,i));return}a.type!==We&&qe(!1),!a.props.index||!a.props.children||qe(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=hm(a.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_u.apply(this,arguments)}function z1(t,e){if(t==null)return{};var n={},a=Object.keys(t),s,i;for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ij(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Rj(t,e){return t.button===0&&(!e||e==="_self")&&!Ij(t)}const Mj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Oj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Dj="6";try{window.__reactRouterVersion=Dj}catch{}const Lj=p.createContext({isTransitioning:!1}),Pj="startTransition",Yy=oN[Pj];function Uj(t){let{basename:e,children:n,future:a,window:s}=t,i=p.useRef();i.current==null&&(i.current=VE({window:s,v5Compat:!0}));let l=i.current,[o,c]=p.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},f=p.useCallback(d=>{u&&Yy?Yy(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>l.listen(f),[l,f]),p.useEffect(()=>Tj(a),[a]),p.createElement(Aj,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:l,future:a})}const Bj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yn=p.forwardRef(function(e,n){let{onClick:a,relative:s,reloadDocument:i,replace:l,state:o,target:c,to:u,preventScrollReset:f,viewTransition:d}=e,h=z1(e,Mj),{basename:m}=p.useContext(Va),v,b=!1;if(typeof u=="string"&&zj.test(u)&&(v=u,Bj))try{let x=new URL(window.location.href),_=u.startsWith("//")?new URL(x.protocol+u):new URL(u),k=Sr(_.pathname,m);_.origin===x.origin&&k!=null?u=k+_.search+_.hash:b=!0}catch{}let w=mj(u,{relative:s}),y=Fj(u,{replace:l,state:o,target:c,preventScrollReset:f,relative:s,viewTransition:d});function g(x){a&&a(x),x.defaultPrevented||y(x)}return p.createElement("a",_u({},h,{href:v||w,onClick:b||i?a:g,ref:n,target:c}))}),Ul=p.forwardRef(function(e,n){let{"aria-current":a="page",caseSensitive:s=!1,className:i="",end:l=!1,style:o,to:c,viewTransition:u,children:f}=e,d=z1(e,Oj),h=bd(c,{relative:d.relative}),m=Qa(),v=p.useContext(M1),{navigator:b,basename:w}=p.useContext(Va),y=v!=null&&Vj(h)&&u===!0,g=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,x=m.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(x=x.toLowerCase(),_=_?_.toLowerCase():null,g=g.toLowerCase()),_&&w&&(_=Sr(_,w)||_);const k=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let E=x===g||!l&&x.startsWith(g)&&x.charAt(k)==="/",C=_!=null&&(_===g||!l&&_.startsWith(g)&&_.charAt(g.length)==="/"),S={isActive:E,isPending:C,isTransitioning:y},T=E?a:void 0,I;typeof i=="function"?I=i(S):I=[i,E?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(S):o;return p.createElement(Yn,_u({},d,{"aria-current":T,className:I,ref:n,style:N,to:c,viewTransition:u}),typeof f=="function"?f(S):f)});var fm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fm||(fm={}));var Ky;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ky||(Ky={}));function Hj(t){let e=p.useContext(yd);return e||qe(!1),e}function Fj(t,e){let{target:n,replace:a,state:s,preventScrollReset:i,relative:l,viewTransition:o}=e===void 0?{}:e,c=L1(),u=Qa(),f=bd(t,{relative:l});return p.useCallback(d=>{if(Rj(d,n)){d.preventDefault();let h=a!==void 0?a:vu(u)===vu(f);c(t,{replace:h,state:s,preventScrollReset:i,relative:l,viewTransition:o})}},[u,c,f,a,s,n,t,i,l,o])}function Vj(t,e){e===void 0&&(e={});let n=p.useContext(Lj);n==null&&qe(!1);let{basename:a}=Hj(fm.useViewTransitionState),s=bd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Sr(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=Sr(n.nextLocation.pathname,a)||n.nextLocation.pathname;return dm(s.pathname,l)!=null||dm(s.pathname,i)!=null}var Ge=(t=>(t.PLAYER="player",t.MASTER="master",t))(Ge||{}),Wn=(t=>(t.MALE="Pria",t.FEMALE="Wanita",t))(Wn||{}),ei=(t=>(t.ANY_COMPLETION="any_completion",t.PERFECT_SCORE="perfect_score",t))(ei||{}),Me=(t=>(t.QUIZ="quiz",t.CODE="code",t))(Me||{}),we=(t=>(t.TUTORIAL="tutorial",t.MAIN="main",t.CHALLENGE="challenge",t))(we||{});const Qj="modulepreload",Gj=function(t){return"/python-quest/"+t},qy={},zn=function(e,n,a){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Gj(c),c in qy)return;qy[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Qj,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},H1={apiKey:"AIzaSyCYkAMPSAMr4Np4P46_o-ANeIQmEWBBn78",authDomain:"python-quest-e0acc.firebaseapp.com",databaseURL:"https://python-quest-e0acc-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"python-quest-e0acc",storageBucket:"python-quest-e0acc.firebasestorage.app",messagingSenderId:"940215015347",appId:"1:940215015347:web:42d21572da9f9ee7d71dc6"};let _c=null;const ue=async()=>{if(_c)return _c;const t=await zn(()=>import("./index.esm-ZEh_sjqK.js"),[]),e=await zn(()=>Promise.resolve().then(()=>bp),void 0),n=await zn(()=>Promise.resolve().then(()=>HM),void 0),a=t.getApps().length>0?t.getApp():t.initializeApp(H1),s=e.getAuth(a),i=n.getDatabase(a);return _c={app:a,auth:s,database:i,initializeApp:t.initializeApp,modularDeleteApp:t.deleteApp},_c},F1=Object.freeze(Object.defineProperty({__proto__:null,firebaseConfig:H1,getFirebaseServices:ue},Symbol.toStringTag,{value:"Module"})),$j=()=>{};var Xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M=function(t,e){if(!t)throw Vr(e)},Vr=function(t){return new Error("Firebase Database ("+V1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=function(t){const e=[];let n=0;for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&a+1<t.length&&(t.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++a)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Wj=function(t){const e=[];let n=0,a=0;for(;n<t.length;){const s=t[n++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[a++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],l=t[n++],o=t[n++],c=((s&7)<<18|(i&63)<<12|(l&63)<<6|o&63)-65536;e[a++]=String.fromCharCode(55296+(c>>10)),e[a++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],l=t[n++];e[a++]=String.fromCharCode((s&15)<<12|(i&63)<<6|l&63)}}return e.join("")},Wg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<t.length;s+=3){const i=t[s],l=s+1<t.length,o=l?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,f=i>>2,d=(i&3)<<4|o>>4;let h=(o&15)<<2|u>>6,m=u&63;c||(m=64,l||(h=64)),a.push(n[f],n[d],n[h],n[m])}return a.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Q1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||u==null||d==null)throw new Yj;const h=i<<2|o>>4;if(a.push(h),u!==64){const m=o<<4&240|u>>2;if(a.push(m),d!==64){const v=u<<6&192|d;a.push(v)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Yj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G1=function(t){const e=Q1(t);return Wg.encodeByteArray(e,!0)},wu=function(t){return G1(t).replace(/\./g,"")},uo=function(t){try{return Wg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t){return $1(void 0,t)}function $1(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qj(n)||(t[n]=$1(t[n],e[n]));return t}function qj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=()=>Xj().__FIREBASE_DEFAULTS__,Jj=()=>{if(typeof process>"u"||typeof Xy>"u")return;const t=Xy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},e5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uo(t[1]);return e&&JSON.parse(e)},Yg=()=>{try{return $j()||Zj()||Jj()||e5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W1=t=>{var e,n;return(n=(e=Yg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},t5=t=>{const e=W1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},Kg=()=>{var t;return(t=Yg())==null?void 0:t.config},Y1=t=>{var e;return(e=Yg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function K1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[wu(JSON.stringify(n)),wu(JSON.stringify(l)),""].join(".")}const Bl={};function a5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bl))Bl[e]?t.emulator.push(e):t.prod.push(e);return t}function s5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zy=!1;function q1(t,e){if(typeof window>"u"||typeof document>"u"||!Qr(window.location.host)||Bl[t]===e||Bl[t]||Zy)return;Bl[t]=e;function n(h){return`__firebase__banner__${h}`}const a="__firebase__banner",i=a5().prod.length>0;function l(){const h=document.getElementById(a);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{Zy=!0,l()},h}function f(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=s5(a),m=n("text"),v=document.getElementById(m)||document.createElement("span"),b=n("learnmore"),w=document.getElementById(b)||document.createElement("a"),y=n("preprendIcon"),g=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const x=h.element;o(x),f(w,b);const _=u();c(g,y),x.append(g,v,w,_),document.body.appendChild(x)}i?(v.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function i5(){return typeof window<"u"||X1()}function X1(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function r5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function l5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Z1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o5(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function c5(){return V1.NODE_ADMIN===!0}function u5(){try{return typeof indexedDB=="object"}catch{return!1}}function d5(){return new Promise((t,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(a),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="FirebaseError";class Hs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=h5,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fo.prototype.create)}}class Fo{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],l=i?f5(i,a):"Error",o=`${this.serviceName}: ${l} (${s}).`;return new Hs(s,o,a)}}function f5(t,e){return t.replace(m5,(n,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const m5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=function(t){let e={},n={},a={},s="";try{const i=t.split(".");e=ho(uo(i[0])||""),n=ho(uo(i[1])||""),s=i[2],a=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:a,signature:s}},g5=function(t){const e=J1(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},p5=function(t){const e=J1(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ku(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cu(t,e,n){const a={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=e.call(n,t[s],s,t));return a}function pi(t,e){if(t===e)return!0;const n=Object.keys(t),a=Object.keys(e);for(const s of n){if(!a.includes(s))return!1;const i=t[s],l=e[s];if(Jy(i)&&Jy(l)){if(!pi(i,l))return!1}else if(i!==l)return!1}for(const s of a)if(!n.includes(s))return!1;return!0}function Jy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t){const e=[];for(const[n,a]of Object.entries(t))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function _l(t){const e={};return t.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[s,i]=a.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function wl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const a=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)a[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)a[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=a[d-3]^a[d-8]^a[d-14]^a[d-16];a[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],l=this.chain_[2],o=this.chain_[3],c=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=o^i&(l^o),f=1518500249):(u=i^l^o,f=1859775393):d<60?(u=i&l|o&(i|l),f=2400959708):(u=i^l^o,f=3395469782);const h=(s<<5|s>>>27)+u+c+f+a[d]&4294967295;c=o,o=l,l=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const a=n-this.blockSize;let s=0;const i=this.buf_;let l=this.inbuf_;for(;s<n;){if(l===0)for(;s<=a;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(i),l=0;break}}else for(;s<n;)if(i[l]=e[s],++l,++s,l===this.blockSize){this.compress_(i),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let a=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[a]=this.chain_[s]>>i&255,++a;return e}}function x5(t,e){const n=new b5(t,e);return n.subscribe.bind(n)}class b5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let s;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");v5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:a},s.next===void 0&&(s.next=Vh),s.error===void 0&&(s.error=Vh),s.complete===void 0&&(s.complete=Vh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vh(){}function yi(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=function(t){const e=[];let n=0;for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);if(s>=55296&&s<=56319){const i=s-55296;a++,M(a<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(a)-56320;s=65536+(i<<10)+l}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_d=function(t){let e=0;for(let n=0;n<t.length;n++){const a=t.charCodeAt(n);a<128?e++:a<2048?e+=2:a>=55296&&a<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t){return t&&t._delegate?t._delegate:t}class Pa{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new ln;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k5(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});a.resolve(i)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[i,l]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);a===o&&l.resolve(s)}return s}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const i=this.instances.get(a);return i&&e(i,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const s of a)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:w5(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function w5(t){return t===Xs?void 0:t}function k5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=[];var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const ew={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},C5=ve.INFO,N5={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},S5=(t,e,...n)=>{if(e<t.logLevel)return;const a=new Date().toISOString(),s=N5[e];if(s)console[s](`[${a}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jg{constructor(e){this.name=e,this._logLevel=C5,this._logHandler=S5,this._userLogHandler=null,Zg.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ew[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}function E5(t){Zg.forEach(e=>{e.setLogLevel(t)})}function j5(t,e){for(const n of Zg){let a=null;e&&e.level&&(a=ew[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...l)=>{const o=l.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(a??s.logLevel)&&t({level:ve[i].toLowerCase(),message:o,args:l,type:s.name})}}}const T5=(t,e)=>e.some(n=>t instanceof n);let ex,tx;function A5(){return ex||(ex=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I5(){return tx||(tx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tw=new WeakMap,gm=new WeakMap,nw=new WeakMap,Qh=new WeakMap,ep=new WeakMap;function R5(t){const e=new Promise((n,a)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",l)},i=()=>{n(vs(t.result)),s()},l=()=>{a(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&tw.set(n,t)}).catch(()=>{}),ep.set(e,t),e}function M5(t){if(gm.has(t))return;const e=new Promise((n,a)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",l),t.removeEventListener("abort",l)},i=()=>{n(),s()},l=()=>{a(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",l),t.addEventListener("abort",l)});gm.set(t,e)}let pm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O5(t){pm=t(pm)}function D5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=t.call(Gh(this),e,...n);return nw.set(a,e.sort?e.sort():[e]),vs(a)}:I5().includes(t)?function(...e){return t.apply(Gh(this),e),vs(tw.get(this))}:function(...e){return vs(t.apply(Gh(this),e))}}function L5(t){return typeof t=="function"?D5(t):(t instanceof IDBTransaction&&M5(t),T5(t,A5())?new Proxy(t,pm):t)}function vs(t){if(t instanceof IDBRequest)return R5(t);if(Qh.has(t))return Qh.get(t);const e=L5(t);return e!==t&&(Qh.set(t,e),ep.set(e,t)),e}const Gh=t=>ep.get(t);function P5(t,e,{blocked:n,upgrade:a,blocking:s,terminated:i}={}){const l=indexedDB.open(t,e),o=vs(l);return a&&l.addEventListener("upgradeneeded",c=>{a(vs(l.result),c.oldVersion,c.newVersion,vs(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const U5=["get","getKey","getAll","getAllKeys","count"],B5=["put","add","delete","clear"],$h=new Map;function nx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,s=B5.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(s||U5.includes(n)))return;const i=async function(l,...o){const c=this.transaction(l,s?"readwrite":"readonly");let u=c.store;return a&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&c.done]))[0]};return $h.set(e,i),i}O5(t=>({...t,get:(e,n,a)=>nx(e,n)||t.get(e,n,a),has:(e,n)=>!!nx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H5(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function H5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nu="@firebase/app",ym="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new Jg("@firebase/app"),F5="@firebase/app-compat",V5="@firebase/analytics-compat",Q5="@firebase/analytics",G5="@firebase/app-check-compat",$5="@firebase/app-check",W5="@firebase/auth",Y5="@firebase/auth-compat",K5="@firebase/database",q5="@firebase/data-connect",X5="@firebase/database-compat",Z5="@firebase/functions",J5="@firebase/functions-compat",eT="@firebase/installations",tT="@firebase/installations-compat",nT="@firebase/messaging",aT="@firebase/messaging-compat",sT="@firebase/performance",iT="@firebase/performance-compat",rT="@firebase/remote-config",lT="@firebase/remote-config-compat",oT="@firebase/storage",cT="@firebase/storage-compat",uT="@firebase/firestore",dT="@firebase/ai",hT="@firebase/firestore-compat",fT="firebase",mT="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="[DEFAULT]",gT={[Nu]:"fire-core",[F5]:"fire-core-compat",[Q5]:"fire-analytics",[V5]:"fire-analytics-compat",[$5]:"fire-app-check",[G5]:"fire-app-check-compat",[W5]:"fire-auth",[Y5]:"fire-auth-compat",[K5]:"fire-rtdb",[q5]:"fire-data-connect",[X5]:"fire-rtdb-compat",[Z5]:"fire-fn",[J5]:"fire-fn-compat",[eT]:"fire-iid",[tT]:"fire-iid-compat",[nT]:"fire-fcm",[aT]:"fire-fcm-compat",[sT]:"fire-perf",[iT]:"fire-perf-compat",[rT]:"fire-rc",[lT]:"fire-rc-compat",[oT]:"fire-gcs",[cT]:"fire-gcs-compat",[uT]:"fire-fst",[hT]:"fire-fst-compat",[dT]:"fire-vertex","fire-js":"fire-js",[fT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Map,fo=new Map,mo=new Map;function ax(t,e){try{t.container.addComponent(e)}catch(n){Ua.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function UD(t,e){t.container.addOrOverwriteComponent(e)}function Er(t){const e=t.name;if(mo.has(e))return Ua.debug(`There were multiple attempts to register component ${e}.`),!1;mo.set(e,t);for(const n of xi.values())ax(n,t);for(const n of fo.values())ax(n,t);return!0}function wd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function BD(t,e,n=Su){wd(t,e).clearInstance(n)}function aw(t){return t.options!==void 0}function pT(t){return aw(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Ke(t){return t==null?!1:t.settings!==void 0}function zD(){mo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fn=new Fo("app","Firebase",yT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t,e){const n=uo(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,i=new Date().getTime();s-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class xT extends sw{constructor(e,n,a,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,l={name:a,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,l,s);else{const o=e;super(o.options,l,s)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&sx(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&sx(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,_s(Nu,ym,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){vT(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw fn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=mT;function bT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const a={name:Su,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw fn.create("bad-app-name",{appName:String(s)});if(n||(n=Kg()),!n)throw fn.create("no-options");const i=xi.get(s);if(i){if(pi(n,i.options)&&pi(a,i.config))return i;throw fn.create("duplicate-app",{appName:s})}const l=new Xg(s);for(const c of mo.values())l.addComponent(c);const o=new sw(n,a,l);return xi.set(s,o),o}function HD(t,e={}){if(i5()&&!X1())throw fn.create("invalid-server-app-environment");let n,a=e||{};if(t&&(aw(t)?n=t.options:pT(t)?a=t:n=t),a.automaticDataCollectionEnabled===void 0&&(a.automaticDataCollectionEnabled=!0),n||(n=Kg()),!n)throw fn.create("no-options");const s={...a,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=f=>[...f].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(a.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw fn.create("finalization-registry-not-supported",{});const l=""+i(JSON.stringify(s)),o=fo.get(l);if(o)return o.incRefCount(a.releaseOnDeref),o;const c=new Xg(l);for(const f of mo.values())c.addComponent(f);const u=new xT(n,a,l,c);return fo.set(l,u),u}function iw(t=Su){const e=xi.get(t);if(!e&&t===Su&&Kg())return bT();if(!e)throw fn.create("no-app",{appName:t});return e}function FD(){return Array.from(xi.values())}async function vT(t){let e=!1;const n=t.name;xi.has(n)?(e=!0,xi.delete(n)):fo.has(n)&&t.decRefCount()<=0&&(fo.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(a=>a.delete())),t.isDeleted=!0)}function _s(t,e,n){let a=gT[t]??t;n&&(a+=`-${n}`);const s=a.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ua.warn(l.join(" "));return}Er(new Pa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function VD(t,e){if(t!==null&&typeof t!="function")throw fn.create("invalid-log-argument");j5(t,e)}function QD(t){E5(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="firebase-heartbeat-database",wT=1,go="firebase-heartbeat-store";let Wh=null;function rw(){return Wh||(Wh=P5(_T,wT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(go)}catch(n){console.warn(n)}}}}).catch(t=>{throw fn.create("idb-open",{originalErrorMessage:t.message})})),Wh}async function kT(t){try{const n=(await rw()).transaction(go),a=await n.objectStore(go).get(lw(t));return await n.done,a}catch(e){if(e instanceof Hs)Ua.warn(e.message);else{const n=fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ua.warn(n.message)}}}async function ix(t,e){try{const a=(await rw()).transaction(go,"readwrite");await a.objectStore(go).put(e,lw(t)),await a.done}catch(n){if(n instanceof Hs)Ua.warn(n.message);else{const a=fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ua.warn(a.message)}}}function lw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=1024,NT=30;class ST{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jT(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>NT){const l=TT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ua.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rx(),{heartbeatsToSend:a,unsentEntries:s}=ET(this._heartbeatsCache.heartbeats),i=wu(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ua.warn(n),""}}}function rx(){return new Date().toISOString().substring(0,10)}function ET(t,e=CT){const n=[];let a=t.slice();for(const s of t){const i=n.find(l=>l.agent===s.agent);if(i){if(i.dates.push(s.date),lx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lx(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class jT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u5()?d5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function lx(t){return wu(JSON.stringify({version:2,heartbeats:t})).length}function TT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let a=1;a<t.length;a++)t[a].date<n&&(n=t[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t){Er(new Pa("platform-logger",e=>new z5(e),"PRIVATE")),Er(new Pa("heartbeat",e=>new ST(e),"PRIVATE")),_s(Nu,ym,t),_s(Nu,ym,"esm2020"),_s("fire-js","")}AT("");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT={PHONE:"phone",TOTP:"totp"},RT={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},MT={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},OT={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},DT={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PT=LT,cw=ow,uw=new Fo("auth","Firebase",ow()),UT={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Jg("@firebase/auth");function BT(t,...e){Eu.logLevel<=ve.WARN&&Eu.warn(`Auth (${Gr}): ${t}`,...e)}function Hc(t,...e){Eu.logLevel<=ve.ERROR&&Eu.error(`Auth (${Gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw np(t,...e)}function zt(t,...e){return np(t,...e)}function tp(t,e,n){const a={...cw(),[e]:n};return new Fo("auth","Firebase",a).create(e,{appName:t.name})}function kt(t){return tp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $r(t,e,n){const a=n;if(!(e instanceof a))throw a.name!==e.constructor.name&&Zt(t,"argument-error"),tp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function np(t,...e){if(typeof t!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=t.name),t._errorFactory.create(n,...a)}return uw.create(t,...e)}function R(t,e,...n){if(!t)throw np(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function Ba(t,e){t||Zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ap(){return ox()==="http:"||ox()==="https:"}function ox(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ap()||l5()||"connection"in navigator)?navigator.onLine:!0}function HT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ba(n>e,"Short delay should be less than long delay!"),this.isMobile=qg()||Z1()}get(){return zT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e){Ba(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QT=new Vo(3e4,6e4);function ze(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function He(t,e,n,a,s={}){return hw(t,s,async()=>{let i={},l={};a&&(e==="GET"?l=a:i={body:JSON.stringify(a)});const o=Ai({key:t.config.apiKey,...l}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return r5()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(u.credentials="include"),dw.fetch()(await fw(t,t.config.apiHost,n,o),u)})}async function hw(t,e,n){t._canInitEmulator=!1;const a={...FT,...e};try{const s=new $T(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await i.json();if("needConfirmation"in l)throw kl(t,"account-exists-with-different-credential",l);if(i.ok&&!("errorMessage"in l))return l;{const o=i.ok?l.errorMessage:l.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kl(t,"credential-already-in-use",l);if(c==="EMAIL_EXISTS")throw kl(t,"email-already-in-use",l);if(c==="USER_DISABLED")throw kl(t,"user-disabled",l);const f=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw tp(t,f,u);Zt(t,f)}}catch(s){if(s instanceof Hs)throw s;Zt(t,"network-request-failed",{message:String(s)})}}async function Ga(t,e,n,a,s={}){const i=await He(t,e,n,a,s);return"mfaPendingCredential"in i&&Zt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fw(t,e,n,a){const s=`${e}${n}?${a}`,i=t,l=i.config.emulator?sp(t.config,s):`${t.config.apiScheme}://${s}`;return VT.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(l).toString():l}function GT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $T{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(zt(this.auth,"network-request-failed")),QT.get())})}}function kl(t,e,n){const a={appName:t.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const s=zt(t,e,a);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){return t!==void 0&&t.getResponse!==void 0}function ux(t){return t!==void 0&&t.enterprise!==void 0}class mw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return GT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(t){return(await He(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function gw(t,e){return He(t,"GET","/v2/recaptchaConfig",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(t,e){return He(t,"POST","/v1/accounts:delete",e)}async function KT(t,e){return He(t,"POST","/v1/accounts:update",e)}async function ju(t,e){return He(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t,e=!1){return $(t).getIdToken(e)}async function pw(t,e=!1){const n=$(t),a=await n.getIdToken(e),s=kd(a);R(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,l=i==null?void 0:i.sign_in_provider;return{claims:s,token:a,authTime:zl(Yh(s.auth_time)),issuedAtTime:zl(Yh(s.iat)),expirationTime:zl(Yh(s.exp)),signInProvider:l||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Yh(t){return Number(t)*1e3}function kd(t){const[e,n,a]=t.split(".");if(e===void 0||n===void 0||a===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const s=uo(n);return s?JSON.parse(s):(Hc("Failed to decode base64 JWT payload"),null)}catch(s){return Hc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dx(t){const e=kd(t);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Hs&&XT(a)&&t.auth.currentUser===t&&await t.auth.signOut(),a}}function XT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t){var d;const e=t.auth,n=await t.getIdToken(),a=await za(t,ju(e,{idToken:n}));R(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const i=(d=s.providerUserInfo)!=null&&d.length?xw(s.providerUserInfo):[],l=JT(t.providerData,i),o=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),u=o?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new xm(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function yw(t){const e=$(t);await yo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JT(t,e){return[...t.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function xw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(t,e){const n=await hw(t,{},async()=>{const a=Ai({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,l=await fw(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:a};return t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(c.credentials="include"),dw.fetch()(l,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tA(t,e){return He(t,"POST","/v2/accounts:revokeToken",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){R(e.length!==0,"internal-error");const n=dx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(R(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:s,expiresIn:i}=await eA(e,n);this.updateTokensAndExpiration(a,s,Number(i))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:s,expirationTime:i}=n,l=new ur;return a&&(R(typeof a=="string","internal-error",{appName:e}),l.refreshToken=a),s&&(R(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),i&&(R(typeof i=="number","internal-error",{appName:e}),l.expirationTime=i),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ur,this.toJSON())}_performRefresh(){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){R(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pn{constructor({uid:e,auth:n,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new ZT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await za(this,this.stsTokenManager.getToken(this.auth,e));return R(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pw(this,e)}reload(){return yw(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await yo(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ke(this.auth.app))return Promise.reject(kt(this.auth));const e=await this.getIdToken();return await za(this,YT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,l=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:m,providerData:v,stsTokenManager:b}=n;R(d&&b,e,"internal-error");const w=ur.fromJSON(this.name,b);R(typeof d=="string",e,"internal-error"),Ka(a,e.name),Ka(s,e.name),R(typeof h=="boolean",e,"internal-error"),R(typeof m=="boolean",e,"internal-error"),Ka(i,e.name),Ka(l,e.name),Ka(o,e.name),Ka(c,e.name),Ka(u,e.name),Ka(f,e.name);const y=new Pn({uid:d,auth:e,email:s,emailVerified:h,displayName:a,isAnonymous:m,photoURL:l,phoneNumber:i,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return v&&Array.isArray(v)&&(y.providerData=v.map(g=>({...g}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,n,a=!1){const s=new ur;s.updateFromServerResponse(n);const i=new Pn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await yo(i),i}static async _fromGetAccountInfoResponse(e,n,a){const s=n.users[0];R(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xw(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new ur;o.updateFromIdToken(a);const c=new Pn({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:l}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Map;function ka(t){Ba(t instanceof Function,"Expected a class definition");let e=hx.get(t);return e?(Ba(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bw.type="NONE";const bm=bw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){return`firebase:${t}:${e}:${n}`}class dr{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:s,name:i}=this.auth;this.fullUserKey=Fc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Fc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ju(this.auth,{idToken:e}).catch(()=>{});return n?Pn._fromGetAccountInfoResponse(this.auth,n,e):null}return Pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new dr(ka(bm),e,a);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||ka(bm);const l=Fc(a,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(l);if(f){let d;if(typeof f=="string"){const h=await ju(e,{idToken:f}).catch(()=>{});if(!h)break;d=await Pn._fromGetAccountInfoResponse(e,h,f)}else d=Pn._fromJSON(e,f);u!==i&&(o=d),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new dr(i,e,a):(i=c[0],o&&await i._set(l,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(l)}catch{}})),new dr(i,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nw(e))return"Blackberry";if(Sw(e))return"Webos";if(_w(e))return"Safari";if((e.includes("chrome/")||ww(e))&&!e.includes("edge/"))return"Chrome";if(Cw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=t.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function vw(t=Ht()){return/firefox\//i.test(t)}function _w(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ww(t=Ht()){return/crios\//i.test(t)}function kw(t=Ht()){return/iemobile/i.test(t)}function Cw(t=Ht()){return/android/i.test(t)}function Nw(t=Ht()){return/blackberry/i.test(t)}function Sw(t=Ht()){return/webos/i.test(t)}function ip(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nA(t=Ht()){var e;return ip(t)&&!!((e=window.navigator)!=null&&e.standalone)}function aA(){return o5()&&document.documentMode===10}function Ew(t=Ht()){return ip(t)||Cw(t)||Sw(t)||Nw(t)||/windows phone/i.test(t)||kw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e=[]){let n;switch(t){case"Browser":n=fx(Ht());break;case"Worker":n=`${fx(Ht())}-${t}`;break;default:n=t}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gr}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=i=>new Promise((l,o)=>{try{const c=e(i);l(c)}catch(c){o(c)}});a.onAbort=n,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e={}){return He(t,"GET","/v2/passwordPolicy",ze(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=6;class lA{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,a,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mx(this),this.idTokenSubscription=new mx(this),this.beforeStateQueue=new sA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ka(n)),this._initializationPromise=this.queue(async()=>{var a,s,i;if(!this._deleted&&(this.persistenceManager=await dr.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ju(this,{idToken:e}),a=await Pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ke(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(i=this.redirectUser)==null?void 0:i._redirectEventId,o=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===o)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ke(this.app))return Promise.reject(kt(this));const n=e?$(e):null;return n&&R(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ke(this.app)?Promise.reject(kt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ke(this.app)?Promise.reject(kt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ka(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iA(this),n=new lA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fo("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await tA(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ka(e)||this._popupRedirectResolver;R(n,this,"argument-error"),this.redirectPersistenceManager=await dr.create(this,[ka(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let l=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(o,this,"internal-error"),o.then(()=>{l||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,a,s);return()=>{l=!0,c()}}else{const c=e.addObserver(n);return()=>{l=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(Ke(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&BT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tt(t){return $(t)}class mx{constructor(e){this.auth=e,this.observer=null,this.addObserver=x5(n=>this.observer=n)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cA(t){Qo=t}function rp(t){return Qo.loadJS(t)}function uA(){return Qo.recaptchaV2Script}function dA(){return Qo.recaptchaEnterpriseScript}function hA(){return Qo.gapiScript}function Tw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=500,mA=6e4,wc=1e12;class gA{constructor(e){this.auth=e,this.counter=wc,this._widgets=new Map}render(e,n){const a=this.counter;return this._widgets.set(a,new xA(e,this.auth.name,n||{})),this.counter++,a}reset(e){var a;const n=e||wc;(a=this._widgets.get(n))==null||a.delete(),this._widgets.delete(n)}getResponse(e){var a;const n=e||wc;return((a=this._widgets.get(n))==null?void 0:a.getResponse())||""}async execute(e){var a;const n=e||wc;return(a=this._widgets.get(n))==null||a.execute(),""}}class pA{constructor(){this.enterprise=new yA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xA{constructor(e,n,a){this.params=a,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;R(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=bA(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},mA)},fA))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function bA(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let a=0;a<t;a++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const vA="recaptcha-enterprise",Hl="NO_RECAPTCHA";class Aw{constructor(e){this.type=vA,this.auth=tt(e)}async verify(e="verify",n=!1){async function a(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(l,o)=>{gw(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mw(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,l(u.siteKey)}}).catch(c=>{o(c)})})}function s(i,l,o){const c=window.grecaptcha;ux(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{l(u)}).catch(()=>{l(Hl)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pA().execute("siteKey",{action:"verify"}):new Promise((i,l)=>{a(this.auth).then(o=>{if(!n&&ux(window.grecaptcha))s(o,i,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let c=dA();c.length!==0&&(c+=o),rp(c).then(()=>{s(o,i,l)}).catch(u=>{l(u)})}}).catch(o=>{l(o)})})}}async function ul(t,e,n,a=!1,s=!1){const i=new Aw(t);let l;if(s)l=Hl;else try{l=await i.verify(n)}catch{l=await i.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return a?Object.assign(o,{captchaResp:l}):Object.assign(o,{captchaResponse:l}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ws(t,e,n,a,s){var i,l;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ul(t,e,n,n==="getOobCode");return a(t,o)}else return a(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await ul(t,e,n,n==="getOobCode");return a(t,c)}else return Promise.reject(o)});else if(s==="PHONE_PROVIDER")if((l=t._getRecaptchaConfig())!=null&&l.isProviderEnabled("PHONE_PROVIDER")){const o=await ul(t,e,n);return a(t,o).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await ul(t,e,n,!1,!0);return a(t,f)}return Promise.reject(c)})}else{const o=await ul(t,e,n,!1,!0);return a(t,o)}else return Promise.reject(s+" provider is not supported.")}async function Iw(t){const e=tt(t),n=await gw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new mw(n);e.tenantId==null?e._agentRecaptchaConfig=a:e._tenantRecaptchaConfigs[e.tenantId]=a,a.isAnyProviderEnabled()&&new Aw(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t,e){const n=wd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(pi(i,e??{}))return s;Zt(s,"already-initialized")}return n.initialize({options:e})}function _A(t,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(ka);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function Mw(t,e,n){const a=tt(t);R(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Ow(e),{host:l,port:o}=wA(e),c=o===null?"":`:${o}`,u={url:`${i}//${l}${c}/`},f=Object.freeze({host:l,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){R(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),R(pi(u,a.config.emulator)&&pi(f,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=u,a.emulatorConfig=f,a.settings.appVerificationDisabledForTesting=!0,Qr(l)?(K1(`${i}//${l}${c}`),q1("Auth",!0)):s||kA()}function Ow(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wA(t){const e=Ow(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const i=s[1];return{host:i,port:gx(a.substr(i.length+1))}}else{const[i,l]=a.split(":");return{host:i,port:gx(l)}}}function gx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(t,e){return He(t,"POST","/v1/accounts:resetPassword",ze(t,e))}async function CA(t,e){return He(t,"POST","/v1/accounts:update",e)}async function NA(t,e){return He(t,"POST","/v1/accounts:signUp",e)}async function SA(t,e){return He(t,"POST","/v1/accounts:update",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(t,e){return Ga(t,"POST","/v1/accounts:signInWithPassword",ze(t,e))}async function Cd(t,e){return He(t,"POST","/v1/accounts:sendOobCode",ze(t,e))}async function jA(t,e){return Cd(t,e)}async function TA(t,e){return Cd(t,e)}async function AA(t,e){return Cd(t,e)}async function IA(t,e){return Cd(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t,e){return Ga(t,"POST","/v1/accounts:signInWithEmailLink",ze(t,e))}async function MA(t,e){return Ga(t,"POST","/v1/accounts:signInWithEmailLink",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Wr{constructor(e,n,a,s=null){super("password",a),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jr(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new jr(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ws(e,n,"signInWithPassword",EA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return RA(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ws(e,a,"signUpPassword",NA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MA(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t,e){return Ga(t,"POST","/v1/accounts:signInWithIdp",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class na extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...i}=n;if(!a||!s)return null;const l=new na(a,s);return l.idToken=i.idToken||void 0,l.accessToken=i.accessToken||void 0,l.secret=i.secret,l.nonce=i.nonce,l.pendingToken=i.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Ta(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Ta(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ta(e,n)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ai(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(t,e){return He(t,"POST","/v1/accounts:sendVerificationCode",ze(t,e))}async function DA(t,e){return Ga(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,e))}async function LA(t,e){const n=await Ga(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,e));if(n.temporaryProof)throw kl(t,"account-exists-with-different-credential",n);return n}const PA={USER_NOT_FOUND:"user-not-found"};async function UA(t,e){const n={...e,operation:"REAUTH"};return Ga(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,n),PA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Wr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ks({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ks({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return DA(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return LA(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return UA(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:a,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:a,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:a,phoneNumber:s,temporaryProof:i}=e;return!a&&!n&&!s&&!i?null:new ks({verificationId:n,verificationCode:a,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zA(t){const e=_l(wl(t)).link,n=e?_l(wl(e)).deep_link_id:null,a=_l(wl(t)).deep_link_id;return(a?_l(wl(a)).link:null)||a||n||e||t}class Yr{constructor(e){const n=_l(wl(e)),a=n.apiKey??null,s=n.oobCode??null,i=BA(n.mode??null);R(a&&s&&i,"argument-error"),this.apiKey=a,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=zA(e);try{return new Yr(n)}catch{return null}}}function HA(t){return Yr.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.providerId=Fs.PROVIDER_ID}static credential(e,n){return jr._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Yr.parseLink(n);return R(a,"argument-error"),jr._fromEmailAndCode(e,a.code,a.tenantId)}}Fs.PROVIDER_ID="password";Fs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends $a{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fl extends Kr{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return R("providerId"in n&&"signInMethod"in n,"argument-error"),na._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return R(e.idToken||e.accessToken,"argument-error"),na._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Fl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a,oauthTokenSecret:s,pendingToken:i,nonce:l,providerId:o}=e;if(!a&&!s&&!n&&!i||!o)return null;try{return new Fl(o)._credential({idToken:n,accessToken:a,nonce:l,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Kr{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pa.credential(e.oauthAccessToken)}catch{return null}}}pa.FACEBOOK_SIGN_IN_METHOD="facebook.com";pa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Kr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return na._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return ya.credential(n,a)}catch{return null}}}ya.GOOGLE_SIGN_IN_METHOD="google.com";ya.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Kr{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xa.credential(e.oauthAccessToken)}catch{return null}}}xa.GITHUB_SIGN_IN_METHOD="github.com";xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="http://localhost";class xo extends Wr{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ta(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Ta(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ta(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,pendingToken:i}=n;return!a||!s||!i||a!==s?null:new xo(a,i)}static _create(e,n){return new xo(e,n)}buildRequest(){return{requestUri:FA,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="saml.";class Tu extends $a{constructor(e){R(e.startsWith(VA),"argument-error"),super(e)}static credentialFromResult(e){return Tu.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Tu.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=xo.fromJSON(e);return R(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:a}=e;if(!n||!a)return null;try{return xo._create(a,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Kr{constructor(){super("twitter.com")}static credential(e,n){return na._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return ba.credential(n,a)}catch{return null}}}ba.TWITTER_SIGN_IN_METHOD="twitter.com";ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lw(t,e){return Ga(t,"POST","/v1/accounts:signUp",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,s=!1){const i=await Pn._fromIdTokenResponse(e,a,s),l=yx(a);return new An({user:i,providerId:l,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const s=yx(a);return new An({user:e,providerId:s,_tokenResponse:a,operationType:n})}}function yx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(t){var s;if(Ke(t.app))return Promise.reject(kt(t));const e=tt(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new An({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await Lw(e,{returnSecureToken:!0}),a=await An._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Hs{constructor(e,n,a,s){super(n.code,n.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,s){return new Au(e,n,a,s)}}function Pw(t,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Au._fromErrorAndOperation(t,i,e,a):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e){const n=$(t);await Nd(!0,n,e);const{providerUserInfo:a}=await KT(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=Uw(a||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function lp(t,e,n=!1){const a=await za(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return An._forOperation(t,"link",a)}async function Nd(t,e,n){await yo(e);const a=Uw(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";R(a.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(t,e,n=!1){const{auth:a}=t;if(Ke(a.app))return Promise.reject(kt(a));const s="reauthenticate";try{const i=await za(t,Pw(a,s,e,t),n);R(i.idToken,a,"internal-error");const l=kd(i.idToken);R(l,a,"internal-error");const{sub:o}=l;return R(t.uid===o,a,"user-mismatch"),An._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zt(a,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(t,e,n=!1){if(Ke(t.app))return Promise.reject(kt(t));const a="signIn",s=await Pw(t,a,e),i=await An._fromIdTokenResponse(t,a,s);return n||await t._updateCurrentUser(i.user),i}async function Sd(t,e){return zw(tt(t),e)}async function Hw(t,e){const n=$(t);return await Nd(!1,n,e.providerId),lp(n,e)}async function Fw(t,e){return Bw($(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e){return Ga(t,"POST","/v1/accounts:signInWithCustomToken",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e){if(Ke(t.app))return Promise.reject(kt(t));const n=tt(t),a=await $A(n,{token:e,returnSecureToken:!0}),s=await An._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?op._fromServerResponse(e,n):"totpInfo"in n?cp._fromServerResponse(e,n):Zt(e,"internal-error")}}class op extends Go{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new op(n)}}class cp extends Go{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new cp(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t,e,n){var a;R(((a=n.url)==null?void 0:a.length)>0,t,"invalid-continue-uri"),R(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),R(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(R(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(R(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function up(t){const e=tt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YA(t,e,n){const a=tt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Ed(a,s,n),await ws(a,s,"getOobCode",TA,"EMAIL_PASSWORD_PROVIDER")}async function KA(t,e,n){await Dw($(t),{oobCode:e,newPassword:n}).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&up(t),a})}async function qA(t,e){await SA($(t),{oobCode:e})}async function Vw(t,e){const n=$(t),a=await Dw(n,{oobCode:e}),s=a.requestType;switch(R(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":R(a.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":R(a.mfaInfo,n,"internal-error");default:R(a.email,n,"internal-error")}let i=null;return a.mfaInfo&&(i=Go._fromServerResponse(tt(n),a.mfaInfo)),{data:{email:(a.requestType==="VERIFY_AND_CHANGE_EMAIL"?a.newEmail:a.email)||null,previousEmail:(a.requestType==="VERIFY_AND_CHANGE_EMAIL"?a.email:a.newEmail)||null,multiFactorInfo:i},operation:s}}async function XA(t,e){const{data:n}=await Vw($(t),e);return n.email}async function Qw(t,e,n){if(Ke(t.app))return Promise.reject(kt(t));const a=tt(t),l=await ws(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lw,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&up(t),c}),o=await An._fromIdTokenResponse(a,"signIn",l);return await a._updateCurrentUser(o.user),o}function Gw(t,e,n){return Ke(t.app)?Promise.reject(kt(t)):Sd($(t),Fs.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&up(t),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e,n){const a=tt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(l,o){R(o.handleCodeInApp,a,"argument-error"),o&&Ed(a,l,o)}i(s,n),await ws(a,s,"getOobCode",AA,"EMAIL_PASSWORD_PROVIDER")}function JA(t,e){const n=Yr.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function e4(t,e,n){if(Ke(t.app))return Promise.reject(kt(t));const a=$(t),s=Fs.credentialWithLink(e,n||po());return R(s._tenantId===(a.tenantId||null),a,"tenant-id-mismatch"),Sd(a,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(t,e){return He(t,"POST","/v1/accounts:createAuthUri",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t,e){const n=ap()?po():"http://localhost",a={identifier:e,continueUri:n},{signinMethods:s}=await t4($(t),a);return s||[]}async function a4(t,e){const n=$(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Ed(n.auth,s,e);const{email:i}=await jA(n.auth,s);i!==t.email&&await t.reload()}async function s4(t,e,n){const a=$(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Ed(a.auth,i,n);const{email:l}=await IA(a.auth,i);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,e){return He(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const a=$(t),i={idToken:await a.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await za(a,i4(a.auth,i));a.displayName=l.displayName||null,a.photoURL=l.photoUrl||null;const o=a.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=a.displayName,o.photoURL=a.photoURL),await a._updateTokensIfNecessary(l)}function l4(t,e){const n=$(t);return Ke(n.auth.app)?Promise.reject(kt(n.auth)):$w(n,e,null)}function o4(t,e){return $w($(t),null,e)}async function $w(t,e,n){const{auth:a}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const l=await za(t,CA(a,i));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t){var s,i;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const l=(i=(s=kd(t.idToken))==null?void 0:s.firebase)==null?void 0:i.sign_in_provider;if(l){const o=l!=="anonymous"&&l!=="custom"?l:null;return new hr(a,o)}}if(!e)return null;switch(e){case"facebook.com":return new u4(a,n);case"github.com":return new d4(a,n);case"google.com":return new h4(a,n);case"twitter.com":return new f4(a,n,t.screenName||null);case"custom":case"anonymous":return new hr(a,null);default:return new hr(a,e,n)}}class hr{constructor(e,n,a={}){this.isNewUser=e,this.providerId=n,this.profile=a}}class Ww extends hr{constructor(e,n,a,s){super(e,n,a),this.username=s}}class u4 extends hr{constructor(e,n){super(e,"facebook.com",n)}}class d4 extends Ww{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class h4 extends hr{constructor(e,n){super(e,"google.com",n)}}class f4 extends Ww{constructor(e,n,a){super(e,"twitter.com",n,a)}}function m4(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:c4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t,e){return $(t).setPersistence(e)}function p4(t){return Iw(t)}async function y4(t,e){return tt(t).validatePassword(e)}function Yw(t,e,n,a){return $(t).onIdTokenChanged(e,n,a)}function Kw(t,e,n){return $(t).beforeAuthStateChanged(e,n)}function qw(t,e,n,a){return $(t).onAuthStateChanged(e,n,a)}function x4(t){$(t).useDeviceLanguage()}function b4(t,e){return $(t).updateCurrentUser(e)}function Iu(t){return $(t).signOut()}function v4(t,e){return tt(t).revokeAccessToken(e)}async function _4(t){return $(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,a){this.type=e,this.credential=n,this.user=a}static _fromIdtoken(e,n){return new ti("enroll",e,n)}static _fromMfaPendingCredential(e){return new ti("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,a;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return ti._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((a=e.multiFactorSession)!=null&&a.idToken)return ti._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,a){this.session=e,this.hints=n,this.signInResolver=a}static _fromError(e,n){const a=tt(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(o=>Go._fromServerResponse(a,o));R(s.mfaPendingCredential,a,"internal-error");const l=ti._fromMfaPendingCredential(s.mfaPendingCredential);return new dp(l,i,async o=>{const c=await o._process(a,l);delete s.mfaInfo,delete s.mfaPendingCredential;const u={...s,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const f=await An._fromIdTokenResponse(a,n.operationType,u);return await a._updateCurrentUser(f.user),f;case"reauthenticate":return R(n.user,a,"internal-error"),An._forOperation(n.user,n.operationType,u);default:Zt(a,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function w4(t,e){var s;const n=$(t),a=e;return R(e.customData.operationType,n,"argument-error"),R((s=a.customData._serverResponse)==null?void 0:s.mfaPendingCredential,n,"argument-error"),dp._fromError(n,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e){return He(t,"POST","/v2/accounts/mfaEnrollment:start",ze(t,e))}function k4(t,e){return He(t,"POST","/v2/accounts/mfaEnrollment:finalize",ze(t,e))}function C4(t,e){return He(t,"POST","/v2/accounts/mfaEnrollment:start",ze(t,e))}function N4(t,e){return He(t,"POST","/v2/accounts/mfaEnrollment:finalize",ze(t,e))}function S4(t,e){return He(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ze(t,e))}class hp{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(a=>Go._fromServerResponse(e.auth,a)))})}static _fromUser(e){return new hp(e)}async getSession(){return ti._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const a=e,s=await this.getSession(),i=await za(this.user,a._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,a=await this.user.getIdToken();try{const s=await za(this.user,S4(this.user.auth,{idToken:a,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Kh=new WeakMap;function E4(t){const e=$(t);return Kh.has(e)||Kh.set(e,hp._fromUser(e)),Kh.get(e)}const Ru="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ru,"1"),this.storage.removeItem(Ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=1e3,T4=10;class Zw extends Xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),s=this.localCache[n];a!==s&&e(n,s,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,o,c)=>{this.notifyListeners(l,c)});return}const a=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(a);!n&&this.localCache[a]===l||this.notifyListeners(a,l)},i=this.storage.getItem(a);aA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,T4):s()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zw.type="LOCAL";const Jw=Zw;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=1e3;function qh(t){var a;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((a=document.cookie.match(n))==null?void 0:a[1])??null}function Xh(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class ek{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Xh(e);if(window.cookieStore){const a=await window.cookieStore.get(n);return a==null?void 0:a.value}return qh(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const a=Xh(e);document.cookie=`${a}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const a=Xh(e);if(window.cookieStore){const o=u=>{const f=u.changed.find(h=>h.name===a);f&&n(f.value),u.deleted.find(h=>h.name===a)&&n(null)},c=()=>window.cookieStore.removeEventListener("change",o);return this.listenerUnsubscribes.set(n,c),window.cookieStore.addEventListener("change",o)}let s=qh(a);const i=setInterval(()=>{const o=qh(a);o!==s&&(n(o),s=o)},A4),l=()=>clearInterval(i);this.listenerUnsubscribes.set(n,l)}_removeListener(e,n){const a=this.listenerUnsubscribes.get(n);a&&(a(),this.listenerUnsubscribes.delete(n))}}ek.type="COOKIE";const I4=ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk extends Xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tk.type="SESSION";const fp=tk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const a=new jd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:s,data:i}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const o=Array.from(l).map(async u=>u(n.origin,i)),c=await R4(o);n.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,l;return new Promise((o,c)=>{const u=Td("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},a);l={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(h.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return window}function O4(t){it().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(){return typeof it().WorkerGlobalScope<"u"&&typeof it().importScripts=="function"}async function D4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function P4(){return mp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="firebaseLocalStorageDb",U4=1,Mu="firebaseLocalStorage",ak="fbase_key";class $o{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(t,e){return t.transaction([Mu],e?"readwrite":"readonly").objectStore(Mu)}function B4(){const t=indexedDB.deleteDatabase(nk);return new $o(t).toPromise()}function vm(){const t=indexedDB.open(nk,U4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const a=t.result;try{a.createObjectStore(Mu,{keyPath:ak})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const a=t.result;a.objectStoreNames.contains(Mu)?e(a):(a.close(),await B4(),e(await vm()))})})}async function bx(t,e,n){const a=Ad(t,!0).put({[ak]:e,value:n});return new $o(a).toPromise()}async function z4(t,e){const n=Ad(t,!1).get(e),a=await new $o(n).toPromise();return a===void 0?null:a.value}function vx(t,e){const n=Ad(t,!0).delete(e);return new $o(n).toPromise()}const H4=800,F4=3;class sk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>F4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jd._getInstance(P4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await D4(),!this.activeServiceWorker)return;this.sender=new M4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await bx(e,Ru,"1"),await vx(e,Ru),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>bx(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>z4(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ad(s,!1).getAll();return new $o(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sk.type="LOCAL";const ik=sk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t,e){return He(t,"POST","/v2/accounts/mfaSignIn:start",ze(t,e))}function V4(t,e){return He(t,"POST","/v2/accounts/mfaSignIn:finalize",ze(t,e))}function Q4(t,e){return He(t,"POST","/v2/accounts/mfaSignIn:finalize",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=Tw("rcb"),G4=new Vo(3e4,6e4);class $4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=it().grecaptcha)!=null&&e.render)}load(e,n=""){return R(W4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&cx(it().grecaptcha)?Promise.resolve(it().grecaptcha):new Promise((a,s)=>{const i=it().setTimeout(()=>{s(zt(e,"network-request-failed"))},G4.get());it()[Zh]=()=>{it().clearTimeout(i),delete it()[Zh];const o=it().grecaptcha;if(!o||!cx(o)){s(zt(e,"internal-error"));return}const c=o.render;o.render=(u,f)=>{const d=c(u,f);return this.counter++,d},this.hostLanguage=n,a(o)};const l=`${uA()}?${Ai({onload:Zh,render:"explicit",hl:n})}`;rp(l).catch(()=>{clearTimeout(i),s(zt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=it().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function W4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Y4{async load(e){return new gA(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl="recaptcha",K4={theme:"light",type:"image"};class q4{constructor(e,n,a={...K4}){this.parameters=a,this.type=Vl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tt(e),this.isInvisible=this.parameters.size==="invisible",R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;R(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Y4:new $4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),a=n.getResponse(e);return a||new Promise(s=>{const i=l=>{l&&(this.tokenChangeListeners.delete(i),s(l))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){R(!this.parameters.sitekey,this.auth,"argument-error"),R(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(a=>a(n)),typeof e=="function")e(n);else if(typeof e=="string"){const a=it()[e];typeof a=="function"&&a(n)}}}assertNotDestroyed(){R(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){R(ap()&&!mp(),this.auth,"internal-error"),await X4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await WT(this.auth);R(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return R(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function X4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ks._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Z4(t,e,n){if(Ke(t.app))return Promise.reject(kt(t));const a=tt(t),s=await Id(a,e,$(n));return new gp(s,i=>Sd(a,i))}async function J4(t,e,n){const a=$(t);await Nd(!1,a,"phone");const s=await Id(a.auth,e,$(n));return new gp(s,i=>Hw(a,i))}async function eI(t,e,n){const a=$(t);if(Ke(a.auth.app))return Promise.reject(kt(a.auth));const s=await Id(a.auth,e,$(n));return new gp(s,i=>Fw(a,i))}async function Id(t,e,n){var a;if(!t._getRecaptchaConfig())try{await Iw(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){R(i.type==="enroll",t,"internal-error");const l={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ws(t,l,"mfaSmsEnrollment",async(f,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===Hl){R((n==null?void 0:n.type)===Vl,f,"argument-error");const h=await Jh(f,d,n);return xx(f,h)}return xx(f,d)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{R(i.type==="signin",t,"internal-error");const l=((a=s.multiFactorHint)==null?void 0:a.uid)||s.multiFactorUid;R(l,t,"missing-multi-factor-info");const o={mfaPendingCredential:i.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ws(t,o,"mfaSmsSignIn",async(d,h)=>{if(h.phoneSignInInfo.captchaResponse===Hl){R((n==null?void 0:n.type)===Vl,d,"argument-error");const m=await Jh(d,h,n);return _x(d,m)}return _x(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ws(t,i,"sendVerificationCode",async(u,f)=>{if(f.captchaResponse===Hl){R((n==null?void 0:n.type)===Vl,u,"argument-error");const d=await Jh(u,f,n);return px(u,d)}return px(u,f)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function tI(t,e){const n=$(t);if(Ke(n.auth.app))return Promise.reject(kt(n.auth));await lp(n,e)}async function Jh(t,e,n){R(n.type===Vl,t,"argument-error");const a=await n.verify();R(typeof a=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,l=s.phoneEnrollmentInfo.captchaResponse,o=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:a,captchaResponse:l,clientType:o,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,l=s.phoneSignInInfo.clientType,o=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:i,clientType:l,recaptchaVersion:o}}),s}else return Object.assign(s,{recaptchaToken:a}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.providerId=oi.PROVIDER_ID,this.auth=tt(e)}verifyPhoneNumber(e,n){return Id(this.auth,e,$(n))}static credential(e,n){return ks._fromVerification(e,n)}static credentialFromResult(e){const n=e;return oi.credentialFromTaggedObject(n)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:a}=e;return n&&a?ks._fromTokenResponse(n,a):null}}oi.PROVIDER_ID="phone";oi.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,e){return e?ka(e):(R(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Wr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ta(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ta(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nI(t){return zw(t.auth,new pp(t),t.bypassAuthState)}function aI(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),Bw(n,new pp(t),t.bypassAuthState)}async function sI(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),lp(n,new pp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n,a,s,i=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:s,tenantId:i,error:l,type:o}=e;if(l){this.reject(l);return}const c={auth:this.auth,requestUri:n,sessionId:a,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nI;case"linkViaPopup":case"linkViaRedirect":return sI;case"reauthViaPopup":case"reauthViaRedirect":return aI;default:Zt(this.auth,"internal-error")}}resolve(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Vo(2e3,1e4);async function rI(t,e,n){if(Ke(t.app))return Promise.reject(zt(t,"operation-not-supported-in-this-environment"));const a=tt(t);$r(t,e,$a);const s=Ii(a,n);return new Ca(a,"signInViaPopup",e,s).executeNotNull()}async function lI(t,e,n){const a=$(t);if(Ke(a.auth.app))return Promise.reject(zt(a.auth,"operation-not-supported-in-this-environment"));$r(a.auth,e,$a);const s=Ii(a.auth,n);return new Ca(a.auth,"reauthViaPopup",e,s,a).executeNotNull()}async function oI(t,e,n){const a=$(t);$r(a.auth,e,$a);const s=Ii(a.auth,n);return new Ca(a.auth,"linkViaPopup",e,s,a).executeNotNull()}class Ca extends rk{constructor(e,n,a,s,i){super(e,n,s,i),this.provider=a,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return R(e,this.auth,"internal-error"),e}async onExecution(){Ba(this.filter.length===1,"Popup operations only handle one event");const e=Td();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iI.get())};e()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="pendingRedirect",Vc=new Map;class uI extends rk{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Vc.get(this.auth._key());if(!e){try{const a=await dI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dI(t,e){const n=ok(e),a=lk(t);if(!await a._isAvailable())return!1;const s=await a._get(n)==="true";return await a._remove(n),s}async function yp(t,e){return lk(t)._set(ok(e),"true")}function hI(t,e){Vc.set(t._key(),e)}function lk(t){return ka(t._redirectPersistence)}function ok(t){return Fc(cI,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e,n){return mI(t,e,n)}async function mI(t,e,n){if(Ke(t.app))return Promise.reject(kt(t));const a=tt(t);$r(t,e,$a),await a._initializationPromise;const s=Ii(a,n);return await yp(s,a),s._openRedirect(a,e,"signInViaRedirect")}function gI(t,e,n){return pI(t,e,n)}async function pI(t,e,n){const a=$(t);if($r(a.auth,e,$a),Ke(a.auth.app))return Promise.reject(kt(a.auth));await a.auth._initializationPromise;const s=Ii(a.auth,n);await yp(s,a.auth);const i=await uk(a);return s._openRedirect(a.auth,e,"reauthViaRedirect",i)}function yI(t,e,n){return xI(t,e,n)}async function xI(t,e,n){const a=$(t);$r(a.auth,e,$a),await a.auth._initializationPromise;const s=Ii(a.auth,n);await Nd(!1,a,e.providerId),await yp(s,a.auth);const i=await uk(a);return s._openRedirect(a.auth,e,"linkViaRedirect",i)}async function bI(t,e){return await tt(t)._initializationPromise,ck(t,e,!1)}async function ck(t,e,n=!1){if(Ke(t.app))return Promise.reject(kt(t));const a=tt(t),s=Ii(a,e),l=await new uI(a,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await a._persistUserIfCurrent(l.user),await a._setRedirectUser(null,e)),l}async function uk(t){const e=Td(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=10*60*1e3;class _I{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!dk(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(zt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vI&&this.cachedEventUids.clear(),this.cachedEventUids.has(wx(e))}saveEventToCache(e){this.cachedEventUids.add(wx(e)),this.lastProcessedEventTime=Date.now()}}function wx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(t,e={}){return He(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NI=/^https?/;async function SI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kI(t);for(const n of e)try{if(EI(n))return}catch{}Zt(t,"unauthorized-domain")}function EI(t){const e=po(),{protocol:n,hostname:a}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&a===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===a}if(!NI.test(n))return!1;if(CI.test(t))return a===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=new Vo(3e4,6e4);function kx(){const t=it().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TI(t){return new Promise((e,n)=>{var s,i,l;function a(){kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kx(),n(zt(t,"network-request-failed"))},timeout:jI.get()})}if((i=(s=it().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((l=it().gapi)!=null&&l.load)a();else{const o=Tw("iframefcb");return it()[o]=()=>{gapi.load?a():n(zt(t,"network-request-failed"))},rp(`${hA()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function AI(t){return Qc=Qc||TI(t),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new Vo(5e3,15e3),RI="__/auth/iframe",MI="emulator/auth/iframe",OI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LI(t){const e=t.config;R(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sp(e,MI):`https://${t.config.authDomain}/${RI}`,a={apiKey:e.apiKey,appName:t.name,v:Gr},s=DI.get(t.config.apiHost);s&&(a.eid=s);const i=t._getFrameworks();return i.length&&(a.fw=i.join(",")),`${n}?${Ai(a).slice(1)}`}async function PI(t){const e=await AI(t),n=it().gapi;return R(n,t,"internal-error"),e.open({where:document.body,url:LI(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OI,dontclear:!0},a=>new Promise(async(s,i)=>{await a.restyle({setHideOnLeave:!1});const l=zt(t,"network-request-failed"),o=it().setTimeout(()=>{i(l)},II.get());function c(){it().clearTimeout(o),s(a)}a.ping(c).then(c,()=>{i(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BI=500,zI=600,HI="_blank",FI="http://localhost";class Cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VI(t,e,n,a=BI,s=zI){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-a)/2,0).toString();let o="";const c={...UI,width:a.toString(),height:s.toString(),top:i,left:l},u=Ht().toLowerCase();n&&(o=ww(u)?HI:n),vw(u)&&(e=e||FI,c.scrollbars="yes");const f=Object.entries(c).reduce((h,[m,v])=>`${h}${m}=${v},`,"");if(nA(u)&&o!=="_self")return QI(e||"",o),new Cx(null);const d=window.open(e||"",o,f);R(d,t,"popup-blocked");try{d.focus()}catch{}return new Cx(d)}function QI(t,e){const n=document.createElement("a");n.href=t,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="__/auth/handler",$I="emulator/auth/handler",WI=encodeURIComponent("fac");async function Nx(t,e,n,a,s,i){R(t.config.authDomain,t,"auth-domain-config-required"),R(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:a,v:Gr,eventId:s};if(e instanceof $a){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",ku(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))l[f]=d}if(e instanceof Kr){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(l.scopes=f.join(","))}t.tenantId&&(l.tid=t.tenantId);const o=l;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${WI}=${encodeURIComponent(c)}`:"";return`${YI(t)}?${Ai(o).slice(1)}${u}`}function YI({config:t}){return t.emulator?sp(t,$I):`https://${t.authDomain}/${GI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="webStorageSupport";class KI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fp,this._completeRedirectFn=ck,this._overrideRedirectResult=hI}async _openPopup(e,n,a,s){var l;Ba((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const i=await Nx(e,n,a,po(),s);return VI(e,i,Td())}async _openRedirect(e,n,a,s){await this._originValidation(e);const i=await Nx(e,n,a,po(),s);return O4(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ba(i,"If manager is not set, promise should be"),i)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await PI(e),a=new _I(e);return n.register("authEvent",s=>(R(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ef,{type:ef},s=>{var l;const i=(l=s==null?void 0:s[0])==null?void 0:l[ef];i!==void 0&&n(!!i),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ew()||_w()||ip()}}const hk=KI;class fk{constructor(e){this.factorId=e}_process(e,n,a){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,a);case"signin":return this._finalizeSignIn(e,n.credential);default:return Zn("unexpected MultiFactorSessionType")}}}class xp extends fk{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new xp(e)}_finalizeEnroll(e,n,a){return k4(e,{idToken:n,displayName:a,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return V4(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class mk{constructor(){}static assertion(e){return xp._fromCredential(e)}}mk.FACTOR_ID="phone";class gk{static assertionForEnrollment(e,n){return bo._fromSecret(e,n)}static assertionForSignIn(e,n){return bo._fromEnrollmentId(e,n)}static async generateSecret(e){var s;const n=e;R(typeof((s=n.user)==null?void 0:s.auth)<"u","internal-error");const a=await C4(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Rd._fromStartTotpMfaEnrollmentResponse(a,n.user.auth)}}gk.FACTOR_ID="totp";class bo extends fk{constructor(e,n,a){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=a}static _fromSecret(e,n){return new bo(n,void 0,e)}static _fromEnrollmentId(e,n){return new bo(n,e)}async _finalizeEnroll(e,n,a){return R(typeof this.secret<"u",e,"argument-error"),N4(e,{idToken:n,displayName:a,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){R(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const a={verificationCode:this.otp};return Q4(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:a})}}class Rd{constructor(e,n,a,s,i,l,o){this.sessionInfo=l,this.auth=o,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=a,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,n){return new Rd(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var s;let a=!1;return(kc(e)||kc(n))&&(a=!0),a&&(kc(e)&&(e=((s=this.auth.currentUser)==null?void 0:s.email)||"unknownuser"),kc(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function kc(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var Sx="@firebase/auth",Ex="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZI(t){Er(new Pa("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:l,authDomain:o}=a.options;R(l&&!l.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:l,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jw(t)},u=new oA(a,s,i,c);return _A(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Er(new Pa("auth-internal",e=>{const n=tt(e.getProvider("auth").getImmediate());return(a=>new qI(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(Sx,Ex,XI(t)),_s(Sx,Ex,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=5*60,e3=Y1("authIdTokenMaxAge")||JI;let jx=null;const t3=t=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>e3)return;const s=n==null?void 0:n.token;jx!==s&&(jx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function n3(t=iw()){const e=wd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Rw(t,{popupRedirectResolver:hk,persistence:[ik,Jw,fp]}),a=Y1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(a,location.origin);if(location.origin===i.origin){const l=t3(i.toString());Kw(n,l,()=>l(n.currentUser)),Yw(n,o=>l(o))}}const s=W1("auth");return s&&Mw(n,`http://${s}`),n}function a3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}cA({loadJS(t){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",t),a.onload=e,a.onerror=s=>{const i=zt("internal-error");i.customData=s,n(i)},a.type="text/javascript",a.charset="UTF-8",a3().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZI("Browser");const bp=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:DT,ActionCodeURL:Yr,AuthCredential:Wr,AuthErrorCodes:UT,EmailAuthCredential:jr,EmailAuthProvider:Fs,FacebookAuthProvider:pa,FactorId:IT,GithubAuthProvider:xa,GoogleAuthProvider:ya,OAuthCredential:na,OAuthProvider:Fl,OperationType:OT,PhoneAuthCredential:ks,PhoneAuthProvider:oi,PhoneMultiFactorGenerator:mk,ProviderId:RT,RecaptchaVerifier:q4,SAMLAuthProvider:Tu,SignInMethod:MT,TotpMultiFactorGenerator:gk,TotpSecret:Rd,TwitterAuthProvider:ba,applyActionCode:qA,beforeAuthStateChanged:Kw,browserCookiePersistence:I4,browserLocalPersistence:Jw,browserPopupRedirectResolver:hk,browserSessionPersistence:fp,checkActionCode:Vw,confirmPasswordReset:KA,connectAuthEmulator:Mw,createUserWithEmailAndPassword:Qw,debugErrorMap:PT,deleteUser:_4,fetchSignInMethodsForEmail:n4,getAdditionalUserInfo:m4,getAuth:n3,getIdToken:qT,getIdTokenResult:pw,getMultiFactorResolver:w4,getRedirectResult:bI,inMemoryPersistence:bm,indexedDBLocalPersistence:ik,initializeAuth:Rw,initializeRecaptchaConfig:p4,isSignInWithEmailLink:JA,linkWithCredential:Hw,linkWithPhoneNumber:J4,linkWithPopup:oI,linkWithRedirect:yI,multiFactor:E4,onAuthStateChanged:qw,onIdTokenChanged:Yw,parseActionCodeURL:HA,prodErrorMap:cw,reauthenticateWithCredential:Fw,reauthenticateWithPhoneNumber:eI,reauthenticateWithPopup:lI,reauthenticateWithRedirect:gI,reload:yw,revokeAccessToken:v4,sendEmailVerification:a4,sendPasswordResetEmail:YA,sendSignInLinkToEmail:ZA,setPersistence:g4,signInAnonymously:QA,signInWithCredential:Sd,signInWithCustomToken:WA,signInWithEmailAndPassword:Gw,signInWithEmailLink:e4,signInWithPhoneNumber:Z4,signInWithPopup:rI,signInWithRedirect:fI,signOut:Iu,unlink:GA,updateCurrentUser:b4,updateEmail:l4,updatePassword:o4,updatePhoneNumber:tI,updateProfile:r4,useDeviceLanguage:x4,validatePassword:y4,verifyBeforeUpdateEmail:s4,verifyPasswordResetCode:XA},Symbol.toStringTag,{value:"Module"}));var Tx={};const Ax="@firebase/database",Ix="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pk="";function vp(t){pk=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ho(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Vn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new s3(e)}}catch{}return new i3},ni=yk("localStorage"),_m=yk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Jg("@firebase/database"),xk=function(){let t=1;return function(){return t++}}(),bk=function(t){const e=_5(t),n=new y5;n.update(e);const a=n.digest();return Wg.encodeByteArray(a)},Wo=function(...t){let e="";for(let n=0;n<t.length;n++){const a=t[n];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?e+=Wo.apply(null,a):typeof a=="object"?e+=mt(a):e+=a,e+=" "}return e};let ci=null,Rx=!0;const vk=function(t,e){M(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(fr.logLevel=ve.VERBOSE,ci=fr.log.bind(fr),e&&_m.set("logging_enabled",!0)):typeof t=="function"?ci=t:(ci=null,_m.remove("logging_enabled"))},_t=function(...t){if(Rx===!0&&(Rx=!1,ci===null&&_m.get("logging_enabled")===!0&&vk(!0)),ci){const e=Wo.apply(null,t);ci(e)}},Yo=function(t){return function(...e){_t(t,...e)}},wm=function(...t){const e="FIREBASE INTERNAL ERROR: "+Wo(...t);fr.error(e)},aa=function(...t){const e=`FIREBASE FATAL ERROR: ${Wo(...t)}`;throw fr.error(e),new Error(e)},Rt=function(...t){const e="FIREBASE WARNING: "+Wo(...t);fr.warn(e)},r3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Md=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},l3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Is="[MIN_NAME]",Ha="[MAX_NAME]",Ri=function(t,e){if(t===e)return 0;if(t===Is||e===Ha)return-1;if(e===Is||t===Ha)return 1;{const n=Mx(t),a=Mx(e);return n!==null?a!==null?n-a===0?t.length-e.length:n-a:-1:a!==null?1:t<e?-1:1}},o3=function(t,e){return t===e?0:t<e?-1:1},dl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},_p=function(t){if(typeof t!="object"||t===null)return mt(t);const e=[];for(const a in t)e.push(a);e.sort();let n="{";for(let a=0;a<e.length;a++)a!==0&&(n+=","),n+=mt(e[a]),n+=":",n+=_p(t[e[a]]);return n+="}",n},_k=function(t,e){const n=t.length;if(n<=e)return[t];const a=[];for(let s=0;s<n;s+=e)s+e>n?a.push(t.substring(s,n)):a.push(t.substring(s,s+e));return a};function Ct(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const wk=function(t){M(!Md(t),"Invalid JSON number");const e=11,n=52,a=(1<<e-1)-1;let s,i,l,o,c;t===0?(i=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-a)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),a),i=o+a,l=Math.round(t*Math.pow(2,n-o)-Math.pow(2,n))):(i=0,l=Math.round(t/Math.pow(2,1-a-n))));const u=[];for(c=n;c;c-=1)u.push(l%2?1:0),l=Math.floor(l/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const f=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(f.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},c3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},u3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function d3(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const a=new Error(t+" at "+e._path.toString()+": "+n);return a.code=t.toUpperCase(),a}const h3=new RegExp("^-?(0*)\\d{1,10}$"),f3=-2147483648,m3=2147483647,Mx=function(t){if(h3.test(t)){const e=Number(t);if(e>=f3&&e<=m3)return e}return null},qr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Rt("Exception was thrown by user callback.",n),e},Math.floor(0))}},g3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ql=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ke(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(a=>this.appCheck=a)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,a)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,a):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(a=>a.addTokenListener(e))}notifyForInvalidToken(){Rt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n,a){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,a)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,a):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rt(e)}}class mr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}mr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="5",kk="v",Ck="s",Nk="r",Sk="f",Ek=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jk="ls",Tk="p",km="ac",Ak="websocket",Ik="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,a,s,i=!1,l="",o=!1,c=!1,u=null){this.secure=n,this.namespace=a,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=l,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ni.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ni.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function x3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Mk(t,e,n){M(typeof e=="string","typeof type must == string"),M(typeof n=="object","typeof params must == object");let a;if(e===Ak)a=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ik)a=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);x3(t)&&(n.ns=t.namespace);const s=[];return Ct(n,(i,l)=>{s.push(i+"="+l)}),a+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.counters_={}}incrementCounter(e,n=1){Vn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Kj(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf={},nf={};function kp(t){const e=t.toString();return tf[e]||(tf[e]=new b3),tf[e]}function v3(t,e){const n=t.toString();return nf[n]||(nf[n]=e()),nf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<a.length;++s)a[s]&&qr(()=>{this.onMessage_(a[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="start",w3="close",k3="pLPCommand",C3="pRTLPCB",Ok="id",Dk="pw",Lk="ser",N3="cb",S3="seg",E3="ts",j3="d",T3="dframe",Pk=1870,Uk=30,A3=Pk-Uk,I3=25e3,R3=3e4;class os{constructor(e,n,a,s,i,l,o){this.connId=e,this.repoInfo=n,this.applicationId=a,this.appCheckToken=s,this.authToken=i,this.transportSessionId=l,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yo(e),this.stats_=kp(n),this.urlFn=c=>(this.appCheckToken&&(c[km]=this.appCheckToken),Mk(n,Ik,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new _3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(R3)),l3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cp((...i)=>{const[l,o,c,u,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Ox)this.id=o,this.password=c;else if(l===w3)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...i)=>{const[l,o]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(l,o)},()=>{this.onClosed_()},this.urlFn);const a={};a[Ox]="t",a[Lk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[N3]=this.scriptTagHolder.uniqueCallbackIdentifier),a[kk]=wp,this.transportSessionId&&(a[Ck]=this.transportSessionId),this.lastSessionId&&(a[jk]=this.lastSessionId),this.applicationId&&(a[Tk]=this.applicationId),this.appCheckToken&&(a[km]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ek.test(location.hostname)&&(a[Nk]=Sk);const s=this.urlFn(a);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){os.forceAllow_=!0}static forceDisallow(){os.forceDisallow_=!0}static isAvailable(){return os.forceAllow_?!0:!os.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!c3()&&!u3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=G1(n),s=_k(a,A3);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const a={};a[T3]="t",a[Ok]=e,a[Dk]=n,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Cp{constructor(e,n,a,s){this.onDisconnect=a,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=xk(),window[k3+this.uniqueCallbackIdentifier]=e,window[C3+this.uniqueCallbackIdentifier]=n,this.myIFrame=Cp.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(o){_t("frame writing exception"),o.stack&&_t(o.stack),_t(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const a=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ok]=this.myID,e[Dk]=this.myPW,e[Lk]=this.currentSerial;let n=this.urlFn(e),a="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Uk+a.length<=Pk;){const l=this.pendingSegs.shift();a=a+"&"+S3+s+"="+l.seg+"&"+E3+s+"="+l.ts+"&"+j3+s+"="+l.d,s++}return n=n+a,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,a){this.pendingSegs.push({seg:e,ts:n,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const a=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(a,Math.floor(I3)),i=()=>{clearTimeout(s),a()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){const s=a.readyState;(!s||s==="loaded"||s==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),n())},a.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=16384,O3=45e3;let Ou=null;typeof MozWebSocket<"u"?Ou=MozWebSocket:typeof WebSocket<"u"&&(Ou=WebSocket);class Cn{constructor(e,n,a,s,i,l,o){this.connId=e,this.applicationId=a,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yo(this.connId),this.stats_=kp(n),this.connURL=Cn.connectionURL_(n,l,o,s,a),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,a,s,i){const l={};return l[kk]=wp,typeof location<"u"&&location.hostname&&Ek.test(location.hostname)&&(l[Nk]=Sk),n&&(l[Ck]=n),a&&(l[jk]=a),s&&(l[km]=s),i&&(l[Tk]=i),Mk(e,Ak,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ni.set("previous_websocket_failure",!0);try{let a;c5(),this.mySock=new Ou(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const s=a.message||a.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const s=a.message||a.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Cn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(n);a&&a.length>1&&parseFloat(a[1])<4.4&&(e=!0)}return!e&&Ou!==null&&!Cn.forceDisallow_}static previouslyFailed(){return ni.isInMemoryStorage||ni.get("previous_websocket_failure")===!0}markConnectionHealthy(){ni.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const a=ho(n);this.onMessage(a)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(M(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const a=this.extractFrameCount_(n);a!==null&&this.appendFrame_(a)}}send(e){this.resetKeepAlive();const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=_k(n,M3);a.length>1&&this.sendString_(String(a.length));for(let s=0;s<a.length;s++)this.sendString_(a[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(O3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Cn.responsesRequiredToBeHealthy=2;Cn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{static get ALL_TRANSPORTS(){return[os,Cn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Cn&&Cn.isAvailable();let a=n&&!Cn.previouslyFailed();if(e.webSocketOnly&&(n||Rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Cn];else{const s=this.transports_=[];for(const i of Tr.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Tr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Tr.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=6e4,L3=5e3,P3=10*1024,U3=100*1024,af="t",Dx="d",B3="s",Lx="r",z3="e",Px="o",Ux="a",Bx="n",zx="p",H3="h";class F3{constructor(e,n,a,s,i,l,o,c,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=a,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=l,this.onReady_=o,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yo("c:"+this.id+":"),this.transportManager_=new Tr(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,a)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ql(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>U3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>P3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(af in e){const n=e[af];n===Ux?this.upgradeIfSecondaryHealthy_():n===Lx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Px&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=dl("t",e),a=dl("d",e);if(n==="c")this.onSecondaryControl_(a);else if(n==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ux,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Bx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=dl("t",e),a=dl("d",e);n==="c"?this.onControl_(a):n==="d"&&this.onDataMessage_(a)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=dl(af,e);if(Dx in e){const a=e[Dx];if(n===H3){const s={...a};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Bx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===B3?this.onConnectionShutdown_(a):n===Lx?this.onReset_(a):n===z3?wm("Server Error: "+a):n===Px?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,a=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wp!==a&&Rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,a),Ql(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(D3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ql(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(L3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ni.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{put(e,n,a,s){}merge(e,n,a,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,a){}onDisconnectMerge(e,n,a){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const a=[...this.listeners_[e]];for(let s=0;s<a.length;s++)a[s].callback.apply(a[s].context,n)}}on(e,n,a){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:a});const s=this.getInitialEvent(e);s&&n.apply(a,s)}off(e,n,a){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!a||a===s[i].context)){s.splice(i,1);return}}validateEventType_(e){M(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends zk{static getInstance(){return new Du}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return M(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=32,Fx=768;class xe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let a=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[a]=this.pieces_[s],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function me(){return new xe("")}function se(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Rs(t){return t.pieces_.length-t.pieceNum_}function je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new xe(t.pieces_,e)}function Np(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function V3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function vo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Hk(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new xe(e,0)}function $e(t,e){const n=[];for(let a=t.pieceNum_;a<t.pieces_.length;a++)n.push(t.pieces_[a]);if(e instanceof xe)for(let a=e.pieceNum_;a<e.pieces_.length;a++)n.push(e.pieces_[a]);else{const a=e.split("/");for(let s=0;s<a.length;s++)a[s].length>0&&n.push(a[s])}return new xe(n,0)}function ie(t){return t.pieceNum_>=t.pieces_.length}function Bt(t,e){const n=se(t),a=se(e);if(n===null)return e;if(n===a)return Bt(je(t),je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Q3(t,e){const n=vo(t,0),a=vo(e,0);for(let s=0;s<n.length&&s<a.length;s++){const i=Ri(n[s],a[s]);if(i!==0)return i}return n.length===a.length?0:n.length<a.length?-1:1}function Sp(t,e){if(Rs(t)!==Rs(e))return!1;for(let n=t.pieceNum_,a=e.pieceNum_;n<=t.pieces_.length;n++,a++)if(t.pieces_[n]!==e.pieces_[a])return!1;return!0}function Nn(t,e){let n=t.pieceNum_,a=e.pieceNum_;if(Rs(t)>Rs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[a])return!1;++n,++a}return!0}class G3{constructor(e,n){this.errorPrefix_=n,this.parts_=vo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=_d(this.parts_[a]);Fk(this)}}function $3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=_d(e),Fk(t)}function W3(t){const e=t.parts_.pop();t.byteLength_-=_d(e),t.parts_.length>0&&(t.byteLength_-=1)}function Fk(t){if(t.byteLength_>Fx)throw new Error(t.errorPrefix_+"has a key path longer than "+Fx+" bytes ("+t.byteLength_+").");if(t.parts_.length>Hx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hx+") or object contains a cycle "+Zs(t))}function Zs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends zk{static getInstance(){return new Ep}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const a=!document[e];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(e){return M(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=1e3,Y3=60*5*1e3,Vx=30*1e3,K3=1.3,q3=3e4,X3="server_kill",Qx=3;class jn extends Bk{constructor(e,n,a,s,i,l,o,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=a,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=l,this.appCheckTokenProvider_=o,this.authOverride_=c,this.id=jn.nextPersistentConnectionId_++,this.log_=Yo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hl,this.maxReconnectDelay_=Y3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ep.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Du.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,a){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(mt(i)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),a&&(this.requestCBHash_[s]=a)}get(e){this.initConnection_();const n=new ln,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const o=l.d;l.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,a,s){this.initConnection_();const i=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+i),this.listens.has(l)||this.listens.set(l,new Map),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(l).has(i),"listen() called twice for same path/queryId.");const o={onComplete:s,hashFn:n,query:e,tag:a};this.listens.get(l).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,a=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(a)})}sendListen_(e){const n=e.query,a=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+a+" for "+s);const i={p:a},l="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(l,i,o=>{const c=o.d,u=o.s;jn.warnOnListenWarnings_(c,n),(this.listens.get(a)&&this.listens.get(a).get(s))===e&&(this.log_("listen response",o),u!=="ok"&&this.removeListen_(a,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Vn(e,"w")){const a=gi(e,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||p5(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Vx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=g5(e)?"auth":"gauth",a={cred:e};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(n,a,s=>{const i=s.s,l=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,a=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,a)})}unlisten(e,n){const a=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+a+" "+s),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,s)&&this.connected_&&this.sendUnlisten_(a,s,e._queryObject,n)}sendUnlisten_(e,n,a,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},l="n";s&&(i.q=a,i.t=s),this.sendRequest(l,i)}onDisconnectPut(e,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:a})}onDisconnectMerge(e,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:a})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,a,s){const i={p:n,d:a};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,n,a,s){this.putInternal("p",e,n,a,s)}merge(e,n,a,s){this.putInternal("m",e,n,a,s)}putInternal(e,n,a,s,i){this.initConnection_();const l={p:n,d:a};i!==void 0&&(l.h=i),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,a=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,a,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,a=>{if(a.s!=="ok"){const i=a.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mt(e));const n=e.r,a=this.requestCBHash_[n];a&&(delete this.requestCBHash_[n],a(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):wm("Unrecognized action received from server: "+mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>q3&&(this.reconnectDelay_=hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*K3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+jn.nextConnectionId_++,i=this.lastSessionId;let l=!1,o=null;const c=function(){o?o.close():(l=!0,a())},u=function(d){M(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);l?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,o=new F3(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,a,m=>{Rt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(X3)},i))}catch(d){this.log_("Failed to get token: "+d),l||(this.repoInfo_.nodeAdmin&&Rt(d),c())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ku(this.interruptReasons_)&&(this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let a;n?a=n.map(i=>_p(i)).join("$"):a="default";const s=this.removeListen_(e,a);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const a=new xe(e).toString();let s;if(this.listens.has(a)){const i=this.listens.get(a);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(a)}else s=void 0;return s}onAuthRevoked_(e,n){_t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Qx&&(this.reconnectDelay_=Vx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Qx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+pk.replace(/\./g,"-")]=1,qg()?e["framework.cordova"]=1:Z1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Du.getInstance().currentlyOnline();return ku(this.interruptReasons_)&&e}}jn.nextPersistentConnectionId_=0;jn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new re(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const a=new re(Is,e),s=new re(Is,n);return this.compare(a,s)!==0}minPost(){return re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc;class Vk extends Od{static get __EMPTY_NODE(){return Cc}static set __EMPTY_NODE(e){Cc=e}compare(e,n){return Ri(e.name,n.name)}isDefinedOn(e){throw Vr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return re.MIN}maxPost(){return new re(Ha,Cc)}makePost(e,n){return M(typeof e=="string","KeyIndex indexValue must always be a string."),new re(e,Cc)}toString(){return".key"}}const ea=new Vk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,a,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?a(e.key,n):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bt{constructor(e,n,a,s,i){this.key=e,this.value=n,this.color=a??bt.RED,this.left=s??Kt.EMPTY_NODE,this.right=i??Kt.EMPTY_NODE}copy(e,n,a,s,i){return new bt(e??this.key,n??this.value,a??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let s=this;const i=a(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,a),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,a)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Kt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let a,s;if(a=this,n(e,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),n(e,a.key)===0){if(a.right.isEmpty())return Kt.EMPTY_NODE;s=a.right.min_(),a=a.copy(s.key,s.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bt.RED=!0;bt.BLACK=!1;class Z3{copy(e,n,a,s,i){return this}insert(e,n,a){return new bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Kt{constructor(e,n=Kt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Kt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(e){return new Kt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(e){let n,a=this.root_;for(;!a.isEmpty();){if(n=this.comparator_(e,a.key),n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}getPredecessorKey(e){let n,a=this.root_,s=null;for(;!a.isEmpty();)if(n=this.comparator_(e,a.key),n===0){if(a.left.isEmpty())return s?s.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else n<0?a=a.left:n>0&&(s=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Nc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Nc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Nc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Nc(this.root_,null,this.comparator_,!0,e)}}Kt.EMPTY_NODE=new Z3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(t,e){return Ri(t.name,e.name)}function jp(t,e){return Ri(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm;function eR(t){Cm=t}const Qk=function(t){return typeof t=="number"?"number:"+wk(t):"string:"+t},Gk=function(t){if(t.isLeafNode()){const e=t.val();M(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Vn(e,".sv"),"Priority must be a string or number.")}else M(t===Cm||t.isEmpty(),"priority of unexpected type.");M(t===Cm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gx;class yt{static set __childrenNodeConstructor(e){Gx=e}static get __childrenNodeConstructor(){return Gx}constructor(e,n=yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Gk(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ie(e)?this:se(e)===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const a=se(e);return a===null?n:n.isEmpty()&&a!==".priority"?this:(M(a!==".priority"||Rs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(je(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Qk(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=wk(this.value_):e+=this.value_,this.lazyHash_=bk(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yt.__childrenNodeConstructor?-1:(M(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,a=typeof this.value_,s=yt.VALUE_TYPE_ORDER.indexOf(n),i=yt.VALUE_TYPE_ORDER.indexOf(a);return M(s>=0,"Unknown leaf type: "+n),M(i>=0,"Unknown leaf type: "+a),s===i?a==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $k,Wk;function tR(t){$k=t}function nR(t){Wk=t}class aR extends Od{compare(e,n){const a=e.node.getPriority(),s=n.node.getPriority(),i=a.compareTo(s);return i===0?Ri(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return re.MIN}maxPost(){return new re(Ha,new yt("[PRIORITY-POST]",Wk))}makePost(e,n){const a=$k(e);return new re(n,new yt("[PRIORITY-POST]",a))}toString(){return".priority"}}const De=new aR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=Math.log(2);class iR{constructor(e){const n=i=>parseInt(Math.log(i)/sR,10),a=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=a(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Lu=function(t,e,n,a){t.sort(e);const s=function(c,u){const f=u-c;let d,h;if(f===0)return null;if(f===1)return d=t[c],h=n?n(d):d,new bt(h,d.node,bt.BLACK,null,null);{const m=parseInt(f/2,10)+c,v=s(c,m),b=s(m+1,u);return d=t[m],h=n?n(d):d,new bt(h,d.node,bt.BLACK,v,b)}},i=function(c){let u=null,f=null,d=t.length;const h=function(v,b){const w=d-v,y=d;d-=v;const g=s(w+1,y),x=t[w],_=n?n(x):x;m(new bt(_,x.node,b,null,g))},m=function(v){u?(u.left=v,u=v):(f=v,u=v)};for(let v=0;v<c.count;++v){const b=c.nextBitIsOne(),w=Math.pow(2,c.count-(v+1));b?h(w,bt.BLACK):(h(w,bt.BLACK),h(w,bt.RED))}return f},l=new iR(t.length),o=i(l);return new Kt(a||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf;const Bi={};class Na{static get Default(){return M(Bi&&De,"ChildrenNode.ts has not been loaded"),sf=sf||new Na({".priority":Bi},{".priority":De}),sf}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=gi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Kt?n:null}hasIndex(e){return Vn(this.indexSet_,e.toString())}addIndex(e,n){M(e!==ea,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let s=!1;const i=n.getIterator(re.Wrap);let l=i.getNext();for(;l;)s=s||e.isDefinedOn(l.node),a.push(l),l=i.getNext();let o;s?o=Lu(a,e.getCompare()):o=Bi;const c=e.toString(),u={...this.indexSet_};u[c]=e;const f={...this.indexes_};return f[c]=o,new Na(f,u)}addToIndexes(e,n){const a=Cu(this.indexes_,(s,i)=>{const l=gi(this.indexSet_,i);if(M(l,"Missing index implementation for "+i),s===Bi)if(l.isDefinedOn(e.node)){const o=[],c=n.getIterator(re.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&o.push(u),u=c.getNext();return o.push(e),Lu(o,l.getCompare())}else return Bi;else{const o=n.get(e.name);let c=s;return o&&(c=c.remove(new re(e.name,o))),c.insert(e,e.node)}});return new Na(a,this.indexSet_)}removeFromIndexes(e,n){const a=Cu(this.indexes_,s=>{if(s===Bi)return s;{const i=n.get(e.name);return i?s.remove(new re(e.name,i)):s}});return new Na(a,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl;class Y{static get EMPTY_NODE(){return fl||(fl=new Y(new Kt(jp),null,Na.Default))}constructor(e,n,a){this.children_=e,this.priorityNode_=n,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&Gk(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fl}updatePriority(e){return this.children_.isEmpty()?this:new Y(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?fl:n}}getChild(e){const n=se(e);return n===null?this:this.getImmediateChild(n).getChild(je(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(M(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const a=new re(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(a,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(a,this.children_));const l=s.isEmpty()?fl:this.priorityNode_;return new Y(s,l,i)}}updateChild(e,n){const a=se(e);if(a===null)return n;{M(se(e)!==".priority"||Rs(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(a).updateChild(je(e),n);return this.updateImmediateChild(a,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let a=0,s=0,i=!0;if(this.forEachChild(De,(l,o)=>{n[l]=o.val(e),a++,i&&Y.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):i=!1}),!e&&i&&s<2*a){const l=[];for(const o in n)l[o]=n[o];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Qk(this.getPriority().val())+":"),this.forEachChild(De,(n,a)=>{const s=a.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":bk(e)}return this.lazyHash_}getPredecessorChildName(e,n,a){const s=this.resolveIndex_(a);if(s){const i=s.getPredecessorKey(new re(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const a=n.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new re(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const a=n.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new re(n,this.children_.get(n)):null}forEachChild(e,n){const a=this.resolveIndex_(e);return a?a.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const a=this.resolveIndex_(n);if(a)return a.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,re.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const a=this.resolveIndex_(n);if(a)return a.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,re.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ko?-1:0}withIndex(e){if(e===ea||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Y(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ea||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const a=this.getIterator(De),s=n.getIterator(De);let i=a.getNext(),l=s.getNext();for(;i&&l;){if(i.name!==l.name||!i.node.equals(l.node))return!1;i=a.getNext(),l=s.getNext()}return i===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===ea?null:this.indexMap_.get(e.toString())}}Y.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class rR extends Y{constructor(){super(new Kt(jp),Y.EMPTY_NODE,Na.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Y.EMPTY_NODE}isEmpty(){return!1}}const Ko=new rR;Object.defineProperties(re,{MIN:{value:new re(Is,Y.EMPTY_NODE)},MAX:{value:new re(Ha,Ko)}});Vk.__EMPTY_NODE=Y.EMPTY_NODE;yt.__childrenNodeConstructor=Y;eR(Ko);nR(Ko);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=!0;function Ye(t,e=null){if(t===null)return Y.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),M(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new yt(n,Ye(e))}if(!(t instanceof Array)&&lR){const n=[];let a=!1;if(Ct(t,(l,o)=>{if(l.substring(0,1)!=="."){const c=Ye(o);c.isEmpty()||(a=a||!c.getPriority().isEmpty(),n.push(new re(l,c)))}}),n.length===0)return Y.EMPTY_NODE;const i=Lu(n,J3,l=>l.name,jp);if(a){const l=Lu(n,De.getCompare());return new Y(i,Ye(e),new Na({".priority":l},{".priority":De}))}else return new Y(i,Ye(e),Na.Default)}else{let n=Y.EMPTY_NODE;return Ct(t,(a,s)=>{if(Vn(t,a)&&a.substring(0,1)!=="."){const i=Ye(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(a,i))}}),n.updatePriority(Ye(e))}}tR(Ye);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends Od{constructor(e){super(),this.indexPath_=e,M(!ie(e)&&se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const a=this.extractChild(e.node),s=this.extractChild(n.node),i=a.compareTo(s);return i===0?Ri(e.name,n.name):i}makePost(e,n){const a=Ye(e),s=Y.EMPTY_NODE.updateChild(this.indexPath_,a);return new re(n,s)}maxPost(){const e=Y.EMPTY_NODE.updateChild(this.indexPath_,Ko);return new re(Ha,e)}toString(){return vo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends Od{compare(e,n){const a=e.node.compareTo(n.node);return a===0?Ri(e.name,n.name):a}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(e,n){const a=Ye(e);return new re(n,a)}toString(){return".value"}}const Ap=new oR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){return{type:"value",snapshotNode:t}}function Ar(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function _o(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function cR(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.index_=e}updateChild(e,n,a,s,i,l){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(n);return o.getChild(s).equals(a.getChild(s))&&o.isEmpty()===a.isEmpty()||(l!=null&&(a.isEmpty()?e.hasChild(n)?l.trackChildChange(_o(n,o)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?l.trackChildChange(Ar(n,a)):l.trackChildChange(wo(n,a,o))),e.isLeafNode()&&a.isEmpty())?e:e.updateImmediateChild(n,a).withIndex(this.index_)}updateFullNode(e,n,a){return a!=null&&(e.isLeafNode()||e.forEachChild(De,(s,i)=>{n.hasChild(s)||a.trackChildChange(_o(s,i))}),n.isLeafNode()||n.forEachChild(De,(s,i)=>{if(e.hasChild(s)){const l=e.getImmediateChild(s);l.equals(i)||a.trackChildChange(wo(s,i,l))}else a.trackChildChange(Ar(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Y.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.indexedFilter_=new Ip(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ko.getStartPost_(e),this.endPost_=ko.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,a=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&a}updateChild(e,n,a,s,i,l){return this.matches(new re(n,a))||(a=Y.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,a,s,i,l)}updateFullNode(e,n,a){n.isLeafNode()&&(n=Y.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Y.EMPTY_NODE);const i=this;return n.forEachChild(De,(l,o)=>{i.matches(new re(l,o))||(s=s.updateImmediateChild(l,Y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,a)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=n=>{const a=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new ko(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,a,s,i,l){return this.rangedFilter_.matches(new re(n,a))||(a=Y.EMPTY_NODE),e.getImmediateChild(n).equals(a)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,a,s,i,l):this.fullLimitUpdateChild_(e,n,a,i,l)}updateFullNode(e,n,a){let s;if(n.isLeafNode()||n.isEmpty())s=Y.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Y.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;i.hasNext()&&l<this.limit_;){const o=i.getNext();if(this.withinDirectionalStart(o))if(this.withinDirectionalEnd(o))s=s.updateImmediateChild(o.name,o.node),l++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Y.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let l=0;for(;i.hasNext();){const o=i.getNext();l<this.limit_&&this.withinDirectionalStart(o)&&this.withinDirectionalEnd(o)?l++:s=s.updateImmediateChild(o.name,Y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,a)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,a,s,i){let l;if(this.reverse_){const d=this.index_.getCompare();l=(h,m)=>d(m,h)}else l=this.index_.getCompare();const o=e;M(o.numChildren()===this.limit_,"");const c=new re(n,a),u=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(o.hasChild(n)){const d=o.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||o.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const m=h==null?1:l(h,c);if(f&&!a.isEmpty()&&m>=0)return i!=null&&i.trackChildChange(wo(n,a,d)),o.updateImmediateChild(n,a);{i!=null&&i.trackChildChange(_o(n,d));const b=o.updateImmediateChild(n,Y.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Ar(h.name,h.node)),b.updateImmediateChild(h.name,h.node)):b}}else return a.isEmpty()?e:f&&l(u,c)>=0?(i!=null&&(i.trackChildChange(_o(u.name,u.node)),i.trackChildChange(Ar(n,a))),o.updateImmediateChild(n,a).updateImmediateChild(u.name,Y.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=De}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Is}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ha}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===De}copy(){const e=new Dd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dR(t){return t.loadsAllData()?new Ip(t.getIndex()):t.hasLimit()?new uR(t):new ko(t)}function hR(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function fR(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Nm(t,e,n){const a=t.copy();return a.startSet_=!0,e===void 0&&(e=null),a.indexStartValue_=e,n!=null?(a.startNameSet_=!0,a.indexStartName_=n):(a.startNameSet_=!1,a.indexStartName_=""),a}function mR(t,e,n){let a;return t.index_===ea||n?a=Nm(t,e,n):a=Nm(t,e,Ha),a.startAfterSet_=!0,a}function Sm(t,e,n){const a=t.copy();return a.endSet_=!0,e===void 0&&(e=null),a.indexEndValue_=e,n!==void 0?(a.endNameSet_=!0,a.indexEndName_=n):(a.endNameSet_=!1,a.indexEndName_=""),a}function gR(t,e,n){let a;return t.index_===ea||n?a=Sm(t,e,n):a=Sm(t,e,Is),a.endBeforeSet_=!0,a}function Ld(t,e){const n=t.copy();return n.index_=e,n}function $x(t){const e={};if(t.isDefault())return e;let n;if(t.index_===De?n="$priority":t.index_===Ap?n="$value":t.index_===ea?n="$key":(M(t.index_ instanceof Tp,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){const a=t.startAfterSet_?"startAfter":"startAt";e[a]=mt(t.indexStartValue_),t.startNameSet_&&(e[a]+=","+mt(t.indexStartName_))}if(t.endSet_){const a=t.endBeforeSet_?"endBefore":"endAt";e[a]=mt(t.indexEndValue_),t.endNameSet_&&(e[a]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Wx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==De&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Bk{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,a,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=a,this.appCheckTokenProvider_=s,this.log_=Yo("p:rest:"),this.listens_={}}listen(e,n,a,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const l=Pu.getListenId_(e,a),o={};this.listens_[l]=o;const c=$x(e._queryParams);this.restRequest_(i+".json",c,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,a),gi(this.listens_,l)===o){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(e,n){const a=Pu.getListenId_(e,n);delete this.listens_[a]}get(e){const n=$x(e._queryParams),a=e._path.toString(),s=new ln;return this.restRequest_(a+".json",n,(i,l)=>{let o=l;i===404&&(o=null,i=null),i===null?(this.onDataUpdate_(a,o,!1,null),s.resolve(o)):s.reject(new Error(o))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},a){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ai(n);this.log_("Sending REST request for "+l);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(a&&o.readyState===4){this.log_("REST Response for "+l+" received. status:",o.status,"response:",o.responseText);let c=null;if(o.status>=200&&o.status<300){try{c=ho(o.responseText)}catch{Rt("Failed to parse JSON response for "+l+": "+o.responseText)}a(null,c)}else o.status!==401&&o.status!==404&&Rt("Got unsuccessful REST response for "+l+" Status: "+o.status),a(o.status);a=null}},o.open("GET",l,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.rootNode_=Y.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(){return{value:null,children:new Map}}function Xr(t,e,n){if(ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const a=se(e);t.children.has(a)||t.children.set(a,Uu());const s=t.children.get(a);e=je(e),Xr(s,e,n)}}function Em(t,e){if(ie(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(De,(a,s)=>{Xr(t,new xe(a),s)}),Em(t,e)}}else if(t.children.size>0){const n=se(e);return e=je(e),t.children.has(n)&&Em(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function jm(t,e,n){t.value!==null?n(e,t.value):yR(t,(a,s)=>{const i=new xe(e.toString()+"/"+a);jm(s,i,n)})}function yR(t,e){t.children.forEach((n,a)=>{e(a,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Ct(this.last_,(a,s)=>{n[a]=n[a]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=10*1e3,bR=30*1e3,vR=5*60*1e3;class _R{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xR(e);const a=Yx+(bR-Yx)*Math.random();Ql(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const e=this.statsListener_.get(),n={};let a=!1;Ct(e,(s,i)=>{i>0&&Vn(this.statsToReport_,s)&&(n[s]=i,a=!0)}),a&&this.server_.reportStats(n),Ql(this.reportStats_.bind(this),Math.floor(Math.random()*2*vR))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Un||(Un={}));function Rp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Mp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Op(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,a){this.path=e,this.affectedTree=n,this.revert=a,this.type=Un.ACK_USER_WRITE,this.source=Rp()}operationForChild(e){if(ie(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new xe(e));return new Bu(me(),n,this.revert)}}else return M(se(this.path)===e,"operationForChild called for unrelated child."),new Bu(je(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.source=e,this.path=n,this.type=Un.LISTEN_COMPLETE}operationForChild(e){return ie(this.path)?new Co(this.source,me()):new Co(this.source,je(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,a){this.source=e,this.path=n,this.snap=a,this.type=Un.OVERWRITE}operationForChild(e){return ie(this.path)?new bi(this.source,me(),this.snap.getImmediateChild(e)):new bi(this.source,je(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,a){this.source=e,this.path=n,this.children=a,this.type=Un.MERGE}operationForChild(e){if(ie(this.path)){const n=this.children.subtree(new xe(e));return n.isEmpty()?null:n.value?new bi(this.source,me(),n.value):new Ir(this.source,me(),n)}else return M(se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ir(this.source,je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,a){this.node_=e,this.fullyInitialized_=n,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=se(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kR(t,e,n,a){const s=[],i=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&i.push(cR(l.childName,l.snapshotNode))}),ml(t,s,"child_removed",e,a,n),ml(t,s,"child_added",e,a,n),ml(t,s,"child_moved",i,a,n),ml(t,s,"child_changed",e,a,n),ml(t,s,"value",e,a,n),s}function ml(t,e,n,a,s,i){const l=a.filter(o=>o.type===n);l.sort((o,c)=>NR(t,o,c)),l.forEach(o=>{const c=CR(t,o,i);s.forEach(u=>{u.respondsTo(o.type)&&e.push(u.createEvent(c,t.query_))})})}function CR(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function NR(t,e,n){if(e.childName==null||n.childName==null)throw Vr("Should only compare child_ events.");const a=new re(e.childName,e.snapshotNode),s=new re(n.childName,n.snapshotNode);return t.index_.compare(a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e){return{eventCache:t,serverCache:e}}function Gl(t,e,n,a){return Pd(new Ms(e,n,a),t.serverCache)}function Kk(t,e,n,a){return Pd(t.eventCache,new Ms(e,n,a))}function zu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function vi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf;const SR=()=>(rf||(rf=new Kt(o3)),rf);class Re{static fromObject(e){let n=new Re(null);return Ct(e,(a,s)=>{n=n.set(new xe(a),s)}),n}constructor(e,n=SR()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:me(),value:this.value};if(ie(e))return null;{const a=se(e),s=this.children.get(a);if(s!==null){const i=s.findRootMostMatchingPathAndValue(je(e),n);return i!=null?{path:$e(new xe(a),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ie(e))return this;{const n=se(e),a=this.children.get(n);return a!==null?a.subtree(je(e)):new Re(null)}}set(e,n){if(ie(e))return new Re(n,this.children);{const a=se(e),i=(this.children.get(a)||new Re(null)).set(je(e),n),l=this.children.insert(a,i);return new Re(this.value,l)}}remove(e){if(ie(e))return this.children.isEmpty()?new Re(null):new Re(null,this.children);{const n=se(e),a=this.children.get(n);if(a){const s=a.remove(je(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Re(null):new Re(this.value,i)}else return this}}get(e){if(ie(e))return this.value;{const n=se(e),a=this.children.get(n);return a?a.get(je(e)):null}}setTree(e,n){if(ie(e))return n;{const a=se(e),i=(this.children.get(a)||new Re(null)).setTree(je(e),n);let l;return i.isEmpty()?l=this.children.remove(a):l=this.children.insert(a,i),new Re(this.value,l)}}fold(e){return this.fold_(me(),e)}fold_(e,n){const a={};return this.children.inorderTraversal((s,i)=>{a[s]=i.fold_($e(e,s),n)}),n(e,this.value,a)}findOnPath(e,n){return this.findOnPath_(e,me(),n)}findOnPath_(e,n,a){const s=this.value?a(n,this.value):!1;if(s)return s;if(ie(e))return null;{const i=se(e),l=this.children.get(i);return l?l.findOnPath_(je(e),$e(n,i),a):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,me(),n)}foreachOnPath_(e,n,a){if(ie(e))return this;{this.value&&a(n,this.value);const s=se(e),i=this.children.get(s);return i?i.foreachOnPath_(je(e),$e(n,s),a):new Re(null)}}foreach(e){this.foreach_(me(),e)}foreach_(e,n){this.children.inorderTraversal((a,s)=>{s.foreach_($e(e,a),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,a)=>{a.value&&e(n,a.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.writeTree_=e}static empty(){return new Hn(new Re(null))}}function $l(t,e,n){if(ie(e))return new Hn(new Re(n));{const a=t.writeTree_.findRootMostValueAndPath(e);if(a!=null){const s=a.path;let i=a.value;const l=Bt(s,e);return i=i.updateChild(l,n),new Hn(t.writeTree_.set(s,i))}else{const s=new Re(n),i=t.writeTree_.setTree(e,s);return new Hn(i)}}}function Tm(t,e,n){let a=t;return Ct(n,(s,i)=>{a=$l(a,$e(e,s),i)}),a}function Kx(t,e){if(ie(e))return Hn.empty();{const n=t.writeTree_.setTree(e,new Re(null));return new Hn(n)}}function Am(t,e){return Mi(t,e)!=null}function Mi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Bt(n.path,e)):null}function qx(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(De,(a,s)=>{e.push(new re(a,s))}):t.writeTree_.children.inorderTraversal((a,s)=>{s.value!=null&&e.push(new re(a,s.value))}),e}function Cs(t,e){if(ie(e))return t;{const n=Mi(t,e);return n!=null?new Hn(new Re(n)):new Hn(t.writeTree_.subtree(e))}}function Im(t){return t.writeTree_.isEmpty()}function Rr(t,e){return qk(me(),t.writeTree_,e)}function qk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let a=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(M(i.value!==null,"Priority writes must always be leaf nodes"),a=i.value):n=qk($e(t,s),i,n)}),!n.getChild(t).isEmpty()&&a!==null&&(n=n.updateChild($e(t,".priority"),a)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e){return e2(e,t)}function ER(t,e,n,a,s){M(a>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:a,visible:s}),s&&(t.visibleWrites=$l(t.visibleWrites,e,n)),t.lastWriteId=a}function jR(t,e,n,a){M(a>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:a,visible:!0}),t.visibleWrites=Tm(t.visibleWrites,e,n),t.lastWriteId=a}function TR(t,e){for(let n=0;n<t.allWrites.length;n++){const a=t.allWrites[n];if(a.writeId===e)return a}return null}function AR(t,e){const n=t.allWrites.findIndex(o=>o.writeId===e);M(n>=0,"removeWrite called with nonexistent writeId.");const a=t.allWrites[n];t.allWrites.splice(n,1);let s=a.visible,i=!1,l=t.allWrites.length-1;for(;s&&l>=0;){const o=t.allWrites[l];o.visible&&(l>=n&&IR(o,a.path)?s=!1:Nn(a.path,o.path)&&(i=!0)),l--}if(s){if(i)return RR(t),!0;if(a.snap)t.visibleWrites=Kx(t.visibleWrites,a.path);else{const o=a.children;Ct(o,c=>{t.visibleWrites=Kx(t.visibleWrites,$e(a.path,c))})}return!0}else return!1}function IR(t,e){if(t.snap)return Nn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Nn($e(t.path,n),e))return!0;return!1}function RR(t){t.visibleWrites=Xk(t.allWrites,MR,me()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function MR(t){return t.visible}function Xk(t,e,n){let a=Hn.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const l=i.path;let o;if(i.snap)Nn(n,l)?(o=Bt(n,l),a=$l(a,o,i.snap)):Nn(l,n)&&(o=Bt(l,n),a=$l(a,me(),i.snap.getChild(o)));else if(i.children){if(Nn(n,l))o=Bt(n,l),a=Tm(a,o,i.children);else if(Nn(l,n))if(o=Bt(l,n),ie(o))a=Tm(a,me(),i.children);else{const c=gi(i.children,se(o));if(c){const u=c.getChild(je(o));a=$l(a,me(),u)}}}else throw Vr("WriteRecord should have .snap or .children")}}return a}function Zk(t,e,n,a,s){if(!a&&!s){const i=Mi(t.visibleWrites,e);if(i!=null)return i;{const l=Cs(t.visibleWrites,e);if(Im(l))return n;if(n==null&&!Am(l,me()))return null;{const o=n||Y.EMPTY_NODE;return Rr(l,o)}}}else{const i=Cs(t.visibleWrites,e);if(!s&&Im(i))return n;if(!s&&n==null&&!Am(i,me()))return null;{const l=function(u){return(u.visible||s)&&(!a||!~a.indexOf(u.writeId))&&(Nn(u.path,e)||Nn(e,u.path))},o=Xk(t.allWrites,l,e),c=n||Y.EMPTY_NODE;return Rr(o,c)}}}function OR(t,e,n){let a=Y.EMPTY_NODE;const s=Mi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(De,(i,l)=>{a=a.updateImmediateChild(i,l)}),a;if(n){const i=Cs(t.visibleWrites,e);return n.forEachChild(De,(l,o)=>{const c=Rr(Cs(i,new xe(l)),o);a=a.updateImmediateChild(l,c)}),qx(i).forEach(l=>{a=a.updateImmediateChild(l.name,l.node)}),a}else{const i=Cs(t.visibleWrites,e);return qx(i).forEach(l=>{a=a.updateImmediateChild(l.name,l.node)}),a}}function DR(t,e,n,a,s){M(a||s,"Either existingEventSnap or existingServerSnap must exist");const i=$e(e,n);if(Am(t.visibleWrites,i))return null;{const l=Cs(t.visibleWrites,i);return Im(l)?s.getChild(n):Rr(l,s.getChild(n))}}function LR(t,e,n,a){const s=$e(e,n),i=Mi(t.visibleWrites,s);if(i!=null)return i;if(a.isCompleteForChild(n)){const l=Cs(t.visibleWrites,s);return Rr(l,a.getNode().getImmediateChild(n))}else return null}function PR(t,e){return Mi(t.visibleWrites,e)}function UR(t,e,n,a,s,i,l){let o;const c=Cs(t.visibleWrites,e),u=Mi(c,me());if(u!=null)o=u;else if(n!=null)o=Rr(c,n);else return[];if(o=o.withIndex(l),!o.isEmpty()&&!o.isLeafNode()){const f=[],d=l.getCompare(),h=i?o.getReverseIteratorFrom(a,l):o.getIteratorFrom(a,l);let m=h.getNext();for(;m&&f.length<s;)d(m,a)!==0&&f.push(m),m=h.getNext();return f}else return[]}function BR(){return{visibleWrites:Hn.empty(),allWrites:[],lastWriteId:-1}}function Hu(t,e,n,a){return Zk(t.writeTree,t.treePath,e,n,a)}function Dp(t,e){return OR(t.writeTree,t.treePath,e)}function Xx(t,e,n,a){return DR(t.writeTree,t.treePath,e,n,a)}function Fu(t,e){return PR(t.writeTree,$e(t.treePath,e))}function zR(t,e,n,a,s,i){return UR(t.writeTree,t.treePath,e,n,a,s,i)}function Lp(t,e,n){return LR(t.writeTree,t.treePath,e,n)}function Jk(t,e){return e2($e(t.treePath,e),t.writeTree)}function e2(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,a=e.childName;M(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),M(a!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(a);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(a,wo(a,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(a);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(a,_o(a,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(a,Ar(a,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(a,wo(a,e.snapshotNode,s.oldSnap));else throw Vr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(a,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{getCompleteChild(e){return null}getChildAfterChild(e,n,a){return null}}const t2=new FR;class Pp{constructor(e,n,a=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=a}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const a=this.optCompleteServerCache_!=null?new Ms(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lp(this.writes_,e,a)}}getChildAfterChild(e,n,a){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:vi(this.viewCache_),i=zR(this.writes_,s,n,1,a,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){return{filter:t}}function QR(t,e){M(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function GR(t,e,n,a,s){const i=new HR;let l,o;if(n.type===Un.OVERWRITE){const u=n;u.source.fromUser?l=Rm(t,e,u.path,u.snap,a,s,i):(M(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered()&&!ie(u.path),l=Vu(t,e,u.path,u.snap,a,s,o,i))}else if(n.type===Un.MERGE){const u=n;u.source.fromUser?l=WR(t,e,u.path,u.children,a,s,i):(M(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered(),l=Mm(t,e,u.path,u.children,a,s,o,i))}else if(n.type===Un.ACK_USER_WRITE){const u=n;u.revert?l=qR(t,e,u.path,a,s,i):l=YR(t,e,u.path,u.affectedTree,a,s,i)}else if(n.type===Un.LISTEN_COMPLETE)l=KR(t,e,n.path,a,i);else throw Vr("Unknown operation type: "+n.type);const c=i.getChanges();return $R(e,l,c),{viewCache:l,changes:c}}function $R(t,e,n){const a=e.eventCache;if(a.isFullyInitialized()){const s=a.getNode().isLeafNode()||a.getNode().isEmpty(),i=zu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!a.getNode().equals(i)||!a.getNode().getPriority().equals(i.getPriority()))&&n.push(Yk(zu(e)))}}function n2(t,e,n,a,s,i){const l=e.eventCache;if(Fu(a,n)!=null)return e;{let o,c;if(ie(n))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=vi(e),f=u instanceof Y?u:Y.EMPTY_NODE,d=Dp(a,f);o=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=Hu(a,vi(e));o=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=se(n);if(u===".priority"){M(Rs(n)===1,"Can't have a priority with additional path components");const f=l.getNode();c=e.serverCache.getNode();const d=Xx(a,n,f,c);d!=null?o=t.filter.updatePriority(f,d):o=l.getNode()}else{const f=je(n);let d;if(l.isCompleteForChild(u)){c=e.serverCache.getNode();const h=Xx(a,n,l.getNode(),c);h!=null?d=l.getNode().getImmediateChild(u).updateChild(f,h):d=l.getNode().getImmediateChild(u)}else d=Lp(a,u,e.serverCache);d!=null?o=t.filter.updateChild(l.getNode(),u,d,f,s,i):o=l.getNode()}}return Gl(e,o,l.isFullyInitialized()||ie(n),t.filter.filtersNodes())}}function Vu(t,e,n,a,s,i,l,o){const c=e.serverCache;let u;const f=l?t.filter:t.filter.getIndexedFilter();if(ie(n))u=f.updateFullNode(c.getNode(),a,null);else if(f.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(n,a);u=f.updateFullNode(c.getNode(),m,null)}else{const m=se(n);if(!c.isCompleteForPath(n)&&Rs(n)>1)return e;const v=je(n),w=c.getNode().getImmediateChild(m).updateChild(v,a);m===".priority"?u=f.updatePriority(c.getNode(),w):u=f.updateChild(c.getNode(),m,w,v,t2,null)}const d=Kk(e,u,c.isFullyInitialized()||ie(n),f.filtersNodes()),h=new Pp(s,d,i);return n2(t,d,n,s,h,o)}function Rm(t,e,n,a,s,i,l){const o=e.eventCache;let c,u;const f=new Pp(s,e,i);if(ie(n))u=t.filter.updateFullNode(e.eventCache.getNode(),a,l),c=Gl(e,u,!0,t.filter.filtersNodes());else{const d=se(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),a),c=Gl(e,u,o.isFullyInitialized(),o.isFiltered());else{const h=je(n),m=o.getNode().getImmediateChild(d);let v;if(ie(h))v=a;else{const b=f.getCompleteChild(d);b!=null?Np(h)===".priority"&&b.getChild(Hk(h)).isEmpty()?v=b:v=b.updateChild(h,a):v=Y.EMPTY_NODE}if(m.equals(v))c=e;else{const b=t.filter.updateChild(o.getNode(),d,v,h,f,l);c=Gl(e,b,o.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Zx(t,e){return t.eventCache.isCompleteForChild(e)}function WR(t,e,n,a,s,i,l){let o=e;return a.foreach((c,u)=>{const f=$e(n,c);Zx(e,se(f))&&(o=Rm(t,o,f,u,s,i,l))}),a.foreach((c,u)=>{const f=$e(n,c);Zx(e,se(f))||(o=Rm(t,o,f,u,s,i,l))}),o}function Jx(t,e,n){return n.foreach((a,s)=>{e=e.updateChild(a,s)}),e}function Mm(t,e,n,a,s,i,l,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;ie(n)?u=a:u=new Re(null).setTree(n,a);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),v=Jx(t,m,h);c=Vu(t,c,new xe(d),v,s,i,l,o)}}),u.children.inorderTraversal((d,h)=>{const m=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!m){const v=e.serverCache.getNode().getImmediateChild(d),b=Jx(t,v,h);c=Vu(t,c,new xe(d),b,s,i,l,o)}}),c}function YR(t,e,n,a,s,i,l){if(Fu(s,n)!=null)return e;const o=e.serverCache.isFiltered(),c=e.serverCache;if(a.value!=null){if(ie(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Vu(t,e,n,c.getNode().getChild(n),s,i,o,l);if(ie(n)){let u=new Re(null);return c.getNode().forEachChild(ea,(f,d)=>{u=u.set(new xe(f),d)}),Mm(t,e,n,u,s,i,o,l)}else return e}else{let u=new Re(null);return a.foreach((f,d)=>{const h=$e(n,f);c.isCompleteForPath(h)&&(u=u.set(f,c.getNode().getChild(h)))}),Mm(t,e,n,u,s,i,o,l)}}function KR(t,e,n,a,s){const i=e.serverCache,l=Kk(e,i.getNode(),i.isFullyInitialized()||ie(n),i.isFiltered());return n2(t,l,n,a,t2,s)}function qR(t,e,n,a,s,i){let l;if(Fu(a,n)!=null)return e;{const o=new Pp(a,e,s),c=e.eventCache.getNode();let u;if(ie(n)||se(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Hu(a,vi(e));else{const d=e.serverCache.getNode();M(d instanceof Y,"serverChildren would be complete if leaf node"),f=Dp(a,d)}f=f,u=t.filter.updateFullNode(c,f,i)}else{const f=se(n);let d=Lp(a,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),d!=null?u=t.filter.updateChild(c,f,d,je(n),o,i):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(c,f,Y.EMPTY_NODE,je(n),o,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Hu(a,vi(e)),l.isLeafNode()&&(u=t.filter.updateFullNode(u,l,i)))}return l=e.serverCache.isFullyInitialized()||Fu(a,me())!=null,Gl(e,u,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const a=this.query_._queryParams,s=new Ip(a.getIndex()),i=dR(a);this.processor_=VR(i);const l=n.serverCache,o=n.eventCache,c=s.updateFullNode(Y.EMPTY_NODE,l.getNode(),null),u=i.updateFullNode(Y.EMPTY_NODE,o.getNode(),null),f=new Ms(c,l.isFullyInitialized(),s.filtersNodes()),d=new Ms(u,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=Pd(d,f),this.eventGenerator_=new wR(this.query_)}get query(){return this.query_}}function ZR(t){return t.viewCache_.serverCache.getNode()}function JR(t){return zu(t.viewCache_)}function e6(t,e){const n=vi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ie(e)&&!n.getImmediateChild(se(e)).isEmpty())?n.getChild(e):null}function eb(t){return t.eventRegistrations_.length===0}function t6(t,e){t.eventRegistrations_.push(e)}function tb(t,e,n){const a=[];if(n){M(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const l=i.createCancelEvent(n,s);l&&a.push(l)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const l=t.eventRegistrations_[i];if(!l.matches(e))s.push(l);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return a}function nb(t,e,n,a){e.type===Un.MERGE&&e.source.queryId!==null&&(M(vi(t.viewCache_),"We should always have a full cache before handling merges"),M(zu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=GR(t.processor_,s,e,n,a);return QR(t.processor_,i.viewCache),M(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,a2(t,i.changes,i.viewCache.eventCache.getNode(),null)}function n6(t,e){const n=t.viewCache_.eventCache,a=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(De,(i,l)=>{a.push(Ar(i,l))}),n.isFullyInitialized()&&a.push(Yk(n.getNode())),a2(t,a,n.getNode(),e)}function a2(t,e,n,a){const s=a?[a]:t.eventRegistrations_;return kR(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu;class s2{constructor(){this.views=new Map}}function a6(t){M(!Qu,"__referenceConstructor has already been defined"),Qu=t}function s6(){return M(Qu,"Reference.ts has not been loaded"),Qu}function i6(t){return t.views.size===0}function Up(t,e,n,a){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return M(i!=null,"SyncTree gave us an op for an invalid query."),nb(i,e,n,a)}else{let i=[];for(const l of t.views.values())i=i.concat(nb(l,e,n,a));return i}}function i2(t,e,n,a,s){const i=e._queryIdentifier,l=t.views.get(i);if(!l){let o=Hu(n,s?a:null),c=!1;o?c=!0:a instanceof Y?(o=Dp(n,a),c=!1):(o=Y.EMPTY_NODE,c=!1);const u=Pd(new Ms(o,c,!1),new Ms(a,s,!1));return new XR(e,u)}return l}function r6(t,e,n,a,s,i){const l=i2(t,e,a,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),t6(l,n),n6(l,n)}function l6(t,e,n,a){const s=e._queryIdentifier,i=[];let l=[];const o=Os(t);if(s==="default")for(const[c,u]of t.views.entries())l=l.concat(tb(u,n,a)),eb(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(l=l.concat(tb(c,n,a)),eb(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return o&&!Os(t)&&i.push(new(s6())(e._repo,e._path)),{removed:i,events:l}}function r2(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ns(t,e){let n=null;for(const a of t.views.values())n=n||e6(a,e);return n}function l2(t,e){if(e._queryParams.loadsAllData())return Bd(t);{const a=e._queryIdentifier;return t.views.get(a)}}function o2(t,e){return l2(t,e)!=null}function Os(t){return Bd(t)!=null}function Bd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu;function o6(t){M(!Gu,"__referenceConstructor has already been defined"),Gu=t}function c6(){return M(Gu,"Reference.ts has not been loaded"),Gu}let u6=1;class ab{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=BR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bp(t,e,n,a,s){return ER(t.pendingWriteTree_,e,n,a,s),s?Zr(t,new bi(Rp(),e,n)):[]}function d6(t,e,n,a){jR(t.pendingWriteTree_,e,n,a);const s=Re.fromObject(n);return Zr(t,new Ir(Rp(),e,s))}function cs(t,e,n=!1){const a=TR(t.pendingWriteTree_,e);if(AR(t.pendingWriteTree_,e)){let i=new Re(null);return a.snap!=null?i=i.set(me(),!0):Ct(a.children,l=>{i=i.set(new xe(l),!0)}),Zr(t,new Bu(a.path,i,n))}else return[]}function qo(t,e,n){return Zr(t,new bi(Mp(),e,n))}function h6(t,e,n){const a=Re.fromObject(n);return Zr(t,new Ir(Mp(),e,a))}function f6(t,e){return Zr(t,new Co(Mp(),e))}function m6(t,e,n){const a=zp(t,n);if(a){const s=Hp(a),i=s.path,l=s.queryId,o=Bt(i,e),c=new Co(Op(l),o);return Fp(t,i,c)}else return[]}function $u(t,e,n,a,s=!1){const i=e._path,l=t.syncPointTree_.get(i);let o=[];if(l&&(e._queryIdentifier==="default"||o2(l,e))){const c=l6(l,e,n,a);i6(l)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(o=c.events,!s){const f=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,m)=>Os(m));if(f&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const m=y6(h);for(let v=0;v<m.length;++v){const b=m[v],w=b.query,y=h2(t,b);t.listenProvider_.startListening(Wl(w),No(t,w),y.hashFn,y.onComplete)}}}!d&&u.length>0&&!a&&(f?t.listenProvider_.stopListening(Wl(e),null):u.forEach(h=>{const m=t.queryToTagMap.get(Hd(h));t.listenProvider_.stopListening(Wl(h),m)}))}x6(t,u)}return o}function c2(t,e,n,a){const s=zp(t,a);if(s!=null){const i=Hp(s),l=i.path,o=i.queryId,c=Bt(l,e),u=new bi(Op(o),c,n);return Fp(t,l,u)}else return[]}function g6(t,e,n,a){const s=zp(t,a);if(s){const i=Hp(s),l=i.path,o=i.queryId,c=Bt(l,e),u=Re.fromObject(n),f=new Ir(Op(o),c,u);return Fp(t,l,f)}else return[]}function Om(t,e,n,a=!1){const s=e._path;let i=null,l=!1;t.syncPointTree_.foreachOnPath(s,(h,m)=>{const v=Bt(h,s);i=i||Ns(m,v),l=l||Os(m)});let o=t.syncPointTree_.get(s);o?(l=l||Os(o),i=i||Ns(o,me())):(o=new s2,t.syncPointTree_=t.syncPointTree_.set(s,o));let c;i!=null?c=!0:(c=!1,i=Y.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((m,v)=>{const b=Ns(v,me());b&&(i=i.updateImmediateChild(m,b))}));const u=o2(o,e);if(!u&&!e._queryParams.loadsAllData()){const h=Hd(e);M(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const m=b6();t.queryToTagMap.set(h,m),t.tagToQueryMap.set(m,h)}const f=Ud(t.pendingWriteTree_,s);let d=r6(o,e,n,f,i,c);if(!u&&!l&&!a){const h=l2(o,e);d=d.concat(v6(t,e,h))}return d}function zd(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(l,o)=>{const c=Bt(l,e),u=Ns(o,c);if(u)return u});return Zk(s,e,i,n,!0)}function p6(t,e){const n=e._path;let a=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const d=Bt(u,n);a=a||Ns(f,d)});let s=t.syncPointTree_.get(n);s?a=a||Ns(s,me()):(s=new s2,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=a!=null,l=i?new Ms(a,!0,!1):null,o=Ud(t.pendingWriteTree_,e._path),c=i2(s,e,o,i?l.getNode():Y.EMPTY_NODE,i);return JR(c)}function Zr(t,e){return u2(e,t.syncPointTree_,null,Ud(t.pendingWriteTree_,me()))}function u2(t,e,n,a){if(ie(t.path))return d2(t,e,n,a);{const s=e.get(me());n==null&&s!=null&&(n=Ns(s,me()));let i=[];const l=se(t.path),o=t.operationForChild(l),c=e.children.get(l);if(c&&o){const u=n?n.getImmediateChild(l):null,f=Jk(a,l);i=i.concat(u2(o,c,u,f))}return s&&(i=i.concat(Up(s,t,a,n))),i}}function d2(t,e,n,a){const s=e.get(me());n==null&&s!=null&&(n=Ns(s,me()));let i=[];return e.children.inorderTraversal((l,o)=>{const c=n?n.getImmediateChild(l):null,u=Jk(a,l),f=t.operationForChild(l);f&&(i=i.concat(d2(f,o,c,u)))}),s&&(i=i.concat(Up(s,t,a,n))),i}function h2(t,e){const n=e.query,a=No(t,n);return{hashFn:()=>(ZR(e)||Y.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return a?m6(t,n._path,a):f6(t,n._path);{const i=d3(s,n);return $u(t,n,null,i)}}}}function No(t,e){const n=Hd(e);return t.queryToTagMap.get(n)}function Hd(t){return t._path.toString()+"$"+t._queryIdentifier}function zp(t,e){return t.tagToQueryMap.get(e)}function Hp(t){const e=t.indexOf("$");return M(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new xe(t.substr(0,e))}}function Fp(t,e,n){const a=t.syncPointTree_.get(e);M(a,"Missing sync point for query tag that we're tracking");const s=Ud(t.pendingWriteTree_,e);return Up(a,n,s,null)}function y6(t){return t.fold((e,n,a)=>{if(n&&Os(n))return[Bd(n)];{let s=[];return n&&(s=r2(n)),Ct(a,(i,l)=>{s=s.concat(l)}),s}})}function Wl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(c6())(t._repo,t._path):t}function x6(t,e){for(let n=0;n<e.length;++n){const a=e[n];if(!a._queryParams.loadsAllData()){const s=Hd(a),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function b6(){return u6++}function v6(t,e,n){const a=e._path,s=No(t,e),i=h2(t,n),l=t.listenProvider_.startListening(Wl(e),s,i.hashFn,i.onComplete),o=t.syncPointTree_.subtree(a);if(s)M(!Os(o.value),"If we're adding a query, it shouldn't be shadowed");else{const c=o.fold((u,f,d)=>{if(!ie(u)&&f&&Os(f))return[Bd(f).query];{let h=[];return f&&(h=h.concat(r2(f).map(m=>m.query))),Ct(d,(m,v)=>{h=h.concat(v)}),h}});for(let u=0;u<c.length;++u){const f=c[u];t.listenProvider_.stopListening(Wl(f),No(t,f))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Vp(n)}node(){return this.node_}}class Qp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$e(this.path_,e);return new Qp(this.syncTree_,n)}node(){return zd(this.syncTree_,this.path_)}}const _6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sb=function(t,e,n){if(!t||typeof t!="object")return t;if(M(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return w6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return k6(t[".sv"],e);M(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},w6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:M(!1,"Unexpected server value: "+t)}},k6=function(t,e,n){t.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const a=t.increment;typeof a!="number"&&M(!1,"Unexpected increment value: "+a);const s=e.node();if(M(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return a;const l=s.getValue();return typeof l!="number"?a:l+a},f2=function(t,e,n,a){return $p(e,new Qp(n,t),a)},Gp=function(t,e,n){return $p(t,new Vp(e),n)};function $p(t,e,n){const a=t.getPriority().val(),s=sb(a,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const l=t,o=sb(l.getValue(),e,n);return o!==l.getValue()||s!==l.getPriority().val()?new yt(o,Ye(s)):t}else{const l=t;return i=l,s!==l.getPriority().val()&&(i=i.updatePriority(new yt(s))),l.forEachChild(De,(o,c)=>{const u=$p(c,e.getImmediateChild(o),n);u!==c&&(i=i.updateImmediateChild(o,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e="",n=null,a={children:{},childCount:0}){this.name=e,this.parent=n,this.node=a}}function Fd(t,e){let n=e instanceof xe?e:new xe(e),a=t,s=se(n);for(;s!==null;){const i=gi(a.node.children,s)||{children:{},childCount:0};a=new Wp(s,a,i),n=je(n),s=se(n)}return a}function Oi(t){return t.node.value}function Yp(t,e){t.node.value=e,Dm(t)}function m2(t){return t.node.childCount>0}function C6(t){return Oi(t)===void 0&&!m2(t)}function Vd(t,e){Ct(t.node.children,(n,a)=>{e(new Wp(n,t,a))})}function g2(t,e,n,a){n&&e(t),Vd(t,s=>{g2(s,e,!0)})}function N6(t,e,n){let a=t.parent;for(;a!==null;){if(e(a))return!0;a=a.parent}return!1}function Xo(t){return new xe(t.parent===null?t.name:Xo(t.parent)+"/"+t.name)}function Dm(t){t.parent!==null&&S6(t.parent,t.name,t)}function S6(t,e,n){const a=C6(n),s=Vn(t.node.children,e);a&&s?(delete t.node.children[e],t.node.childCount--,Dm(t)):!a&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Dm(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=/[\[\].#$\/\u0000-\u001F\u007F]/,j6=/[\[\].#$\u0000-\u001F\u007F]/,lf=10*1024*1024,Qd=function(t){return typeof t=="string"&&t.length!==0&&!E6.test(t)},p2=function(t){return typeof t=="string"&&t.length!==0&&!j6.test(t)},T6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),p2(t)},So=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Md(t)||t&&typeof t=="object"&&Vn(t,".sv")},sa=function(t,e,n,a){a&&e===void 0||Zo(yi(t,"value"),e,n)},Zo=function(t,e,n){const a=n instanceof xe?new G3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Zs(a));if(typeof e=="function")throw new Error(t+"contains a function "+Zs(a)+" with contents = "+e.toString());if(Md(e))throw new Error(t+"contains "+e.toString()+" "+Zs(a));if(typeof e=="string"&&e.length>lf/3&&_d(e)>lf)throw new Error(t+"contains a string greater than "+lf+" utf8 bytes "+Zs(a)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Ct(e,(l,o)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(i=!0,!Qd(l)))throw new Error(t+" contains an invalid key ("+l+") "+Zs(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$3(a,l),Zo(t,o,a),W3(a)}),s&&i)throw new Error(t+' contains ".value" child '+Zs(a)+" in addition to actual children.")}},A6=function(t,e){let n,a;for(n=0;n<e.length;n++){a=e[n];const i=vo(a);for(let l=0;l<i.length;l++)if(!(i[l]===".priority"&&l===i.length-1)){if(!Qd(i[l]))throw new Error(t+"contains an invalid key ("+i[l]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Q3);let s=null;for(n=0;n<e.length;n++){if(a=e[n],s!==null&&Nn(s,a))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+a.toString());s=a}},y2=function(t,e,n,a){const s=yi(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Ct(e,(l,o)=>{const c=new xe(l);if(Zo(s,o,$e(n,c)),Np(c)===".priority"&&!So(o))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),A6(s,i)},Kp=function(t,e,n){if(Md(e))throw new Error(yi(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!So(e))throw new Error(yi(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Jo=function(t,e,n,a){if(n!==void 0&&!Qd(n))throw new Error(yi(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Gd=function(t,e,n,a){if(!(a&&n===void 0)&&!p2(n))throw new Error(yi(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},I6=function(t,e,n,a){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gd(t,e,n,a)},Bn=function(t,e){if(se(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},x2=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Qd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!T6(n))throw new Error(yi(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $d(t,e){let n=null;for(let a=0;a<e.length;a++){const s=e[a],i=s.getPath();n!==null&&!Sp(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function b2(t,e,n){$d(t,n),v2(t,a=>Sp(a,e))}function pn(t,e,n){$d(t,n),v2(t,a=>Nn(a,e)||Nn(e,a))}function v2(t,e){t.recursionDepth_++;let n=!0;for(let a=0;a<t.eventLists_.length;a++){const s=t.eventLists_[a];if(s){const i=s.path;e(i)?(M6(t.eventLists_[a]),t.eventLists_[a]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function M6(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const a=n.getEventRunner();ci&&_t("event: "+n.toString()),qr(a)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="repo_interrupt",O6=25;class D6{constructor(e,n,a,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=a,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new R6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Uu(),this.transactionQueueTree_=new Wp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function L6(t,e,n){if(t.stats_=kp(t.repoInfo_),t.forceRestClient_||g3())t.server_=new Pu(t.repoInfo_,(a,s,i,l)=>{ib(t,a,s,i,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>rb(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}t.persistentConnection_=new jn(t.repoInfo_,e,(a,s,i,l)=>{ib(t,a,s,i,l)},a=>{rb(t,a)},a=>{P6(t,a)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(a=>{t.server_.refreshAuthToken(a)}),t.appCheckProvider_.addTokenChangeListener(a=>{t.server_.refreshAppCheckToken(a.token)}),t.statsReporter_=v3(t.repoInfo_,()=>new _R(t.stats_,t.server_)),t.infoData_=new pR,t.infoSyncTree_=new ab({startListening:(a,s,i,l)=>{let o=[];const c=t.infoData_.getNode(a._path);return c.isEmpty()||(o=qo(t.infoSyncTree_,a._path,c),setTimeout(()=>{l("ok")},0)),o},stopListening:()=>{}}),qp(t,"connected",!1),t.serverSyncTree_=new ab({startListening:(a,s,i,l)=>(t.server_.listen(a,i,s,(o,c)=>{const u=l(o,c);pn(t.eventQueue_,a._path,u)}),[]),stopListening:(a,s)=>{t.server_.unlisten(a,s)}})}function w2(t){const n=t.infoData_.getNode(new xe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ec(t){return _6({timestamp:w2(t)})}function ib(t,e,n,a,s){t.dataUpdateCount++;const i=new xe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(s)if(a){const c=Cu(n,u=>Ye(u));l=g6(t.serverSyncTree_,i,c,s)}else{const c=Ye(n);l=c2(t.serverSyncTree_,i,c,s)}else if(a){const c=Cu(n,u=>Ye(u));l=h6(t.serverSyncTree_,i,c)}else{const c=Ye(n);l=qo(t.serverSyncTree_,i,c)}let o=i;l.length>0&&(o=Mr(t,i)),pn(t.eventQueue_,o,l)}function rb(t,e){qp(t,"connected",e),e===!1&&z6(t)}function P6(t,e){Ct(e,(n,a)=>{qp(t,n,a)})}function qp(t,e,n){const a=new xe("/.info/"+e),s=Ye(n);t.infoData_.updateSnapshot(a,s);const i=qo(t.infoSyncTree_,a,s);pn(t.eventQueue_,a,i)}function Wd(t){return t.nextWriteId_++}function U6(t,e,n){const a=p6(t.serverSyncTree_,e);return a!=null?Promise.resolve(a):t.server_.get(e).then(s=>{const i=Ye(s).withIndex(e._queryParams.getIndex());Om(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=qo(t.serverSyncTree_,e._path,i);else{const o=No(t.serverSyncTree_,e);l=c2(t.serverSyncTree_,e._path,i,o)}return pn(t.eventQueue_,e._path,l),$u(t.serverSyncTree_,e,n,null,!0),i},s=>(Jr(t,"get for query "+mt(e)+" failed: "+s),Promise.reject(new Error(s))))}function Xp(t,e,n,a,s){Jr(t,"set",{path:e.toString(),value:n,priority:a});const i=ec(t),l=Ye(n,a),o=zd(t.serverSyncTree_,e),c=Gp(l,o,i),u=Wd(t),f=Bp(t.serverSyncTree_,e,c,u,!0);$d(t.eventQueue_,f),t.server_.put(e.toString(),l.val(!0),(h,m)=>{const v=h==="ok";v||Rt("set at "+e+" failed: "+h);const b=cs(t.serverSyncTree_,u,!v);pn(t.eventQueue_,e,b),Ds(t,s,h,m)});const d=Jp(t,e);Mr(t,d),pn(t.eventQueue_,d,[])}function B6(t,e,n,a){Jr(t,"update",{path:e.toString(),value:n});let s=!0;const i=ec(t),l={};if(Ct(n,(o,c)=>{s=!1,l[o]=f2($e(e,o),Ye(c),t.serverSyncTree_,i)}),s)_t("update() called with empty data.  Don't do anything."),Ds(t,a,"ok",void 0);else{const o=Wd(t),c=d6(t.serverSyncTree_,e,l,o);$d(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,f)=>{const d=u==="ok";d||Rt("update at "+e+" failed: "+u);const h=cs(t.serverSyncTree_,o,!d),m=h.length>0?Mr(t,e):e;pn(t.eventQueue_,m,h),Ds(t,a,u,f)}),Ct(n,u=>{const f=Jp(t,$e(e,u));Mr(t,f)}),pn(t.eventQueue_,e,[])}}function z6(t){Jr(t,"onDisconnectEvents");const e=ec(t),n=Uu();jm(t.onDisconnect_,me(),(s,i)=>{const l=f2(s,i,t.serverSyncTree_,e);Xr(n,s,l)});let a=[];jm(n,me(),(s,i)=>{a=a.concat(qo(t.serverSyncTree_,s,i));const l=Jp(t,s);Mr(t,l)}),t.onDisconnect_=Uu(),pn(t.eventQueue_,me(),a)}function H6(t,e,n){t.server_.onDisconnectCancel(e.toString(),(a,s)=>{a==="ok"&&Em(t.onDisconnect_,e),Ds(t,n,a,s)})}function lb(t,e,n,a){const s=Ye(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(i,l)=>{i==="ok"&&Xr(t.onDisconnect_,e,s),Ds(t,a,i,l)})}function F6(t,e,n,a,s){const i=Ye(n,a);t.server_.onDisconnectPut(e.toString(),i.val(!0),(l,o)=>{l==="ok"&&Xr(t.onDisconnect_,e,i),Ds(t,s,l,o)})}function V6(t,e,n,a){if(ku(n)){_t("onDisconnect().update() called with empty data.  Don't do anything."),Ds(t,a,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,i)=>{s==="ok"&&Ct(n,(l,o)=>{const c=Ye(o);Xr(t.onDisconnect_,$e(e,l),c)}),Ds(t,a,s,i)})}function Q6(t,e,n){let a;se(e._path)===".info"?a=Om(t.infoSyncTree_,e,n):a=Om(t.serverSyncTree_,e,n),b2(t.eventQueue_,e._path,a)}function Lm(t,e,n){let a;se(e._path)===".info"?a=$u(t.infoSyncTree_,e,n):a=$u(t.serverSyncTree_,e,n),b2(t.eventQueue_,e._path,a)}function k2(t){t.persistentConnection_&&t.persistentConnection_.interrupt(_2)}function G6(t){t.persistentConnection_&&t.persistentConnection_.resume(_2)}function Jr(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_t(n,...e)}function Ds(t,e,n,a){e&&qr(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;a&&(i+=": "+a);const l=new Error(i);l.code=s,e(l)}})}function $6(t,e,n,a,s,i){Jr(t,"transaction on "+e);const l={path:e,update:n,onComplete:a,status:null,order:xk(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},o=Zp(t,e,void 0);l.currentInputSnapshot=o;const c=l.update(o.val());if(c===void 0)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Zo("transaction failed: Data returned ",c,l.path),l.status=0;const u=Fd(t.transactionQueueTree_,e),f=Oi(u)||[];f.push(l),Yp(u,f);let d;typeof c=="object"&&c!==null&&Vn(c,".priority")?(d=gi(c,".priority"),M(So(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(zd(t.serverSyncTree_,e)||Y.EMPTY_NODE).getPriority().val();const h=ec(t),m=Ye(c,d),v=Gp(m,o,h);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=v,l.currentWriteId=Wd(t);const b=Bp(t.serverSyncTree_,e,v,l.currentWriteId,l.applyLocally);pn(t.eventQueue_,e,b),Yd(t,t.transactionQueueTree_)}}function Zp(t,e,n){return zd(t.serverSyncTree_,e,n)||Y.EMPTY_NODE}function Yd(t,e=t.transactionQueueTree_){if(e||Kd(t,e),Oi(e)){const n=N2(t,e);M(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&W6(t,Xo(e),n)}else m2(e)&&Vd(e,n=>{Yd(t,n)})}function W6(t,e,n){const a=n.map(u=>u.currentWriteId),s=Zp(t,e,a);let i=s;const l=s.hash();for(let u=0;u<n.length;u++){const f=n[u];M(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=Bt(e,f.path);i=i.updateChild(d,f.currentOutputSnapshotRaw)}const o=i.val(!0),c=e;t.server_.put(c.toString(),o,u=>{Jr(t,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(cs(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Kd(t,Fd(t.transactionQueueTree_,e)),Yd(t,t.transactionQueueTree_),pn(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)qr(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Rt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Mr(t,e)}},l)}function Mr(t,e){const n=C2(t,e),a=Xo(n),s=N2(t,n);return Y6(t,s,a),a}function Y6(t,e,n){if(e.length===0)return;const a=[];let s=[];const l=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const c=e[o],u=Bt(n,c.path);let f=!1,d;if(M(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,d=c.abortReason,s=s.concat(cs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=O6)f=!0,d="maxretry",s=s.concat(cs(t.serverSyncTree_,c.currentWriteId,!0));else{const h=Zp(t,c.path,l);c.currentInputSnapshot=h;const m=e[o].update(h.val());if(m!==void 0){Zo("transaction failed: Data returned ",m,c.path);let v=Ye(m);typeof m=="object"&&m!=null&&Vn(m,".priority")||(v=v.updatePriority(h.getPriority()));const w=c.currentWriteId,y=ec(t),g=Gp(v,h,y);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=g,c.currentWriteId=Wd(t),l.splice(l.indexOf(w),1),s=s.concat(Bp(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),s=s.concat(cs(t.serverSyncTree_,w,!0))}else f=!0,d="nodata",s=s.concat(cs(t.serverSyncTree_,c.currentWriteId,!0))}pn(t.eventQueue_,n,s),s=[],f&&(e[o].status=2,function(h){setTimeout(h,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(d==="nodata"?a.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):a.push(()=>e[o].onComplete(new Error(d),!1,null))))}Kd(t,t.transactionQueueTree_);for(let o=0;o<a.length;o++)qr(a[o]);Yd(t,t.transactionQueueTree_)}function C2(t,e){let n,a=t.transactionQueueTree_;for(n=se(e);n!==null&&Oi(a)===void 0;)a=Fd(a,n),e=je(e),n=se(e);return a}function N2(t,e){const n=[];return S2(t,e,n),n.sort((a,s)=>a.order-s.order),n}function S2(t,e,n){const a=Oi(e);if(a)for(let s=0;s<a.length;s++)n.push(a[s]);Vd(e,s=>{S2(t,s,n)})}function Kd(t,e){const n=Oi(e);if(n){let a=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[a]=n[s],a++);n.length=a,Yp(e,n.length>0?n:void 0)}Vd(e,a=>{Kd(t,a)})}function Jp(t,e){const n=Xo(C2(t,e)),a=Fd(t.transactionQueueTree_,e);return N6(a,s=>{of(t,s)}),of(t,a),g2(a,s=>{of(t,s)}),n}function of(t,e){const n=Oi(e);if(n){const a=[];let s=[],i=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(M(i===l-1,"All SENT items should be at beginning of queue."),i=l,n[l].status=3,n[l].abortReason="set"):(M(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),s=s.concat(cs(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&a.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Yp(e,void 0):n.length=i+1,pn(t.eventQueue_,Xo(e),s);for(let l=0;l<a.length;l++)qr(a[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t){let e="";const n=t.split("/");for(let a=0;a<n.length;a++)if(n[a].length>0){let s=n[a];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function q6(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const a=n.split("=");a.length===2?e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Rt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Pm=function(t,e){const n=X6(t),a=n.namespace;n.domain==="firebase.com"&&aa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&n.domain!=="localhost"&&aa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||r3();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Rk(n.host,n.secure,a,s,e,"",a!==n.subdomain),path:new xe(n.pathString)}},X6=function(t){let e="",n="",a="",s="",i="",l=!0,o="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(o=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(s=K6(t.substring(f,d)));const h=q6(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(l=o==="https"||o==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const v=e.indexOf(".");a=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=a}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:a,secure:l,scheme:o,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Z6=function(){let t=0;const e=[];return function(n){const a=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=ob.charAt(n%64),n=Math.floor(n/64);M(n===0,"Cannot push at time == 0");let l=i.join("");if(a){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)l+=ob.charAt(e[s]);return M(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,a,s){this.eventType=e,this.eventRegistration=n,this.snapshot=a,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mt(this.snapshot.exportVal())}}class j2{constructor(e,n,a){this.eventRegistration=e,this.error=n,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new ln;return H6(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Bn("OnDisconnect.remove",this._path);const e=new ln;return lb(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Bn("OnDisconnect.set",this._path),sa("OnDisconnect.set",e,this._path,!1);const n=new ln;return lb(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Bn("OnDisconnect.setWithPriority",this._path),sa("OnDisconnect.setWithPriority",e,this._path,!1),Kp("OnDisconnect.setWithPriority",n);const a=new ln;return F6(this._repo,this._path,e,n,a.wrapCallback(()=>{})),a.promise}update(e){Bn("OnDisconnect.update",this._path),y2("OnDisconnect.update",e,this._path);const n=new ln;return V6(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,a,s){this._repo=e,this._path=n,this._queryParams=a,this._orderByCalled=s}get key(){return ie(this._path)?null:Np(this._path)}get ref(){return new Rn(this._repo,this._path)}get _queryIdentifier(){const e=Wx(this._queryParams),n=_p(e);return n==="{}"?"default":n}get _queryObject(){return Wx(this._queryParams)}isEqual(e){if(e=$(e),!(e instanceof en))return!1;const n=this._repo===e._repo,a=Sp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&a&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+V3(this._path)}}function qd(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Vs(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ea){const a="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Is)throw new Error(a);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Ha)throw new Error(a);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===De){if(e!=null&&!So(e)||n!=null&&!So(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(M(t.getIndex()instanceof Tp||t.getIndex()===Ap,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Xd(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Rn extends en{constructor(e,n){super(e,n,new Dd,!1)}get parent(){const e=Hk(this._path);return e===null?null:new Rn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ls{constructor(e,n,a){this._node=e,this.ref=n,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new xe(e),a=_i(this.ref,e);return new Ls(this._node.getChild(n),a,De)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,s)=>e(new Ls(s,_i(this.ref,a),De)))}hasChild(e){const n=new xe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Q(t,e){return t=$(t),t._checkNotDeleted("ref"),e!==void 0?_i(t._root,e):t._root}function J6(t,e){t=$(t),t._checkNotDeleted("refFromURL");const n=Pm(e,t._repo.repoInfo_.nodeAdmin);x2("refFromURL",n);const a=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&a.host!==t._repo.repoInfo_.host&&aa("refFromURL: Host name does not match the current database: (found "+a.host+" but expected "+t._repo.repoInfo_.host+")"),Q(t,n.path.toString())}function _i(t,e){return t=$(t),se(t._path)===null?I6("child","path",e,!1):Gd("child","path",e,!1),new Rn(t._repo,$e(t._path,e))}function eM(t){return t=$(t),new T2(t._repo,t._path)}function tc(t,e){t=$(t),Bn("push",t._path),sa("push",e,t._path,!0);const n=w2(t._repo),a=Z6(n),s=_i(t,a),i=_i(t,a);let l;return e!=null?l=Wa(i,e).then(()=>i):l=Promise.resolve(i),s.then=l.then.bind(l),s.catch=l.then.bind(l,void 0),s}function Zd(t){return Bn("remove",t._path),Wa(t,null)}function Wa(t,e){t=$(t),Bn("set",t._path),sa("set",e,t._path,!1);const n=new ln;return Xp(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function tM(t,e){t=$(t),Bn("setPriority",t._path),Kp("setPriority",e);const n=new ln;return Xp(t._repo,$e(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function nM(t,e,n){if(Bn("setWithPriority",t._path),sa("setWithPriority",e,t._path,!1),Kp("setWithPriority",n),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const a=new ln;return Xp(t._repo,t._path,e,n,a.wrapCallback(()=>{})),a.promise}function et(t,e){y2("update",e,t._path);const n=new ln;return B6(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Ot(t){t=$(t);const e=new e0(()=>{}),n=new nc(e);return U6(t._repo,t,n).then(a=>new Ls(a,new Rn(t._repo,t._path),t._queryParams.getIndex()))}class nc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const a=n._queryParams.getIndex();return new E2("value",this,new Ls(e.snapshotNode,new Rn(n._repo,n._path),a))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new j2(this,e,n):null}matches(e){return e instanceof nc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Jd{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new j2(this,e,n):null}createEvent(e,n){M(e.childName!=null,"Child events should have a childName.");const a=_i(new Rn(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new E2(e.type,this,new Ls(e.snapshotNode,a,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Jd?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function ac(t,e,n,a,s){let i;if(typeof a=="object"&&(i=void 0,s=a),typeof a=="function"&&(i=a),s&&s.onlyOnce){const c=n,u=(f,d)=>{Lm(t._repo,t,o),c(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const l=new e0(n,i||void 0),o=e==="value"?new nc(l):new Jd(e,l);return Q6(t._repo,t,o),()=>Lm(t._repo,t,o)}function Di(t,e,n,a){return ac(t,"value",e,n,a)}function aM(t,e,n,a){return ac(t,"child_added",e,n,a)}function sM(t,e,n,a){return ac(t,"child_changed",e,n,a)}function iM(t,e,n,a){return ac(t,"child_moved",e,n,a)}function rM(t,e,n,a){return ac(t,"child_removed",e,n,a)}function lM(t,e,n){let a=null;const s=n?new e0(n):null;e==="value"?a=new nc(s):e&&(a=new Jd(e,s)),Lm(t._repo,t,a)}class Mn{}class A2 extends Mn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){sa("endAt",this._value,e._path,!0);const n=Sm(e._queryParams,this._value,this._key);if(Xd(n),Vs(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new en(e._repo,e._path,n,e._orderByCalled)}}function oM(t,e){return Jo("endAt","key",e),new A2(t,e)}class cM extends Mn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){sa("endBefore",this._value,e._path,!1);const n=gR(e._queryParams,this._value,this._key);if(Xd(n),Vs(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new en(e._repo,e._path,n,e._orderByCalled)}}function uM(t,e){return Jo("endBefore","key",e),new cM(t,e)}class I2 extends Mn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){sa("startAt",this._value,e._path,!0);const n=Nm(e._queryParams,this._value,this._key);if(Xd(n),Vs(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new en(e._repo,e._path,n,e._orderByCalled)}}function R2(t=null,e){return Jo("startAt","key",e),new I2(t,e)}class dM extends Mn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){sa("startAfter",this._value,e._path,!1);const n=mR(e._queryParams,this._value,this._key);if(Xd(n),Vs(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new en(e._repo,e._path,n,e._orderByCalled)}}function hM(t,e){return Jo("startAfter","key",e),new dM(t,e)}class fM extends Mn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new en(e._repo,e._path,hR(e._queryParams,this._limit),e._orderByCalled)}}function Um(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fM(t)}class mM extends Mn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new en(e._repo,e._path,fR(e._queryParams,this._limit),e._orderByCalled)}}function gM(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new mM(t)}class pM extends Mn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){qd(e,"orderByChild");const n=new xe(this._path);if(ie(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const a=new Tp(n),s=Ld(e._queryParams,a);return Vs(s),new en(e._repo,e._path,s,!0)}}function Wu(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gd("orderByChild","path",t,!1),new pM(t)}class yM extends Mn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){qd(e,"orderByKey");const n=Ld(e._queryParams,ea);return Vs(n),new en(e._repo,e._path,n,!0)}}function xM(){return new yM}class bM extends Mn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){qd(e,"orderByPriority");const n=Ld(e._queryParams,De);return Vs(n),new en(e._repo,e._path,n,!0)}}function vM(){return new bM}class _M extends Mn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){qd(e,"orderByValue");const n=Ld(e._queryParams,Ap);return Vs(n),new en(e._repo,e._path,n,!0)}}function M2(){return new _M}class wM extends Mn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(sa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new A2(this._value,this._key)._apply(new I2(this._value,this._key)._apply(e))}}function t0(t,e){return Jo("equalTo","key",e),new wM(t,e)}function Eo(t,...e){let n=$(t);for(const a of e)n=a._apply(n);return n}a6(Rn);o6(Rn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="FIREBASE_DATABASE_EMULATOR_HOST",Bm={};let O2=!1;function CM(t,e,n,a){const s=e.lastIndexOf(":"),i=e.substring(0,s),l=Qr(i);t.repoInfo_=new Rk(e,l,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),a&&(t.authTokenProvider_=a)}function n0(t,e,n,a,s){let i=a||t.options.databaseURL;i===void 0&&(t.options.projectId||aa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Pm(i,s),o=l.repoInfo,c,u;typeof process<"u"&&Tx&&(u=Tx[kM]),u?(c=!0,i=`http://${u}?ns=${o.namespace}`,l=Pm(i,s),o=l.repoInfo):c=!l.repoInfo.secure;const f=s&&c?new mr(mr.OWNER):new y3(t.name,t.options,e);x2("Invalid Firebase Database URL",l),ie(l.path)||aa("Database URL must point to the root of a Firebase Database (not including a child path).");const d=SM(o,t,f,new p3(t,n));return new D2(d,t)}function NM(t,e){const n=Bm[e];(!n||n[t.key]!==t)&&aa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),k2(t),delete n[t.key]}function SM(t,e,n,a){let s=Bm[e.name];s||(s={},Bm[e.name]=s);let i=s[t.toURLString()];return i&&aa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new D6(t,O2,n,a),s[t.toURLString()]=i,i}function EM(t){O2=t}class D2{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(L6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rn(this._repo,me())),this._rootInternal}_delete(){return this._rootInternal!==null&&(NM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&aa("Cannot call "+e+" on a deleted database.")}}function L2(){Tr.IS_TRANSPORT_INITIALIZED&&Rt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function jM(){L2(),os.forceDisallow()}function TM(){L2(),Cn.forceDisallow(),os.forceAllow()}function AM(t=iw(),e){const n=wd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const a=t5("database");a&&P2(n,...a)}return n}function P2(t,e,n,a={}){t=$(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&pi(a,i.repoInfo_.emulatorOptions))return;aa("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(i.repoInfo_.nodeAdmin)a.mockUserToken&&aa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new mr(mr.OWNER);else if(a.mockUserToken){const o=typeof a.mockUserToken=="string"?a.mockUserToken:n5(a.mockUserToken,t.app.options.projectId);l=new mr(o)}Qr(e)&&(K1(e),q1("Database",!0)),CM(i,s,a,l)}function IM(t){t=$(t),t._checkNotDeleted("goOffline"),k2(t._repo)}function RM(t){t=$(t),t._checkNotDeleted("goOnline"),G6(t._repo)}function MM(t,e){vk(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){vp(Gr),Er(new Pa("database",(e,{instanceIdentifier:n})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return n0(a,s,i,n)},"PUBLIC").setMultipleInstances(!0)),_s(Ax,Ix,t),_s(Ax,Ix,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={".sv":"timestamp"};function LM(){return DM}function PM(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function B2(t,e,n){if(t=$(t),Bn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const a=(n==null?void 0:n.applyLocally)??!0,s=new ln,i=(o,c,u)=>{let f=null;o?s.reject(o):(f=new Ls(u,new Rn(t._repo,t._path),De),s.resolve(new U2(c,f)))},l=Di(t,()=>{});return $6(t._repo,t._path,e,i,l,a),s.promise}jn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};jn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};const UM=function(t){const e=jn.prototype.put;return jn.prototype.put=function(n,a,s,i){i!==void 0&&(i=t()),e.call(this,n,a,s,i)},function(){jn.prototype.put=e}},BM=function(t){EM(t)};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM({app:t,url:e,version:n,customAuthImpl:a,customAppCheckImpl:s,nodeAdmin:i=!1}){vp(n);const l=new Xg("database-standalone"),o=new mm("auth-internal",l);let c;return s&&(c=new mm("app-check-internal",l),c.setComponent(new Pa("app-check-internal",()=>s,"PRIVATE"))),o.setComponent(new Pa("auth-internal",()=>a,"PRIVATE")),n0(t,o,c,e,i)}OM();const HM=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:Ls,Database:D2,OnDisconnect:T2,QueryConstraint:Mn,TransactionResult:U2,_QueryImpl:en,_QueryParams:Dd,_ReferenceImpl:Rn,_TEST_ACCESS_forceRestClient:BM,_TEST_ACCESS_hijackHash:UM,_initStandalone:zM,_repoManagerDatabaseFromApp:n0,_setSDKVersion:vp,_validatePathString:Gd,_validateWritablePath:Bn,child:_i,connectDatabaseEmulator:P2,enableLogging:MM,endAt:oM,endBefore:uM,equalTo:t0,forceLongPolling:TM,forceWebSockets:jM,get:Ot,getDatabase:AM,goOffline:IM,goOnline:RM,increment:PM,limitToFirst:Um,limitToLast:gM,off:lM,onChildAdded:aM,onChildChanged:sM,onChildMoved:iM,onChildRemoved:rM,onDisconnect:eM,onValue:Di,orderByChild:Wu,orderByKey:xM,orderByPriority:vM,orderByValue:M2,push:tc,query:Eo,ref:Q,refFromURL:J6,remove:Zd,runTransaction:B2,serverTimestamp:LM,set:Wa,setPriority:tM,setWithPriority:nM,startAfter:hM,startAt:R2,update:et},Symbol.toStringTag,{value:"Module"})),FM=(t,e)=>{let n=()=>{};const a=ue().then(({auth:s,database:i})=>qw(s,l=>{if(n(),l){const o=Q(i,`users/${l.uid}`);n=Di(o,c=>{const u=c.val();if(u){if(u.disabled){Iu(s),e();return}t({id:l.uid,...u})}else Iu(s),t(null)})}else t(null)}));return()=>{a.then(s=>s()),n()}},VM=async()=>{const{auth:t}=await ue();return Iu(t)},QM=async(t,e)=>{const{auth:n,database:a}=await ue();let s=t;if(!t.includes("@")){const i=Q(a,"users"),l=Eo(i,Wu("username"),t0(t)),o=await Ot(l);if(o.exists()){const c=o.val(),u=Object.keys(c)[0];if(s=c[u].email,!s)throw new Error("auth/user-not-found")}else throw new Error("auth/invalid-credential")}await Gw(n,s,e)},GM=async t=>{const{auth:e,database:n}=await ue(),s=(await Qw(e,t.email,t.password)).user.uid,i={name:t.name,email:t.email,username:t.username,avatarId:t.avatarId,gender:t.gender,role:Ge.MASTER,xp:1e3,completedQuests:{},questAttempts:{},rank:"Master Sage"},l={};l[`/users/${s}`]=i,l[`/userRoles/${s}`]=Ge.MASTER,l[`/usernames/${i.username}`]=i.email,await et(Q(n),l)},$M=async t=>{const{database:e}=await ue(),n=Eo(Q(e,"userRoles"),M2(),t0(Ge.MASTER)),a=await Ot(n);t(a.exists())},gl=(t,e)=>{const n=ue().then(({database:a})=>{const s=Q(a,t);return Di(s,i=>{const l=i.val();if(!l){e([]);return}const c=!Array.isArray(l)?Object.entries(l).map(([u,f])=>({...f,id:u})):l;e(Array.isArray(c)?c:[])})});return()=>{n.then(a=>a())}},la=(t,e)=>{const n=[...e].sort((a,s)=>s.xpThreshold-a.xpThreshold);for(const a of n)if(t>=a.xpThreshold)return a;return e.find(a=>a.xpThreshold===0)||{name:"Pemula",xpThreshold:0}},WM=(t,e)=>{const n=[...e].sort((i,l)=>i.xpThreshold-l.xpThreshold),a=la(t,n),s=n.findIndex(i=>i.name===a.name);return s<n.length-1?n[s+1]:null},at=t=>t?t.replace(/ Player$/,""):"",zm=async()=>{const{database:t}=await ue(),e=Q(t,"users"),a=(await Ot(e)).val();return a?Object.entries(a).map(([s,i])=>({...i,id:s})):[]},cb=async(t,e)=>{const{database:n}=await ue(),a=Q(n,"users");let s;const i=!!e,l=i?t+2:t+1;i?s=Eo(a,Wu("name"),R2(e.name,e.id),Um(l)):s=Eo(a,Wu("name"),Um(l));const o=await Ot(s);if(!o.exists())return{players:[],hasNextPage:!1};let c=[];o.forEach(f=>{c.push({id:f.key,...f.val()})}),i&&c.shift();const u=c.length>t;return u&&c.pop(),{players:c,hasNextPage:u}},YM=async(t,e,n)=>{const{database:a,initializeApp:s,modularDeleteApp:i}=await ue(),{firebaseConfig:l}=await zn(async()=>{const{firebaseConfig:o}=await Promise.resolve().then(()=>F1);return{firebaseConfig:o}},void 0);if(t.id){const{id:o,...c}=t,u=await Ot(Q(a,`users/${o}`));if(u.exists()){const f=u.val(),d="username"in c&&f.username!==c.username,h="email"in c&&f.email!==c.email;if(d||h){const m={};d&&(m[`/usernames/${f.username}`]=null);const v=c.username||f.username,b=c.email||f.email;m[`/usernames/${v}`]=b,await et(Q(a),m)}}return await et(Q(a,`users/${o}`),c),await et(Q(a,`leaderboard/${o}`),{name:c.name,avatarId:c.avatarId}),{message:`Data pemain "${c.name}" telah diperbarui.`}}else{const o=`player-creation-${Date.now()}`,c=s(l,o),u=await zn(()=>Promise.resolve().then(()=>bp),void 0),f=u.getAuth,d=f(c);try{const m=(await u.createUserWithEmailAndPassword(d,t.email,n)).user.uid,{id:v,...b}=t,w={...b,role:Ge.PLAYER,xp:0,completedQuests:{},questAttempts:{},rank:la(0,e).name},y={userId:m,name:w.name,xp:0,rank:w.rank,avatarId:w.avatarId},g={};return g[`/users/${m}`]=w,g[`/userRoles/${m}`]=Ge.PLAYER,g[`/leaderboard/${m}`]=y,g[`/usernames/${w.username}`]=w.email,await et(Q(a),g),{message:`Pemain "${w.name}" berhasil dibuat.`}}finally{await i(c)}}},KM=async(t,e)=>{const{database:n,initializeApp:a,modularDeleteApp:s}=await ue(),{firebaseConfig:i}=await zn(async()=>{const{firebaseConfig:b}=await Promise.resolve().then(()=>F1);return{firebaseConfig:b}},void 0),l=`player-batch-creation-${Date.now()}`,o=a(i,l),c=await zn(()=>Promise.resolve().then(()=>bp),void 0),u=c.getAuth,f=u(o);let d=0;const h=[],m={};try{for(const b of t)try{const y=(await c.createUserWithEmailAndPassword(f,b.email,b.password)).user.uid,g={name:b.name,nisn:String(b.nisn),email:b.email,username:b.username,gender:b.gender||Wn.MALE,avatarId:"knight",role:Ge.PLAYER,xp:0,completedQuests:{},questAttempts:{},rank:la(0,e).name},x={userId:y,name:g.name,xp:0,rank:g.rank,avatarId:g.avatarId};m[`/users/${y}`]=g,m[`/userRoles/${y}`]=Ge.PLAYER,m[`/leaderboard/${y}`]=x,m[`/usernames/${g.username}`]=g.email,d++}catch(w){h.push(`Gagal membuat ${b.name} (${b.email}): ${w.message}`)}Object.keys(m).length>0&&await et(Q(n),m)}catch(b){h.push(`Gagal menyimpan data ke database: ${b.message}`)}finally{await s(o)}let v=`${d} dari ${t.length} pemain berhasil diimpor.`;return h.length>0&&(v+=`

Error:
- ${h.join(`
- `)}`),v},qM=async t=>{const{database:e}=await ue(),{id:n,...a}=t;await Wa(Q(e,`users/${n}`),a),a.role===Ge.PLAYER&&await et(Q(e,`leaderboard/${n}`),{name:a.name,rank:a.rank,xp:a.xp,avatarId:a.avatarId})},XM=async(t,e)=>{const{database:n}=await ue(),a={};a[`/users/${t.id}/disabled`]=e,e?a[`/leaderboard/${t.id}`]=null:a[`/leaderboard/${t.id}`]={userId:t.id,name:t.name,xp:t.xp,rank:t.rank,avatarId:t.avatarId},et(Q(n),a)},ub=async(t,e)=>{const{database:n}=await ue();et(Q(n,`users/${t}`),{activeQuestId:e})},ZM=async(t,e,n,a,s)=>{const{database:i}=await ue(),l=t.xp+n,o=la(l,a),c=t.rank,u=t.id,f={score:n,completedAt:Date.now()},d={};return d[`/users/${u}/xp`]=l,d[`/users/${u}/rank`]=o.name,d[`/users/${u}/completedQuests/${e.id}`]=f,d[`/leaderboard/${u}/xp`]=l,d[`/leaderboard/${u}/rank`]=o.name,e.type===Me.CODE&&s&&(d[`/playerSolutions/${u}/${e.id}`]={solution:s}),e.category===we.MAIN&&(d[`/users/${u}/activeQuestId`]=null),await et(Q(i),d),o.name!==c?o:null},JM=async(t,e)=>{const{database:n}=await ue(),a=Q(n,`playerSolutions/${t}/${e}/solution`),s=await Ot(a);return s.exists()?s.val():null},eO=async(t,e)=>{const{database:n}=await ue(),a=Q(n,`users/${t}/questAttempts/${e}`);B2(a,s=>(s||0)+1)},tO=async(t,e,n)=>{var h;const{database:a}=await ue(),i={...(await Ot(Q(a,`users/${t}`))).val()},l=(h=i.completedQuests)==null?void 0:h[e];if(!i||!l)throw new Error("Pemain tidak ditemukan, atau pemain belum menyelesaikan misi ini.");let o;if(typeof l.score=="number")o=l.score;else{const v=(await Ot(Q(a,`quests/${e}`))).val();if(!v)throw new Error(`Data misi (ID: ${e}) tidak ditemukan untuk reset. Progres tidak dapat direset.`);o=v.xp}const c=i.xp||0,u=Math.max(0,c-o);if(isNaN(u))throw new Error("Terjadi kesalahan perhitungan XP (hasil: NaN). Reset dibatalkan.");const f=la(u,n),d={};d[`/users/${t}/xp`]=u,d[`/users/${t}/rank`]=f.name,d[`/users/${t}/completedQuests/${e}`]=null,d[`/users/${t}/questAttempts/${e}`]=null,d[`/leaderboard/${t}/xp`]=u,d[`/leaderboard/${t}/rank`]=f.name,d[`/playerSolutions/${t}/${e}`]=null,await et(Q(a),d)},nO=async t=>{const{database:e}=await ue(),n=t.id.startsWith("new_")?tc(Q(e,"quests")).key:t.id,{id:a,content:s,material:i,...l}=t,o={};o[`/quests/${n}`]={...t,id:n},o[`/quests_metadata/${n}`]={...l,id:n},await et(Q(e),o)},aO=async t=>{const{database:e}=await ue(),n={};n[`/quests/${t}`]=null,n[`/quests_metadata/${t}`]=null,await et(Q(e),n)},z2=async t=>{const{database:e}=await ue(),n=Q(e,`quests/${t}`),a=await Ot(n);return a.exists()?a.val():null},db=async t=>{const{database:e}=await ue(),n={};for(const a of t){const{id:s,content:i,material:l,...o}=a;n[`/quests_metadata/${s}`]={...o,id:s}}Object.keys(n).length>0&&await et(Q(e),n)},sO=async t=>{const{database:e}=await ue(),n=t.id.startsWith("new_")?tc(Q(e,"questChapters")).key:t.id,{id:a,...s}=t;Wa(Q(e,`questChapters/${n}`),{...s,id:n})},hb=async t=>{const{database:e}=await ue();Zd(Q(e,`questChapters/${t}`))},iO=async(t,e)=>{const{database:n}=await ue();await Wa(Q(n,"ranks"),t);const a={};e.forEach(s=>{if(s.role===Ge.PLAYER){const i=la(s.xp,t).name;s.rank!==i&&(a[`/users/${s.id}/rank`]=i,a[`/leaderboard/${s.id}/rank`]=i)}}),Object.keys(a).length>0&&await et(Q(n),a)},rO=async(t,e,n)=>{const{database:a}=await ue(),s=t.id||tc(Q(a,"rooms")).key;await Wa(Q(a,`rooms/${s}`),{id:s,name:t.name});const i={},l=n.filter(o=>o.roomId===s).map(o=>o.id);e.forEach(o=>{i[`/users/${o}/roomId`]=s}),l.forEach(o=>{e.includes(o)||(i[`/users/${o}/roomId`]=null)}),Object.keys(i).length>0&&await et(Q(a),i)},lO=async t=>{const{database:e}=await ue();Zd(Q(e,`rooms/${t}`))},oO=t=>{const e=ue().then(({database:n})=>{const a=Q(n,"playerCodeFiles");return Di(a,s=>{const i={},l=s.val();if(l)for(const o in l){const c=l[o];i[o]=Object.entries(c).map(([u,f])=>({...f,id:u}))}t(i)})});return()=>{e.then(n=>n())}},cO=(t,e)=>{const n=ue().then(({database:a})=>{const s=Q(a,`playerCodeFiles/${t}`);return Di(s,i=>{const l=i.val();if(!l){e([]);return}const o=Object.entries(l).map(([c,u])=>({...u,id:c}));e(Array.isArray(o)?o:[])})});return()=>{n.then(a=>a())}},uO=async(t,e)=>{const{database:n}=await ue(),a=!e.id,s=e.id||tc(Q(n,`playerCodeFiles/${t}`)).key,i={id:s,name:e.name,code:e.code,reviewStatus:a?"none":e.reviewStatus||"none"};return e.masterComment!==void 0&&(i.masterComment=e.masterComment),await Wa(Q(n,`playerCodeFiles/${t}/${s}`),i),i},dO=async(t,e)=>{const{database:n}=await ue();Zd(Q(n,`playerCodeFiles/${t}/${e}`))},hO=async(t,e,n)=>{const{database:a}=await ue(),s=Q(a,`playerCodeFiles/${t}/${e}`);await et(s,n)},fO=async(t,e,n,a,s)=>{const{database:i}=await ue(),l=Q(i,`users/${t}`),o=await Ot(l);if(!o.exists())throw new Error("Pemain tidak ditemukan.");const c={...o.val()},u=c.xp+a,f=la(u,s),d=f.name!==c.rank,h={},m=(await Ot(Q(i,`playerCodeFiles/${t}/${e}`))).val();return h[`/playerCodeFiles/${t}/${e}`]={...m,...n,bonusXp:a},h[`/users/${t}/xp`]=u,h[`/users/${t}/rank`]=f.name,h[`/leaderboard/${t}/xp`]=u,h[`/leaderboard/${t}/rank`]=f.name,await et(Q(i),h),d?f:null},mO=async(t,e,n)=>{const{database:a}=await ue(),s=Q(a,`users/${t}`),i=Q(a,`playerCodeFiles/${t}/${e}`),[l,o]=await Promise.all([Ot(s),Ot(i)]);if(!l.exists()||!o.exists())throw new Error("Pemain atau file tidak ditemukan.");const c={...l.val()},f={...o.val()}.bonusXp||0;if(f<=0){await et(i,{reviewStatus:"submitted",masterComment:null,bonusXp:null});return}const d=c.xp||0,h=Math.max(0,d-f),m=la(h,n),v={};v[`/playerCodeFiles/${t}/${e}/reviewStatus`]="submitted",v[`/playerCodeFiles/${t}/${e}/masterComment`]=null,v[`/playerCodeFiles/${t}/${e}/bonusXp`]=null,v[`/users/${t}/xp`]=h,v[`/users/${t}/rank`]=m.name,v[`/leaderboard/${t}/xp`]=h,v[`/leaderboard/${t}/rank`]=m.name,await et(Q(a),v)},gO=async()=>{const{database:t}=await ue(),e=Q(t,"users"),n=await Ot(e);if(!n.exists()){console.log("No users found to migrate.");return}const a=n.val(),s={};for(const i in a){const l={...a[i]};if(l.completedQuests)for(const o in l.completedQuests){const c=l.completedQuests[o];c&&typeof c.solution=="string"&&c.solution.length>0&&(s[`/playerSolutions/${i}/${o}/solution`]=c.solution,s[`/users/${i}/completedQuests/${o}/solution`]=null)}}s["/migration/solutionsMigrated"]=!0,Object.keys(s).length>1?await et(Q(t),s):await Wa(Q(t,"/migration/solutionsMigrated"),!0)},pO=t=>{const e=ue().then(({database:n})=>{const a=Q(n,"migration/solutionsMigrated");return Di(a,s=>{t(s.val()===!0)})});return()=>{e.then(n=>n())}},ta=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),In=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),el=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Aa=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),H2=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),F2=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),V2=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M22 10.5h-6m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),fb=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),yO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})}),wi=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),mb=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5"})}),xO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),jo=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),a0=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),s0=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"})}),Q2=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})}),bO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})}),vO=t=>r.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"16 18 22 12 16 6"}),r.jsx("polyline",{points:"8 6 2 12 8 18"})]}),i0=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),_O=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),eh=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),ki=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),wO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})}),kO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),CO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),G2=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),ut=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),$2=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),gb=t=>r.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),r.jsx("line",{x1:"9",x2:"9",y1:"3",y2:"21"})]}),ke=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})}),r0=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Yu=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 00-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),pb=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 00-9 0v3.75m.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),Dt=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})}),sc=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0l2.77-.693a9 9 0 016.208.682l.108.054a9 9 0 006.086.71l3.114-.732a48.524 48.524 0 01-.005-10.499l-3.11.732a9 9 0 01-6.085-.711l-.108-.054a9 9 0 00-6.208-.682L3 4.5M3 15V4.5"})}),th=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ss=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),W2=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 21.75l-.648-1.188a2.25 2.25 0 01-1.47-1.47l-1.188-.648 1.188-.648a2.25 2.25 0 011.47-1.47l.648-1.188.648 1.188a2.25 2.25 0 011.47 1.47l1.188.648-1.188.648a2.25 2.25 0 01-1.47 1.47z"})}),Hm=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})}),NO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),nh=t=>r.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),SO=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L6.228 6.228"})}),Ku=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),qu=t=>r.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),EO=t=>r.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"4 17 10 11 4 5"}),r.jsx("line",{x1:"12",x2:"20",y1:"19",y2:"19"})]}),jO=()=>{const[t,e]=p.useState(null),[n,a]=p.useState(!1),[s,i]=p.useState(!1),[l,o]=p.useState([]),[c,u]=p.useState([]),[f,d]=p.useState([]),[h,m]=p.useState([]),[v,b]=p.useState([]),[w,y]=p.useState([]),[g,x]=p.useState(null),[_,k]=p.useState(null),[E,C]=p.useState(()=>{if(typeof window<"u"&&window.localStorage){const L=window.localStorage.getItem("theme");if(L)return L;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"}),S=p.useCallback(()=>{C(L=>{const G=L==="light"?"dark":"light";return localStorage.setItem("theme",G),G})},[]);p.useEffect(()=>{const L=window.document.documentElement;E==="dark"?L.classList.add("dark"):L.classList.remove("dark")},[E]);const T=p.useCallback((L,G)=>{x({title:L,message:G})},[]),I=p.useCallback(()=>x(null),[]),N=p.useCallback((L,G,ge)=>{k({title:L,message:G,icon:ge||Dn.createElement(Ss,{className:"w-5 h-5"})})},[]);p.useEffect(()=>{if(_){const L=setTimeout(()=>k(null),4e3);return()=>clearTimeout(L)}},[_]);const W=p.useCallback(()=>k(null),[]);p.useEffect(()=>{$M(G=>{i(!G)});const L=FM(G=>{e(G),a(!0)},()=>{x({title:"Akses Ditolak",message:"Akun Anda telah dinonaktifkan oleh Master. Silakan hubungi pengelola untuk informasi lebih lanjut."})});return()=>L()},[]),p.useEffect(()=>{if(!n)return;if(!t){o([]),u([]),d([]),b([]),m([]),y([]);return}const L=gl("ranks",Nt=>o(Nt||[])),G=gl("quests_metadata",Nt=>u(Nt||[])),ge=gl("questChapters",Nt=>d(Nt||[])),Fe=gl("leaderboard",Nt=>{const tl=Nt.sort((D,J)=>J.xp-D.xp);b(tl)}),Ve=gl("rooms",Nt=>m(Nt));let Xe=()=>{};return t.role===Ge.PLAYER?Xe=cO(t.id,Nt=>y(Nt)):y([]),()=>{L(),G(),ge(),Fe(),Ve(),Xe()}},[n,t]);const H=p.useRef([]);p.useEffect(()=>{if(!t||t.role!==Ge.PLAYER||H.current.length===0){H.current=w;return}const L=H.current;w.forEach(G=>{const ge=L.find(Fe=>Fe.id===G.id);if(ge&&ge.reviewStatus!==G.reviewStatus)if(G.reviewStatus==="approved"){let Fe=`Kerja bagus! File "${G.name}" Anda telah disetujui.`;G.bonusXp&&G.bonusXp>0&&(Fe+=` Anda mendapat ${G.bonusXp} XP tambahan!`),N("File Disetujui",Fe,Dn.createElement(ke,{className:"w-5 h-5 text-green-500"}))}else G.reviewStatus==="rejected"&&N("File Ditolak",`File "${G.name}" Anda ditolak. Cek komentar dari Master.`,Dn.createElement(ut,{className:"w-5 h-5 text-red-500"}))}),H.current=w},[w,N,t]);const fe=p.useCallback(()=>VM(),[]),K=p.useCallback(async(L,G)=>{try{await QM(L,G)}catch(ge){const Ve={"auth/user-not-found":"Email/username atau password salah.","auth/wrong-password":"Email/username atau password salah.","auth/invalid-credential":"Email/username atau password salah.","auth/invalid-email":"Format email tidak valid."}[ge.code||ge.message]||"Terjadi kesalahan. Silakan coba lagi.";throw new Error(Ve)}},[]),A=p.useCallback(async L=>{try{await GM(L),i(!1)}catch(G){T("Gagal Membuat Akun Master",G.message)}},[T]),z=p.useCallback(L=>qM(L),[]),O=p.useCallback(async(L,G,ge)=>{var Fe;if(t&&!((Fe=t.completedQuests)!=null&&Fe[L.id])){const Ve=await ZM(t,L,G,l,ge);Ve&&N("Naik Pangkat!",`Selamat! Kamu telah mencapai peringkat ${Ve.name}.`,Dn.createElement(Dt,{className:"w-6 h-6 text-yellow-500"}))}},[t,l,N]),B=p.useCallback(L=>{t&&eO(t.id,L)},[t]),U=p.useCallback(L=>{t&&ub(t.id,L)},[t]),q=p.useCallback(async(L,G)=>{try{await tO(L,G,l),N("Berhasil","Progres pemain untuk misi ini telah direset.")}catch(ge){T("Gagal Mereset",ge.message)}},[l,T,N]),ae=p.useCallback(async L=>{try{await ub(L,null),N("Berhasil","Pemain telah berhasil dibuka kuncinya.",Dn.createElement(ke,{className:"w-5 h-5 text-green-500"}))}catch(G){T("Gagal Membuka Kunci",G.message)}},[T,N]),P=p.useCallback(async L=>{const G=await zm();iO(L,G)},[]),V=p.useCallback(L=>nO(L),[]),le=p.useCallback(L=>aO(L),[]),Ae=p.useCallback(async()=>{if((t==null?void 0:t.role)===Ge.MASTER){const{database:L}=await ue(),G=Q(L,"quests"),Fe=(await Ot(G)).val();if(!Fe){await db([]);return}const Ve=Object.entries(Fe).map(([Xe,Nt])=>({...Nt,id:Xe}));await db(Ve)}else throw new Error("Hanya Master yang dapat melakukan aksi ini.")},[t]),Ie=p.useCallback(L=>sO(L),[]),It=p.useCallback(async L=>{const G=f.find(Xe=>Xe.id===L);if(!G)return!1;const ge=f.filter(Xe=>Xe.parentId===L).map(Xe=>Xe.id),Fe=[L,...ge];if(c.some(Xe=>Xe.chapterId&&Fe.includes(Xe.chapterId)))return T("Aksi Ditolak",`Tidak dapat menghapus bab "${G.title}" karena masih ada misi yang terikat padanya atau pada sub-babnya. Pindahkan misi terlebih dahulu.`),!1;for(const Xe of ge)hb(Xe);return hb(L),N("Berhasil",`Bab "${G.title}" dan sub-babnya telah dihapus.`,Dn.createElement(ke,{className:"w-5 h-5 text-green-500"})),!0},[f,c,T,N]),tn=p.useCallback(async(L,G)=>YM(L,l,G),[l]),dt=p.useCallback(async L=>KM(L,l),[l]),Qn=p.useCallback((L,G)=>XM(L,G),[]),Z=p.useCallback(async(L,G)=>{const ge=await zm();await rO(L,G,ge)},[]),nn=p.useCallback(L=>lO(L),[]),Lt=p.useCallback(async L=>t?uO(t.id,L):null,[t]),Qt=p.useCallback(L=>{t&&dO(t.id,L)},[t]),Gn=p.useCallback(async(L,G,ge,Fe=0)=>{try{let Ve="File berhasil diperbarui.";if(ge.reviewStatus==="approved"&&Fe>0&&(t==null?void 0:t.role)===Ge.MASTER){const Xe=await fO(L,G,ge,Fe,l);Xe&&N("Pemain Naik Pangkat!",`Selamat! Pemain telah mencapai peringkat ${Xe.name}.`,Dn.createElement(Dt,{className:"w-6 h-6 text-yellow-500"})),Ve=`File telah disetujui dan ${Fe} XP bonus diberikan.`}else ge.reviewStatus==="submitted"&&(t==null?void 0:t.role)===Ge.MASTER?(await mO(L,G,l),Ve="Penilaian telah direset dan XP bonus (jika ada) telah dikembalikan."):(await hO(L,G,ge),ge.reviewStatus==="submitted"&&(t==null?void 0:t.role)===Ge.PLAYER?Ve="File berhasil diajukan untuk penilaian.":ge.reviewStatus==="approved"&&(t==null?void 0:t.role)===Ge.MASTER?Ve="File telah disetujui (tanpa bonus XP).":ge.reviewStatus==="rejected"&&(t==null?void 0:t.role)===Ge.MASTER&&(Ve="File telah ditolak."));N("Berhasil",Ve,Dn.createElement(ke,{className:"w-5 h-5 text-green-500"}))}catch(Ve){throw T("Gagal Memperbarui File",Ve.message),Ve}},[l,T,N,t]);return{currentUser:t,authChecked:n,needsMasterSetup:s,ranks:l,questsMetadata:c,questChapters:f,rooms:h,leaderboard:v,playerCodeFiles:w,theme:E,toggleTheme:S,logout:fe,signIn:K,handleMasterSetup:A,handleUpdateUser:z,handleQuestComplete:O,handleRecordAttempt:B,handleSetActiveQuest:U,handleResetPlayerQuestProgress:q,handleUnlockPlayer:ae,handleUpdateRanks:P,handleSaveQuest:V,handleDeleteQuest:le,handleGenerateQuestsMetadata:Ae,handleSaveQuestChapter:Ie,handleDeleteQuestChapter:It,handleSavePlayer:tn,handleBatchImportPlayers:dt,handleTogglePlayerStatus:Qn,handleSaveRoom:Z,handleDeleteRoom:nn,handleSavePlayerCodeFile:Lt,handleDeletePlayerCodeFile:Qt,handleUpdatePlayerCodeFile:Gn,showAlert:T,showToast:N,alertModalContent:g,toastContent:_,closeAlert:I,closeToast:W}},l0=p.createContext(void 0),TO=({children:t})=>{const e=jO();return r.jsx(l0.Provider,{value:e,children:t})},Vt=()=>{const t=p.useContext(l0);if(t===void 0)throw new Error("useApplication must be used within an ApplicationProvider");return t},AO=({isOpen:t,onClose:e,title:n,children:a})=>t?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all p-6",onClick:s=>s.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200","aria-label":"Tutup",children:r.jsx(ut,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"text-gray-700 dark:text-gray-300 mt-4 whitespace-pre-wrap",children:a}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:e,className:"font-bold py-2 px-6 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:"Tutup"})})]})}):null,IO=({title:t,message:e,icon:n,onClose:a})=>{const[s,i]=p.useState(!1);p.useEffect(()=>()=>{},[]);const l=()=>{i(!0),setTimeout(a,300)};return p.useEffect(()=>{const o=setTimeout(()=>{i(!0)},3700);return()=>clearTimeout(o)},[]),r.jsx("div",{className:`fixed top-5 right-5 z-50 max-w-sm ${s?"animate-slide-out-to-right":"animate-slide-in-from-right"}`,role:"alert",children:r.jsxs("div",{className:"flex items-center w-full p-4 text-gray-500 bg-white rounded-lg shadow-lg dark:text-gray-400 dark:bg-gray-800",children:[r.jsx("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-blue-500 bg-blue-100 rounded-lg dark:bg-blue-800 dark:text-blue-200",children:n}),r.jsxs("div",{className:"ms-3 text-sm font-normal",children:[r.jsx("span",{className:"mb-1 text-sm font-semibold text-gray-900 dark:text-white",children:t}),r.jsx("div",{className:"mb-2 text-sm font-normal",children:e})]}),r.jsxs("button",{type:"button",className:"ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","aria-label":"Close",onClick:l,children:[r.jsx("span",{className:"sr-only",children:"Close"}),r.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:r.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})})]})]})})},o0=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#E0E7FF"}),r.jsx("path",{d:"M9 9.5L7 12L9 14.5",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M15 9.5L17 12L15 14.5",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M12 15L11 9",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M10 4.5C10 4.5 10.5 6 12 6C13.5 6 14 4.5 14 4.5",stroke:"#6D28D9",strokeWidth:"1.5",strokeLinecap:"round"})]}),Y2=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FCE7F3"}),r.jsx("path",{d:"M9 9.5L7 12L9 14.5",stroke:"#DB2777",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M15 9.5L17 12L15 14.5",stroke:"#DB2777",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M10 17C10 15.8954 10.8954 15 12 15C13.1046 15 14 15.8954 14 17",stroke:"#DB2777",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M9 5C9 5 10 3 12 3C14 3 15 5 15 5",stroke:"#9D174D",strokeWidth:"1.5",strokeLinecap:"round"})]}),K2=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("rect",{x:"5",y:"10",width:"14",height:"10",rx:"2",fill:"#9CA3AF"}),r.jsx("rect",{x:"8",y:"4",width:"8",height:"8",rx:"2",fill:"#E5E7EB"}),r.jsx("circle",{cx:"10",cy:"8",r:"1",fill:"#4F46E5"}),r.jsx("circle",{cx:"14",cy:"8",r:"1",fill:"#4F46E5"}),r.jsx("line",{x1:"3",y1:"13",x2:"5",y2:"13",stroke:"#9CA3AF",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("line",{x1:"19",y1:"13",x2:"21",y2:"13",stroke:"#9CA3AF",strokeWidth:"2",strokeLinecap:"round"})]}),q2=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M8 20C8 17.2667 11.3333 16.2 13 15C15 13.5 13 11.5 11.5 10C10 8.5 7.5 7 9 5C10.5 3 14.5 4 16 6",stroke:"#4F46E5",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M7 6C7 4.16667 9.83333 3.8 11 5C12.5 6.5 10.5 8.5 9 10C7.5 11.5 5 13 7 15C9 17 12.5 16 14 14",stroke:"#F59E0B",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),X2=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#D1FAE5"}),r.jsx("rect",{x:"8",y:"12",width:"2",height:"5",fill:"#10B981"}),r.jsx("rect",{x:"11",y:"9",width:"2",height:"8",fill:"#10B981"}),r.jsx("rect",{x:"14",y:"14",width:"2",height:"3",fill:"#10B981"}),r.jsx("circle",{cx:"12",cy:"8",r:"3",fill:"#10B981"})]}),Z2=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#1F2937"}),r.jsx("path",{d:"M9 14H7V12H9V14Z",fill:"#A78BFA"}),r.jsx("path",{d:"M12 11H10V9H12V11Z",fill:"#A78BFA"}),r.jsx("path",{d:"M15 14H13V12H15V14Z",fill:"#A78BFA"}),r.jsx("path",{d:"M12 17H10V15H12V17Z",fill:"#A78BFA"}),r.jsx("circle",{cx:"16.5",cy:"10.5",r:"1.5",fill:"#F472B6"})]}),J2=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FEF2F2"}),r.jsx("path",{d:"M12 17V15M12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12C15 13.6569 13.6569 15 12 15ZM16 7L18 5M6 7L4 5M16 17L18 19M6 17L4 19",stroke:"#EF4444",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M10 7H14",stroke:"#B91C1C",strokeWidth:"1.5",strokeLinecap:"round"})]}),eC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#4B5563"}),r.jsx("path",{d:"M8 12C8 12 9.5 10 12 10C14.5 10 16 12 16 12",stroke:"#10B981",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M9 15L15 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M12 3V6",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M12 18V21",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"})]}),tC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#DBEAFE"}),r.jsx("circle",{cx:"12",cy:"9",r:"3",fill:"#60A5FA"}),r.jsx("path",{d:"M12 12V17M12 17C10.3431 17 9 18.3431 9 20M12 17C13.6569 17 15 18.3431 15 20",stroke:"#1E40AF",strokeWidth:"1.5",strokeLinecap:"round"})]}),nC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FEE2E2"}),r.jsx("path",{d:"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z",fill:"#F87171"}),r.jsx("path",{d:"M12 12V17M12 17C10.3431 17 9 18.3431 9 20M12 17C13.6569 17 15 18.3431 15 20",stroke:"#991B1B",strokeWidth:"1.5",strokeLinecap:"round"})]}),aC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z",fill:"#DDD6FE"}),r.jsx("path",{d:"M12 18V14M12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14ZM12 14H15.5C16.8807 14 18 15.1193 18 16.5C18 17.8807 16.8807 19 15.5 19H12M12 14H8.5C7.11929 14 6 15.1193 6 16.5C6 17.8807 7.11929 19 8.5 19H12",stroke:"#7C3AED",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),sC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#111827"}),r.jsx("path",{d:"M7 11L9.5 13L7 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M17 11L14.5 13L17 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M6 10C6 10 8 8 12 8C16 8 18 10 18 10",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round"})]}),iC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FFFBEB"}),r.jsx("path",{d:"M12 13V19M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",fill:"#FBBF24"}),r.jsx("path",{d:"M9 19H15",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M10 16H14",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round"})]}),rC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M12 2L4 5V11C4 16.5 7.5 21.5 12 22C16.5 21.5 20 16.5 20 11V5L12 2Z",fill:"#E0F2FE"}),r.jsx("path",{d:"M12 2L4 5V11C4 16.5 7.5 21.5 12 22C16.5 21.5 20 16.5 20 11V5L12 2Z",stroke:"#0EA5E9",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M10 13L12 15L15 10",stroke:"#0284C7",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),lC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("rect",{x:"7",y:"2",width:"10",height:"20",rx:"2",fill:"#E5E7EB"}),r.jsx("path",{d:"M10 5L14 5",stroke:"#4B5563",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"19",r:"1",fill:"#4B5563"}),r.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#3B82F6"})]}),oC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F0FDF4"}),r.jsx("circle",{cx:"12",cy:"18",r:"2",stroke:"#22C55E",strokeWidth:"1.5"}),r.jsx("circle",{cx:"18",cy:"9",r:"2",stroke:"#22C55E",strokeWidth:"1.5"}),r.jsx("circle",{cx:"6",cy:"9",r:"2",stroke:"#22C55E",strokeWidth:"1.5"}),r.jsx("path",{d:"M12 16V12",stroke:"#22C55E",strokeWidth:"1.5"}),r.jsx("path",{d:"M12 12L16.5 9.75",stroke:"#22C55E",strokeWidth:"1.5"}),r.jsx("path",{d:"M12 12L7.5 9.75",stroke:"#22C55E",strokeWidth:"1.5"})]}),cC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F3E8FF"}),r.jsx("path",{d:"M6 9H18V15H6V9Z",fill:"#A855F7"}),r.jsx("path",{d:"M6 12H2",stroke:"#A855F7",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M18 12H22",stroke:"#A855F7",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("circle",{cx:"9.5",cy:"12",r:"1.5",fill:"#F5D0FE"}),r.jsx("circle",{cx:"14.5",cy:"12",r:"1.5",fill:"#F5D0FE"})]}),uC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",fill:"#EFF6FF"}),r.jsx("circle",{cx:"8",cy:"10",r:"1",fill:"#3B82F6"}),r.jsx("circle",{cx:"12",cy:"10",r:"1",fill:"#3B82F6"}),r.jsx("circle",{cx:"16",cy:"10",r:"1",fill:"#3B82F6"})]}),dC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#E0F2FE"}),r.jsx("path",{d:"M9 16V12L12 14L15 10V16",stroke:"#0EA5E9",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"12",cy:"8",r:"3",fill:"#7DD3FC"}),r.jsx("path",{d:"M10 8H14",stroke:"#0369A1",strokeWidth:"1"})]}),hC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FDF2F8"}),r.jsx("path",{d:"M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8",stroke:"#F472B6",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M12 16V8",stroke:"#F472B6",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M12 8H16",stroke:"#F472B6",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M15 5C15 5 14 3 12 3C10 3 9 5 9 5",stroke:"#BE185D",strokeWidth:"1.5",strokeLinecap:"round"})]}),fC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M18 10H18.25C19.7688 10 21 11.2312 21 12.75C21 14.2688 19.7688 15.5 18.25 15.5H5.75C4.23122 15.5 3 14.2688 3 12.75C3 11.2312 4.23122 10 5.75 10H6",stroke:"#94A3B8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M12 12C10.3431 12 9 10.6569 9 9C9 7.34315 10.3431 6 12 6C13.6569 6 15 7.34315 15 9C15 10.6569 13.6569 12 12 12Z",fill:"#38BDF8"}),r.jsx("path",{d:"M12 12V18",stroke:"#0EA5E9",strokeWidth:"1.5",strokeLinecap:"round"})]}),mC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F5F3FF"}),r.jsx("rect",{x:"10",y:"5",width:"4",height:"4",rx:"1",stroke:"#8B5CF6",strokeWidth:"1.5"}),r.jsx("path",{d:"M12 9V12",stroke:"#8B5CF6",strokeWidth:"1.5"}),r.jsx("path",{d:"M12 15L15 19H9L12 15Z",stroke:"#8B5CF6",strokeWidth:"1.5",strokeLinejoin:"round"}),r.jsx("path",{d:"M7 12H17",stroke:"#8B5CF6",strokeWidth:"1.5"})]}),gC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F0F9FF"}),r.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"1",fill:"#7DD3FC"}),r.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"white"}),r.jsx("path",{d:"M16 5L19 8",stroke:"#0EA5E9",strokeWidth:"2",strokeLinecap:"round"})]}),pC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2",fill:"#374151"}),r.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1",fill:"#9CA3AF"}),r.jsx("path",{d:"M12 6V2",stroke:"#4F46E5",strokeWidth:"1.5"}),r.jsx("path",{d:"M12 22V18",stroke:"#4F46E5",strokeWidth:"1.5"}),r.jsx("path",{d:"M18 12H22",stroke:"#4F46E5",strokeWidth:"1.5"}),r.jsx("path",{d:"M2 12H6",stroke:"#4F46E5",strokeWidth:"1.5"})]}),yC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#E2E8F0"}),r.jsx("path",{d:"M9 8H10.5V16H9",fill:"#1E293B"}),r.jsx("path",{d:"M14 16C15.6569 16 17 14.6569 17 13C17 11.3431 15.6569 10 14 10C12.3431 10 11 11.3431 11 13C11 14.6569 12.3431 16 14 16Z",fill:"#1E293B"}),r.jsx("path",{d:"M6 11H7.5V13H6",fill:"#1E293B",opacity:"0.5"}),r.jsx("path",{d:"M18 9H19.5V11H18",fill:"#1E293B",opacity:"0.5"})]}),xC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#4338CA"}),r.jsx("ellipse",{cx:"12",cy:"12",rx:"8",ry:"3",stroke:"#6366F1",strokeWidth:"1.5"}),r.jsx("ellipse",{cx:"12",cy:"12",rx:"3",ry:"8",transform:"rotate(90 12 12)",stroke:"#6366F1",strokeWidth:"1.5"}),r.jsx("path",{d:"M5.5 15.5L4 17",stroke:"#A5B4FC",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M18.5 15.5L20 17",stroke:"#A5B4FC",strokeWidth:"1.5",strokeLinecap:"round"})]}),bC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F1F5F9"}),r.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#475569",strokeWidth:"1.5"}),r.jsx("path",{d:"M20 12C20 16.4183 16.4183 20 12 20C10.1537 20 8.48283 19.3722 7.15286 18.3312",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M4 12C4 7.58172 7.58172 4 12 4C13.8463 4 15.5172 4.62778 16.8471 5.66878",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M6 19L7.15286 18.3312L8 19.5",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M18 5L16.8471 5.66878L16 4.5",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),vC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#111827"}),r.jsx("path",{d:"M5 10C5 8.89543 5.89543 8 7 8H17C18.1046 8 19 8.89543 19 10V14H5V10Z",fill:"#3730A3"}),r.jsx("path",{d:"M8 11H10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M19 12H21",stroke:"#4F46E5",strokeWidth:"2",strokeLinecap:"round"})]}),_C=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FDF4FF"}),r.jsx("path",{d:"M16 9H8V11H16V9Z",fill:"#D946EF"}),r.jsx("path",{d:"M14 14H10V15H14V14Z",stroke:"#A21CAF",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M15 5C15 5 14 3 12 3C10 3 9 5 9 5",stroke:"#701A75",strokeWidth:"1.5",strokeLinecap:"round"})]}),wC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("ellipse",{cx:"12",cy:"17",rx:"5",ry:"2",fill:"#9CA3AF"}),r.jsx("path",{d:"M7 12C7 10.8954 9.23858 10 12 10C14.7614 10 17 10.8954 17 12V17H7V12Z",fill:"#D1D5DB"}),r.jsx("ellipse",{cx:"12",cy:"12",rx:"5",ry:"2",fill:"#9CA3AF"}),r.jsx("path",{d:"M7 7C7 5.89543 9.23858 5 12 5C14.7614 5 17 5.89543 17 7V12H7V7Z",fill:"#D1D5DB"}),r.jsx("ellipse",{cx:"12",cy:"7",rx:"5",ry:"2",fill:"#9CA3AF"})]}),kC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FEF3C7"}),r.jsx("path",{d:"M15 5C15 5 14 3 12 3C10 3 9 5 9 5",stroke:"#D97706",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"9",r:"3",fill:"#FCD34D"}),r.jsx("path",{d:"M12 12L12 16",stroke:"#B45309",strokeWidth:"1.5"}),r.jsx("path",{d:"M12 16L16 20L18 18",stroke:"#9CA3AF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),CC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"6",cy:"7",r:"2",stroke:"#16A34A",strokeWidth:"1.5"}),r.jsx("circle",{cx:"6",cy:"17",r:"2",stroke:"#16A34A",strokeWidth:"1.5"}),r.jsx("circle",{cx:"18",cy:"12",r:"2",stroke:"#16A34A",strokeWidth:"1.5"}),r.jsx("path",{d:"M8 7.5L16 11.5",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round"}),r.jsx("path",{d:"M8 16.5L16 12.5",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round"})]}),NC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2L8 6v4h8V6l-4-4z",fill:"#E5E7EB"}),r.jsx("path",{d:"M18 10H6c-1.1 0-2 .9-2 2v8h16v-8c0-1.1-.9-2-2-2z",fill:"#9CA3AF"}),r.jsx("path",{d:"M12 14v4"}),r.jsx("path",{d:"M9 14h6"}),r.jsx("path",{d:"M12 12h.01"})]}),SC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2l-8 5 3 13h10l3-13z",fill:"#A78BFA"}),r.jsx("path",{d:"M12 2l4 8-4 2-4-2z",fill:"#C4B5FD"}),r.jsx("path",{d:"M12 22a2 2 0 100-4 2 2 0 000 4z",fill:"#FBBF24"})]}),EC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2L9 5v3h6V5l-3-3z",fill:"#D1D5DB"}),r.jsx("rect",{x:"5",y:"8",width:"14",height:"10",rx:"2",fill:"#6B7280"}),r.jsx("path",{d:"M9 18v4h6v-4"}),r.jsx("path",{d:"M12 12v3"})]}),jC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 4l-2 4h4z",fill:"#F87171"}),r.jsx("path",{d:"M6 8h12l-2 12H8z",fill:"#9CA3AF"}),r.jsx("path",{d:"M12 8V6"})]}),TC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2L4 8l8 14 8-14z",fill:"#60A5FA"}),r.jsx("path",{d:"M12 12l-3 5h6z",fill:"#93C5FD"}),r.jsx("circle",{cx:"12",cy:"7",r:"2",fill:"#FFFFFF"})]}),AC=t=>r.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2 L6 22 L18 22 Z",fill:"#C084FC"}),r.jsx("circle",{cx:"12",cy:"8",r:"3",fill:"#FBCFE8"}),r.jsx("path",{d:"M10 12h4",stroke:"#A21CAF"})]}),RO=o0,MO={coder_male:o0,coder_female:Y2,robot_sidekick:K2,python_snake:q2,data_analyst:X2,game_dev:Z2,bug_fixer:J2,ethical_hacker:eC,student_male:tC,student_female:nC,ai_brain:aC,code_ninja:sC,idea_inventor:iC,security_specialist:rC,mobile_dev:lC,open_source:oC,vr_developer:cC,ai_chatbot:uC,data_scientist_male:dC,data_scientist_female:hC,cloud_engineer:fC,algorithm_master:mC,ui_designer:gC,hardware_engineer:pC,binary_brain:yC,quantum_coder:xC,devops_automator:bC,ar_goggles:vC,cyberpunk_hacker_female:_C,database_admin:wC,robotics_engineer_female:kC,ml_model:CC,knight:NC,wizard:SC,warrior_male:EC,warrior_female:jC,mage_male:TC,mage_female:AC},c0=[{id:"coder_male",component:o0,name:"Koder Pria",gender:"male"},{id:"coder_female",component:Y2,name:"Koder Wanita",gender:"female"},{id:"student_male",component:tC,name:"Pelajar Pria",gender:"male"},{id:"student_female",component:nC,name:"Pelajar Wanita",gender:"female"},{id:"data_scientist_male",component:dC,name:"Data Scientist Pria",gender:"male"},{id:"data_scientist_female",component:hC,name:"Data Scientist Wanita",gender:"female"},{id:"cyberpunk_hacker_female",component:_C,name:"Cyberpunk Hacker",gender:"female"},{id:"robotics_engineer_female",component:kC,name:"Insinyur Robotik",gender:"female"},{id:"robot_sidekick",component:K2,name:"Asisten Robot",gender:"unisex"},{id:"python_snake",component:q2,name:"Python Star",gender:"unisex"},{id:"code_ninja",component:sC,name:"Code Ninja",gender:"unisex"},{id:"ethical_hacker",component:eC,name:"Ethical Hacker",gender:"unisex"},{id:"bug_fixer",component:J2,name:"Pembasmi Bug",gender:"unisex"},{id:"game_dev",component:Z2,name:"Game Developer",gender:"unisex"},{id:"data_analyst",component:X2,name:"Analis Data",gender:"unisex"},{id:"ai_brain",component:aC,name:"AI Engineer",gender:"unisex"},{id:"idea_inventor",component:iC,name:"Sang Inovator",gender:"unisex"},{id:"security_specialist",component:rC,name:"Spesialis Keamanan",gender:"unisex"},{id:"mobile_dev",component:lC,name:"Mobile Developer",gender:"unisex"},{id:"open_source",component:oC,name:"Kontributor Open Source",gender:"unisex"},{id:"vr_developer",component:cC,name:"VR Developer",gender:"unisex"},{id:"ai_chatbot",component:uC,name:"AI Chatbot",gender:"unisex"},{id:"cloud_engineer",component:fC,name:"Cloud Engineer",gender:"unisex"},{id:"algorithm_master",component:mC,name:"Master Algoritma",gender:"unisex"},{id:"ui_designer",component:gC,name:"UI/UX Designer",gender:"unisex"},{id:"hardware_engineer",component:pC,name:"Hardware Engineer",gender:"unisex"},{id:"binary_brain",component:yC,name:"Binary Brain",gender:"unisex"},{id:"quantum_coder",component:xC,name:"Quantum Coder",gender:"unisex"},{id:"devops_automator",component:bC,name:"DevOps Automator",gender:"unisex"},{id:"ar_goggles",component:vC,name:"AR Developer",gender:"unisex"},{id:"database_admin",component:wC,name:"Database Admin",gender:"unisex"},{id:"ml_model",component:CC,name:"Machine Learning",gender:"unisex"},{id:"knight",component:NC,name:"Ksatria Kode",gender:"male"},{id:"warrior_male",component:EC,name:"Pejuang Pria",gender:"male"},{id:"warrior_female",component:jC,name:"Pejuang Wanita",gender:"female"},{id:"wizard",component:SC,name:"Penyihir Bijak",gender:"male"},{id:"mage_male",component:TC,name:"Mage Pria",gender:"male"},{id:"mage_female",component:AC,name:"Mage Wanita",gender:"female"}],Qs=t=>MO[t]||RO,OO=(t,e=500)=>{const[n,a]=p.useState(t),s=p.useRef(null),i=p.useRef(t);return p.useEffect(()=>{const l=i.current,o=t;let c=null;const u=f=>{c||(c=f);const d=f-c,h=Math.min(d/e,1),m=Math.floor(l+(o-l)*h);a(m),d<e?s.current=requestAnimationFrame(u):(a(o),i.current=o)};return s.current=requestAnimationFrame(u),()=>{s.current&&cancelAnimationFrame(s.current)}},[t,e]),Math.round(n)},DO=({user:t,onLogout:e,onProfileClick:n})=>{const{theme:a,toggleTheme:s}=Vt(),i=Qs(t.avatarId),l=OO(t.xp,500);return r.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm p-4 flex justify-between items-center flex-shrink-0 z-10",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-indigo-400",children:"Python Quest"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 hidden sm:block",children:t.role===Ge.MASTER?`Selamat datang kembali, ${at(t.name)}!`:"Petualangan Koding Menantimu!"})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[r.jsxs("button",{onClick:n,disabled:!n,className:"flex items-center gap-2 sm:gap-4 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:hover:bg-transparent disabled:cursor-default",children:[r.jsx("div",{className:"text-right",children:t.role===Ge.PLAYER?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"font-semibold hidden sm:block",children:t.rank}),r.jsxs("p",{className:"text-sm text-accent dark:text-amber-400 font-bold",children:[l," XP"]})]}):r.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 hidden sm:block",children:at(t.name)})}),r.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center p-1",children:r.jsx(i,{className:"w-10 h-10"})})]}),r.jsx("button",{onClick:s,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:a==="light"?r.jsx(qu,{className:"w-6 h-6"}):r.jsx(Ku,{className:"w-6 h-6"})}),r.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-gray-200 dark:bg-gray-700 hover:bg-red-100 dark:hover:bg-red-900/50 text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 font-semibold py-2 px-3 rounded-lg transition-colors",children:[r.jsx(yO,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Keluar"})]})]})]})},IC=({user:t,onLogout:e,onProfileClick:n,children:a,fullWidth:s=!1})=>r.jsxs("div",{className:"h-screen bg-gray-50 dark:bg-gray-900 flex flex-col overflow-hidden",children:[r.jsx(DO,{user:t,onLogout:e,onProfileClick:n}),r.jsx("main",{className:"flex-grow overflow-y-auto p-4 sm:p-6 lg:p-8",children:r.jsx("div",{className:s?"":"max-w-7xl mx-auto",children:a})})]}),LO=[{id:"beranda",label:"Beranda",icon:G2},{id:"misi",label:"Misi",icon:sc},{id:"tantangan",label:"Tantangan",icon:jo},{id:"peringkat",label:"Peringkat",icon:Dt},{id:"playground",label:"Arena Koding",icon:s0}],PO=()=>r.jsx("nav",{className:"bg-white dark:bg-gray-800/50 p-2 rounded-xl shadow-sm flex items-center justify-center gap-1 sm:gap-2",children:LO.map(t=>r.jsxs(Ul,{to:t.id,className:({isActive:e})=>`flex-1 flex items-center justify-center gap-2 font-semibold p-2 sm:p-3 rounded-lg transition-colors duration-200 ${e?"bg-primary text-white shadow":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(t.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:t.label})]},t.id))}),ah=t=>{let e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");const n=["return","if","else","elif","for","while","in","and","or","not","True","False","None"],a=["print","len","range","int","str","input"],s=new RegExp(['(".*?")',"('.*?')","(#.*)","\\b(def)\\s+([a-zA-Z_]\\w*)",`\\b(${n.join("|")})\\b`,`\\b(${a.join("|")})\\b`,"\\b(\\d+(\\.\\d+)?)\\b"].join("|"),"g");return e=e.replace(s,(i,l,o,c,u,f,d,h,m)=>l||o?`<span class="text-green-400">${l||o}</span>`:c?`<span class="text-gray-500">${c}</span>`:u&&f?`<span class="text-sky-400 font-semibold">${u}</span> <span class="text-purple-400">${f}</span>`:d?`<span class="text-sky-400 font-semibold">${d}</span>`:h?`<span class="text-pink-400">${h}</span>`:m?`<span class="text-amber-400">${m}</span>`:i),e},To=t=>{if(!t)return"";const e=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),n=i=>{if(!i)return"";const l=[];let o=i.replace(/\\([*`_#|\\])/g,(c,u)=>(l.push(u),`__MD_ESCAPE_${l.length-1}__`));return o=e(o).replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-700 text-red-600 dark:text-red-400 font-mono rounded px-2 py-1 border border-gray-200 dark:border-gray-600">$1</code>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic">$1</em>'),l.forEach((c,u)=>{o=o.replace(`__MD_ESCAPE_${u}__`,e(c))}),o};return t.trim().split(/\n\s*\n/).map(i=>{const l=i.trim(),o=l.split(`
`);if(o.length>=2&&o[0].trim().startsWith("|")&&o[0].trim().endsWith("|")&&o[1].trim().startsWith("|")&&o[1].trim().includes("-")&&o[1].trim().endsWith("|"))try{const f=w=>w.trim().split("|").slice(1,-1).map(y=>y.trim()),d=f(o[0]),h=o[1],m=o.slice(2).map(w=>f(w)).filter(w=>w.length>0&&w.some(y=>y)),v=f(h).map(w=>{const y=w.trim();return y.startsWith(":")&&y.endsWith(":")?"center":y.endsWith(":")?"right":(y.startsWith(":"),"left")});let b='<table class="w-full my-4 text-left border-collapse text-sm">';return b+='<thead><tr class="border-b-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">',d.forEach((w,y)=>{const g=`text-align: ${v[y]||"left"};`;b+=`<th class="p-3 font-bold uppercase text-gray-800 dark:text-gray-200 tracking-wider" style="${g}">${n(w)}</th>`}),b+="</tr></thead>",b+="<tbody>",m.forEach(w=>{b+='<tr class="border-b border-gray-200 dark:border-gray-700 last:border-b-0 hover:bg-gray-50/50 dark:hover:bg-gray-700">';for(let y=0;y<d.length;y++){const g=w[y]||"",x=`text-align: ${v[y]||"left"};`;b+=`<td class="p-3 align-middle text-gray-700 dark:text-gray-300" style="${x}">${n(g)}</td>`}b+="</tr>"}),b+="</tbody></table>",b}catch(f){console.error("Markdown table parsing failed, rendering as paragraph.",f)}if(l.startsWith("###### "))return`<h6 class="text-sm font-bold uppercase tracking-wider mt-2 mb-1 text-primary dark:text-indigo-400">${n(l.substring(7))}</h6>`;if(l.startsWith("##### "))return`<h5 class="text-base font-bold mt-2 mb-1 text-primary dark:text-indigo-400">${n(l.substring(6))}</h5>`;if(l.startsWith("#### "))return`<h4 class="text-lg font-bold mt-3 mb-1 text-primary dark:text-indigo-400">${n(l.substring(5))}</h4>`;if(l.startsWith("### "))return`<h3 class="text-xl font-bold mt-4 mb-2 text-primary dark:text-indigo-400">${n(l.substring(4))}</h3>`;if(l.startsWith("## "))return`<h2 class="text-2xl font-bold text-primary dark:text-indigo-400 mt-5 mb-2 border-b border-gray-200 dark:border-gray-700 pb-2">${n(l.substring(3))}</h2>`;if(l.startsWith("# "))return`<h1 class="text-3xl font-bold text-primary dark:text-indigo-400 mt-6 mb-3 border-b pb-2">${n(l.substring(2))}</h1>`;if(l.startsWith(">"))return`<blockquote class="pl-4 border-l-4 border-gray-300 dark:border-gray-600 italic my-4 text-gray-600 dark:text-gray-400"><p>${l.split(`
`).map(d=>d.replace(/^>\s?/,"")).map(n).join("<br />")}</p></blockquote>`;if(l.startsWith("- ")||l.startsWith("* ")){const f=l.split(`
`);let d="";const h=[];for(f.forEach(m=>{const v=m.match(/^(\s*)/),b=v?v[1].length:0,w=m.match(/^\s*([-*])\s+(.*)/);if(!w){d.endsWith("</li>")&&(d=d.slice(0,-5)+`<br />${n(m.trim())}</li>`);return}const y=w[2];let g=h.length>0?h[h.length-1]:-1;if(b>g){const x=h.length===0?"list-disc pl-5 space-y-2 my-4":"list-disc pl-5 space-y-1 mt-2";d+=`<ul class="${x}">`,h.push(b)}else{for(;b<g;)d+="</li></ul>",h.pop(),g=h.length>0?h[h.length-1]:-1;d.length>0&&(d+="</li>")}d+=`<li>${n(y)}`});h.length>0;)d+="</li></ul>",h.pop();return d}return`<p class="my-3">${l.split(`
`).map(n).join("<br />")}</p>`}).join("")},Ia=({content:t})=>{const e=t.split(/(```python[\s\S]*?```)/g);return r.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-800 dark:text-gray-300 leading-relaxed",children:e.map((n,a)=>{if(n.startsWith("```python")){const s=n.replace(/^```python\n?/,"").replace(/```\s*$/,"").trim();return r.jsx("pre",{className:"bg-gray-900 text-white p-4 rounded-md overflow-x-auto font-mono text-sm my-4 not-prose",children:r.jsx("code",{dangerouslySetInnerHTML:{__html:ah(s)}})},a)}return n.trim()?r.jsx("div",{dangerouslySetInnerHTML:{__html:To(n)}},a):null})})},UO=({totalQuestions:t,currentQuestionIndex:e,userAnswers:n,onJumpTo:a})=>r.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:Array.from({length:t}).map((s,i)=>{const l=n[i]!==void 0&&n[i]!==null,o=i===e;let c="w-10 h-10 flex items-center justify-center rounded-md font-bold border-2 transition-colors ";return o?c+="bg-primary text-white border-primary":l?c+="bg-green-100 text-green-800 border-green-300 dark:bg-green-900/50 dark:text-green-200 dark:border-green-700 hover:bg-green-200":c+="bg-gray-100 text-gray-700 border-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 hover:bg-gray-200",r.jsx("button",{onClick:()=>a(i),className:c,children:i+1},i)})}),u0=({quiz:t,onComplete:e,questCategory:n,isCbtMode:a=!1,onSubmitCbt:s,userId:i,questId:l})=>{const[o,c]=p.useState({}),[u,f]=p.useState(!1),[d,h]=p.useState(0),[m,v]=p.useState(null),[b,w]=p.useState(!1),[y,g]=p.useState(!1),[x,_]=p.useState(0),[k,E]=p.useState(0),C=t[d];p.useEffect(()=>{if(a)try{const U=`python-quest-cbt-answers-${i}-${l}`,q=localStorage.getItem(U);if(q){const ae=JSON.parse(q),P={};t.forEach((V,le)=>{const Ae=V.question,Ie=ae[Ae];if(Ie){const It=V.options.findIndex(tn=>tn===Ie);It!==-1&&(P[le]=It)}}),c(P)}}catch(U){console.error("Failed to load and restore quiz answers:",U)}},[a,i,l,t]),p.useEffect(()=>{h(0),v(null),w(!1),g(!1),_(0),E(0),a||c({}),f(!1)},[t]);const S=()=>{v(null),w(!1),g(!1)},T=()=>{d<t.length-1?(h(U=>U+1),S()):e({score:k,mistakes:x})},I=()=>{if(m===null)return;const U=m===C.answerIndex;w(!0),g(U),U?E(q=>q+(C.points||0)):_(q=>q+1)},N=U=>b?U===C.answerIndex?"bg-green-100 dark:bg-green-900/30 border-green-500 dark:border-green-600 text-green-800 dark:text-green-200":U===m&&!y?"bg-red-100 dark:bg-red-900/30 border-red-500 dark:border-red-600 text-red-800 dark:text-red-200":"bg-gray-100 dark:bg-gray-700 border-transparent":m===U?"bg-primary/20 dark:bg-indigo-500/20 border-primary dark:border-indigo-500":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border-transparent",W=(U,q)=>{const ae={...o,[d]:U};if(c(ae),a)try{const P=`python-quest-cbt-answers-${i}-${l}`,V=JSON.parse(localStorage.getItem(P)||"{}"),le=C.question;V[le]=q,localStorage.setItem(P,JSON.stringify(V))}catch(P){console.error("Failed to save quiz answers:",P)}},H=()=>{d<t.length-1&&h(U=>U+1)},fe=()=>{d>0&&h(U=>U-1)},K=U=>{h(U),f(!1)},A=U=>o[d]===U?"bg-primary/20 dark:bg-indigo-500/20 border-primary dark:border-indigo-500":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border-transparent",z=()=>{s&&s(o)},O=U=>U.preventDefault();if(!C)return r.jsx("p",{children:"Kuis tidak valid atau kosong."});const B=d===t.length-1;if(a){const U="flex items-center justify-center gap-2 font-bold rounded-lg transition-colors disabled:opacity-50",q=`${U} py-2 sm:px-4 px-3`,ae=`${U} py-2 sm:px-4 px-3 font-semibold`;return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 mb-4",children:[r.jsx("div",{className:"text-lg font-semibold select-none flex-grow",onCopy:O,onPaste:O,children:r.jsx(Ia,{content:`**Soal ${d+1}:** ${C.question}`})}),r.jsx("div",{className:"flex items-center gap-2 self-start sm:self-center flex-shrink-0",children:n!==we.TUTORIAL&&C.points>0&&r.jsxs("span",{className:"text-sm font-bold text-accent dark:text-amber-300 bg-accent/10 dark:bg-amber-900/50 px-3 py-1 rounded-full",children:[C.points," Poin"]})})]}),r.jsx("div",{children:r.jsx("div",{className:"space-y-3 mb-6",children:C.options.map((P,V)=>r.jsx("button",{type:"button",onClick:()=>W(V,P),className:`w-full text-left p-3 rounded-lg border-2 transition select-none ${A(V)}`,onCopy:O,onPaste:O,children:r.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:To(P)}})},V))})}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center relative gap-2",children:[r.jsxs("button",{onClick:fe,disabled:d===0,className:`${q} bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200`,children:[r.jsx(_O,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>f(!u),className:`${ae} bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300`,children:[r.jsx(Q2,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden md:inline",children:"Daftar Soal"}),r.jsxs("span",{children:["(",d+1,"/",t.length,")"]})]}),u&&r.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-white dark:bg-gray-800 shadow-lg rounded-lg border dark:border-gray-700 p-4 w-[90vw] max-w-sm sm:w-96 z-10",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Navigasi Soal"}),r.jsx("button",{onClick:()=>f(!1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:r.jsx(ut,{className:"w-5 h-5"})})]}),r.jsx(UO,{totalQuestions:t.length,currentQuestionIndex:d,userAnswers:o,onJumpTo:K})]})]}),B?r.jsxs("button",{onClick:z,className:`${q} bg-green-600 hover:bg-green-700 text-white`,children:[r.jsx(r0,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Selesai"})]}):r.jsxs("button",{onClick:H,className:`${q} bg-primary hover:bg-primary/90 text-white`,children:[r.jsx("span",{className:"hidden sm:inline",children:"Berikutnya"}),r.jsx(i0,{className:"w-5 h-5"})]})]})]})}return r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 mb-4",children:[r.jsx("div",{className:"text-lg font-semibold select-none flex-grow",onCopy:O,onPaste:O,children:r.jsx(Ia,{content:C.question})}),t.length>1&&r.jsxs("span",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full flex-shrink-0",children:[d+1," / ",t.length]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"space-y-3 mb-4",children:C.options.map((U,q)=>r.jsx("button",{type:"button",disabled:b,onClick:()=>v(q),className:`w-full text-left p-3 rounded-lg border-2 transition select-none ${N(q)}`,onCopy:O,onPaste:O,children:r.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:To(U)}})},q))}),!b&&r.jsx("button",{type:"button",onClick:I,disabled:m===null,className:"w-full bg-primary text-white font-bold py-2 px-4 rounded-lg hover:bg-primary/90 disabled:bg-gray-300 dark:disabled:bg-gray-600 transition",children:"Cek Jawaban"})]}),b&&r.jsxs("div",{className:`mt-4 p-4 rounded-lg ${y?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:[r.jsx("p",{className:"font-bold text-center",children:y?"Jawaban Benar!":"Jawaban Kurang Tepat."}),y&&C.explanation&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-green-300 dark:border-green-700/50 text-left select-none",onCopy:O,onPaste:O,children:[r.jsx("h4",{className:"font-bold text-green-900 dark:text-green-100 mb-1",children:"Pembahasan:"}),r.jsx(Ia,{content:C.explanation})]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"button",onClick:T,className:"mt-4 bg-secondary text-white font-bold py-2 px-6 rounded-lg hover:bg-secondary/90 transition",children:B?"Selesaikan Kuis":"Lanjut"})})]})]})},Mt=({isOpen:t,onClose:e,onConfirm:n,title:a,message:s,confirmText:i="Ya, Hapus",confirmIcon:l=r.jsx(In,{className:"w-5 h-5"}),confirmButtonClass:o="bg-red-600 hover:bg-red-700"})=>t?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all p-6",onClick:c=>c.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a}),r.jsx("button",{onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:r.jsx(ut,{className:"w-6 h-6"})})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:s}),r.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[r.jsx("button",{onClick:e,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Batal"}),r.jsxs("button",{onClick:n,className:`flex items-center gap-2 font-bold py-2 px-4 rounded-lg text-white transition-colors ${o}`,children:[l,i]})]})]})}):null,sh=({challenge:t,onCheckComplete:e,onSuccessSubmit:n,isPreviewMode:a=!1,showToast:s,category:i})=>{const[l,o]=p.useState(t.starterCode),[c,u]=p.useState(""),[f,d]=p.useState(!1),[h,m]=p.useState(!1),v=p.useRef(null),[b,w]=p.useState(!1),[y,g]=p.useState([]),[x,_]=p.useState(!1),k=p.useRef(null),E=p.useRef(null),C=p.useRef(null);p.useEffect(()=>{o(t.starterCode)},[t.starterCode]),p.useEffect(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=`${k.current.scrollHeight}px`)},[l]);const S=O=>{const B=O.currentTarget;if(O.key==="Tab"){O.preventDefault();const{value:q,selectionStart:ae,selectionEnd:P}=B,V="  ",le=q.substring(0,ae)+V+q.substring(P);B.value=le,B.selectionStart=B.selectionEnd=ae+V.length,o(le);return}const U={"(":")","[":"]","{":"}",'"':'"',"'":"'"};if(U[O.key]&&B.selectionStart===B.selectionEnd){O.preventDefault();const{value:q,selectionStart:ae}=B,P=O.key,V=U[P],le=q.substring(0,ae)+P+V+q.substring(ae);B.value=le,B.selectionStart=B.selectionEnd=ae+1,o(le);return}},T=p.useMemo(()=>ah(l),[l]),I=p.useMemo(()=>Array.from({length:l.split(`
`).length},(O,B)=>B+1).join(`
`),[l]),N=async()=>{if(d(!0),u(""),g([]),m(!1),!v.current){w(!0),g(["Mempersiapkan lingkungan pengecekan..."]);try{const q=await(window.loadPyodide?window.loadPyodide:(await zn(async()=>{const{loadPyodide:ae}=await import("./pyodide-gWNcgHal.js");return{loadPyodide:ae}},[])).loadPyodide)({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.1/full/"});v.current=q,g(ae=>[...ae,"Lingkungan siap. Memulai pengecekan..."])}catch(U){console.error("Gagal memuat Pyodide:",U),g([`Gagal memuat lingkungan pengecekan: ${U.message}`]),d(!1),w(!1);return}w(!1)}const O=[];let B=!0;for(const[U,q]of t.testCases.entries()){const ae=[];try{v.current.setStdout({batched:It=>{ae.push(It)}});const V=(It=>`
_inputs = iter("${It.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}".split('\\n'))
def custom_input(prompt=""):
    try:
        return next(_inputs)
    except StopIteration:
        # Match browser input() behavior on EOF which is often an empty string or error.
        # Empty string is safer for scripts that might call input in a loop.
        return "" 

__builtins__.input = custom_input
`)(q.input);await v.current.runPythonAsync(V),await v.current.runPythonAsync(l);const Ae=ae.join(`
`).replace(/\r\n/g,`
`),Ie=q.expectedOutput.trim().replace(/\r\n/g,`
`);Ae===Ie?O.push(`✅ Tes #${U+1} berhasil.`):(O.push(`❌ Tes #${U+1} gagal. Harusnya: ${JSON.stringify(Ie)}, Hasil: ${JSON.stringify(Ae)}`),B=!1)}catch(P){const V=(P.message||"").split(`
`).pop()||"Unknown error";O.push(`❌ Tes #${U+1} gagal dengan error: ${V}`),B=!1}finally{v.current.setStdout()}}g(O),B&&(u("Semua tes berhasil! Kode benar."),i===we.TUTORIAL&&m(!0)),d(!1),e(B,l)},W=()=>{a?N():_(!0)},H=()=>{N(),_(!1)},fe=O=>{const B=O.target.value;if(a){o(B);return}if(B.length-l.length>1){s("Aksi Diblokir","Fitur tempel dinonaktifkan untuk mendorong latihan mandiri.",r.jsx(Ss,{className:"w-5 h-5 text-yellow-500"}));return}o(B)},K=O=>{a||(O.preventDefault(),s("Aksi Diblokir","Fitur salin/tempel dinonaktifkan untuk mendorong latihan mandiri.",r.jsx(Ss,{className:"w-5 h-5 text-yellow-500"})))},A=O=>{a||(O.preventDefault(),s("Aksi Diblokir","Fitur salin/tempel dinonaktifkan untuk mendorong latihan mandiri.",r.jsx(Ss,{className:"w-5 h-5 text-yellow-500"})))},z={tabSize:4,MozTabSize:4,lineHeight:1.6};return r.jsxs("div",{children:[r.jsx("div",{className:"mb-4 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:To(t.description)}}),r.jsxs("div",{className:"flex bg-gray-900 text-white rounded-lg font-mono text-sm border border-gray-700",children:[r.jsx("pre",{ref:C,"aria-hidden":"true",className:"p-4 text-right text-gray-500 select-none bg-gray-800/20",style:z,children:I}),r.jsxs("div",{className:"relative flex-grow grid",children:[r.jsx("pre",{ref:E,"aria-hidden":"true",className:"col-start-1 row-start-1 p-4 pointer-events-none whitespace-pre-wrap break-words",style:z,children:r.jsx("code",{dangerouslySetInnerHTML:{__html:T+`
`}})}),r.jsx("textarea",{ref:k,value:l,onChange:fe,onKeyDown:S,onCopy:K,onPaste:K,onContextMenu:A,className:"col-start-1 row-start-1 p-4 bg-transparent text-transparent caret-white outline-none resize-none font-mono text-sm whitespace-pre-wrap break-words select-none overflow-hidden",spellCheck:"false","aria-label":"Python code editor",style:z})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{type:"button",onClick:W,disabled:f||h&&!a||b,className:"w-full bg-primary text-white font-bold py-2 px-4 rounded-lg hover:bg-primary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:b?"Memuat Lingkungan...":f?"Memeriksa...":"Jalankan & Cek Jawaban"})}),y.length>0&&r.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-100 dark:bg-gray-800/50",children:[r.jsx("p",{className:"font-bold mb-2 text-gray-800 dark:text-gray-200",children:"Hasil Pengecekan:"}),r.jsx("div",{className:"space-y-1 text-sm font-mono bg-gray-800 text-white p-3 rounded-md overflow-x-auto",children:y.map((O,B)=>r.jsx("p",{className:O.startsWith("✅")?"text-green-400":O.startsWith("❌")?"text-red-400":"text-yellow-400",children:O},B))})]}),h&&r.jsxs("div",{className:"mt-4 text-center",children:[r.jsx("div",{className:"p-4 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",children:r.jsx("p",{className:"font-bold",children:c})}),!a&&r.jsx("button",{type:"button",onClick:()=>n(l),className:"mt-4 bg-secondary text-white font-bold py-2 px-6 rounded-lg hover:bg-secondary/90 transition",children:"Lanjutkan"})]}),!a&&r.jsx(Mt,{isOpen:x,onClose:()=>_(!1),onConfirm:H,title:"Konfirmasi Jalankan Kode",message:"Anda yakin ingin menjalankan dan memeriksa kode ini? Jika ini adalah misi utama, tindakan ini akan dihitung sebagai satu percobaan.",confirmText:"Ya, Jalankan",confirmIcon:r.jsx(r0,{className:"w-5 h-5"}),confirmButtonClass:"bg-primary hover:bg-primary/90"})]})},d0=({quest:t,score:e,onClose:n,nextQuest:a,onStartNextQuest:s,isReviewable:i,onShowReview:l})=>{const o=()=>{a&&s(a)};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4","aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 text-center max-w-md w-full transform transition-all animate-fade-in",children:[r.jsx(Dt,{className:"w-16 h-16 text-accent dark:text-amber-400 mx-auto animate-bounce"}),r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold font-display text-primary dark:text-indigo-400 mt-4",children:"Misi Selesai!"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:"Kerja bagus! Kamu telah menyelesaikan misi:"}),r.jsx("p",{className:"font-semibold text-lg mt-1",children:t.title}),r.jsxs("div",{className:"mt-6 bg-accent/10 text-accent dark:text-amber-400 font-bold text-xl py-3 px-6 rounded-lg inline-block",children:["+",e," XP"]}),r.jsx("div",{className:"mt-8 space-y-3",children:i?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105",children:[r.jsx(jo,{className:"w-5 h-5"}),r.jsx("span",{children:"Ulasan Latihan"})]}),r.jsx("button",{onClick:n,className:"w-full font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 bg-transparent text-primary dark:text-indigo-400 hover:bg-primary/10 dark:hover:bg-indigo-500/10",children:"Kembali ke Daftar Misi"})]}):r.jsxs(r.Fragment,{children:[a&&r.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105",children:[r.jsx(sc,{className:"w-5 h-5"}),r.jsx("span",{children:"Mulai Misi Berikutnya"})]}),r.jsx("button",{onClick:n,className:`w-full font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 ${a?"bg-transparent text-primary dark:text-indigo-400 hover:bg-primary/10 dark:hover:bg-indigo-500/10":"bg-secondary hover:bg-secondary/90 text-white"}`,children:a?"Kembali ke Daftar Misi":"Lanjutkan Petualangan"})]})})]})})},BO=({quest:t,attemptsMade:e})=>r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-indigo-400",children:t.title}),t.category===we.MAIN&&t.type==="code"?r.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1.5 font-semibold bg-accent/10 text-accent dark:text-amber-400 dark:bg-amber-900/50 px-3 py-1 rounded-full",children:[r.jsx(Dt,{className:"w-4 h-4"}),r.jsxs("span",{children:[t.xp," XP"]})]}),t.maxAttempts&&r.jsxs("div",{className:"flex items-center gap-1.5 font-semibold bg-blue-100 text-blue-600 dark:text-blue-400 dark:bg-blue-900/50 px-3 py-1 rounded-full",children:[r.jsx(wi,{className:"w-4 h-4"}),r.jsxs("span",{children:["Percobaan: ",e," / ",t.maxAttempts]})]}),t.xpPenaltyPerAttempt>0&&r.jsxs("div",{className:"flex items-center gap-1.5 font-semibold bg-red-100 text-red-600 dark:text-red-400 dark:bg-red-900/50 px-3 py-1 rounded-full",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsxs("span",{children:["Penalti: -",t.xpPenaltyPerAttempt," XP"]})]})]}):r.jsxs("span",{className:"mt-2 inline-block bg-accent/20 text-accent font-bold text-sm px-3 py-1 rounded-full",children:[t.xp," XP"]})]}),zO=({quiz:t})=>r.jsx("div",{className:"space-y-6",children:t.map((e,n)=>r.jsxs("div",{className:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600/50",children:[r.jsx("div",{className:"font-semibold select-none mb-4",children:r.jsx(Ia,{content:`**Pertanyaan ${n+1}:** ${e.question}`})}),r.jsx("div",{className:"space-y-2",children:e.options.map((a,s)=>{const i=s===e.answerIndex;return r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-md text-left ${i?"bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700/50":"bg-gray-50 dark:bg-gray-800"}`,children:[i&&r.jsx(ke,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:`prose prose-sm max-w-none ${i?"font-semibold text-green-900 dark:text-green-200":"text-gray-700 dark:text-gray-300"}`,dangerouslySetInnerHTML:{__html:To(a)}})]},s)})}),e.explanation&&r.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("h4",{className:"font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Pembahasan:"}),r.jsx(Ia,{content:e.explanation})]})]},n))}),yb=({code:t})=>r.jsx("pre",{className:"bg-gray-900 text-white p-4 rounded-md overflow-x-auto font-mono text-sm my-4 not-prose",children:r.jsx("code",{dangerouslySetInnerHTML:{__html:ah(t)}})}),HO=({quest:t,userSolution:e})=>{const[n,a]=p.useState(!1);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600/50",children:[r.jsx("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-2",children:"Kode Jawaban Anda:"}),e===null?r.jsx("p",{className:"italic text-gray-500",children:"Memuat solusi..."}):e?r.jsx(yb,{code:e}):r.jsx("p",{className:"italic text-gray-500",children:"Tidak ada data solusi yang tersimpan."})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600/50",children:[r.jsxs("button",{onClick:()=>a(!n),className:"w-full flex justify-between items-center font-bold text-lg text-gray-800 dark:text-gray-200",children:[r.jsx("span",{children:"Solusi Optimal"}),r.jsx(nh,{className:`w-6 h-6 transition-transform ${n?"rotate-180":""}`})]}),n&&r.jsx("div",{className:"mt-4 animate-fade-in-down",children:r.jsx(yb,{code:t.content.solution})})]})]})},h0=({quest:t,onClose:e})=>{const{currentUser:n}=Vt(),[a,s]=p.useState(null);p.useEffect(()=>{n&&t.type===Me.CODE&&(s(null),JM(n.id,t.id).then(l=>{s(l||"")}))},[n,t.id,t.type]);const i=p.useMemo(()=>t.content,[t]);return r.jsxs("div",{className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-6 rounded-lg text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:"Mode Ulasan"}),r.jsx("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:"Anda telah menyelesaikan misi ini. Berikut adalah materi dan ulasan dari pekerjaan Anda."})]}),t.material&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 sm:p-6 rounded-lg border dark:border-gray-700",children:[r.jsxs("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[r.jsx(jo,{className:"w-6 h-6"}),"Materi Pembelajaran"]}),r.jsx(Ia,{content:t.material})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 sm:p-6 rounded-lg border dark:border-gray-700",children:[r.jsx("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-4",children:"Ulasan Latihan"}),t.type===Me.QUIZ?r.jsx(zO,{quiz:i}):r.jsx(HO,{quest:t,userSolution:a})]}),r.jsx("button",{onClick:e,className:"mt-4 w-full bg-secondary text-white font-bold py-3 px-4 rounded-lg hover:bg-secondary/90 transition",children:"Kembali"})]})},Xu=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e},FO=({quest:t,onClose:e,onComplete:n,nextQuest:a,onStartNextQuest:s})=>{const{currentUser:i,showToast:l}=Vt(),[o,c]=p.useState(t.material?"material":"challenge"),[u,f]=p.useState(0),[d,h]=p.useState(!1),[m,v]=p.useState(!1),b=p.useMemo(()=>{var x;return!!((x=i==null?void 0:i.completedQuests)!=null&&x[t.id])},[i,t.id]),w=p.useMemo(()=>{if(t.type!==Me.QUIZ)return t.content;let x=[...t.content];return t.shuffleQuestions&&(x=Xu(x)),t.shuffleOptions&&(x=x.map(_=>{if(!_.options||_.options.length===0)return _;const k=_.options[_.answerIndex],E=Xu(_.options),C=E.indexOf(k);return{..._,options:E,answerIndex:C}})),x},[t]),y=x=>{!t.passingCriteria||t.passingCriteria===ei.ANY_COMPLETION||t.passingCriteria===ei.PERFECT_SCORE&&x.mistakes===0?(f(t.xp),b||n(t,t.xp),h(!0)):v(!0)},g=x=>{f(t.xp),b||n(t,t.xp,x),h(!0)};return i?b&&!d?r.jsx(h0,{quest:t,onClose:e}):r.jsxs(r.Fragment,{children:[o==="material"&&t.material?r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 sm:p-6 rounded-lg",children:r.jsx(Ia,{content:t.material})}),r.jsx("button",{onClick:()=>c("challenge"),className:"mt-6 w-full bg-primary text-white font-bold py-3 px-4 rounded-lg hover:bg-primary/90 transition transform hover:scale-105",children:"Mulai Latihan"})]}):r.jsxs("div",{className:"pt-6",children:[t.type===Me.QUIZ&&r.jsx(u0,{quiz:w,onComplete:y,questCategory:t.category,userId:i.id,questId:t.id}),t.type===Me.CODE&&r.jsx(sh,{challenge:t.content,onCheckComplete:(x,_)=>{x&&g(_)},onSuccessSubmit:g,showToast:l,category:t.category})]}),d&&r.jsx(d0,{quest:t,score:u,onClose:e,nextQuest:a,onStartNextQuest:s}),m&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4","aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 text-center max-w-md w-full animate-fade-in",children:[r.jsx("h2",{className:"text-2xl font-bold text-primary dark:text-indigo-400 mt-4",children:"Tantangan Selesai!"}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:["Kamu berhasil menyelesaikan tantangan, tetapi belum memenuhi kriteria kelulusan: ",r.jsx("strong",{children:"Selesaikan Tanpa Kesalahan"}),"."]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Misi ini belum ditandai selesai. Coba lagi untuk mendapatkan hasil sempurna!"}),r.jsx("button",{onClick:()=>{v(!1),e()},className:"mt-6 w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg",children:"Coba Lagi Nanti"})]})})]}):null},VO=({quest:t,onClose:e,onComplete:n})=>{var E;const{currentUser:a,handleRecordAttempt:s,showToast:i}=Vt(),[l,o]=p.useState(0),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(null),v=p.useMemo(()=>{var C;return!!((C=a==null?void 0:a.completedQuests)!=null&&C[t.id])},[a,t.id]),b=((E=a==null?void 0:a.questAttempts)==null?void 0:E[t.id])||0,w=p.useMemo(()=>{if(t.type!==Me.QUIZ)return t.content;let C=[...t.content];return t.shuffleQuestions&&(C=Xu(C)),t.shuffleOptions&&(C=C.map(S=>{if(!S.options||S.options.length===0)return S;const T=S.options[S.answerIndex],I=Xu(S.options),N=I.indexOf(T);return{...S,options:I,answerIndex:N}})),C},[t]),y=C=>{m(C),d(!0)},g=()=>{if(!h||!a)return;let C=0;w.forEach((S,T)=>{h[T]!==null&&typeof h[T]<"u"&&h[T]===S.answerIndex&&(C+=S.points||0)}),o(C),v||n(t,C),localStorage.removeItem(`python-quest-cbt-answers-${a.id}-${t.id}`),d(!1),u(!0)},x=C=>{const S=t.xpPenaltyPerAttempt||0,T=Math.max(0,t.xp-b*S);o(T),v||n(t,T,C),u(!0)},_=(C,S)=>{if(C){x(S);return}s(t.id);const T=b+1;t.maxAttempts&&T>=t.maxAttempts&&(o(0),v||n(t,0,S),u(!0))};if(!a)return null;if(v&&!c)return r.jsx(h0,{quest:t,onClose:e});const k=t.type!==Me.CODE||!t.maxAttempts||b<t.maxAttempts;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"pt-6",children:[t.type===Me.QUIZ&&r.jsx(u0,{quiz:w,onComplete:()=>{},questCategory:t.category,isCbtMode:!0,onSubmitCbt:y,userId:a.id,questId:t.id}),t.type===Me.CODE&&(k?r.jsx(sh,{challenge:t.content,onCheckComplete:_,onSuccessSubmit:x,showToast:i,category:t.category}):r.jsxs("div",{className:"mt-6 text-center bg-red-50 dark:bg-red-900/30 p-6 rounded-lg",children:[r.jsx("h3",{className:"text-xl font-bold text-red-800 dark:text-red-200",children:"Kesempatan Habis"}),r.jsx("p",{className:"text-red-700 dark:text-red-300 mt-2",children:"Anda telah menggunakan semua kesempatan untuk mencoba tantangan ini."})]}))]}),c&&r.jsx(d0,{quest:t,score:l,onClose:e,nextQuest:null,onStartNextQuest:()=>{},isReviewable:!0,onShowReview:()=>u(!1)}),f&&r.jsx(Mt,{isOpen:f,onClose:()=>d(!1),onConfirm:g,title:"Konfirmasi Selesai Mengerjakan",message:"Yakin ingin menyelesaikan kuis ini? Jawaban tidak dapat diubah lagi.",confirmText:"Ya, Selesaikan",confirmIcon:r.jsx(r0,{className:"w-5 h-5"}),confirmButtonClass:"bg-green-600 hover:bg-green-700"})]})},QO=({quest:t,onClose:e,onComplete:n,nextQuest:a,onStartNextQuest:s})=>{const{currentUser:i,showToast:l}=Vt(),[o,c]=p.useState(0),[u,f]=p.useState(!1),d=p.useMemo(()=>{var m;return!!((m=i==null?void 0:i.completedQuests)!=null&&m[t.id])},[i,t.id]),h=m=>{const v=t.xp;c(v),n(t,v,m),f(!0)};return i?d&&!u?r.jsx(h0,{quest:t,onClose:e}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pt-6",children:r.jsx(sh,{challenge:t.content,onCheckComplete:(m,v)=>{m&&h(v)},onSuccessSubmit:()=>{},showToast:l,category:t.category})}),u&&r.jsx(d0,{quest:t,score:o,onClose:e,nextQuest:a,onStartNextQuest:s})]}):null},xb=t=>{var c,u;const{quest:e,onClose:n}=t,{currentUser:a}=Vt();if(!e)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Memuat detail misi..."});const s=e.category===we.MAIN&&!((c=a==null?void 0:a.completedQuests)!=null&&c[e.id]),i=((u=a==null?void 0:a.questAttempts)==null?void 0:u[e.id])||0,l=f=>{f.preventDefault()},o=()=>{switch(e.category){case we.TUTORIAL:return r.jsx(FO,{...t});case we.MAIN:return r.jsx(VO,{...t});case we.CHALLENGE:return r.jsx(QO,{...t});default:return r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Tipe misi tidak dikenali."})}};return r.jsxs("div",{className:"h-screen bg-white dark:bg-gray-900 overflow-y-auto select-none",onContextMenu:l,children:[r.jsxs("header",{className:"p-4 sm:p-6 flex flex-col sm:flex-row justify-between items-start gap-4 sm:items-center border-b border-gray-200 dark:border-gray-700",children:[r.jsx(BO,{quest:e,attemptsMade:i}),!s&&r.jsxs("button",{onClick:n,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg transition-colors",children:[r.jsx(ki,{className:"w-5 h-5"}),r.jsx("span",{children:"Kembali"})]})]}),r.jsx("main",{className:"px-6 pb-6 sm:px-8 sm:pb-8 lg:px-12 lg:pb-12",children:o()})]})},RC=({user:t,quests:e,onClose:n,isEditable:a,onUpdateProfile:s})=>{const i=e.filter(x=>{var _;return(_=t.completedQuests)==null?void 0:_[x.id]}),l=t.role===Ge.MASTER,[o,c]=p.useState(!1),[u,f]=p.useState(at(t.name)),[d,h]=p.useState(t.description||""),[m,v]=p.useState(t.avatarId),b=Qs(o?m:t.avatarId),w=p.useMemo(()=>{const x=t.gender===Wn.FEMALE?"female":"male";return c0.filter(_=>_.gender===x||_.gender==="unisex")},[t.gender]);p.useEffect(()=>{f(at(t.name)),h(t.description||""),v(t.avatarId),a||c(!1)},[t,a]);const y=()=>{s({...t,name:u,description:d,avatarId:m}),c(!1)},g=()=>{f(t.name),h(t.description||""),v(t.avatarId),c(!1)};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:n,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg transform transition-all flex flex-col",onClick:x=>x.stopPropagation(),children:[r.jsx("div",{className:"p-6 pt-10",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-grow flex flex-col sm:flex-row items-center sm:items-start text-center sm:text-left gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center p-2 flex-shrink-0 border-4 border-white dark:border-gray-700 shadow-md -mt-16",children:r.jsx(b,{className:"w-20 h-20"})}),r.jsxs("div",{className:"flex-grow w-full",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-grow",children:[o?r.jsx("input",{type:"text",value:u,onChange:x=>f(x.target.value),className:"text-2xl font-bold text-primary dark:text-indigo-400 bg-gray-100 dark:bg-gray-700 border-2 border-primary/50 dark:border-primary/50 rounded-md px-2 py-1 w-full",autoFocus:!0}):r.jsx("h2",{className:"text-2xl font-bold text-primary dark:text-indigo-400",children:at(t.name)}),!l&&r.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:t.rank})]}),a&&!o&&r.jsx("div",{className:"flex-shrink-0 self-start mx-auto sm:mx-0 sm:self-center",children:r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 bg-primary/10 text-primary dark:text-indigo-400 text-sm font-semibold px-3 py-1.5 rounded-md hover:bg-primary/20 transition",children:[r.jsx(el,{className:"w-4 h-4"}),"Edit Profil"]})})]}),!l&&r.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-accent/10 text-accent dark:text-amber-400 font-bold text-lg py-1 px-4 rounded-full",children:[r.jsx(Dt,{className:"w-5 h-5"}),r.jsxs("span",{children:[t.xp," XP"]})]}),r.jsx("div",{className:"mt-4",children:o?r.jsx("textarea",{value:d,onChange:x=>h(x.target.value),className:"text-sm text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 border-2 border-primary/50 dark:border-primary/50 rounded-md p-2 w-full h-24 resize-none",placeholder:"Tulis deskripsi singkat tentang dirimu..."}):r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:t.description||"Belum ada deskripsi."})})]})]}),r.jsx("button",{onClick:n,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup profil",children:r.jsx(ut,{className:"w-6 h-6"})})]})}),o&&r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-3",children:"Pilih Avatar"}),r.jsx("div",{className:"flex items-center gap-3 flex-wrap bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg max-h-40 overflow-y-auto",children:w.map(x=>{const _=m===x.id;return r.jsx("button",{type:"button",onClick:()=>v(x.id),className:`p-2 rounded-full transition-all duration-200 ${_?"bg-primary/20 ring-2 ring-primary":"bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500"}`,title:x.name,children:r.jsx(x.component,{className:"w-12 h-12"})},x.id)})})]}),!l&&r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:[r.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-3",children:["Misi Selesai (",i.length,")"]}),r.jsx("div",{className:"max-h-60 overflow-y-auto pr-2 space-y-2",children:i.length>0?i.map(x=>r.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-50 dark:bg-green-900/50 rounded-md",children:[r.jsx(ke,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-green-800 dark:text-green-200",children:x.title}),r.jsxs("p",{className:"text-sm text-green-700/80 dark:text-green-300/80",children:["+",x.xp," XP"]})]})]},x.id)):r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Belum ada misi yang diselesaikan."})})]}),o&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-4 flex justify-end gap-3 rounded-b-2xl border-t border-gray-200 dark:border-gray-700 mt-auto",children:[r.jsx("button",{onClick:g,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Batal"}),r.jsxs("button",{onClick:y,className:"flex items-center gap-2 font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[r.jsx(Aa,{className:"w-5 h-5"}),"Simpan Perubahan"]})]})]})})},GO=({entries:t,onSelectUser:e,title:n})=>{const a=["text-yellow-400","text-gray-400","text-yellow-600"],s=n||"Papan Peringkat";return r.jsxs(r.Fragment,{children:[r.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2 text-primary dark:text-indigo-400",children:[r.jsx(Dt,{className:"w-6 h-6 text-accent dark:text-amber-400"}),r.jsx("span",{children:s})]}),t.length>0?r.jsx("ul",{className:"space-y-3",children:t.map((i,l)=>{const o=Qs(i.avatarId);return r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(i.userId),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg transition-transform duration-200 hover:scale-[1.03] hover:bg-primary/5 dark:hover:bg-indigo-500/10 text-left",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`font-bold text-lg w-8 text-center ${a[l]||"text-gray-800 dark:text-gray-200"}`,children:l+1}),r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center",children:r.jsx(o,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:at(i.name)}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.rank})]})]}),r.jsxs("p",{className:"font-bold text-primary dark:text-indigo-400",children:[i.xp," XP"]})]})},i.userId)})}):r.jsx("div",{className:"text-center p-8 text-gray-500 italic bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:r.jsx("p",{children:"Belum ada peringkat untuk ditampilkan."})})]})},$O=({entries:t,onSelectUser:e,rooms:n,users:a,currentUser:s})=>{const i=p.useMemo(()=>s.roomId?n.find(c=>c.id===s.roomId):null,[s.roomId,n]),l=p.useMemo(()=>{const c=new Set(a.filter(u=>u.roomId===s.roomId).map(u=>u.id));return t.filter(u=>c.has(u.userId))},[s.roomId,t,a]),o=i?`Peringkat di Room: ${i.name}`:"Peringkat Pemain (Tanpa Room)";return r.jsx("div",{children:r.jsx(GO,{entries:l,onSelectUser:e,title:o})})},f0=()=>{const t=p.useRef(null),[e,n]=p.useState(!1),[a,s]=p.useState([]),[i,l]=p.useState(!1),[o,c]=p.useState(!1),[u,f]=p.useState(""),d=p.useRef(null),h=p.useCallback(async()=>{if(!(t.current||e)){n(!0),s(w=>[...w,{type:"system",content:"Memuat lingkungan Python untuk pertama kali..."}]);try{const y=await(window.loadPyodide?window.loadPyodide:(await zn(async()=>{const{loadPyodide:x}=await import("./pyodide-gWNcgHal.js");return{loadPyodide:x}},[])).loadPyodide)({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.1/full/"});t.current=y,window.js_input=x=>(f(x),c(!0),new Promise(_=>{d.current={resolve:_}})),await t.current.runPythonAsync(`
import js
import asyncio

async def custom_input(p=""):
    val = await js.js_input(p)
    return val

__builtins__.input = custom_input
            `),s(x=>[...x,{type:"system",content:"Lingkungan siap."}])}catch(w){console.error("Gagal memuat Pyodide:",w),s(y=>[...y,{type:"stderr",content:`Gagal memuat lingkungan Python: ${w.message}`}])}finally{n(!1)}}},[e]),m=p.useCallback(async w=>{var y,g;if(w){if(l(!0),s([]),t.current||await h(),!t.current){s([{type:"stderr",content:"Gagal menjalankan kode karena lingkungan Python tidak termuat."}]),l(!1);return}s(x=>[...x,{type:"system",content:"Menjalankan kode..."}]);try{t.current.setStdout({batched:_=>{s(k=>[...k,{type:"stdout",content:_}])}}),t.current.setStderr({batched:_=>{s(k=>[...k,{type:"stderr",content:_}])}});const x=w.replace(/\binput\s*\(/g,"await input(");await t.current.runPythonAsync(x)}catch(x){s(_=>[..._,{type:"stderr",content:`Error: ${x.message}`}])}finally{(y=t.current)==null||y.setStdout(),(g=t.current)==null||g.setStderr(),l(!1),c(!1)}}},[h]),v=p.useCallback(w=>{d.current&&(s(y=>[...y,{type:"stdin",content:`${u}${w}`}]),d.current.resolve(w),d.current=null,c(!1),f(""))},[u]),b=p.useCallback(()=>{s([])},[]);return{isPyodideLoading:e,isExecuting:i,isWaitingForInput:o,inputPrompt:u,outputLines:a,runCode:m,onInputSubmit:v,clearOutput:b}},cf={tabSize:2,MozTabSize:2,lineHeight:1.6},Ps=({code:t,setCode:e=u=>{},onKeyDown:n,onCopy:a,onPaste:s,onContextMenu:i,readOnly:l=!1,height:o="min-h-[420px]",disableCopyPaste:c=!1})=>{const u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=()=>{if(f.current&&u.current&&d.current){const b=u.current.scrollTop,w=u.current.scrollLeft;f.current.scrollTop=b,f.current.scrollLeft=w,d.current.scrollTop=b}},m=p.useMemo(()=>ah(t),[t]),v=p.useMemo(()=>Array.from({length:t.split(`
`).length},(b,w)=>w+1).join(`
`),[t]);return r.jsxs("div",{className:`flex bg-black text-white rounded-lg font-mono text-base overflow-hidden border border-gray-700 ${o} transition-all duration-300`,children:[r.jsx("pre",{ref:d,"aria-hidden":"true",className:"p-4 text-right text-gray-500 select-none bg-gray-800/20 overflow-y-hidden",style:cf,children:v}),r.jsxs("div",{className:"relative flex-grow",children:[r.jsx("pre",{ref:f,"aria-hidden":"true",className:"absolute top-0 left-0 w-full h-full p-4 overflow-auto pointer-events-none whitespace-pre-wrap break-words",style:cf,children:r.jsx("code",{dangerouslySetInnerHTML:{__html:m+`
`}})}),r.jsx("textarea",{ref:u,value:t,onChange:b=>e(b.target.value),onScroll:h,onKeyDown:n,onCopy:a,onPaste:s,onContextMenu:i,readOnly:l,disabled:l,className:`absolute top-0 left-0 w-full h-full p-4 bg-transparent text-transparent caret-white outline-none resize-none font-mono text-base whitespace-pre-wrap break-words ${c?"select-none":"select-text"}`,spellCheck:"false","aria-label":"Python code editor",style:cf})]})]})},WO={submitted:{icon:th,color:"text-yellow-500 dark:text-yellow-400",title:"Menunggu Penilaian"},approved:{icon:ke,color:"text-green-500 dark:text-green-400",title:"Disetujui"},rejected:{icon:ut,color:"text-red-500 dark:text-red-400",title:"Ditolak"},none:{icon:()=>null,color:"",title:""}},bb=({savedFiles:t,activeFileId:e,onNewFile:n,onSelectFile:a,onDeleteFile:s})=>r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg border dark:border-gray-700 h-full flex flex-col",children:[r.jsx("h3",{className:"font-bold text-lg mb-2 dark:text-gray-100 flex-shrink-0",children:"File Saya"}),r.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 mb-3 bg-primary/10 text-primary dark:text-indigo-400 dark:bg-indigo-500/10 hover:bg-primary/20 dark:hover:bg-indigo-500/20 font-semibold py-2 px-3 rounded-md transition-colors flex-shrink-0",children:[r.jsx(ta,{className:"w-5 h-5"}),r.jsx("span",{children:"File Baru"})]}),r.jsx("ul",{className:"space-y-2 overflow-y-auto flex-grow",children:t.length>0?t.map(i=>{const l=WO[i.reviewStatus||"none"],o=l.icon;return r.jsxs("li",{className:"flex items-center group",children:[r.jsxs("button",{onClick:()=>a(i),className:`flex-grow flex items-center justify-between gap-2 text-left p-2 rounded-md transition-colors min-w-0 ${e===i.id?"bg-primary text-white":"text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 truncate",children:[r.jsx(a0,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"truncate text-base",children:i.name})]}),i.reviewStatus!=="none"&&r.jsx(o,{className:`w-5 h-5 flex-shrink-0 ${e===i.id?"text-white":l.color}`,title:l.title})]}),r.jsx("button",{onClick:()=>s(i),className:`p-1 rounded-md ml-1 opacity-0 group-hover:opacity-100 transition-opacity ${e===i.id?"text-white/70 hover:text-white hover:bg-white/20":"text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50"}`,children:r.jsx(In,{className:"w-4 h-4"})})]},i.id)}):r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center mt-4",children:"Belum ada file."})})]}),YO=({prompt:t,onSubmit:e})=>{const[n,a]=p.useState(""),s=p.useRef(null);p.useEffect(()=>{var l;(l=s.current)==null||l.focus()},[]);const i=l=>{l.preventDefault(),e(n),a("")};return r.jsxs("form",{onSubmit:i,className:"flex w-full",children:[r.jsx("span",{className:"text-gray-400 flex-shrink-0",children:t}),r.jsx("input",{ref:s,type:"text",value:n,onChange:l=>a(l.target.value),className:"flex-grow bg-transparent text-white outline-none pl-2",autoComplete:"off"})]})},m0=({outputLines:t,isWaitingForInput:e,inputPrompt:n,onInputSubmit:a,height:s="h-full"})=>{const i=p.useRef(null);return p.useEffect(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[t,e]),r.jsxs("div",{ref:i,className:`p-4 rounded-lg bg-black text-white font-mono text-base whitespace-pre-wrap ${s} overflow-y-auto`,children:[r.jsx("p",{className:"font-bold mb-2 text-gray-400",children:"> Output:"}),t.length>0?t.map((l,o)=>r.jsx("div",{className:l.type==="stderr"?"text-red-400":l.type==="stdin"?"text-cyan-400":l.type==="system"?"text-yellow-400 italic":"text-white",children:r.jsx("span",{children:l.content})},o)):r.jsx("p",{className:"text-gray-500 italic",children:'Tekan "Jalankan" untuk melihat hasilnya di sini.'}),e&&r.jsx(YO,{prompt:n,onSubmit:a})]})},uf=({outputLines:t,isWaitingForInput:e,inputPrompt:n,onInputSubmit:a,activeFile:s,view:i="both"})=>{const l=()=>s!=null&&s.masterComment?r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg border border-blue-200 dark:border-blue-700 flex-shrink-0 overflow-y-auto h-full",children:[r.jsx("h3",{className:"font-bold text-blue-800 dark:text-blue-200 mb-2",children:"Komentar dari Master:"}),r.jsx("div",{className:"text-sm",children:r.jsx(Ia,{content:s.masterComment})})]}):null,o=()=>r.jsx(m0,{outputLines:t,isWaitingForInput:e,inputPrompt:n,onInputSubmit:a,height:"h-full"});return i==="terminal"?o():i==="review"?l():r.jsxs("div",{className:"h-full flex flex-col gap-4",children:[r.jsx("div",{className:"flex-grow min-h-0",children:o()}),l()]})},KO={submitted:{text:"Menunggu Penilaian",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",icon:th},approved:{text:"Disetujui",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",icon:ke},rejected:{text:"Ditolak",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200",icon:ut},none:{text:"Belum Diajukan",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",icon:()=>null}},qO=()=>{const t=p.useContext(l0);if(!t)throw new Error("PlayerCodePlayground must be used within an ApplicationProvider");const{currentUser:e,playerCodeFiles:n=[],handleSavePlayerCodeFile:a,handleDeletePlayerCodeFile:s,handleUpdatePlayerCodeFile:i,showToast:l}=t,{isPyodideLoading:o,isExecuting:c,outputLines:u,runCode:f,...d}=f0(),h=`# Coba gunakan fungsi input()!
nama = input("Masukkan namamu: ")
print("Halo, " + nama + "!")`,[m,v]=p.useState(null),[b,w]=p.useState("kode_interaktif.py"),[y,g]=p.useState(h),[x,_]=p.useState(null),[k,E]=p.useState(null),[C,S]=p.useState(!1),[T,I]=p.useState(!1),[N,W]=p.useState(!0),[H,fe]=p.useState("editor"),K=p.useMemo(()=>m?n.find(Z=>Z.id===m):null,[m,n]),A=(K==null?void 0:K.reviewStatus)||"none",z=p.useMemo(()=>A==="submitted"||A==="approved",[A]);p.useEffect(()=>{O()},[]);const O=()=>{v(null),w("kode_baru.py"),g(`# Tulis kode barumu di sini
`),_(null),fe("editor")},B=Z=>{v(Z.id),w(Z.name),g(Z.code),_(null),fe("editor")},U=()=>{let Z=b.trim();if(Z.endsWith(".py")||(Z+=".py"),!Z||Z===".py"){_("Nama file tidak boleh kosong.");return}S(!0)},q=async()=>{if(!a)return;let Z=b.trim();Z.endsWith(".py")||(Z+=".py");const nn=!m,Lt={...K,id:m||void 0,name:Z,code:y},Qt=await a(Lt);l("Berhasil Disimpan",`File "${Z}" berhasil disimpan!`,r.jsx(Aa,{className:"w-5 h-5"})),nn&&Qt?B(Qt):w(Z),S(!1)},ae=Z=>E(Z),P=()=>{k&&s&&(s(k.id),m===k.id&&O(),E(null))},V=()=>{!m||A==="submitted"||A==="approved"||I(!0)},le=()=>{m&&e&&i&&i(e.id,m,{reviewStatus:"submitted"}),I(!1)},Ae=Z=>{if(Z.key==="Tab"){Z.preventDefault();const{value:nn,selectionStart:Lt}=Z.currentTarget,Qt="  ",Gn=nn.substring(0,Lt)+Qt+nn.substring(Z.currentTarget.selectionEnd);Z.currentTarget.value=Gn,Z.currentTarget.selectionStart=Z.currentTarget.selectionEnd=Lt+Qt.length,g(Gn)}},Ie=Z=>{Z.preventDefault(),l("Aksi Diblokir","Fitur salin/tempel dinonaktifkan untuk mendorong latihan mandiri.",r.jsx(Ss,{className:"w-5 h-5 text-yellow-500"}))},It=Z=>{if(!z&&Z.length-y.length>1){l("Aksi Diblokir","Fitur tempel dinonaktifkan untuk mendorong latihan mandiri.",r.jsx(Ss,{className:"w-5 h-5 text-yellow-500"}));return}g(Z)},tn=()=>{f(y),fe("output")},dt=KO[A],Qn=(Z,nn,Lt)=>r.jsxs("button",{onClick:()=>fe(Z),className:`flex-1 flex flex-col items-center gap-1 py-2 text-xs font-medium rounded-md ${H===Z?"bg-primary/10 text-primary dark:text-indigo-300":"text-gray-500 dark:text-gray-400"}`,children:[r.jsx(nn,{className:"w-5 h-5"}),r.jsx("span",{children:Lt})]});return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-4 flex-shrink-0",children:[r.jsx("button",{onClick:()=>W(!N),className:"hidden lg:block p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:r.jsx(gb,{className:`w-5 h-5 transition-transform ${N?"":"rotate-180"}`})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("input",{type:"text",value:b,onChange:Z=>{w(Z.target.value),_(null)},disabled:z,className:`w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border rounded-md font-mono text-sm dark:text-gray-200 focus:outline-none focus:ring-2 ${x?"border-red-500 ring-red-500/50":"border-gray-300 dark:border-gray-600 focus:ring-primary"} disabled:bg-gray-200 dark:disabled:bg-gray-600 disabled:text-gray-500 dark:disabled:text-gray-400`}),x&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:x})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[m&&r.jsxs("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 ${dt.color}`,children:[r.jsx(dt.icon,{className:"w-4 h-4"}),dt.text]}),(K==null?void 0:K.reviewStatus)==="approved"&&K.bonusXp>0&&r.jsxs("span",{className:"text-xs font-bold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 bg-accent/10 text-accent dark:text-amber-400 dark:bg-amber-900/50",title:`+${K.bonusXp} XP bonus!`,children:[" ",r.jsx(Dt,{className:"w-4 h-4"}),"+",K.bonusXp," XP"]}),r.jsxs("button",{onClick:U,disabled:z,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[r.jsx(Aa,{className:"w-5 h-5"}),r.jsx("span",{children:"Simpan"})]}),r.jsxs("button",{onClick:V,disabled:!m||A==="submitted"||A==="approved",className:"flex-1 sm:flex-none text-nowrap flex items-center justify-center gap-2 bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-600 transition disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[r.jsx(fb,{className:"w-5 h-5"}),A==="rejected"?"Ajukan Ulang":"Ajukan"]}),r.jsx("button",{onClick:tn,disabled:c||o,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-secondary text-white font-bold py-2 px-4 rounded-lg hover:bg-secondary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:o?"Memuat...":c?"Menjalankan...":"Jalankan"})]})]}),z&&r.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 p-3 rounded-md text-center text-sm text-yellow-800 dark:text-yellow-200 mb-3 border border-yellow-200 dark:border-yellow-800 flex-shrink-0",children:A==="submitted"?"File ini sedang menunggu penilaian.":"File ini telah disetujui."}),r.jsxs("div",{className:"flex-grow flex-col lg:flex-row flex gap-4 min-h-0",children:[r.jsxs("div",{className:"hidden lg:flex w-full h-full gap-4",children:[r.jsx("div",{className:`transition-all duration-300 ${N?"w-64":"w-0 hidden"}`,children:N&&r.jsx(bb,{savedFiles:n,activeFileId:m,onNewFile:O,onSelectFile:B,onDeleteFile:ae})}),r.jsx("div",{className:"flex-grow",children:r.jsx(Ps,{code:y,setCode:It,readOnly:z,onKeyDown:Ae,onCopy:Ie,onPaste:Ie,onContextMenu:Ie,disableCopyPaste:!0,height:"min-h-[420px]"})}),r.jsx("div",{className:"w-2/5 h-full",children:r.jsx(uf,{outputLines:u,isWaitingForInput:d.isWaitingForInput,inputPrompt:d.inputPrompt,onInputSubmit:d.onInputSubmit,activeFile:K})})]}),r.jsxs("div",{className:"lg:hidden flex flex-col w-full min-h-[70vh]",children:[r.jsxs("div",{className:"flex-grow min-h-0",children:[H==="files"&&r.jsx(bb,{savedFiles:n,activeFileId:m,onNewFile:O,onSelectFile:B,onDeleteFile:ae}),H==="editor"&&r.jsx(Ps,{code:y,setCode:It,readOnly:z,onKeyDown:Ae,onCopy:Ie,onPaste:Ie,onContextMenu:Ie,disableCopyPaste:!0,height:"min-h-[420px]"}),H==="output"&&r.jsx(uf,{outputLines:u,isWaitingForInput:d.isWaitingForInput,inputPrompt:d.inputPrompt,onInputSubmit:d.onInputSubmit,activeFile:K,view:"terminal"}),H==="review"&&r.jsx(uf,{outputLines:u,isWaitingForInput:d.isWaitingForInput,inputPrompt:d.inputPrompt,onInputSubmit:d.onInputSubmit,activeFile:K,view:"review"})]}),r.jsxs("div",{className:"flex-shrink-0 mt-4 p-1.5 bg-gray-100 dark:bg-gray-900 rounded-lg flex items-center justify-around gap-1",children:[Qn("files",gb,"Files"),Qn("editor",vO,"Editor"),Qn("output",EO,"Output"),(K==null?void 0:K.masterComment)&&Qn("review",xO,"Review")]})]})]}),r.jsx(Mt,{isOpen:!!k,onClose:()=>E(null),onConfirm:P,title:"Konfirmasi Hapus File",message:`Yakin ingin menghapus file "${k==null?void 0:k.name}"?`}),r.jsx(Mt,{isOpen:C,onClose:()=>S(!1),onConfirm:q,title:"Konfirmasi Simpan",message:`Simpan perubahan pada file "${b.trim().endsWith(".py")?b.trim():b.trim()+".py"}"?`,confirmText:"Ya, Simpan",confirmIcon:r.jsx(Aa,{className:"w-5 h-5"}),confirmButtonClass:"bg-blue-600 hover:bg-blue-700"}),r.jsx(Mt,{isOpen:T,onClose:()=>I(!1),onConfirm:le,title:"Konfirmasi Pengajuan",message:`Ajukan file "${b}" untuk dinilai? Anda tidak dapat mengeditnya selama proses penilaian.`,confirmText:"Ya, Ajukan",confirmIcon:r.jsx(fb,{className:"w-5 h-5"}),confirmButtonClass:"bg-indigo-600 hover:bg-indigo-700"})]})},XO=()=>r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex-shrink-0",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary dark:text-indigo-400",children:"Arena Koding"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Eksplorasi dan bereksperimen dengan Python di sini. Simpan kodemu untuk dilihat kembali nanti."})]}),r.jsx("div",{className:"flex-grow min-h-0",children:r.jsx(qO,{})})]}),ZO=({quests:t,user:e,onSelectQuest:n,showToast:a,questChapters:s})=>{const[i,l]=p.useState(new Set),o=p.useMemo(()=>{const d=[...s].sort((b,w)=>b.order-w.order),h=[],m=new Map(d.map(b=>[b.id,{...b,children:[],quests:[]}]));t.forEach(b=>{b.chapterId&&m.has(b.chapterId)&&m.get(b.chapterId).quests.push(b)});for(const b of d)b.parentId&&m.has(b.parentId)?m.get(b.parentId).children.push(m.get(b.id)):h.push(m.get(b.id));const v=t.filter(b=>!b.chapterId);return{tree:h,uncategorizedQuests:v}},[t,s]);p.useEffect(()=>{const d=t.find(h=>{var m,v;return!((m=e.completedQuests)!=null&&m[h.id])&&!(h.requiredQuestId&&!((v=e.completedQuests)!=null&&v[h.requiredQuestId]))});if(d!=null&&d.chapterId){const h=new Map(s.map(b=>[b.id,b]));let m=h.get(d.chapterId);const v=new Set;for(;m;)v.add(m.id),m=m.parentId?h.get(m.parentId):void 0;l(v)}},[t,s,e.completedQuests]);const c=d=>{l(h=>{const m=new Set(h);return m.has(d)?m.delete(d):m.add(d),m})},u=(d,h)=>r.jsx("ul",{className:`space-y-3 ${h?"pt-3":"pl-4 pt-3 border-l-2 border-gray-200 dark:border-gray-700 ml-4"}`,children:d.map(m=>{var y,g;const v=(y=e.completedQuests)==null?void 0:y[m.id],b=m.requiredQuestId?!((g=e.completedQuests)!=null&&g[m.requiredQuestId]):!1,w=()=>{if(b){const x=t.find(_=>_.id===m.requiredQuestId);a("Misi Terkunci",`Selesaikan misi "${(x==null?void 0:x.title)||"sebelumnya"}" terlebih dahulu untuk membuka ini.`,r.jsx(Yu,{className:"w-5 h-5 text-yellow-500"}))}else n(m)};return r.jsx("li",{children:r.jsxs("button",{onClick:w,className:`w-full flex items-center justify-between p-4 bg-white dark:bg-gray-700/50 rounded-lg transition-colors duration-200 text-left ${b?"cursor-not-allowed opacity-60":"hover:bg-primary/5 dark:hover:bg-indigo-500/10"}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[v?r.jsx(ke,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold flex-shrink-0 ${b?"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-primary/10 text-primary dark:text-indigo-400"}`,children:m.xp}),r.jsxs("div",{children:[r.jsx("p",{className:`font-semibold ${v?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-gray-100"}`,children:m.title}),r.jsx("p",{className:`text-sm ${v?"text-gray-500/80 dark:text-gray-500":"text-gray-600 dark:text-gray-400"}`,children:m.description})]})]}),b?r.jsx(Yu,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"}):r.jsx(i0,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})]})},m.id)})}),f=d=>{const h=i.has(d.id);return r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl overflow-hidden border dark:border-gray-700/50",children:[r.jsxs("button",{onClick:()=>c(d.id),className:"w-full flex justify-between items-center p-4 text-left",children:[r.jsx("h4",{className:"font-bold text-lg text-primary dark:text-indigo-400",children:d.title}),r.jsx(eh,{className:`w-6 h-6 text-gray-500 dark:text-gray-400 transition-transform ${h?"rotate-180":""}`})]}),h&&r.jsxs("div",{className:"px-4 pb-4 animate-fade-in-down",children:[d.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:d.description}),d.quests.length>0&&u(d.quests,!1),d.children.length>0&&r.jsx("div",{className:"space-y-3 mt-4 ml-4 pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:d.children.map(m=>{const v=m.quests.length>0;return r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 dark:text-gray-200",children:m.title}),m.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:m.description}),v?u(m.quests,!0):r.jsx("p",{className:"text-sm italic text-gray-400 dark:text-gray-500 py-2",children:"Segera hadir..."})]},m.id)})})]})]},d.id)};return r.jsxs("div",{className:"space-y-4",children:[o.tree.map(d=>f(d)),o.uncategorizedQuests.length>0&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h4",{className:"font-bold text-lg text-gray-500 dark:text-gray-400 mb-3",children:"Misi Lainnya"}),r.jsx("div",{className:"space-y-3",children:u(o.uncategorizedQuests,!0)})]})]})},JO=({user:t,allQuests:e,onSelectQuest:n,showToast:a})=>{const{questChapters:s}=Vt();return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary dark:text-indigo-400",children:"Daftar Misi"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Jelajahi semua misi yang tersedia. Selesaikan misi pembelajaran untuk membuka konsep baru dan taklukkan misi utama untuk naik peringkat!"}),r.jsx(ZO,{quests:e,user:t,onSelectQuest:n,showToast:a,questChapters:s})]})},eD=({isOpen:t,onClose:e,ranks:n,user:a})=>{if(!t)return null;const s=[...n].sort((l,o)=>l.xpThreshold-o.xpThreshold),i=la(a.xp,n);return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg transform transition-all flex flex-col",onClick:l=>l.stopPropagation(),children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Dt,{className:"w-7 h-7 text-primary dark:text-indigo-400"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Daftar Gelar Peringkat"})]}),r.jsx("button",{type:"button",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:r.jsx(ut,{className:"w-6 h-6"})})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Ini adalah semua gelar yang bisa kamu raih dalam petualanganmu!"})]}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:r.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2 space-y-3",children:s.map((l,o)=>{const c=s[o+1],u=l.name===i.name,f=c?c.xpThreshold-l.xpThreshold:0,d=a.xp-l.xpThreshold;return r.jsxs("div",{className:`p-4 rounded-lg border-2 ${u?"bg-primary/5 border-primary dark:bg-indigo-500/10 dark:border-indigo-500":"bg-gray-50 border-transparent dark:bg-gray-800/50"}`,children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:`font-bold text-lg ${u?"text-primary dark:text-indigo-400":"text-gray-800 dark:text-gray-200"}`,children:l.name}),r.jsxs("span",{className:"font-mono font-semibold text-sm text-gray-600 dark:text-gray-400",children:[l.xpThreshold," XP ",c?"":"+"]})]}),c?r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 relative",children:u&&f>0&&r.jsx("div",{className:"bg-accent h-1.5 rounded-full",style:{width:`${Math.min(100,d/f*100)}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-500 mt-1 font-mono",children:[r.jsx("span",{children:l.xpThreshold}),r.jsx("span",{children:c.xpThreshold})]})]}):u&&r.jsx("p",{className:"text-xs text-accent dark:text-amber-400 mt-2",children:"Kamu berada di peringkat tertinggi!"})]},l.name)})})}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-4 flex justify-end rounded-b-2xl border-t border-gray-200 dark:border-gray-700 mt-auto",children:r.jsx("button",{onClick:e,className:"font-semibold py-2 px-6 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Tutup"})})]})})},vb=5,tD=({value:t,max:e})=>{const n=e>0?t/e*100:0;return r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-accent h-2.5 rounded-full",style:{width:`${n}%`}})})},nD=({user:t,nextQuest:e,quests:n,onSelectQuest:a,ranks:s,playerCodeFiles:i})=>{const[l,o]=p.useState(!1),[c,u]=p.useState(vb),f=Qs(t.avatarId),d=la(t.xp,s),h=WM(t.xp,s),m=h?h.xpThreshold-d.xpThreshold:0,v=t.xp-d.xpThreshold,b=p.useMemo(()=>{if(!t.completedQuests)return[];const g=Object.entries(t.completedQuests);return n.map(x=>{const _=g.find(([E])=>E===x.id);if(!_)return null;const k=_[1];return{...x,completedAt:k.completedAt||0,score:k.score}}).filter(x=>x!==null).sort((x,_)=>_.completedAt-x.completedAt)},[t.completedQuests,n]),w=b.slice(0,c),y=p.useMemo(()=>i?i.filter(g=>g.reviewStatus==="approved"&&g.bonusXp&&g.bonusXp>0).sort((g,x)=>x.id.localeCompare(g.id)):[],[i]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 p-6 bg-gradient-to-r from-primary/80 to-primary rounded-2xl text-white shadow-lg",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-white/20 flex items-center justify-center p-2 flex-shrink-0 border-4 border-white",children:r.jsx(f,{className:"w-20 h-20"})}),r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsxs("h2",{className:"text-3xl font-bold font-display",children:["Halo, ",at(t.name),"!"]}),r.jsx("p",{className:"text-lg opacity-90 mt-1",children:"Selamat datang kembali di Python Quest. Siap untuk petualangan hari ini?"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 bg-gray-50 dark:bg-gray-800/50 p-6 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Progres Peringkat"}),r.jsx("button",{onClick:()=>o(!0),className:"p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",title:"Lihat semua gelar peringkat",children:r.jsx(Ss,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:d.name}),h&&r.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:h.name})]}),r.jsx(tD,{value:v,max:m}),r.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("span",{children:[t.xp," XP"]}),h&&r.jsxs("span",{children:[h.xpThreshold," XP"]})]}),h?r.jsxs("p",{className:"text-center text-sm text-accent dark:text-amber-400 font-semibold mt-4",children:["Kamu butuh ",h.xpThreshold-t.xp," XP lagi untuk mencapai peringkat ",h.name,"!"]}):r.jsx("p",{className:"text-center text-sm text-accent dark:text-amber-400 font-semibold mt-4",children:"Kamu telah mencapai peringkat tertinggi!"})]}),e?r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-6 rounded-lg flex flex-col justify-center",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Misi Berikutnya"}),r.jsx("button",{onClick:()=>a(e),className:"w-full p-4 bg-white dark:bg-gray-700 hover:bg-secondary/10 dark:hover:bg-pink-500/10 rounded-lg shadow-sm text-left transition-all hover:shadow-md transform hover:-translate-y-1 group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-secondary dark:text-pink-400 group-hover:text-secondary/80 dark:group-hover:text-pink-400/80",children:e.title}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.xp," XP"]})]}),r.jsx(sc,{className:"w-8 h-8 text-secondary/50 dark:text-pink-400/50 group-hover:text-secondary dark:group-hover:text-pink-400"})]})})]}):r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-6 rounded-lg flex flex-col justify-center items-center",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Semua Misi Selesai!"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"Kerja bagus! Kamu telah menyelesaikan semua misi yang tersedia."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[r.jsx(ke,{className:"w-6 h-6 text-green-500"}),"Misi Selesai"]}),b.length>0?r.jsxs(r.Fragment,{children:[r.jsx("ul",{className:"space-y-2",children:w.map(g=>r.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/40 flex items-center justify-center text-green-600 dark:text-green-300 flex-shrink-0",children:r.jsx(ke,{className:"w-5 h-5"})}),r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 truncate",children:g.title}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:g.description})]})]}),r.jsx("div",{className:"text-right flex-shrink-0 ml-4 min-w-[70px]",children:(()=>{const x=g.score===g.xp;return r.jsxs("div",{children:[r.jsxs("p",{className:`font-bold text-lg ${x?"text-green-500 dark:text-green-400":"text-accent dark:text-amber-400"}`,children:["+",g.score," XP"]}),!x&&g.xp>0&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 -mt-1",children:["dari ",g.xp]})]})})()})]},g.id))}),c<b.length&&r.jsx("div",{className:"mt-4 text-center",children:r.jsx("button",{onClick:()=>u(g=>g+vb),className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-2 px-6 rounded-lg transition-colors",children:"Tampilkan Lebih Banyak"})})]}):r.jsx("div",{className:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg h-full flex items-center justify-center",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Kamu belum menyelesaikan misi apapun. Ayo mulai petualanganmu!"})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[r.jsx(Dt,{className:"w-6 h-6 text-yellow-500"}),"Bonus Koding"]}),y.length>0?r.jsx("ul",{className:"space-y-2",children:y.map(g=>r.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/40 flex items-center justify-center text-yellow-600 dark:text-yellow-300 flex-shrink-0",children:r.jsx(Dt,{className:"w-5 h-5"})}),r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 truncate",title:g.name,children:g.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:"Kode disetujui oleh Master"})]})]}),r.jsx("div",{className:"text-right flex-shrink-0 ml-4",children:r.jsxs("p",{className:"font-bold text-lg text-yellow-500 dark:text-yellow-400",children:["+",g.bonusXp," XP"]})})]},g.id))}):r.jsx("div",{className:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg h-full flex items-center justify-center",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Belum ada bonus XP dari review kode."})})]})]})]}),l&&r.jsx(eD,{isOpen:l,onClose:()=>o(!1),ranks:s,user:t})]})},Fm=t=>{var l;if(!t||t.length===0)return[];const e=new Map(t.map(o=>[o.id,o])),n=new Map,a=new Map;for(const o of t)n.set(o.id,0),a.set(o.id,[]);for(const o of t)o.requiredQuestId&&e.has(o.requiredQuestId)&&(n.set(o.id,(n.get(o.id)||0)+1),(l=a.get(o.requiredQuestId))==null||l.push(o.id));const s=t.filter(o=>n.get(o.id)===0).sort((o,c)=>(o.order??999)-(c.order??999)),i=[];for(;s.length>0;){const o=s.shift();i.push(o);const u=(a.get(o.id)||[]).map(f=>e.get(f)).filter(Boolean).sort((f,d)=>(f.order??999)-(d.order??999));for(const f of u){const d=f.id;n.set(d,(n.get(d)||1)-1),n.get(d)===0&&s.push(f)}}if(i.length!==t.length){console.warn("Terdeteksi dependensi sirkular atau prasyarat yang rusak pada misi. Misi yang tidak terurut akan ditambahkan di akhir.");const o=new Set(i.map(u=>u.id)),c=t.filter(u=>!o.has(u.id));i.push(...c)}return i},aD=({user:t,challenges:e,onSelectQuest:n,showToast:a})=>r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary dark:text-indigo-400",children:"Tantangan Koding"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Asah kemampuanmu dan raih XP sebanyak-banyaknya di sini! Semua tantangan bisa dikerjakan berulang kali tanpa batas percobaan atau penalti. Tempat yang sempurna untuk berlatih dan menaikkan peringkat tanpa rasa takut."}),r.jsx("div",{className:"space-y-3",children:e.length>0?e.map(s=>{var c,u;const i=(c=t.completedQuests)==null?void 0:c[s.id],l=s.requiredQuestId?!((u=t.completedQuests)!=null&&u[s.requiredQuestId]):!1,o=()=>{l?a("Tantangan Terkunci","Selesaikan misi prasyarat terlebih dahulu untuk membuka ini.",r.jsx(Yu,{className:"w-5 h-5 text-yellow-500"})):n(s)};return r.jsx("div",{children:r.jsxs("button",{onClick:o,className:`w-full flex items-center justify-between p-4 bg-white dark:bg-gray-700/50 rounded-lg transition-colors duration-200 text-left ${l?"cursor-not-allowed opacity-60":"hover:bg-primary/5 dark:hover:bg-indigo-500/10"}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[i?r.jsx(ke,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold flex-shrink-0 ${l?"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-primary/10 text-primary dark:text-indigo-400"}`,children:s.xp}),r.jsxs("div",{children:[r.jsx("p",{className:`font-semibold ${i?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:s.title}),r.jsx("p",{className:`text-sm ${i?"text-gray-500/80 dark:text-gray-500":"text-gray-600 dark:text-gray-400"}`,children:s.description})]})]}),l?r.jsx(Yu,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"}):r.jsx(i0,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})]})},s.id)}):r.jsx("div",{className:"text-center p-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Belum ada tantangan koding yang tersedia. Cek kembali nanti!"})})})]}),sD=()=>{const{currentUser:t,logout:e,ranks:n,questsMetadata:a,leaderboard:s,rooms:i,playerCodeFiles:l,handleUpdateUser:o,handleQuestComplete:c,handleSetActiveQuest:u,showToast:f}=Vt(),[d,h]=p.useState([]),[m,v]=p.useState(!0),[b,w]=p.useState(null),[y,g]=p.useState(!1),[x,_]=p.useState(!1),[k,E]=p.useState(null),[C,S]=p.useState(null);p.useEffect(()=>{v(!0),zm().then(P=>{h(P||[]),v(!1)})},[]);const T=p.useMemo(()=>Fm(a.filter(P=>P.category!==we.CHALLENGE)),[a]),I=p.useMemo(()=>a.filter(P=>P.category===we.CHALLENGE).sort((P,V)=>(P.order||0)-(V.order||0)),[a]),N=(P,V)=>{var le,Ae;for(const Ie of V){if((le=P.completedQuests)!=null&&le[Ie.id])continue;if(!(Ie.requiredQuestId?!((Ae=P.completedQuests)!=null&&Ae[Ie.requiredQuestId]):!1))return Ie}return null},W=p.useMemo(()=>t?N(t,T):null,[t,T]),H=async P=>{const V=await z2(P);V?(w(V),g(!0),_(!1)):f("Error","Gagal memuat detail misi.")},fe=P=>{var V;P.category==="main"&&!((V=t==null?void 0:t.completedQuests)!=null&&V[P.id])?S(P):H(P.id)},K=()=>{C&&(u(C.id),H(C.id),S(null))},A=()=>{_(!0),setTimeout(()=>{g(!1),w(null)},300)},z=P=>{A(),setTimeout(()=>{P.category==="main"&&u(P.id),H(P.id)},350)};p.useEffect(()=>{if(t!=null&&t.activeQuestId&&!y&&a.length>0){const P=a.find(V=>V.id===t.activeQuestId);P&&P.category==="main"?H(P.id):P&&u(null)}},[t,a,y]);const O=(P,V,le)=>{c(P,V,le)},B=P=>{const V=d.find(le=>le.id===P);V&&V.role===Ge.PLAYER&&E(V)},U=()=>{E(t)},q=()=>{E(null)},ae=P=>{o(P),E(P)};return!t||m?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Memuat data pengguna..."}):y&&b&&(t==null?void 0:t.activeQuestId)===b.id?r.jsx("div",{className:"fixed inset-0 z-30",children:r.jsx(xb,{quest:b,onClose:A,onComplete:O,nextQuest:W,onStartNextQuest:z})}):r.jsxs(r.Fragment,{children:[r.jsxs(IC,{user:t,onLogout:e,onProfileClick:U,fullWidth:!0,children:[r.jsx("div",{className:"mb-6",children:r.jsx(PO,{})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-2xl shadow-sm animate-fade-in",children:r.jsxs(vd,{children:[r.jsx(We,{index:!0,element:r.jsx(Js,{to:"beranda",replace:!0})}),r.jsx(We,{path:"beranda",element:r.jsx(nD,{user:t,nextQuest:W,quests:a,onSelectQuest:fe,ranks:n,playerCodeFiles:l})}),r.jsx(We,{path:"misi",element:r.jsx(JO,{user:t,allQuests:T,onSelectQuest:fe,showToast:f})}),r.jsx(We,{path:"tantangan",element:r.jsx(aD,{user:t,challenges:I,onSelectQuest:fe,showToast:f})}),r.jsx(We,{path:"peringkat",element:r.jsx($O,{entries:s,onSelectUser:B,rooms:i,users:d,currentUser:t})}),r.jsx(We,{path:"playground",element:r.jsx(XO,{})})]})})]}),y&&b&&r.jsx("div",{className:`fixed inset-0 z-30 ${x?"animate-slide-out-to-right":"animate-slide-in-from-right"}`,children:r.jsx(xb,{quest:b,onClose:A,onComplete:O,nextQuest:W,onStartNextQuest:z})}),k&&r.jsx(RC,{user:k,quests:a,onClose:q,isEditable:k.id===t.id,onUpdateProfile:ae}),C&&r.jsx(Mt,{isOpen:!!C,onClose:()=>S(null),onConfirm:K,title:"Konfirmasi Memulai Latihan",message:"Anda akan memulai misi utama. Anda tidak akan bisa kembali atau keluar dari latihan ini sampai selesai. Lanjutkan?",confirmText:"Ya, Mulai Latihan",confirmIcon:r.jsx(sc,{className:"w-5 h-5"}),confirmButtonClass:"bg-primary hover:bg-primary/90"})]})},_b=[{id:"dashboard",label:"Beranda",icon:G2},{id:"mission-management",label:"Kelola Misi",icon:jo,children:[{id:"chapters",label:"Kelola Struktur",icon:Q2},{id:"quests",label:"Kelola Misi",icon:jo},{id:"challenges",label:"Kelola Tantangan",icon:W2}]},{id:"user-management",label:"Kelola Pengguna",icon:Hm,children:[{id:"players",label:"Kelola Pemain",icon:Hm},{id:"arsipPemain",label:"Arsip Kode Pemain",icon:s0},{id:"rooms",label:"Kelola Room",icon:bO}]},{id:"ranks",label:"Kelola Peringkat",icon:Dt}],iD=({group:t})=>{const[e,n]=p.useState(!1),a=Qa(),s=p.useRef(null),i=t.children.some(o=>a.pathname.includes(`/dashboard/${o.id}`));p.useEffect(()=>{const o=c=>{s.current&&!s.current.contains(c.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const l=t.icon;return r.jsxs("div",{className:"relative",ref:s,children:[r.jsxs("button",{onClick:()=>n(!e),className:`flex items-center justify-center gap-2 font-semibold p-3 w-full h-full rounded-lg transition-colors duration-200 ${i?"bg-primary text-white shadow":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[r.jsx(l,{className:"w-5 h-5"}),r.jsx("span",{children:t.label}),r.jsx(eh,{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`})]}),e&&r.jsx("div",{className:"absolute top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-xl border dark:border-gray-700 z-20 animate-fade-in-down",children:r.jsx("div",{className:"p-2 space-y-1",children:t.children.map(o=>{const c=o.icon;return r.jsxs(Ul,{to:o.id,onClick:()=>n(!1),className:({isActive:u})=>`flex items-center gap-3 w-full p-3 rounded-md text-sm transition-colors ${u?"bg-primary/10 text-primary dark:bg-indigo-500/20 dark:text-indigo-300 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(c,{className:"w-5 h-5"}),r.jsx("span",{children:o.label})]},o.id)})})})]})},rD=()=>{const[t,e]=p.useState(!1),[n,a]=p.useState(null),s=Qa();p.useEffect(()=>{e(!1)},[s]);const i=o=>{a(c=>c===o?null:o)},l=()=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`fixed inset-0 bg-black/60 z-40 transition-opacity md:hidden ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>e(!1),"aria-hidden":"true"}),r.jsxs("div",{className:`fixed top-0 left-0 h-full w-72 bg-white dark:bg-gray-800 shadow-xl z-50 transform transition-transform md:hidden ${t?"translate-x-0":"-translate-x-full"}`,children:[r.jsxs("div",{className:"p-4 flex justify-between items-center border-b dark:border-gray-700",children:[r.jsx("h2",{className:"font-bold text-lg text-primary dark:text-indigo-400",children:"Navigasi Master"}),r.jsx("button",{onClick:()=>e(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:r.jsx(ut,{className:"w-6 h-6"})})]}),r.jsx("nav",{className:"p-4",children:r.jsx("ul",{className:"space-y-2",children:_b.map(o=>{if("children"in o){const u=o.children.some(h=>s.pathname.includes(`/dashboard/${h.id}`)),f=n===o.id,d=o.icon;return r.jsxs("li",{children:[r.jsxs("button",{onClick:()=>i(o.id),className:`flex items-center justify-between w-full p-3 rounded-lg text-left transition-colors ${u?"bg-gray-100 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 font-semibold text-gray-700 dark:text-gray-200",children:[r.jsx(d,{className:"w-5 h-5"}),r.jsx("span",{children:o.label})]}),r.jsx(eh,{className:`w-5 h-5 transition-transform ${f?"rotate-180":""}`})]}),f&&r.jsx("ul",{className:"pl-6 mt-2 space-y-1 border-l-2 dark:border-gray-600 ml-2",children:o.children.map(h=>{const m=h.icon;return r.jsx("li",{children:r.jsxs(Ul,{to:h.id,className:({isActive:v})=>`flex items-center gap-3 w-full p-2 rounded-md text-sm transition-colors ${v?"bg-primary/10 text-primary dark:text-indigo-300 font-semibold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(m,{className:"w-4 h-4"}),r.jsx("span",{children:h.label})]})},h.id)})})]},o.id)}const c=o.icon;return r.jsx("li",{children:r.jsxs(Ul,{to:o.id,end:!0,className:({isActive:u})=>`flex items-center gap-3 w-full p-3 rounded-lg font-semibold transition-colors ${u?"bg-primary text-white":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(c,{className:"w-5 h-5"}),r.jsx("span",{children:o.label})]})},o.id)})})})]})]});return r.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900/50 p-2 rounded-xl mb-6",children:[r.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[r.jsx("button",{onClick:()=>e(!0),className:"p-2 text-gray-600 dark:text-gray-300","aria-label":"Buka navigasi",children:r.jsx($2,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Menu"})]}),r.jsx("nav",{className:"hidden md:grid md:grid-flow-col md:auto-cols-fr md:gap-2",children:_b.map(o=>{if("children"in o)return r.jsx(iD,{group:o},o.id);const c=o.icon;return r.jsxs(Ul,{to:o.id,end:o.id==="dashboard",className:({isActive:u})=>`flex items-center justify-center gap-2 font-semibold p-3 rounded-lg transition-colors duration-200 ${u?"bg-primary text-white shadow":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[r.jsx(c,{className:"w-5 h-5"}),r.jsx("span",{children:o.label})]},o.id)})}),l()]})},wb=({quests:t,allQuests:e,questChapters:n,onAddNew:a,onEdit:s,onDelete:i,title:l,showAlert:o,showToast:c})=>{const{handleGenerateQuestsMetadata:u}=Vt(),[f,d]=p.useState(null),[h,m]=p.useState(new Set),[v,b]=p.useState(!1),[w,y]=p.useState(!1),g=p.useMemo(()=>{const N=n.filter(H=>!H.parentId).sort((H,fe)=>H.order-fe.order),W=t;return N.map(H=>{const fe=n.filter(K=>K.parentId===H.id).sort((K,A)=>K.order-A.order);return{...H,quests:W.filter(K=>K.chapterId===H.id),subChapters:fe.map(K=>({...K,quests:W.filter(A=>A.chapterId===K.id)}))}})},[t,n]),x=p.useMemo(()=>t.filter(N=>!N.chapterId),[t]),_=N=>{m(W=>{const H=new Set(W);return H.has(N)?H.delete(N):H.add(N),H})},k=N=>{if(e.some(H=>H.requiredQuestId===N.id)){o("Aksi Ditolak",`Misi "${N.title}" tidak dapat dihapus karena menjadi prasyarat untuk misi lain.`);return}d(N)},E=()=>{f&&(i(f.id),c("Berhasil",`Misi "${f.title}" telah dihapus.`,r.jsx(ke,{className:"w-5 h-5 text-green-500"})),d(null))},C=async()=>{y(!1),b(!0);try{await u(),c("Berhasil","Metadata misi telah berhasil disinkronkan.",r.jsx(ke,{className:"w-5 h-5 text-green-500"}))}catch(N){o("Gagal Sinkronisasi",`Terjadi kesalahan: ${N.message}`)}finally{b(!1)}},S=({quest:N})=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700/50 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex-grow w-2/5 min-w-0",children:[r.jsx("p",{className:"font-semibold text-primary dark:text-indigo-400 truncate",title:N.title,children:N.title}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",title:N.description,children:N.description})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 mx-4",children:[r.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${N.category===we.TUTORIAL?"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300":"bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300"}`,children:N.category===we.TUTORIAL?"Pembelajaran":"Latihan"}),r.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${N.type===Me.QUIZ?"bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300":"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300"}`,children:N.type===Me.QUIZ?"Kuis":"Koding"})]}),r.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[r.jsxs("span",{className:"font-bold text-accent dark:text-amber-400 w-16 text-center",children:[N.xp," XP"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>s(N),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:r.jsx(el,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>k(N),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",title:"Hapus",children:r.jsx(In,{className:"w-4 h-4"})})]})]})]}),T=({quests:N})=>r.jsx("div",{className:"space-y-2",children:N.length>0?N.map(W=>r.jsx(S,{quest:W},W.id)):r.jsx("p",{className:"text-sm italic text-gray-400 dark:text-gray-500 py-2 px-3",children:"Belum ada misi di bagian ini."})}),I=N=>{const W=h.has(N.id);return r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl overflow-hidden border dark:border-gray-700/50",children:[r.jsxs("button",{onClick:()=>_(N.id),className:"w-full flex justify-between items-center p-4 text-left hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[r.jsx("h4",{className:"font-bold text-lg text-primary dark:text-indigo-400",children:N.title}),r.jsx(eh,{className:`w-6 h-6 text-gray-500 dark:text-gray-400 transition-transform ${W?"rotate-180":""}`})]}),W&&r.jsxs("div",{className:"px-4 pb-4 animate-fade-in-down space-y-4",children:[N.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 border-b dark:border-gray-700 pb-3 mb-3",children:N.description}),N.quests.length>0&&r.jsx(T,{quests:N.quests}),N.subChapters.length>0&&r.jsx("div",{className:"space-y-3 mt-4 ml-4 pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:N.subChapters.map(H=>r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:H.title}),H.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:H.description}),r.jsx(T,{quests:H.quests})]},H.id))})]})]},N.id)};return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:l}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>y(!0),disabled:v,className:"flex items-center gap-2 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-900 text-blue-700 dark:text-blue-300 font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",title:"Buat ulang metadata misi untuk optimisasi",children:[r.jsx(wi,{className:`w-5 h-5 ${v?"animate-spin":""}`}),r.jsx("span",{children:v?"Menyinkronkan...":"Sinkronkan Metadata"})]}),r.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[r.jsx(ta,{className:"w-5 h-5"}),r.jsx("span",{children:"Tambah Misi Baru"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[g.length>0?g.map(I):x.length===0&&r.jsx("div",{className:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg border dark:border-gray-700",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Belum ada bab atau misi yang dibuat."})}),x.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"font-bold text-lg text-gray-600 dark:text-gray-400 mb-3 border-b dark:border-gray-700 pb-2",children:"Misi Tanpa Bab"}),r.jsx("div",{className:"space-y-3 pt-3",children:r.jsx(T,{quests:x})})]})]}),r.jsx(Mt,{isOpen:!!f,onClose:()=>d(null),onConfirm:E,title:"Konfirmasi Hapus Misi",message:`Apakah Anda yakin ingin menghapus misi "${f==null?void 0:f.title}"? Aksi ini tidak dapat diurungkan.`}),r.jsx(Mt,{isOpen:w,onClose:()=>y(!1),onConfirm:C,title:"Konfirmasi Sinkronisasi Metadata",message:"Aksi ini akan membaca semua data misi lengkap dari '/quests' dan membuat/menimpa data di '/quests_metadata'. Ini berguna untuk migrasi data awal atau memperbaiki metadata yang rusak. Lanjutkan?",confirmText:"Ya, Sinkronkan",confirmIcon:r.jsx(wi,{className:"w-5 h-5"}),confirmButtonClass:"bg-blue-600 hover:bg-blue-700"})]})},lD=({user:t,quests:e,onClose:n,onResetQuestProgress:a,onUnlockPlayer:s})=>{const[i,l]=p.useState(null),[o,c]=p.useState(!1),u=p.useMemo(()=>{if(!t.completedQuests)return[];const v=new Map(e.map(b=>[b.id,b]));return Object.keys(t.completedQuests).map(b=>{const w=v.get(b),y=t.completedQuests[b];return w&&y&&typeof y.score=="number"?{quest:w,score:y.score}:null}).filter(b=>b!==null)},[t.completedQuests,e]),f=p.useMemo(()=>t.activeQuestId?e.find(v=>v.id===t.activeQuestId):null,[t.activeQuestId,e]),d=Qs(t.avatarId),h=async()=>{i&&(await a(t.id,i.id),l(null))},m=async()=>{await s(t.id),c(!1)};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:n,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg transform transition-all flex flex-col",onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{className:"p-6 pt-10",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-grow flex flex-col sm:flex-row items-center sm:items-start text-center sm:text-left gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center p-2 flex-shrink-0 border-4 border-white dark:border-gray-700 shadow-md -mt-16",children:r.jsx(d,{className:"w-20 h-20"})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("h2",{className:"text-2xl font-bold text-primary dark:text-indigo-400",children:at(t.name)}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:t.rank}),r.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-accent/10 text-accent dark:text-amber-400 font-bold text-lg py-1 px-4 rounded-full",children:[r.jsx(Dt,{className:"w-5 h-5"}),r.jsxs("span",{children:[t.xp," XP"]})]})]})]}),r.jsx("button",{onClick:n,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:r.jsx(ut,{className:"w-6 h-6"})})]}),f&&r.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[r.jsx("h4",{className:"font-bold text-yellow-800 dark:text-yellow-200",children:"Pemain Terkunci"}),r.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:["Pemain ini sedang terkunci di misi utama: ",r.jsx("strong",{children:f.title}),"."]}),r.jsxs("button",{onClick:()=>c(!0),className:"mt-3 w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx(pb,{className:"w-5 h-5"}),"Buka Kunci Pemain"]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:[r.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-3",children:["Misi Selesai (",u.length,")"]}),r.jsx("div",{className:"max-h-80 overflow-y-auto pr-2 space-y-2",children:u.length>0?u.map(({quest:v,score:b})=>r.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-green-50 dark:bg-green-900/50 rounded-md group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ke,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-green-800 dark:text-green-200",children:v.title}),r.jsxs("p",{className:"text-sm text-green-700/80 dark:text-green-300/80",children:["Skor: ",b," XP"]})]})]}),r.jsx("button",{onClick:()=>l(v),className:"p-1.5 bg-red-100 text-red-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900",title:`Reset progres ${v.title}`,children:r.jsx(In,{className:"w-4 h-4"})})]},v.id)):r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Belum ada misi yang diselesaikan."})})]}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-3 flex justify-end rounded-b-2xl border-t border-gray-200 dark:border-gray-700 mt-auto",children:r.jsx("button",{onClick:n,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Tutup"})})]})}),r.jsx(Mt,{isOpen:!!i,onClose:()=>l(null),onConfirm:h,title:"Konfirmasi Reset Progres",message:`Anda yakin ingin mereset progres "${i==null?void 0:i.title}" untuk pemain ${at(t.name)}? Tindakan ini akan menghapus skor dan mengembalikan XP yang didapat.`,confirmText:"Ya, Reset",confirmIcon:r.jsx(In,{className:"w-5 h-5"}),confirmButtonClass:"bg-red-600 hover:bg-red-700"}),r.jsx(Mt,{isOpen:o,onClose:()=>c(!1),onConfirm:m,title:"Konfirmasi Buka Kunci",message:`Anda yakin ingin membuka kunci pemain ${at(t.name)}? Ini akan memungkinkan mereka keluar dari misi utama yang sedang berjalan.`,confirmText:"Ya, Buka Kunci",confirmIcon:r.jsx(pb,{className:"w-5 h-5"}),confirmButtonClass:"bg-yellow-500 hover:bg-yellow-600"})]})},oD=({players:t,rooms:e,quests:n,onAdd:a,onEdit:s,onDeactivate:i,onReactivate:l,onImportClick:o,onLoadMore:c,hasNextPage:u,isLoadingMore:f,onResetQuestProgress:d,onUnlockPlayer:h,onRefresh:m})=>{const[v,b]=p.useState("active"),[w,y]=p.useState(null),[g,x]=p.useState(!1),_=p.useMemo(()=>w&&t.find(S=>S.id===w)||null,[w,t]),k=async()=>{x(!0),await m(),x(!1)},E=S=>{var T;return S?((T=e.find(I=>I.id===S))==null?void 0:T.name)||"N/A":"Tanpa Room"},C=p.useMemo(()=>v==="active"?t.filter(S=>!S.disabled):t.filter(S=>S.disabled),[t,v]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Data Pemain"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:k,disabled:g,className:"flex items-center gap-2 bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg transition-colors border border-gray-300 dark:border-gray-600 shadow-sm disabled:opacity-50",title:"Muat ulang data pemain",children:[r.jsx(wi,{className:`w-5 h-5 ${g?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:g?"Memuat...":"Refresh"})]}),r.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[r.jsx(H2,{className:"w-5 h-5"}),r.jsx("span",{children:"Impor dari Excel"})]}),r.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[r.jsx(ta,{className:"w-5 h-5"}),r.jsx("span",{children:"Tambah Pemain"})]})]})]}),r.jsx("div",{className:"mb-4 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>b("active"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${v==="active"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-500"}`,children:"Pemain Aktif"}),r.jsx("button",{onClick:()=>b("inactive"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${v==="inactive"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-500"}`,children:"Pemain Nonaktif"})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left",children:[r.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 rounded-l-md",children:"Nama Pemain"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Room"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"Progress"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"XP"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center rounded-r-md",children:"Aksi"})]})}),r.jsx("tbody",{children:C.length>0?C.map((S,T)=>{const I=Qs(S.avatarId),N=Object.keys(S.completedQuests||{}).length;return r.jsxs("tr",{className:`${T%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/30"} border-t dark:border-gray-700`,children:[r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center flex-shrink-0",children:r.jsx(I,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-primary dark:text-indigo-400",children:at(S.name)}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:S.username})]})]})}),r.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:E(S.roomId)}),r.jsxs("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400 font-medium",children:[N," / ",n.length]}),r.jsx("td",{className:"p-3 text-center font-bold text-accent dark:text-amber-400",children:S.xp}),r.jsx("td",{className:"p-3 text-center",children:r.jsxs("div",{className:"flex justify-center items-center gap-2",children:[r.jsx("button",{onClick:()=>y(S.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",title:"Lihat Detail",children:r.jsx(Ss,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>s(S),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:r.jsx(el,{className:"w-4 h-4"})}),v==="active"?r.jsx("button",{onClick:()=>i(S),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",title:"Nonaktifkan",children:r.jsx(V2,{className:"w-4 h-4"})}):r.jsx("button",{onClick:()=>l(S),className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-full",title:"Aktifkan Kembali",children:r.jsx(F2,{className:"w-4 h-4"})})]})})]},S.id)}):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:v==="active"?"Belum ada data pemain aktif.":"Tidak ada pemain yang dinonaktifkan."})})})]})})}),u&&r.jsx("div",{className:"mt-4 text-center",children:r.jsx("button",{onClick:c,disabled:f,className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-2 px-6 rounded-lg transition-colors disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-wait",children:f?"Memuat...":"Muat Lebih Banyak"})})]}),_&&r.jsx(lD,{user:_,quests:n,onClose:()=>y(null),onResetQuestProgress:d,onUnlockPlayer:h})]})},zi="text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200",Hi="block text-base font-semibold text-gray-800 dark:text-gray-200",cD=({onClose:t,onSave:e,playerToEdit:n,rooms:a,ranks:s})=>{const[i,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(""),[d,h]=p.useState(""),[m,v]=p.useState(""),[b,w]=p.useState(Wn.MALE),[y,g]=p.useState("knight"),[x,_]=p.useState(null),k=!!n;p.useEffect(()=>{n?(l(n.name),c(n.nisn||""),f(n.email||""),h(n.username||""),w(n.gender||Wn.MALE),g(n.avatarId),v("")):(l(""),c(""),f(""),h(""),v(""),w(Wn.MALE),g("knight")),_(null)},[n]);const E=p.useMemo(()=>{const T=b===Wn.MALE?"male":"female";return c0.filter(I=>I.gender===T||I.gender==="unisex")},[b]);p.useEffect(()=>{var I;E.some(N=>N.id===y)||g(((I=E[0])==null?void 0:I.id)||"knight")},[b,y,E]);const C=T=>{if(T.preventDefault(),_(null),!i.trim()||!o.trim()||!u.trim()||!d.trim()){_("Semua field wajib diisi (kecuali password saat edit).");return}if(!n&&(!m.trim()||m.length<6)){_("Password wajib diisi dan minimal 6 karakter untuk pemain baru.");return}e({id:n==null?void 0:n.id,name:i,nisn:o,email:u,username:d,gender:b,avatarId:y,questAttempts:(n==null?void 0:n.questAttempts)||{}},m)},S=T=>I=>{T(I.target.value),x&&_(null)};return r.jsx("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900","aria-modal":"true",role:"dialog",children:r.jsxs("form",{onSubmit:C,className:"flex flex-col h-full",children:[r.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("button",{type:"button",onClick:t,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[r.jsx(ki,{className:"w-5 h-5"}),"Batal"]}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n?"Edit Data Pemain":"Tambah Pemain Baru"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[x&&r.jsx("p",{className:"text-red-500 text-sm font-semibold",children:x}),r.jsxs("button",{type:"submit",className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[r.jsx(Aa,{className:"w-5 h-5"})," Simpan Pemain"]})]})]}),r.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700 space-y-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Informasi Pribadi"}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"player-name",className:Hi,children:"Nama Lengkap Pemain"}),r.jsx("input",{id:"player-name",type:"text",value:i,onChange:S(l),required:!0,className:zi})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"player-nisn",className:Hi,children:"NISN"}),r.jsx("input",{id:"player-nisn",type:"text",value:o,onChange:S(c),required:!0,className:zi})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"player-gender",className:Hi,children:"Gender"}),r.jsxs("select",{id:"player-gender",value:b,onChange:T=>w(T.target.value),className:zi,children:[r.jsx("option",{value:Wn.MALE,children:"Pria"}),r.jsx("option",{value:Wn.FEMALE,children:"Wanita"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700 space-y-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Informasi Akun"}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"player-email",className:Hi,children:"Email"}),r.jsx("input",{id:"player-email",type:"email",value:u,onChange:S(f),required:!0,className:zi})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"player-username",className:Hi,children:"Username"}),r.jsx("input",{id:"player-username",type:"text",value:d,onChange:S(h),required:!0,className:zi})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"player-password",className:Hi,children:k?"Password Baru (opsional)":"Password"}),r.jsx("input",{id:"player-password",type:"password",value:m,onChange:S(v),required:!k,className:zi,placeholder:k?"Kosongkan jika tidak ingin diubah":"Minimal 6 karakter"})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Avatar"}),r.jsx("div",{className:"flex items-center gap-3 flex-wrap bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg max-h-48 overflow-y-auto",children:E.map(T=>{const I=y===T.id;return r.jsx("button",{type:"button",onClick:()=>g(T.id),className:`p-1.5 rounded-full transition-all duration-200 ${I?"bg-primary/20 ring-2 ring-primary":"bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500"}`,title:T.name,children:r.jsx(T.component,{className:"w-10 h-10"})},T.id)})})]})]})})]})})},uD=({rooms:t,players:e,onAdd:n,onEdit:a,onDelete:s})=>{const i=l=>e.filter(o=>o.roomId===l).length;return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Room"}),r.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[r.jsx(ta,{className:"w-5 h-5"}),r.jsx("span",{children:"Tambah Room"})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-[600px] text-sm text-left",children:[r.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Nama Room"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"Jumlah Pemain"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center rounded-r-md",children:"Aksi"})]})}),r.jsx("tbody",{children:t.length>0?t.map((l,o)=>r.jsxs("tr",{className:`${o%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/30"} border-t dark:border-gray-700`,children:[r.jsx("td",{className:"p-3 font-semibold text-primary dark:text-indigo-400",children:l.name}),r.jsx("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400",children:i(l.id)}),r.jsx("td",{className:"p-3 text-center",children:r.jsxs("div",{className:"flex justify-center items-center gap-2",children:[r.jsx("button",{onClick:()=>a(l),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:r.jsx(el,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>s(l),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",title:"Hapus",children:r.jsx(In,{className:"w-4 h-4"})})]})})]},l.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:"Belum ada data room. Silakan tambahkan room baru."})})})]})})})]})},dD="text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200",hD="block text-base font-semibold text-gray-800 dark:text-gray-200",kb=({player:t,onAction:e,actionIcon:n,actionTitle:a})=>{const s=Qs(t.avatarId);return r.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-700 p-2 rounded shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center flex-shrink-0",children:r.jsx(s,{className:"w-7 h-7"})}),r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-sm",children:at(t.name)})]}),r.jsx("button",{type:"button",onClick:e,title:a,className:"p-1 text-primary dark:text-indigo-400 hover:bg-primary/10 dark:hover:bg-primary/20 rounded-full",children:n})]})},fD=({onClose:t,onSave:e,roomToEdit:n,allPlayers:a})=>{const[s,i]=p.useState(""),[l,o]=p.useState([]),[c,u]=p.useState(""),[f,d]=p.useState("");p.useEffect(()=>{n?(i(n.name),o(a.filter(y=>y.roomId===n.id).map(y=>y.id))):(i(""),o([]))},[n,a]);const h=y=>{l.includes(y)||o([...l,y])},m=y=>{o(l.filter(g=>g!==y))},v=p.useMemo(()=>a.filter(y=>l.includes(y.id)).filter(y=>y.name.toLowerCase().includes(c.toLowerCase())),[l,a,c]),b=p.useMemo(()=>a.filter(y=>(!y.roomId||y.roomId===(n==null?void 0:n.id))&&!l.includes(y.id)).filter(y=>y.name.toLowerCase().includes(f.toLowerCase())),[a,n,l,f]),w=y=>{y.preventDefault(),s.trim()&&e({id:n==null?void 0:n.id,name:s},l)};return r.jsx("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900","aria-modal":"true",role:"dialog",children:r.jsxs("form",{onSubmit:w,className:"flex flex-col h-full",children:[r.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("button",{type:"button",onClick:t,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[r.jsx(ki,{className:"w-5 h-5"}),"Batal"]}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n?"Edit Room":"Tambah Room Baru"})]}),r.jsxs("button",{type:"submit",className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[r.jsx(Aa,{className:"w-5 h-5"})," Simpan Perubahan"]})]}),r.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("label",{htmlFor:"room-name",className:hD,children:"Nama Room"}),r.jsx("input",{id:"room-name",type:"text",value:s,onChange:y=>i(y.target.value),required:!0,autoFocus:!0,className:dD,placeholder:"Contoh: Grup Ksatria"})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Kelola Anggota Room"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-md border dark:border-gray-700",children:[r.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:['Anggota di "',s||"Room Baru",'" (',v.length,")"]}),r.jsx("input",{type:"text",placeholder:"Cari anggota...",value:c,onChange:y=>u(y.target.value),className:"w-full text-sm px-3 py-2 mb-3 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50"}),r.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:v.length>0?v.map(y=>r.jsx(kb,{player:y,onAction:()=>m(y.id),actionTitle:"Keluarkan",actionIcon:r.jsx(wO,{className:"w-5 h-5"})},y.id)):r.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 italic py-4 text-sm",children:"Pindahkan pemain dari kanan ke sini."})})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-md border dark:border-gray-700",children:[r.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:["Pemain Tersedia (",b.length,")"]}),r.jsx("input",{type:"text",placeholder:"Cari pemain...",value:f,onChange:y=>d(y.target.value),className:"w-full text-sm px-3 py-2 mb-3 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50"}),r.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:b.length>0?b.map(y=>r.jsx(kb,{player:y,onAction:()=>h(y.id),actionTitle:"Tambahkan",actionIcon:r.jsx(ki,{className:"w-5 h-5"})},y.id)):r.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 italic py-4 text-sm",children:"Tidak ada pemain yang tersedia."})})]})]})]})]})})]})})},mD=({isOpen:t,onClose:e,onSave:n,rankToEdit:a})=>{const[s,i]=p.useState(""),[l,o]=p.useState(0);if(p.useEffect(()=>{t&&a?(i(a.name),o(a.xpThreshold)):t&&(i(""),o(0))},[a,t]),!t)return null;const c=u=>{u.preventDefault(),s.trim()&&l>=0&&n({name:s.trim(),xpThreshold:Number(l)})};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all",onClick:u=>u.stopPropagation(),children:r.jsxs("form",{onSubmit:c,children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a?"Edit Peringkat":"Tambah Peringkat Baru"}),r.jsx("button",{type:"button",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:r.jsx(ut,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rank-name",className:"block text-base font-semibold text-gray-800 dark:text-gray-200",children:"Nama Peringkat"}),r.jsx("input",{id:"rank-name",type:"text",value:s,onChange:u=>i(u.target.value),required:!0,autoFocus:!0,className:"text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200 disabled:bg-gray-100 dark:disabled:bg-gray-600",placeholder:"Contoh: Master Kode"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rank-xp",className:"block text-base font-semibold text-gray-800 dark:text-gray-200",children:"Ambang Batas XP"}),r.jsx("input",{id:"rank-xp",type:"number",value:l,onChange:u=>o(Number(u.target.value)),required:!0,min:"0",disabled:(a==null?void 0:a.xpThreshold)===0,className:"text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200 disabled:bg-gray-100 dark:disabled:bg-gray-600"}),(a==null?void 0:a.xpThreshold)===0&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Ambang batas 0 XP untuk peringkat awal tidak dapat diubah."})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-4 flex justify-end gap-3 rounded-b-2xl border-t dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:e,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Batal"}),r.jsxs("button",{type:"submit",className:"flex items-center gap-2 font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[r.jsx(Aa,{className:"w-5 h-5"}),"Simpan"]})]})]})})})},gD=({ranks:t,quests:e,onUpdateRanks:n,onShowAlert:a,showToast:s})=>{const[i,l]=p.useState(!1),[o,c]=p.useState(!1),[u,f]=p.useState(null),[d,h]=p.useState(null),m=[...t].sort((_,k)=>_.xpThreshold-k.xpThreshold),v=p.useMemo(()=>e.reduce((_,k)=>_+k.xp,0),[e]),b=()=>{f(null),l(!0)},w=_=>{f(_),l(!0)},y=_=>{if(_.xpThreshold===0){a("Aksi Ditolak","Peringkat awal dengan 0 XP tidak dapat dihapus.");return}h(_),c(!0)},g=()=>{d&&(n(t.filter(_=>_.name!==d.name)),s("Berhasil Dihapus",`Peringkat "${d.name}" telah dihapus.`,r.jsx(ke,{className:"w-5 h-5 text-green-500"})),c(!1),h(null))},x=_=>{let k;if(u)k=t.map(S=>S.name===u.name?_:S);else{if(t.some(S=>S.name.toLowerCase()===_.name.toLowerCase().trim())){a("Nama Duplikat",`Peringkat dengan nama "${_.name}" sudah ada.`);return}k=[...t,_]}n(k);const E=u?"Berhasil Diperbarui":"Berhasil Ditambahkan",C=u?`Peringkat "${_.name}" berhasil diperbarui.`:`Peringkat "${_.name}" berhasil ditambahkan.`;s(E,C,r.jsx(ke,{className:"w-5 h-5 text-green-500"})),l(!1)};return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg border border-blue-200 dark:border-blue-700 flex items-start gap-4",children:[r.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full text-blue-600 dark:text-blue-300 flex-shrink-0",children:r.jsx(Dt,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-lg text-blue-900 dark:text-blue-100",children:"Informasi XP Misi"}),r.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:["Total XP maksimal yang bisa didapat pemain adalah: ",r.jsxs("strong",{className:"text-2xl",children:[v," XP"]})]}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Gunakan angka ini sebagai acuan untuk menentukan rentang XP pada setiap gelar peringkat."})]})]}),r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Peringkat"}),r.jsxs("button",{onClick:b,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[r.jsx(ta,{className:"w-5 h-5"}),r.jsx("span",{children:"Tambah Peringkat"})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-[600px] text-sm text-left",children:[r.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Nama Peringkat"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"Rentang XP"}),r.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center rounded-r-md",children:"Aksi"})]})}),r.jsx("tbody",{children:m.length>0?m.map((_,k)=>{const E=m[k+1];return r.jsxs("tr",{className:`${k%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/30"} border-t dark:border-gray-700`,children:[r.jsx("td",{className:"p-3 font-semibold text-primary dark:text-indigo-400",children:_.name}),r.jsx("td",{className:"p-3 text-center",children:E?r.jsxs("div",{children:[r.jsx("div",{className:"w-3/4 max-w-xs mx-auto bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-primary h-2 rounded-full"})}),r.jsxs("span",{className:"text-xs font-mono mt-1.5 block text-gray-600 dark:text-gray-400",children:[_.xpThreshold," → ",E.xpThreshold-1," XP"]})]}):r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Dt,{className:"w-4 h-4 text-accent dark:text-amber-400"}),r.jsxs("span",{className:"font-bold text-accent dark:text-amber-400",children:[_.xpThreshold,"+ XP"]})]})}),r.jsx("td",{className:"p-3 text-center",children:r.jsxs("div",{className:"flex justify-center items-center gap-2",children:[r.jsx("button",{onClick:()=>w(_),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:r.jsx(el,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>y(_),disabled:_.xpThreshold===0,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full disabled:opacity-50 disabled:cursor-not-allowed",title:_.xpThreshold===0?"Tidak dapat dihapus":"Hapus",children:r.jsx(In,{className:"w-4 h-4"})})]})})]},_.name)}):r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:"Belum ada data peringkat."})})})]})})}),r.jsx(mD,{isOpen:i,onClose:()=>l(!1),onSave:x,rankToEdit:u}),r.jsx(Mt,{isOpen:o,onClose:()=>c(!1),onConfirm:g,title:"Konfirmasi Hapus Peringkat",message:`Apakah Anda yakin ingin menghapus peringkat "${d==null?void 0:d.name}"? Aksi ini akan mempengaruhi semua pemain.`})]})},pD=({isOpen:t,onClose:e,onImport:n,existingUsers:a})=>{const[s,i]=p.useState([]),[l,o]=p.useState(null),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(!1),[v,b]=p.useState(null),w=()=>{i([]),o(null),u(null),d(!1),m(!1),b(null)},y=()=>{h||(w(),e())},g=async()=>{const C=window.XLSX||await zn(()=>import("./xlsx-D_0l8YDs.js"),[]),S=["name","nisn","email","username","password"],T=[{name:"Budi Santoso",nisn:"1234567890",email:"budi.s@email.com",username:"budisan",password:"password123"}],I=C.utils.json_to_sheet(T,{header:S}),N=C.utils.book_new();C.utils.book_append_sheet(N,I,"Pemain"),C.writeFile(N,"Template_Import_Pemain.xlsx")},x=async C=>{var T;w();const S=(T=C.target.files)==null?void 0:T[0];if(S){o(S.name),d(!0);try{const I=window.XLSX||await zn(()=>import("./xlsx-D_0l8YDs.js"),[]),N=new FileReader;N.onload=W=>{var H;try{const fe=new Uint8Array((H=W.target)==null?void 0:H.result),K=I.read(fe,{type:"array"}),A=K.Sheets[K.SheetNames[0]],z=I.utils.sheet_to_json(A);if(z.length===0){u("File Excel kosong atau format tidak sesuai."),d(!1);return}const O=z.map((B,U)=>{const{name:q,nisn:ae,email:P,username:V,password:le}=B;return!q||!ae||!P||!V||!le?{...B,_status:"error",_error:"Semua kolom (name, nisn, email, username, password) wajib diisi."}:String(le).length<6?{...B,_status:"error",_error:"Password harus minimal 6 karakter."}:a.some(Ae=>Ae.email===P)||z.slice(0,U).some(Ae=>Ae.email===P)?{...B,_status:"error",_error:`Email "${P}" sudah digunakan.`}:a.some(Ae=>Ae.username===V)||z.slice(0,U).some(Ae=>Ae.username===V)?{...B,_status:"error",_error:`Username "${V}" sudah digunakan.`}:{name:q,nisn:String(ae),email:P,username:V,password:String(le),_status:"valid"}});i(O)}catch(fe){console.error(fe),u("Gagal memproses file. Pastikan format file benar.")}finally{d(!1)}},N.onerror=()=>{u("Gagal membaca file."),d(!1)},N.readAsArrayBuffer(S)}catch(I){console.error("Failed to load XLSX library:",I),u("Gagal memuat pustaka pemrosesan Excel."),d(!1)}}},_=p.useMemo(()=>s.filter(C=>C._status==="valid"),[s]),k=async()=>{if(_.length>0){m(!0);try{const C=await n(_);b(C)}catch(C){b(`Terjadi kesalahan saat impor: ${C.message}`)}finally{m(!1)}}};if(!t)return null;const E=()=>r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("header",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center flex-shrink-0",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Hasil Impor"})}),r.jsxs("main",{className:"flex-grow flex flex-col items-center justify-center text-center p-6",children:[r.jsx(ke,{className:"w-16 h-16 text-green-500 mb-4"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Proses Selesai"}),r.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300 max-w-md whitespace-pre-wrap",children:v})]}),r.jsx("footer",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t dark:border-gray-700 flex-shrink-0 flex justify-end",children:r.jsx("button",{onClick:y,className:"font-bold py-2 px-6 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:"Selesai"})})]});return r.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 animate-fade-in",onClick:y,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 w-screen h-screen flex flex-col relative",onClick:C=>C.stopPropagation(),children:[h&&r.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm flex flex-col items-center justify-center z-10 transition-opacity duration-300",children:[r.jsxs("svg",{className:"animate-spin h-10 w-10 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"mt-4 text-lg font-semibold text-primary dark:text-indigo-400 animate-pulse",children:"Mengimpor pemain, mohon tunggu..."})]}),v?r.jsx(E,{}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Impor Pemain dari Excel"}),r.jsx("button",{onClick:y,disabled:h,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:r.jsx(ut,{className:"w-6 h-6"})})]}),r.jsxs("main",{className:"p-6 flex-grow overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg dark:text-gray-100",children:"Langkah 1: Unduh dan Isi Templat"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-3",children:"Gunakan templat ini untuk memastikan format data Anda benar. Semua kolom wajib diisi."}),r.jsxs("button",{onClick:g,className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[r.jsx(a0,{className:"w-5 h-5"}),r.jsx("span",{children:"Unduh Templat Excel"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg dark:text-gray-100",children:"Langkah 2: Unggah File"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-3",children:"Pilih file Excel (.xlsx) yang sudah Anda isi untuk memulai proses validasi."}),r.jsxs("label",{className:"flex items-center justify-center w-full px-4 py-3 bg-gray-50 dark:bg-gray-700/50 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx(H2,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"}),r.jsx("span",{className:"ml-2 font-semibold text-gray-600 dark:text-gray-300",children:l||"Pilih File untuk Diunggah"}),r.jsx("input",{type:"file",className:"hidden",accept:".xlsx, .xls",onChange:x})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-bold text-lg dark:text-gray-100",children:"Langkah 3: Pratinjau dan Validasi"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-3",children:'Periksa data di bawah ini. Hanya baris dengan status "Valid" yang akan diimpor.'}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg border dark:border-gray-700 max-h-80 overflow-y-auto",children:f?r.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Memproses file..."}):c?r.jsx("p",{className:"p-4 text-center text-red-600",children:c}):s.length>0?r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-200 dark:bg-gray-700 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Nama"}),r.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Email"}),r.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Username"}),r.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Status"})]})}),r.jsx("tbody",{children:s.map((C,S)=>r.jsxs("tr",{className:S%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-800/50",children:[r.jsx("td",{className:"p-2 text-gray-800 dark:text-gray-200",children:C.name}),r.jsx("td",{className:"p-2 text-gray-800 dark:text-gray-200",children:C.email}),r.jsx("td",{className:"p-2 text-gray-800 dark:text-gray-200",children:C.username}),r.jsx("td",{className:"p-2",children:C._status==="valid"?r.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-full",children:"Valid"}):r.jsx("span",{className:"px-2 py-1 text-xs font-medium text-red-800 bg-red-100 rounded-full",title:C._error,children:"Error"})})]},S))})]}):r.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Pratinjau data akan muncul di sini setelah file diunggah."})})]})]}),r.jsxs("footer",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t dark:border-gray-700 flex-shrink-0 flex justify-end items-center gap-3",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mr-auto",children:[_.length," dari ",s.length," pemain siap untuk diimpor."]}),r.jsx("button",{onClick:y,disabled:h,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Batal"}),r.jsx("button",{onClick:k,disabled:_.length===0||f||h,className:"flex items-center gap-2 font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",children:h?"Mengimpor...":`Impor ${_.length} Pemain`})]})]})]})})},yD={submitted:{text:"Menunggu Penilaian",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",icon:th},approved:{text:"Disetujui",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",icon:ke},rejected:{text:"Ditolak",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200",icon:ut},none:{text:"Belum Diajukan",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",icon:()=>null}},xD=({file:t,user:e,showToast:n,handleUpdatePlayerCodeFile:a})=>{const{isPyodideLoading:s,isExecuting:i,outputLines:l,runCode:o,...c}=f0(),[u,f]=p.useState(t.masterComment||""),[d,h]=p.useState(t.bonusXp||0),[m,v]=p.useState(!1),[b,w]=p.useState(null),y=p.useMemo(()=>t.reviewStatus==="approved"||t.reviewStatus==="rejected",[t]);p.useEffect(()=>{f(t.masterComment||""),h(t.bonusXp||0),c.clearOutput()},[t]);const g=async E=>{const C={masterComment:u,reviewStatus:E};let S=0;E==="approved"&&d>0&&(C.bonusXp=d,S=d),await a(e.id,t.id,C,S)},x=()=>{b&&(g(b.action),w(null))},_=async()=>{const E={reviewStatus:"submitted",masterComment:""};try{await a(e.id,t.id,E,0),h(0),v(!1)}catch{n("Gagal","Gagal mereset penilaian.",r.jsx(ut,{className:"w-5 h-5 text-red-500"})),v(!1)}},k=yD[t.reviewStatus||"none"];return r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-3",children:[r.jsx("input",{type:"text",value:t.name,readOnly:!0,className:"flex-grow w-full px-3 py-2 bg-gray-200 dark:bg-gray-600 border rounded-md font-mono text-sm dark:text-gray-400 text-gray-500"}),r.jsx("button",{onClick:()=>o(t.code),disabled:i||s,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-secondary text-white font-bold py-2 px-4 rounded-lg hover:bg-secondary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:s?"Memuat...":i?"Menjalankan...":"Jalankan Kode"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsx("div",{className:"lg:w-3/5 min-h-[420px]",children:r.jsx(Ps,{code:t.code,readOnly:!0,height:"min-h-[420px]"})}),r.jsx("div",{className:"lg:w-2/5 flex flex-col gap-4 min-h-[420px]",children:r.jsx("div",{className:"flex-grow min-h-0 h-full",children:r.jsx(m0,{outputLines:l,...c,height:"min-h-[420px]"})})})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-gray-700 flex-shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Komentar & Penilaian"}),(t==null?void 0:t.reviewStatus)!=="none"&&r.jsxs("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 ${k.color}`,children:[r.jsx(k.icon,{className:"w-4 h-4"}),k.text]})]}),r.jsx("textarea",{value:u,onChange:E=>f(E.target.value),disabled:y,placeholder:"Tulis feedback...",className:"w-full h-24 p-2 text-sm rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 disabled:bg-gray-200 dark:disabled:bg-gray-600"}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300",children:"XP Tambahan"}),r.jsx("input",{type:"number",value:d,onChange:E=>h(Math.max(0,Number(E.target.value))),disabled:y,min:"0",className:"mt-1 w-full p-2 text-sm rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 disabled:bg-gray-200 dark:disabled:bg-gray-600"})]}),y&&(t==null?void 0:t.bonusXp)>0&&r.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1 font-semibold",children:["+",t.bonusXp," XP telah diberikan."]}),r.jsx("div",{className:"mt-2",children:y?r.jsx("div",{className:"pt-2 border-t dark:border-gray-600",children:r.jsxs("button",{onClick:()=>v(!0),className:"w-full flex items-center justify-center gap-2 bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-600 transition",children:[r.jsx(wi,{className:"w-5 h-5"}),"Reset Penilaian"]})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>w({isOpen:!0,action:"approved"}),className:"flex-1 flex items-center justify-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition",children:[r.jsx(ke,{className:"w-5 h-5"}),"Setujui"]}),r.jsxs("button",{onClick:()=>w({isOpen:!0,action:"rejected"}),className:"flex-1 flex items-center justify-center gap-2 bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition",children:[r.jsx(ut,{className:"w-5 h-5"}),"Tolak"]})]})})]}),(b==null?void 0:b.isOpen)&&r.jsx(Mt,{isOpen:b.isOpen,onClose:()=>w(null),onConfirm:x,title:b.action==="approved"?"Konfirmasi Persetujuan":"Konfirmasi Penolakan",message:b.action==="approved"?`Setujui file ini ${d>0?`dan berikan ${d} XP tambahan. `:""}Pastikan komentar final.`:"Yakin ingin menolak file ini? Pastikan komentar final.",confirmText:b.action==="approved"?"Ya, Setujui":"Ya, Tolak",confirmIcon:b.action==="approved"?r.jsx(ke,{className:"w-5 h-5"}):r.jsx(ut,{className:"w-5 h-5"}),confirmButtonClass:b.action==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}),r.jsx(Mt,{isOpen:m,onClose:()=>v(!1),onConfirm:_,title:"Konfirmasi Reset Penilaian",message:"Ini akan mengembalikan status file ke 'Menunggu Penilaian' dan menarik kembali bonus XP yang telah diberikan.",confirmText:"Ya, Reset",confirmIcon:r.jsx(wi,{className:"w-5 h-5"}),confirmButtonClass:"bg-yellow-500 hover:bg-yellow-600"})]})},bD={submitted:{icon:th,text:"Menunggu Penilaian",color:"text-yellow-500"},approved:{icon:ke,text:"Disetujui",color:"text-green-500"},rejected:{icon:ut,text:"Ditolak",color:"text-red-500"},none:{icon:()=>null,text:"",color:""}},vD=({players:t,showToast:e,handleUpdatePlayerCodeFile:n})=>{const[a,s]=p.useState(null),[i,l]=p.useState(null),[o,c]=p.useState({}),[u,f]=p.useState(!0);p.useEffect(()=>{f(!0);const b=oO(w=>{c(w||{}),f(!1)});return()=>b()},[]);const d=p.useMemo(()=>t.filter(b=>o[b.id]&&o[b.id].some(w=>w.reviewStatus&&w.reviewStatus!=="none")).sort((b,w)=>{var x,_;const y=(x=o[b.id])==null?void 0:x.some(k=>k.reviewStatus==="submitted"),g=(_=o[w.id])==null?void 0:_.some(k=>k.reviewStatus==="submitted");return y&&!g?-1:!y&&g?1:at(b.name).localeCompare(at(w.name))}),[t,o]),h=b=>{s(b),l(null)},m=p.useMemo(()=>{var b;return!a||!i?null:((b=o[a.id])==null?void 0:b.find(w=>w.id===i))??null},[a,i,o]),v=p.useMemo(()=>a?(o[a.id]||[]).filter(b=>b.reviewStatus&&b.reviewStatus!=="none").sort((b,w)=>b.reviewStatus==="submitted"&&w.reviewStatus!=="submitted"?-1:b.reviewStatus!=="submitted"&&w.reviewStatus==="submitted"?1:b.name.localeCompare(w.name)):[],[a,o]);return m&&a?r.jsxs("div",{className:"animate-fade-in flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[r.jsxs("button",{onClick:()=>l(null),className:"flex items-center gap-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:[r.jsx(ki,{className:"w-5 h-5"}),"Kembali"]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Melihat file dari:"}),r.jsx("p",{className:"text-primary dark:text-indigo-400 font-bold",children:at(a.name)})]})]}),r.jsx("div",{className:"flex-grow min-h-0",children:r.jsx(xD,{file:m,user:a,handleUpdatePlayerCodeFile:n,showToast:e})})]}):u?r.jsx("div",{className:"text-center p-8",children:"Memuat data file kode..."}):r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Arsip Kode Pemain"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800/50 p-4 rounded-lg border dark:border-gray-700 h-full max-h-[75vh] overflow-y-auto",children:[r.jsx("h4",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200 mb-3",children:"Pilih Pemain"}),d.length>0?r.jsx("ul",{className:"space-y-2",children:d.map(b=>{const w=Qs(b.avatarId),y=o[b.id].some(g=>g.reviewStatus==="submitted");return r.jsx("li",{children:r.jsxs("button",{onClick:()=>h(b),className:`w-full text-left p-2 rounded-md flex items-center gap-3 transition-colors relative ${(a==null?void 0:a.id)===b.id?"bg-primary text-white shadow":"bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border dark:border-gray-600"}`,children:[y&&r.jsx("span",{className:"absolute top-1 right-1 w-3 h-3 bg-yellow-400 rounded-full border-2 border-white dark:border-gray-700",title:"Ada file yang menunggu penilaian"}),r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center flex-shrink-0",children:r.jsx(w,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:at(b.name)}),r.jsxs("p",{className:`text-sm ${(a==null?void 0:a.id)===b.id?"text-white/80":"text-gray-600 dark:text-gray-400"}`,children:[(o[b.id]||[]).filter(g=>g.reviewStatus!=="none").length," file diajukan"]})]})]})},b.id)})}):r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Belum ada pemain yang mengajukan file kode."})]}),r.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800/50 p-4 rounded-lg border dark:border-gray-700 h-full max-h-[75vh] overflow-y-auto",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("h4",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200 mb-3",children:["File milik ",r.jsx("span",{className:"text-primary dark:text-indigo-400",children:at(a.name)})]}),v.length>0?r.jsx("ul",{className:"space-y-2",children:v.map(b=>{const w=b.reviewStatus&&b.reviewStatus!=="none"?bD[b.reviewStatus]:null;return r.jsx("li",{children:r.jsxs("button",{onClick:()=>l(b.id),className:"w-full text-left p-3 rounded-md bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border dark:border-gray-600 flex items-center justify-between gap-3 transition-shadow hover:shadow-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(a0,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"font-mono font-medium text-gray-800 dark:text-gray-200",children:b.name})]}),w&&(()=>{const y=w.icon;return r.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-semibold ${w.color}`,children:[r.jsx(y,{className:"w-4 h-4"}),r.jsx("span",{children:w.text})]})})()]})},b.id)})}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Pemain ini tidak memiliki file yang diajukan."})})]}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Pilih seorang pemain untuk melihat arsip kode mereka."})})})]})]})},_D=({isOpen:t,onClose:e,onSave:n,chapterToEdit:a,allChapters:s})=>{const[i,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(null);p.useEffect(()=>{a?(l(a.title),c(a.description||""),f(a.parentId||null)):(l(""),c(""),f(null))},[a,t]);const d=m=>{m.preventDefault(),i.trim()&&(n({id:(a==null?void 0:a.id)||`new_${Date.now()}`,title:i.trim(),description:o.trim(),parentId:u||null}),e())},h=s.filter(m=>!m.parentId&&m.id!==(a==null?void 0:a.id));return t?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:e,children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg",onClick:m=>m.stopPropagation(),children:r.jsxs("form",{onSubmit:d,children:[r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a?"Edit Bab":"Tambah Bab Baru"}),r.jsxs("div",{className:"mt-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Judul Bab/Sub-bab"}),r.jsx("input",{type:"text",value:i,onChange:m=>l(m.target.value),required:!0,autoFocus:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Deskripsi (Opsional)"}),r.jsx("textarea",{value:o,onChange:m=>c(m.target.value),rows:3,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Jadikan sebagai Sub-bab dari (Opsional)"}),r.jsxs("select",{value:u||"",onChange:m=>f(m.target.value||null),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",children:[r.jsx("option",{value:"",children:"-- Bab Utama --"}),h.map(m=>r.jsx("option",{value:m.id,children:m.title},m.id))]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-3 flex justify-end gap-3 rounded-b-2xl",children:[r.jsx("button",{type:"button",onClick:e,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200",children:"Batal"}),r.jsx("button",{type:"submit",className:"font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white",children:"Simpan"})]})]})})}):null},wD=()=>{const{questChapters:t,handleSaveQuestChapter:e,handleDeleteQuestChapter:n,showToast:a}=Vt(),[s,i]=p.useState(!1),[l,o]=p.useState(null),[c,u]=p.useState(null),f=p.useMemo(()=>t.filter(x=>!x.parentId).sort((x,_)=>x.order-_.order).map(x=>({...x,subChapters:t.filter(_=>_.parentId===x.id).sort((_,k)=>_.order-k.order)})),[t]),d=()=>{o(null),i(!0)},h=g=>{o(g),i(!0)},m=g=>{u(g)},v=async()=>{c&&await n(c.id)&&u(null)},b=g=>{if(g.id.startsWith("new_")){const _=t.filter(k=>k.parentId===g.parentId).reduce((k,E)=>Math.max(k,E.order),-1);e({...g,order:_+1})}else{const x=t.find(_=>_.id===g.id);e({...x,...g})}a("Berhasil","Data bab telah disimpan.",r.jsx(ke,{className:"w-5 h-5 text-green-500"}))},w=(g,x)=>{const _=t.filter(E=>E.parentId===g.parentId).sort((E,C)=>E.order-C.order),k=_.findIndex(E=>E.id===g.id);if(x==="up"&&k>0){const E=_[k-1];e({...g,order:E.order}),e({...E,order:g.order})}else if(x==="down"&&k<_.length-1){const E=_[k+1];e({...g,order:E.order}),e({...E,order:g.order})}},y=(g,x,_,k)=>r.jsxs("tr",{className:x?"bg-gray-50/50 dark:bg-gray-700/30":"bg-white dark:bg-gray-800",children:[r.jsxs("td",{className:`p-3 ${x?"pl-8":""}`,children:[r.jsx("p",{className:`font-semibold ${x?"text-gray-700 dark:text-gray-300":"text-primary dark:text-indigo-400"}`,children:g.title}),g.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.description})]}),r.jsx("td",{className:"p-3 text-center",children:r.jsxs("div",{className:"flex justify-center items-center gap-1",children:[r.jsx("button",{onClick:()=>w(g,"up"),disabled:!_,className:"p-2 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(kO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>w(g,"down"),disabled:!k,className:"p-2 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(CO,{className:"w-4 h-4"})})]})}),r.jsx("td",{className:"p-3 text-center",children:r.jsxs("div",{className:"flex justify-center items-center gap-2",children:[r.jsx("button",{onClick:()=>h(g),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",children:r.jsx(el,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>m(g),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",children:r.jsx(In,{className:"w-4 h-4"})})]})})]},g.id);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Bab Misi"}),r.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg",children:[r.jsx(ta,{className:"w-5 h-5"}),r.jsx("span",{children:"Tambah Bab"})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 font-semibold text-left text-gray-700 dark:text-gray-300 w-3/5",children:"Judul Bab"}),r.jsx("th",{className:"p-3 font-semibold text-center text-gray-700 dark:text-gray-300",children:"Urutan"}),r.jsx("th",{className:"p-3 font-semibold text-center text-gray-700 dark:text-gray-300",children:"Aksi"})]})}),r.jsx("tbody",{children:f.length>0?f.map((g,x)=>r.jsxs(Dn.Fragment,{children:[y(g,!1,x>0,x<f.length-1),g.subChapters.map((_,k)=>y(_,!0,k>0,k<g.subChapters.length-1))]},g.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:"Belum ada bab."})})})]})})}),r.jsx(_D,{isOpen:s,onClose:()=>i(!1),onSave:b,chapterToEdit:l,allChapters:t}),r.jsx(Mt,{isOpen:!!c,onClose:()=>u(null),onConfirm:v,title:"Konfirmasi Hapus Bab",message:`Yakin ingin menghapus bab "${c==null?void 0:c.title}"? ${c&&!c.parentId?"Semua sub-bab di dalamnya juga akan dihapus. ":""}Pastikan tidak ada misi yang terikat pada bab ini.`})]})},Cb=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e},MC=p.memo(({previewResult:t,title:e,description:n,xp:a,material:s,type:i,quizContent:l,codeContent:o,category:c,onPreviewComplete:u,shuffleQuestions:f=!1,shuffleOptions:d=!1,showToast:h})=>{const[m,v]=p.useState(c===we.TUTORIAL&&s?"material":"challenge");p.useEffect(()=>{v(c===we.TUTORIAL&&s?"material":"challenge")},[s,c]);const b=p.useMemo(()=>{let g=[...l];return f&&(g=Cb(g)),d&&(g=g.map(x=>{if(!x.options||x.options.length===0)return x;const _=x.options[x.answerIndex],k=Cb(x.options),E=k.indexOf(_);return{...x,options:k,answerIndex:E}})),g},[l,f,d]),w=()=>{u(),c===we.TUTORIAL&&s&&v("material")},y=g=>{g&&u()};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t&&r.jsxs("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-r-lg flex items-center gap-3",role:"alert",children:[r.jsx(ke,{className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:"Uji Coba Berhasil"}),r.jsx("p",{children:t})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsx("header",{className:"p-4 sm:p-6 flex flex-col sm:flex-row justify-between items-start gap-4 sm:items-center border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-indigo-400",children:e||"[Judul Misi Anda]"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:n||"[Deskripsi singkat misi Anda akan muncul di sini.]"}),r.jsxs("span",{className:"mt-2 inline-block bg-accent/20 text-accent font-bold text-sm px-3 py-1 rounded-full",children:[a||0," XP"]})]})}),r.jsx("main",{className:"px-6 pb-6 sm:px-8 sm:pb-8",children:m==="material"?s?r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 sm:p-6 rounded-lg",children:r.jsx(Ia,{content:s})}),r.jsx("button",{type:"button",onClick:()=>v("challenge"),className:"mt-6 w-full bg-primary text-white font-bold py-3 px-4 rounded-lg hover:bg-primary/90 transition transform hover:scale-105",children:"Mulai Tantangan"})]}):null:r.jsxs("div",{className:"pt-6",children:[i===Me.QUIZ&&r.jsx(u0,{quiz:b,onComplete:w,questCategory:c,userId:"preview-user",questId:"preview-quest"}),i===Me.CODE&&r.jsx(sh,{challenge:o,onCheckComplete:y,onSuccessSubmit:()=>{},isPreviewMode:!0,showToast:h})]})})]})]})}),ht="text-base px-3 py-2 mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border",pt="block text-sm font-semibold text-gray-800 dark:text-gray-200",kD=({questToEdit:t,defaultCategory:e,onSave:n,onClose:a,existingQuests:s,questChapters:i,showAlert:l,showToast:o})=>{const[c,u]=p.useState(""),[f,d]=p.useState(""),[h,m]=p.useState(50),[v,b]=p.useState(""),[w,y]=p.useState(e),[g,x]=p.useState(Me.QUIZ),[_,k]=p.useState([]),[E,C]=p.useState({description:"",starterCode:"",solution:"",testCases:[]}),[S,T]=p.useState(void 0),[I,N]=p.useState(void 0),[W,H]=p.useState(void 0),[fe,K]=p.useState(ei.ANY_COMPLETION),[A,z]=p.useState(3),[O,B]=p.useState(10),[U,q]=p.useState(!1),[ae,P]=p.useState(!1),[V,le]=p.useState(0),[Ae,Ie]=p.useState("edit"),[It,tn]=p.useState(null),dt=!!t;p.useEffect(()=>{t?(u(t.title),d(t.description),m(t.xp),b(t.material||""),y(t.category),x(t.type),T(t.requiredQuestId),N(t.chapterId),H(t.timeLimit),K(t.passingCriteria||ei.ANY_COMPLETION),z(t.maxAttempts),B(t.xpPenaltyPerAttempt),q(t.shuffleQuestions||!1),P(t.shuffleOptions||!1),le(t.order||0),t.type===Me.QUIZ?k(t.content):C(t.content)):(u(""),d(""),m(50),b(""),y(e),x(Me.QUIZ),k([{question:"",options:["",""],answerIndex:0,points:10}]),C({description:"",starterCode:`def solve():
  # Tulis kodemu di sini
  pass`,solution:"",testCases:[{input:"",expectedOutput:""}]}),T(void 0),N(void 0))},[t,e]);const Qn=()=>{if(!c.trim()){l("Validasi Gagal","Judul misi tidak boleh kosong.");return}let D;if(g===Me.QUIZ){if(_.length===0){l("Validasi Gagal","Kuis harus memiliki setidaknya satu pertanyaan.");return}for(const ee of _)if(!ee.question.trim()||ee.options.some(Ce=>!Ce.trim())||ee.options.length<2){l("Validasi Gagal","Setiap pertanyaan harus diisi, memiliki setidaknya 2 pilihan, dan semua pilihan harus diisi.");return}D=_}else{if(!E.description.trim()||!E.starterCode.trim()||!E.solution.trim()||E.testCases.length===0){l("Validasi Gagal","Deskripsi, kode awal, solusi, dan setidaknya satu test case harus diisi untuk tantangan koding.");return}D=E}const J={id:(t==null?void 0:t.id)||`new_${Date.now()}`,title:c,description:f,xp:h,material:v||null,category:w,type:g,content:D,requiredQuestId:S||null,chapterId:I||null,timeLimit:W??null,passingCriteria:fe,maxAttempts:A??null,xpPenaltyPerAttempt:O??null,shuffleQuestions:U,shuffleOptions:ae,order:V};n(J)},Z=(D,J,ee)=>{const Ce=[..._];Ce[D][J]=ee,k(Ce)},nn=()=>k([..._,{question:"",options:["",""],answerIndex:0,points:10}]),Lt=D=>k(_.filter((J,ee)=>ee!==D)),Qt=(D,J,ee)=>{const Ce=[..._];Ce[D].options[J]=ee,k(Ce)},Gn=D=>{const J=[..._];J[D].options.push(""),k(J)},Li=(D,J)=>{const ee=[..._];if(ee[D].options.length<=2){l("Aksi Ditolak","Pertanyaan harus memiliki minimal 2 pilihan jawaban.");return}ee[D].options.splice(J,1),ee[D].answerIndex===J?ee[D].answerIndex=0:ee[D].answerIndex>J&&(ee[D].answerIndex-=1),k(ee)},L=(D,J)=>C({...E,[D]:J}),G=(D,J,ee)=>{const Ce=[...E.testCases];Ce[D][J]=ee,L("testCases",Ce)},ge=()=>L("testCases",[...E.testCases,{input:"",expectedOutput:""}]),Fe=D=>L("testCases",E.testCases.filter((J,ee)=>ee!==D)),Ve=p.useMemo(()=>s.filter(D=>D.id!==(t==null?void 0:t.id)),[s,t]),Xe=p.useMemo(()=>{const D=i.filter(ee=>!ee.parentId).sort((ee,Ce)=>ee.order-Ce.order),J=[];return D.forEach(ee=>{J.push({label:ee.title,value:ee.id,isSub:!1}),i.filter(Ce=>Ce.parentId===ee.id).sort((Ce,nl)=>Ce.order-nl.order).forEach(Ce=>{J.push({label:Ce.title,value:Ce.id,isSub:!0})})}),J},[i]),Nt=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Informasi Umum"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:pt,children:"Judul Misi"}),r.jsx("input",{type:"text",value:c,onChange:D=>u(D.target.value),className:ht})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:pt,children:"Deskripsi Singkat"}),r.jsx("textarea",{value:f,onChange:D=>d(D.target.value),className:ht,rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Kategori"}),r.jsxs("select",{value:w,onChange:D=>y(D.target.value),className:ht,children:[r.jsx("option",{value:we.TUTORIAL,children:"Pembelajaran (Tutorial)"}),r.jsx("option",{value:we.MAIN,children:"Latihan (Utama)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Tipe Tantangan"}),r.jsxs("select",{value:g,onChange:D=>x(D.target.value),className:ht,children:[r.jsx("option",{value:Me.QUIZ,children:"Kuis Pilihan Ganda"}),r.jsx("option",{value:Me.CODE,children:"Tantangan Koding"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"XP Diberikan"}),r.jsx("input",{type:"number",value:h,onChange:D=>m(Number(D.target.value)),min:"0",className:ht})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Urutan Misi"}),r.jsx("input",{type:"number",value:V,onChange:D=>le(Number(D.target.value)),className:ht})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Konten Tantangan"}),g===Me.QUIZ?r.jsxs("div",{className:"space-y-4",children:[_.map((D,J)=>r.jsxs("div",{className:"p-4 border rounded-md dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h4",{className:"font-semibold",children:["Pertanyaan ",J+1]}),r.jsx("button",{type:"button",onClick:()=>Lt(J),className:"text-red-500 hover:text-red-700",children:r.jsx(In,{className:"w-5 h-5"})})]}),r.jsx("textarea",{value:D.question,onChange:ee=>Z(J,"question",ee.target.value),placeholder:"Tulis pertanyaan di sini...",className:ht,rows:2}),r.jsx("div",{className:"grid grid-cols-2 gap-4 my-2",children:r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Poin"}),r.jsx("input",{type:"number",value:D.points,onChange:ee=>Z(J,"points",Number(ee.target.value)),min:"0",className:ht})]})}),r.jsx("h5",{className:"text-sm font-semibold mt-3 mb-1",children:"Pilihan Jawaban"}),D.options.map((ee,Ce)=>r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("input",{type:"radio",name:`answer_${J}`,checked:D.answerIndex===Ce,onChange:()=>Z(J,"answerIndex",Ce),className:"h-5 w-5 text-primary focus:ring-primary"}),r.jsx("input",{type:"text",value:ee,onChange:nl=>Qt(J,Ce,nl.target.value),className:ht+" flex-grow",placeholder:`Pilihan ${Ce+1}`}),r.jsx("button",{type:"button",onClick:()=>Li(J,Ce),className:"text-red-500 hover:text-red-700",children:r.jsx(ut,{className:"w-5 h-5"})})]},Ce)),r.jsxs("button",{type:"button",onClick:()=>Gn(J),className:"text-sm flex items-center gap-1 text-primary hover:underline",children:[r.jsx(ta,{className:"w-4 h-4"})," Tambah Pilihan"]}),r.jsx("label",{className:`${pt} mt-3`,children:"Penjelasan Jawaban (Opsional)"}),r.jsx("textarea",{value:D.explanation,onChange:ee=>Z(J,"explanation",ee.target.value),className:ht,rows:2})]},J)),r.jsxs("button",{type:"button",onClick:nn,className:"w-full text-center py-2 px-4 bg-primary/10 text-primary font-semibold rounded-md hover:bg-primary/20 transition",children:[r.jsx(ta,{className:"w-5 h-5 inline-block mr-1"})," Tambah Pertanyaan"]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Deskripsi Tantangan (mendukung Markdown)"}),r.jsx("textarea",{value:E.description,onChange:D=>L("description",D.target.value),className:ht,rows:4})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Kode Awal"}),r.jsx(Ps,{code:E.starterCode,setCode:D=>L("starterCode",D),height:"h-48"})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Solusi Optimal"}),r.jsx(Ps,{code:E.solution,setCode:D=>L("solution",D),height:"h-48"})]}),r.jsx("h4",{className:"font-semibold pt-2",children:"Test Case"}),E.testCases.map((D,J)=>r.jsxs("div",{className:"p-4 border rounded-md dark:border-gray-700 grid grid-cols-1 md:grid-cols-2 gap-4 relative bg-gray-50 dark:bg-gray-800/50",children:[r.jsx("button",{type:"button",onClick:()=>Fe(J),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:r.jsx(In,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Input (jika ada)"}),r.jsx("textarea",{value:D.input,onChange:ee=>G(J,"input",ee.target.value),className:ht+" font-mono",rows:3})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Output yang Diharapkan"}),r.jsx("textarea",{value:D.expectedOutput,onChange:ee=>G(J,"expectedOutput",ee.target.value),className:ht+" font-mono",rows:3})]})]},J)),r.jsxs("button",{type:"button",onClick:ge,className:"w-full text-center py-2 px-4 bg-primary/10 text-primary font-semibold rounded-md hover:bg-primary/20 transition",children:[r.jsx(ta,{className:"w-5 h-5 inline-block mr-1"})," Tambah Test Case"]})]})]}),w===we.TUTORIAL&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Materi Pembelajaran (mendukung Markdown)"}),r.jsx("textarea",{value:v,onChange:D=>b(D.target.value),className:ht,rows:10})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Pengaturan Lanjutan"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Prasyarat Misi"}),r.jsxs("select",{value:S||"",onChange:D=>T(D.target.value||void 0),className:ht,children:[r.jsx("option",{value:"",children:"Tidak ada"}),Ve.map(D=>r.jsx("option",{value:D.id,children:D.title},D.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Bab Misi"}),r.jsxs("select",{value:I||"",onChange:D=>N(D.target.value||void 0),className:ht,children:[r.jsx("option",{value:"",children:"Tanpa Bab"}),Xe.map(D=>r.jsxs("option",{value:D.value,children:[D.isSub?"   └─ ":"",D.label]},D.value))]})]}),w===we.TUTORIAL&&r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Kriteria Kelulusan"}),r.jsxs("select",{value:fe,onChange:D=>K(D.target.value),className:ht,children:[r.jsx("option",{value:ei.ANY_COMPLETION,children:"Selesaikan Latihan"}),r.jsx("option",{value:ei.PERFECT_SCORE,children:"Selesaikan Tanpa Kesalahan"})]})]}),w===we.MAIN&&g===Me.CODE&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Maksimum Percobaan"}),r.jsx("input",{type:"number",value:A,onChange:D=>z(Number(D.target.value)),min:"1",className:ht})]}),r.jsxs("div",{children:[r.jsx("label",{className:pt,children:"Penalti XP per Percobaan Gagal"}),r.jsx("input",{type:"number",value:O,onChange:D=>B(Number(D.target.value)),min:"0",className:ht})]})]}),g===Me.QUIZ&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"shuffleQ",checked:U,onChange:D=>q(D.target.checked),className:"h-4 w-4 rounded text-primary focus:ring-primary"}),r.jsx("label",{htmlFor:"shuffleQ",children:"Acak Urutan Pertanyaan"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"shuffleO",checked:ae,onChange:D=>P(D.target.checked),className:"h-4 w-4 rounded text-primary focus:ring-primary"}),r.jsx("label",{htmlFor:"shuffleO",children:"Acak Urutan Pilihan"})]})]})]})]})]}),tl=()=>{tn("Uji coba selesai. Anda dapat kembali ke mode edit untuk melanjutkan atau menyimpan perubahan."),Ie("preview")};return r.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[r.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4 sticky top-0 z-10",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("button",{type:"button",onClick:a,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[r.jsx(ki,{className:"w-5 h-5"}),"Kembali"]}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:dt?"Edit Misi":"Buat Misi Baru"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-1 rounded-lg flex items-center gap-1",children:[r.jsx("button",{type:"button",onClick:()=>Ie("edit"),className:`px-3 py-1 text-sm font-semibold rounded-md ${Ae==="edit"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:"Edit"}),r.jsxs("button",{type:"button",onClick:()=>{Ie("preview"),tn(null)},className:`px-3 py-1 text-sm font-semibold rounded-md flex items-center gap-1 ${Ae==="preview"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:[r.jsx(nh,{className:"w-4 h-4"})," Uji Coba"]})]}),r.jsxs("button",{type:"button",onClick:Qn,className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[r.jsx(Aa,{className:"w-5 h-5"})," ",dt?"Simpan Perubahan":"Simpan Misi"]})]})]}),r.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:Ae==="edit"?Nt():r.jsx(MC,{previewResult:It,title:c,description:f,xp:h,material:v,type:g,quizContent:_,codeContent:E,category:w,onPreviewComplete:tl,shuffleQuestions:U,shuffleOptions:ae,showToast:o})})]})},$s="text-base px-3 py-2 mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border",ha="block text-sm font-semibold text-gray-800 dark:text-gray-200",CD=({questToEdit:t,onSave:e,onClose:n,showAlert:a,showToast:s})=>{const[i,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(100),[d,h]=p.useState({description:"",starterCode:"",solution:"",testCases:[]}),[m,v]=p.useState(0),[b,w]=p.useState("edit"),[y,g]=p.useState(null),x=!!t;p.useEffect(()=>{t?(l(t.title),c(t.description),f(t.xp),h(t.content),v(t.order||0)):(l(""),c(""),f(100),h({description:"",starterCode:`def solve():
  # Tulis kodemu di sini
  pass`,solution:"",testCases:[{input:"",expectedOutput:""}]}),v(0))},[t]);const _=()=>{if(!i.trim()){a("Validasi Gagal","Judul tantangan tidak boleh kosong.");return}if(!d.description.trim()||!d.starterCode.trim()||!d.solution.trim()||d.testCases.length===0){a("Validasi Gagal","Deskripsi, kode awal, solusi, dan setidaknya satu test case harus diisi.");return}const N={id:(t==null?void 0:t.id)||`new_${Date.now()}`,title:i,description:o,xp:u,category:we.CHALLENGE,type:Me.CODE,content:d,order:m,material:null,requiredQuestId:null,chapterId:null,timeLimit:null,passingCriteria:null,maxAttempts:null,xpPenaltyPerAttempt:null,shuffleQuestions:!1,shuffleOptions:!1};e(N)},k=(N,W)=>h({...d,[N]:W}),E=(N,W,H)=>{const fe=[...d.testCases];fe[N][W]=H,k("testCases",fe)},C=()=>k("testCases",[...d.testCases,{input:"",expectedOutput:""}]),S=N=>k("testCases",d.testCases.filter((W,H)=>H!==N)),T=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Informasi Tantangan"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:ha,children:"Judul Tantangan"}),r.jsx("input",{type:"text",value:i,onChange:N=>l(N.target.value),className:$s})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:ha,children:"Deskripsi Singkat"}),r.jsx("textarea",{value:o,onChange:N=>c(N.target.value),className:$s,rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:ha,children:"XP Diberikan"}),r.jsx("input",{type:"number",value:u,onChange:N=>f(Number(N.target.value)),min:"0",className:$s})]}),r.jsxs("div",{children:[r.jsx("label",{className:ha,children:"Urutan"}),r.jsx("input",{type:"number",value:m,onChange:N=>v(Number(N.target.value)),className:$s})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Konten Tantangan Koding"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:ha,children:"Deskripsi Lengkap (mendukung Markdown)"}),r.jsx("textarea",{value:d.description,onChange:N=>k("description",N.target.value),className:$s,rows:4})]}),r.jsxs("div",{children:[r.jsx("label",{className:ha,children:"Kode Awal"}),r.jsx(Ps,{code:d.starterCode,setCode:N=>k("starterCode",N),height:"h-48"})]}),r.jsxs("div",{children:[r.jsx("label",{className:ha,children:"Solusi Optimal"}),r.jsx(Ps,{code:d.solution,setCode:N=>k("solution",N),height:"h-48"})]}),r.jsx("h4",{className:"font-semibold pt-2",children:"Test Case"}),d.testCases.map((N,W)=>r.jsxs("div",{className:"p-4 border rounded-md dark:border-gray-700 grid grid-cols-1 md:grid-cols-2 gap-4 relative bg-gray-50 dark:bg-gray-800/50",children:[r.jsx("button",{type:"button",onClick:()=>S(W),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:r.jsx(In,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("label",{className:ha,children:"Input (jika ada)"}),r.jsx("textarea",{value:N.input,onChange:H=>E(W,"input",H.target.value),className:$s+" font-mono",rows:3})]}),r.jsxs("div",{children:[r.jsx("label",{className:ha,children:"Output yang Diharapkan"}),r.jsx("textarea",{value:N.expectedOutput,onChange:H=>E(W,"expectedOutput",H.target.value),className:$s+" font-mono",rows:3})]})]},W)),r.jsxs("button",{type:"button",onClick:C,className:"w-full text-center py-2 px-4 bg-primary/10 text-primary font-semibold rounded-md hover:bg-primary/20 transition",children:[r.jsx(ta,{className:"w-5 h-5 inline-block mr-1"})," Tambah Test Case"]})]})]})]}),I=()=>{g("Uji coba selesai. Anda dapat kembali ke mode edit untuk melanjutkan atau menyimpan perubahan."),w("preview")};return r.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[r.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4 sticky top-0 z-10",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[r.jsx(ki,{className:"w-5 h-5"}),"Kembali"]}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:x?"Edit Tantangan":"Buat Tantangan Baru"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-1 rounded-lg flex items-center gap-1",children:[r.jsx("button",{type:"button",onClick:()=>w("edit"),className:`px-3 py-1 text-sm font-semibold rounded-md ${b==="edit"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:"Edit"}),r.jsxs("button",{type:"button",onClick:()=>{w("preview"),g(null)},className:`px-3 py-1 text-sm font-semibold rounded-md flex items-center gap-1 ${b==="preview"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:[r.jsx(nh,{className:"w-4 h-4"})," Uji Coba"]})]}),r.jsxs("button",{type:"button",onClick:_,className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[r.jsx(Aa,{className:"w-5 h-5"})," ",x?"Simpan Perubahan":"Simpan Tantangan"]})]})]}),r.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:b==="edit"?T():r.jsx(MC,{previewResult:y,title:i,description:o,xp:u,material:"",type:Me.CODE,quizContent:[],codeContent:d,category:we.CHALLENGE,onPreviewComplete:I,showToast:s})})]})},df=({title:t,value:e,icon:n,description:a})=>r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg flex items-start gap-4",children:[r.jsx("div",{className:"bg-primary/10 text-primary dark:text-indigo-400 p-3 rounded-full",children:n}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t}),r.jsx("p",{className:"text-2xl font-bold text-primary dark:text-indigo-400",children:e}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:a})]})]}),Nb=({title:t,players:e,quests:n,questPrefix:a})=>{const s=n;return n.length===0?r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:t}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-6 text-center text-gray-500 italic border dark:border-gray-700",children:"Tidak ada misi dalam kategori ini."})]}):r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:t}),r.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700",children:r.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[r.jsx("th",{className:"p-2 font-semibold text-gray-800 dark:text-gray-200 sticky left-0 bg-gray-100 dark:bg-gray-700 z-10 w-48 border-r dark:border-gray-600",children:"Nama Pemain"}),s.map((i,l)=>r.jsxs("th",{className:"p-2 font-semibold text-gray-800 dark:text-gray-200 text-center",title:i.title,children:[a,l+1]},i.id)),r.jsx("th",{className:"p-2 font-semibold text-gray-800 dark:text-gray-200 text-center",children:"Selesai"})]})}),r.jsx("tbody",{children:e.map((i,l)=>{const o=l%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-800/50";return r.jsxs("tr",{className:o,children:[r.jsx("td",{className:`p-2 font-semibold text-primary dark:text-indigo-400 sticky left-0 z-10 w-48 border-r dark:border-gray-600 ${o}`,children:at(i.name)}),s.map(c=>{var m,v;const u=(m=i.completedQuests)==null?void 0:m[c.id],f=(v=i.questAttempts)==null?void 0:v[c.id];let d="bg-gray-300 dark:bg-gray-600",h=`${c.title}
Status: Belum dimulai`;if(u){d="bg-green-500 dark:bg-green-600 hover:bg-green-400";const b=u.completedAt?new Date(u.completedAt).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"N/A";h=`${c.title}
Status: Selesai
Tanggal: ${b}
Skor: ${u.score}`}else f&&f>0&&(d="bg-yellow-400 dark:bg-yellow-500 hover:bg-yellow-300",h=`${c.title}
Status: Dicoba
Percobaan: ${f} kali`);return r.jsx("td",{className:"p-1.5 text-center align-middle",children:r.jsx("div",{className:`w-6 h-6 rounded-sm mx-auto transition-colors ${d}`,title:h})},c.id)}),r.jsxs("td",{className:"p-2 text-center font-bold text-gray-800 dark:text-gray-200",children:[s.filter(c=>{var u;return(u=i.completedQuests)==null?void 0:u[c.id]}).length,"/",s.length]})]},i.id)})})]})})]})},ND=({players:t,quests:e,learningQuests:n,mainQuests:a,onRefresh:s,showToast:i,showAlert:l})=>{var g,x;const[o,c]=p.useState(!1),[u,f]=p.useState(!0),[d,h]=p.useState(!1),[m,v]=p.useState(!1);p.useEffect(()=>{const _=pO(f);return()=>_()},[]);const b=async()=>{c(!0),await s(),c(!1)},w=async()=>{v(!1),h(!0);try{await gO(),i("Berhasil","Migrasi data solusi lama telah selesai.",r.jsx(ke,{className:"w-5 h-5 text-green-500"}))}catch(_){l("Gagal Migrasi",`Terjadi kesalahan: ${_.message}`)}finally{h(!1)}},y=p.useMemo(()=>{if(t.length===0||!e||e.length===0)return{mostActivePlayer:null,mostDifficultQuest:null,avgCompletion:0};const _=[...t].sort((I,N)=>N.xp-I.xp)[0],k=e.reduce((I,N)=>(I[N.id]=0,I),{});let E=0;t.forEach(I=>{I.completedQuests&&Object.keys(I.completedQuests).forEach(N=>{k[N]!==void 0&&k[N]++,E++})});const C=Object.keys(k).sort((I,N)=>k[I]-k[N])[0],S=e.find(I=>I.id===C),T=t.length>0&&e.length>0?E/(t.length*e.length)*100:0;return{mostActivePlayer:_,mostDifficultQuest:S,avgCompletion:Math.round(T)}},[t,e]);return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard Master"}),r.jsxs("div",{className:"flex items-center gap-2",children:[!u&&r.jsxs("button",{onClick:()=>v(!0),disabled:d,className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-sm disabled:opacity-50",children:[r.jsx(mb,{className:`w-5 h-5 ${d?"animate-spin":""}`}),r.jsx("span",{children:d?"Memigrasi...":"Migrasi Data Solusi"})]}),r.jsxs("button",{onClick:b,disabled:o,className:"flex items-center gap-2 bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg transition-colors border border-gray-300 dark:border-gray-600 shadow-sm disabled:opacity-50",children:[r.jsx(wi,{className:`w-5 h-5 ${o?"animate-spin":""}`}),r.jsx("span",{children:o?"Memuat Ulang...":"Refresh Data"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(df,{icon:r.jsx(W2,{className:"w-6 h-6"}),title:"Pemain Paling Aktif",value:y.mostActivePlayer?at(y.mostActivePlayer.name):"N/A",description:`dengan ${((g=y.mostActivePlayer)==null?void 0:g.xp)||0} XP`}),r.jsx(df,{icon:r.jsx(Hm,{className:"w-6 h-6"}),title:"Misi Paling Sulit",value:((x=y.mostDifficultQuest)==null?void 0:x.title)||"N/A",description:"Misi yang paling jarang diselesaikan"}),r.jsx(df,{icon:r.jsx(NO,{className:"w-6 h-6"}),title:"Penyelesaian Rata-Rata",value:`${y.avgCompletion}%`,description:"Dari semua misi yang tersedia"})]}),r.jsx(Nb,{title:"Grid Kemajuan Misi Pembelajaran",players:t,quests:n,questPrefix:"T"}),r.jsx(Nb,{title:"Grid Kemajuan Misi Latihan",players:t,quests:a,questPrefix:"M"}),r.jsx(Mt,{isOpen:m,onClose:()=>v(!1),onConfirm:w,title:"Konfirmasi Migrasi Data",message:"Aksi ini akan memindahkan semua data 'solution' dari dalam profil pengguna ke lokasi baru ('/playerSolutions') untuk mengoptimalkan performa. Ini hanya perlu dijalankan sekali. Lanjutkan?",confirmText:"Ya, Jalankan Migrasi",confirmIcon:r.jsx(mb,{className:"w-5 h-5"}),confirmButtonClass:"bg-yellow-600 hover:bg-yellow-700"})]})},Sb=50,SD=()=>{const{currentUser:t,logout:e,ranks:n,questsMetadata:a,questChapters:s,rooms:i,handleUpdateUser:l,handleUpdateRanks:o,handleSaveQuest:c,handleDeleteQuest:u,handleSavePlayer:f,handleBatchImportPlayers:d,handleTogglePlayerStatus:h,handleSaveRoom:m,handleDeleteRoom:v,handleUpdatePlayerCodeFile:b,handleResetPlayerQuestProgress:w,handleUnlockPlayer:y,showAlert:g,showToast:x}=Vt(),[_,k]=p.useState([]),[E,C]=p.useState(!0),[S,T]=p.useState(!0),[I,N]=p.useState(!1),[W,H]=p.useState(null),[fe,K]=p.useState(!1),[A,z]=p.useState(null),[O,B]=p.useState(!1),[U,q]=p.useState(null),[ae,P]=p.useState(!1),[V,le]=p.useState({title:"",message:"",onConfirm:()=>{},confirmText:"",confirmIcon:r.jsx(r.Fragment,{}),confirmButtonClass:""}),[Ae,Ie]=p.useState(!1),[It,tn]=p.useState(!1);p.useEffect(()=>{(async()=>{C(!0),await dt(),C(!1)})()},[]);const dt=async()=>{try{const{players:F,hasNextPage:Ne}=await cb(Sb);k(F),T(Ne)}catch(F){console.error("Failed to fetch players:",F),g("Gagal Memuat","Tidak dapat memuat data pemain.")}},Qn=async()=>{if(!(I||!S)){N(!0);try{const F=_[_.length-1];if(!F){N(!1);return}const{players:Ne,hasNextPage:$n}=await cb(Sb,{name:F.name,id:F.id});k(FC=>[...FC,...Ne]),T($n)}catch(F){console.error("Failed to fetch more players:",F),g("Gagal Memuat","Tidak dapat memuat data pemain selanjutnya.")}finally{N(!1)}}},Z=async(F,Ne)=>{await w(F,Ne),await dt()},nn=async F=>{await y(F),await dt()},Lt=p.useMemo(()=>_.filter(F=>F.role===Ge.PLAYER),[_]),Qt=p.useMemo(()=>Lt.filter(F=>!F.disabled),[Lt]),Gn=p.useMemo(()=>{const F=a.filter(Ne=>Ne.category===we.TUTORIAL);return Fm(F)},[a]),Li=p.useMemo(()=>{const F=a.filter(Ne=>Ne.category===we.MAIN);return Fm(F)},[a]),L=p.useMemo(()=>a.filter(F=>F.category===we.CHALLENGE).sort((F,Ne)=>(F.order??999)-(Ne.order??999)),[a]),G=p.useMemo(()=>[...Gn,...Li],[Gn,Li]),ge=F=>{const Ne=!!(W!=null&&W.quest);c(F),H(null),x("Berhasil",Ne?"Misi Berhasil Diubah":"Data misi telah berhasil disimpan.",r.jsx(ke,{className:"w-5 h-5 text-green-500"}))},Fe=F=>H({quest:null,type:F}),Ve=async F=>{try{const Ne=await z2(F.id);Ne?H({quest:Ne,type:Ne.category}):g("Gagal Memuat",`Tidak dapat menemukan data lengkap untuk misi "${F.title}".`)}catch(Ne){g("Gagal Memuat",`Terjadi kesalahan saat mengambil data misi: ${Ne.message}`)}},Xe=()=>H(null),Nt=()=>{z(null),K(!0)},tl=F=>{z(F),K(!0)},D=async(F,Ne)=>{K(!1);try{const{message:$n}=await f(F,Ne);x("Berhasil",$n,r.jsx(ke,{className:"w-5 h-5 text-green-500"})),dt()}catch($n){g("Gagal Menyimpan Pemain",`Terjadi kesalahan: ${$n.message}`)}},J=async F=>{const Ne=await d(F);return dt(),Ne},ee=F=>{le({title:"Konfirmasi Nonaktifkan Pemain",message:`Menonaktifkan pemain "${at(F.name)}". Mereka tidak akan bisa login lagi dan akan dihapus dari papan peringkat. Lanjutkan?`,onConfirm:()=>{h(F,!0),dt(),P(!1)},confirmText:"Ya, Nonaktifkan",confirmIcon:r.jsx(V2,{className:"w-5 h-5"}),confirmButtonClass:"bg-red-600 hover:bg-red-700"}),P(!0)},Ce=F=>{le({title:"Konfirmasi Aktifkan Pemain",message:`Aktifkan kembali "${at(F.name)}"? Mereka akan bisa login dan kembali muncul di papan peringkat.`,onConfirm:()=>{h(F,!1),dt(),P(!1)},confirmText:"Ya, Aktifkan",confirmIcon:r.jsx(F2,{className:"w-5 h-5"}),confirmButtonClass:"bg-green-600 hover:bg-green-700"}),P(!0)},nl=()=>{q(null),B(!0)},LC=F=>{q(F),B(!0)},PC=async(F,Ne)=>{B(!1);try{await m(F,Ne),await dt(),x("Berhasil",`Data room "${F.name}" telah disimpan.`,r.jsx(ke,{className:"w-5 h-5 text-green-500"}))}catch($n){g("Gagal Menyimpan Room",`Terjadi kesalahan: ${$n.message}`)}},UC=F=>{const Ne=_.filter($n=>$n.roomId===F.id).length;if(Ne>0){g("Aksi Ditolak",`Tidak dapat menghapus room "${F.name}" karena masih ada ${Ne} pemain di dalamnya.`);return}le({title:"Konfirmasi Hapus Room",message:`Yakin ingin menghapus room "${F.name}"?`,onConfirm:()=>{v(F.id),P(!1)},confirmText:"Ya, Hapus",confirmIcon:r.jsx(In,{className:"w-5 h-5"}),confirmButtonClass:"bg-red-600 hover:bg-red-700"}),P(!0)},BC=()=>tn(!0),zC=()=>tn(!1),HC=F=>{l(F),tn(!1),x("Berhasil","Profil Anda telah diperbarui.",r.jsx(ke,{className:"w-5 h-5 text-green-500"}))};if(!t)return null;if(E)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Memuat data master..."});if(W){const F={questToEdit:W.quest,onSave:ge,onClose:Xe,showAlert:g,showToast:x};return W.type===we.CHALLENGE?r.jsx(CD,{...F}):r.jsx(kD,{...F,defaultCategory:W.type,existingQuests:a,questChapters:s})}return O?r.jsx(fD,{onClose:()=>B(!1),onSave:PC,roomToEdit:U,allPlayers:Qt}):fe?r.jsx(cD,{onClose:()=>K(!1),onSave:D,playerToEdit:A,rooms:i,ranks:n}):r.jsxs(r.Fragment,{children:[r.jsxs(IC,{user:t,onLogout:e,fullWidth:!0,onProfileClick:BC,children:[r.jsx(rD,{}),r.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-2xl shadow-sm mt-6",children:r.jsxs(vd,{children:[r.jsx(We,{index:!0,element:r.jsx(Js,{to:"dashboard",replace:!0})}),r.jsx(We,{path:"dashboard",element:r.jsx(ND,{players:Qt,quests:a,learningQuests:Gn,mainQuests:Li,onRefresh:dt,showToast:x,showAlert:g})}),r.jsx(We,{path:"chapters",element:r.jsx(wD,{})}),r.jsx(We,{path:"quests",element:r.jsx(wb,{quests:G,allQuests:a,questChapters:s,onDelete:u,onAddNew:()=>Fe(we.TUTORIAL),onEdit:Ve,title:"Manajemen Misi Pembelajaran & Utama",showAlert:g,showToast:x})}),r.jsx(We,{path:"challenges",element:r.jsx(wb,{quests:L,allQuests:a,questChapters:[],onDelete:u,onAddNew:()=>Fe(we.CHALLENGE),onEdit:Ve,title:"Manajemen Tantangan Koding",showAlert:g,showToast:x})}),r.jsx(We,{path:"players",element:r.jsx(oD,{players:Lt,rooms:i,quests:a,onAdd:Nt,onEdit:tl,onDeactivate:ee,onReactivate:Ce,onImportClick:()=>Ie(!0),onLoadMore:Qn,hasNextPage:S,isLoadingMore:I,onResetQuestProgress:Z,onUnlockPlayer:nn,onRefresh:dt})}),r.jsx(We,{path:"arsipPemain",element:r.jsx(vD,{players:Qt,showToast:x,handleUpdatePlayerCodeFile:b})}),r.jsx(We,{path:"rooms",element:r.jsx(uD,{rooms:i,players:Qt,onAdd:nl,onEdit:LC,onDelete:UC})}),r.jsx(We,{path:"ranks",element:r.jsx(gD,{ranks:n,quests:a,onUpdateRanks:o,onShowAlert:g,showToast:x})})]})})]}),r.jsx(Mt,{isOpen:ae,onClose:()=>P(!1),...V}),r.jsx(pD,{isOpen:Ae,onClose:()=>Ie(!1),onImport:J,existingUsers:Lt}),It&&t&&r.jsx(RC,{user:t,quests:a,onClose:zC,isEditable:!0,onUpdateProfile:HC})]})},ED=()=>{const{signIn:t,theme:e,toggleTheme:n}=Vt(),[a,s]=p.useState(""),[i,l]=p.useState(""),[o,c]=p.useState(!1),[u,f]=p.useState(null),[d,h]=p.useState(!1),m=async v=>{v.preventDefault(),h(!0),f(null);try{await t(a,i)}catch(b){f(b.message)}finally{h(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center font-sans p-4",children:r.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg animate-fade-in-down relative",children:[r.jsx("button",{type:"button",onClick:n,className:"absolute top-4 right-4 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Ganti tema",children:e==="light"?r.jsx(qu,{className:"w-6 h-6"}):r.jsx(Ku,{className:"w-6 h-6"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-display text-primary dark:text-indigo-400 mb-2",children:"Selamat Datang!"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Masuk untuk melanjutkan petualangan Python Quest."})]}),r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"identifier",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email atau Username"}),r.jsx("input",{id:"identifier",type:"text",value:a,onChange:v=>s(v.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",autoComplete:"username",placeholder:"Masukkan email atau username",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("input",{id:"password",type:o?"text":"password",value:i,onChange:v=>l(v.target.value),required:!0,className:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",placeholder:"Masukkan password",autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":o?"Sembunyikan password":"Tampilkan password",children:o?r.jsx(SO,{className:"h-5 w-5"}):r.jsx(nh,{className:"h-5 w-5"})})]})]}),u&&r.jsx("p",{className:"text-red-500 text-sm text-center pt-2",children:u}),r.jsx("div",{className:"pt-2",children:r.jsx("button",{type:"submit",disabled:d,className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:scale-100",children:d?"Memproses...":"Masuk"})})]})]})})},jD=()=>{const{handleMasterSetup:t}=Vt(),[e,n]=p.useState(""),[a,s]=p.useState(""),[i,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(""),[d,h]=p.useState("wizard"),[m,v]=p.useState(null),[b,w]=p.useState(!1),y=async g=>{if(g.preventDefault(),v(null),o!==u){v("Password dan konfirmasi password tidak cocok.");return}if(o.length<6){v("Password harus terdiri dari minimal 6 karakter.");return}w(!0),await t({name:e,email:a,username:i,password:o,avatarId:d,gender:Wn.MALE}),w(!1)};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center font-sans p-4",children:r.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg animate-fade-in-down",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-display text-primary dark:text-indigo-400 mb-2",children:"Setup Akun Master"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:'Selamat datang! Silakan buat akun "Master" pertama untuk mengelola Python Quest.'})]}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nama Lengkap"}),r.jsx("input",{id:"name",type:"text",value:e,onChange:g=>n(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),r.jsx("input",{id:"username",type:"text",value:i,onChange:g=>l(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),r.jsx("input",{id:"email",type:"email",value:a,onChange:g=>s(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:o,onChange:g=>c(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Konfirmasi Password"}),r.jsx("input",{id:"confirm-password",type:"password",value:u,onChange:g=>f(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pilih Avatar"}),r.jsx("div",{className:"mt-2 flex items-center gap-2 flex-wrap bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg max-h-32 overflow-y-auto",children:c0.map(g=>{const x=d===g.id;return r.jsx("button",{type:"button",onClick:()=>h(g.id),className:`p-1.5 rounded-full transition-all duration-200 ${x?"bg-primary/20 ring-2 ring-primary":"bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500"}`,title:g.name,children:r.jsx(g.component,{className:"w-10 h-10"})},g.id)})})]}),m&&r.jsx("p",{className:"text-red-500 text-sm text-center pt-2",children:m}),r.jsx("div",{className:"pt-2",children:r.jsx("button",{type:"submit",disabled:b,className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:scale-100",children:b?"Membuat Akun...":"Buat Akun & Mulai"})})]})]})})},TD=({children:t,currentUser:e})=>e?r.jsx(r.Fragment,{children:t}):r.jsx(Js,{to:"/login",replace:!0}),AD=()=>{const{currentUser:t,authChecked:e,needsMasterSetup:n}=Vt(),a=Qa();if(!e)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});if(n&&a.pathname!=="/master-setup")return r.jsx(Js,{to:"/master-setup",replace:!0});const s=()=>r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen text-gray-900 dark:text-gray-100 font-sans",children:(t==null?void 0:t.role)===Ge.PLAYER?r.jsx(sD,{}):r.jsx(SD,{})});return r.jsxs(vd,{children:[r.jsx(We,{path:"/login",element:t?r.jsx(Js,{to:"/dashboard",replace:!0}):r.jsx(ED,{})}),r.jsx(We,{path:"/master-setup",element:n?r.jsx(jD,{}):r.jsx(Js,{to:"/login",replace:!0})}),r.jsx(We,{path:"/dashboard/*",element:r.jsx(TD,{currentUser:t,children:s()})}),r.jsx(We,{path:"*",element:r.jsx(Js,{to:t?"/dashboard":"/login",replace:!0})})]})},OC=()=>{const[t,e]=p.useState(!1),[n,a]=p.useState(()=>{if(typeof window<"u"&&window.localStorage){const i=window.localStorage.getItem("theme");if(i)return i;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"});p.useEffect(()=>{const i=window.document.documentElement;n==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",n)},[n]);const s=()=>{a(i=>i==="light"?"dark":"light")};return r.jsxs("header",{className:"bg-white dark:bg-gray-800 sticky top-0 z-40 shadow-sm",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Yn,{to:"/",className:"text-2xl font-bold text-primary dark:text-indigo-400",children:"Python Quest"})}),r.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[r.jsx(Yn,{to:"/playground",className:"text-base font-semibold text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 transition-colors",children:"Coba Arena Koding"}),r.jsx(Yn,{to:"/login",className:"bg-primary hover:bg-primary/90 text-white font-bold py-2 px-5 rounded-full transition duration-300",children:"Masuk"}),r.jsx("button",{onClick:s,className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:n==="light"?r.jsx(qu,{className:"w-6 h-6"}):r.jsx(Ku,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[r.jsx("button",{onClick:s,className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:n==="light"?r.jsx(qu,{className:"w-5 h-5"}):r.jsx(Ku,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:()=>e(!t),className:"p-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary","aria-expanded":t,children:[r.jsx("span",{className:"sr-only",children:"Buka menu"}),t?r.jsx(ut,{className:"h-6 w-6"}):r.jsx($2,{className:"h-6 w-6"})]})]})]})}),t&&r.jsx("div",{className:"md:hidden animate-fade-in-down",children:r.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t border-gray-200 dark:border-gray-700",children:[r.jsx(Yn,{to:"/playground",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-semibold text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Coba Arena Koding"}),r.jsx(Yn,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-bold text-primary dark:text-indigo-400 hover:text-primary dark:hover:text-indigo-300 hover:bg-primary/10 dark:hover:bg-indigo-500/20",children:"Masuk"})]})})]})},ID=()=>r.jsxs("div",{className:"relative mt-12 lg:mt-0 lg:ml-12 animate-fade-in-scale",style:{animationDelay:"0.4s"},children:[r.jsx("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm p-4 rounded-xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50",children:r.jsxs("div",{className:"bg-gray-800 dark:bg-black/50 rounded-lg p-6 font-mono text-sm text-left text-white/80 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),r.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),r.jsx("pre",{children:r.jsxs("code",{className:"whitespace-pre-wrap",children:[r.jsx("span",{className:"text-sky-400",children:"def"})," ",r.jsx("span",{className:"text-purple-400",children:"sapa"}),"(nama):",`
`,"  ",r.jsx("span",{className:"text-gray-500",children:"# Sebuah fungsi untuk menyapa petualang"}),`
`,"  pesan = ",r.jsx("span",{className:"text-amber-400",children:'f"Halo, '}),r.jsx("span",{className:"text-pink-400",children:"{"}),r.jsx("span",{className:"text-white",children:"nama"}),r.jsx("span",{className:"text-pink-400",children:"}"}),r.jsx("span",{className:"text-amber-400",children:'! Selamat datang di Python Quest."'}),`
`,"  ",r.jsx("span",{className:"text-sky-400 font-semibold",children:"return"})," pesan",`
`,`
`,"petualang = ",r.jsx("span",{className:"text-green-400",children:'"Kamu"'}),`
`,r.jsx("span",{className:"text-pink-400",children:"print"}),"(sapa(petualang))"]})})]})}),r.jsx("div",{className:"absolute -inset-8 bg-primary/20 rounded-full blur-3xl -z-10"})]}),hf=({icon:t,title:e,children:n,delay:a="0s"})=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 text-center transform hover:-translate-y-2 transition-transform duration-300 animate-fade-in-up",style:{animationDelay:a},children:[r.jsx("div",{className:"inline-block p-4 bg-primary/10 text-primary dark:text-indigo-400 rounded-full mb-5",children:t}),r.jsx("h3",{className:"text-2xl font-bold mb-3 text-gray-900 dark:text-white",children:e}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:n})]}),ff=({number:t,title:e,children:n,delay:a="0s"})=>r.jsxs("div",{className:"flex flex-col items-center animate-fade-in-up",style:{animationDelay:a},children:[r.jsx("div",{className:"bg-primary text-white w-16 h-16 rounded-full flex items-center justify-center font-bold text-2xl border-4 border-white dark:border-gray-800 shadow-md mb-4",children:t}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n})]}),RD=()=>r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans text-gray-800 dark:text-gray-200",children:[r.jsx(OC,{}),r.jsxs("main",{children:[r.jsxs("section",{className:"relative overflow-hidden pt-16 pb-24 sm:pt-24 sm:pb-32 px-4 bg-gray-100/50 dark:bg-gray-900",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent -z-1"}),r.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 items-center gap-12",children:[r.jsxs("div",{className:"text-center lg:text-left",children:[r.jsx("h1",{className:"text-4xl sm:text-6xl font-display text-primary dark:text-indigo-400 animate-fade-in-down",children:"Python Quest"}),r.jsx("p",{className:"mt-6 text-lg sm:text-xl text-gray-700 dark:text-gray-300 max-w-2xl mx-auto lg:mx-0 animate-fade-in-down",style:{animationDelay:"0.2s"},children:"Belajar dasar-dasar algoritma dan pemrograman Python melalui sistem gamifikasi quest yang menyenangkan dan memotivasi."}),r.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row justify-center lg:justify-start items-center gap-4 animate-fade-in-up",style:{animationDelay:"0.6s"},children:[r.jsx(Yn,{to:"/login",className:"w-full sm:w-auto bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-lg",children:"Mulai Petualangan"}),r.jsx(Yn,{to:"/playground",className:"w-full sm:w-auto bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-primary dark:text-indigo-400 font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-lg border border-gray-200 dark:border-gray-600",children:"Coba Arena Koding"})]})]}),r.jsx(ID,{})]})]}),r.jsx("section",{className:"py-20 px-4",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Mengapa Python Quest?"}),r.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 text-center max-w-2xl mx-auto mb-12",children:"Platform kami dirancang khusus untuk membuat proses belajar koding menjadi sebuah petualangan yang seru dan efektif."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsx(hf,{icon:r.jsx(sc,{className:"w-8 h-8"}),title:"Misi Interaktif",delay:"0.2s",children:"Selesaikan misi tutorial dan tantangan koding untuk menguasai konsep Python dari dasar hingga mahir."}),r.jsx(hf,{icon:r.jsx(Dt,{className:"w-8 h-8"}),title:"Sistem Gamifikasi",delay:"0.4s",children:"Dapatkan XP, naik peringkat, dan bersaing dengan teman-temanmu di papan peringkat untuk jadi yang terbaik."}),r.jsx(hf,{icon:r.jsx(s0,{className:"w-8 h-8"}),title:"Arena Koding",delay:"0.6s",children:"Bereksperimen bebas dengan kode Python di lingkungan yang aman dan interaktif untuk mengasah kreativitasmu."})]})]})}),r.jsx("section",{className:"py-20 px-4 bg-gray-100/50 dark:bg-gray-800/20",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Langkah Petualanganmu"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 text-center",children:[r.jsx(ff,{number:1,title:"Daftar & Pilih Avatar",delay:"0.2s",children:"Mulai petualanganmu dengan membuat akun dan memilih karakter unikmu."}),r.jsx(ff,{number:2,title:"Selesaikan Misi",delay:"0.4s",children:"Pelajari konsep melalui tutorial interaktif dan uji kemampuanmu dengan tantangan koding."}),r.jsx(ff,{number:3,title:"Naik Peringkat",delay:"0.6s",children:"Dapatkan XP, raih peringkat baru, dan lihat namamu di puncak papan peringkat!"})]})]})}),r.jsxs("section",{className:"relative py-20 px-4 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary to-secondary opacity-80"}),r.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22%3E%3Cpath%20d=%22M0%200h100v100H0z%22%20fill=%22none%22/%3E%3Cpath%20d=%22M10%2010h80v80H10z%22%20fill=%22none%22%20stroke=%22%23fff%22%20stroke-width=%22.2%22%20stroke-dasharray=%222%202%22/%3E%3C/svg%3E')] opacity-10"}),r.jsxs("div",{className:"relative max-w-3xl mx-auto text-center z-10 animate-fade-in-scale",children:[r.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Siap Memulai Petualangan Kodemu?"}),r.jsx("p",{className:"text-lg text-white/90 mb-8",children:"Bergabunglah dengan para petualang lainnya dan jadilah master Python berikutnya. Perjalananmu dimulai sekarang!"}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Yn,{to:"/login",className:"bg-white text-primary hover:bg-gray-200 font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-2xl",children:"Daftar & Mulai Belajar"})})]})]})]}),r.jsx("footer",{className:"text-center py-6 border-t border-gray-200 dark:border-gray-800",children:r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["© ",new Date().getFullYear()," Python Quest. Belajar Koding Jadi Seru."]})})]}),MD=()=>{const t=`# Coba gunakan fungsi input()!
nama = input("Masukkan namamu: ")
print("Halo, " + nama + "!")`,[e,n]=p.useState(t),{isPyodideLoading:a,isExecuting:s,outputLines:i,runCode:l,...o}=f0(),c=u=>{if(u.key==="Tab"){u.preventDefault();const{value:f,selectionStart:d}=u.currentTarget,h="  ",m=f.substring(0,d)+h+f.substring(u.currentTarget.selectionEnd);u.currentTarget.value=m,u.currentTarget.selectionStart=u.currentTarget.selectionEnd=d+h.length,n(m)}};return r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm h-full flex flex-col",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-3 flex-shrink-0",children:[r.jsx("h2",{className:"flex-grow font-semibold text-lg dark:text-gray-200",children:"Arena Koding Publik"}),r.jsx("button",{onClick:()=>l(e),disabled:s||a,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-secondary text-white font-bold py-2 px-4 rounded-lg hover:bg-secondary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:a?"Memuat...":s?"Menjalankan...":"Jalankan"})]}),r.jsxs("div",{className:"flex-grow flex flex-col lg:flex-row gap-4 min-h-0",children:[r.jsx("div",{className:"lg:w-3/5",children:r.jsx(Ps,{code:e,setCode:n,onKeyDown:c,height:"min-h-[420px]"})}),r.jsx("div",{className:"lg:w-2/5 flex flex-col gap-4",children:r.jsx(m0,{outputLines:i,...o,height:"min-h-[420px]"})})]})]})},OD=()=>r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans flex flex-col",children:[r.jsx(OC,{}),r.jsx("main",{className:"flex-grow p-4 sm:p-6 lg:p-8 flex flex-col",children:r.jsxs("div",{className:"max-w-7xl mx-auto w-full flex flex-col flex-grow",children:[r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 text-blue-700 dark:text-blue-300 p-4 rounded-md mb-6",role:"alert",children:[r.jsx("h3",{className:"font-bold",children:"Arena Koding Publik"}),r.jsxs("p",{children:["Selamat datang di Arena Koding! Coba jalankan kode Python langsung di browsermu. Untuk menyimpan hasil pekerjaanmu, silakan ",r.jsx(Yn,{to:"/login",className:"font-bold underline hover:text-blue-800 dark:hover:text-blue-200",children:"masuk"})," atau daftar."]})]}),r.jsx("div",{className:"flex-grow",children:r.jsx(MD,{})})]})})]}),DD=()=>{const{alertModalContent:t,closeAlert:e,toastContent:n,closeToast:a}=Vt();return r.jsxs(r.Fragment,{children:[r.jsx(AD,{}),r.jsx(AO,{isOpen:!!t,onClose:e,title:(t==null?void 0:t.title)||"",children:t==null?void 0:t.message}),n&&r.jsx(IO,{title:n.title,message:n.message,icon:n.icon,onClose:a})]})},LD=()=>r.jsxs(vd,{children:[r.jsx(We,{path:"/",element:r.jsx(RD,{})}),r.jsx(We,{path:"/playground",element:r.jsx(OD,{})}),r.jsx(We,{path:"/*",element:r.jsx(TO,{children:r.jsx(DD,{})})})]}),DC=document.getElementById("root");if(!DC)throw new Error("Could not find root element to mount to");const PD=FE.createRoot(DC);PD.render(r.jsx(Dn.StrictMode,{children:r.jsx(Uj,{children:r.jsx(LD,{})})}));export{Su as D,Hs as F,Gr as S,ax as _,UD as a,xi as b,zD as c,mo as d,wd as e,aw as f,Ke as g,pT as h,Er as i,BD as j,fo as k,vT as l,iw as m,FD as n,bT as o,HD as p,VD as q,_s as r,QD as s,zn as t};
