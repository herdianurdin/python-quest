function eN(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(a,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Ob(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Db={exports:{}},ed={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN=Symbol.for("react.transitional.element"),nN=Symbol.for("react.fragment");function Lb(t,e,n){var a=null;if(n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:tN,type:t,key:a,ref:e!==void 0?e:null,props:n}}ed.Fragment=nN;ed.jsx=Lb;ed.jsxs=Lb;Db.exports=ed;var i=Db.exports,Pb={exports:{}},J={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km=Symbol.for("react.transitional.element"),aN=Symbol.for("react.portal"),sN=Symbol.for("react.fragment"),rN=Symbol.for("react.strict_mode"),iN=Symbol.for("react.profiler"),lN=Symbol.for("react.consumer"),oN=Symbol.for("react.context"),cN=Symbol.for("react.forward_ref"),uN=Symbol.for("react.suspense"),dN=Symbol.for("react.memo"),Ub=Symbol.for("react.lazy"),hN=Symbol.for("react.activity"),_0=Symbol.iterator;function fN(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var Bb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zb=Object.assign,Hb={};function Mi(t,e,n){this.props=t,this.context=e,this.refs=Hb,this.updater=n||Bb}Mi.prototype.isReactComponent={};Mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fb(){}Fb.prototype=Mi.prototype;function Xm(t,e,n){this.props=t,this.context=e,this.refs=Hb,this.updater=n||Bb}var qm=Xm.prototype=new Fb;qm.constructor=Xm;zb(qm,Mi.prototype);qm.isPureReactComponent=!0;var w0=Array.isArray;function bf(){}var De={H:null,A:null,T:null,S:null},Vb=Object.prototype.hasOwnProperty;function Zm(t,e,n){var a=n.ref;return{$$typeof:Km,type:t,key:e,ref:a!==void 0?a:null,props:n}}function mN(t,e){return Zm(t.type,e,t.props)}function Jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Km}function gN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k0=/\/+/g;function ch(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gN(""+t.key):e.toString(36)}function pN(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(bf,bf):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Hr(t,e,n,a,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(r){case"bigint":case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Km:case aN:l=!0;break;case Ub:return l=t._init,Hr(l(t._payload),e,n,a,s)}}if(l)return s=s(t),l=a===""?"."+ch(t,0):a,w0(s)?(n="",l!=null&&(n=l.replace(k0,"$&/")+"/"),Hr(s,e,n,"",function(u){return u})):s!=null&&(Jm(s)&&(s=mN(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(k0,"$&/")+"/")+l)),e.push(s)),1;l=0;var o=a===""?".":a+":";if(w0(t))for(var c=0;c<t.length;c++)a=t[c],r=o+ch(a,c),l+=Hr(a,e,n,r,s);else if(c=fN(t),typeof c=="function")for(t=c.call(t),c=0;!(a=t.next()).done;)a=a.value,r=o+ch(a,c++),l+=Hr(a,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return Hr(pN(t),e,n,a,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return l}function lc(t,e,n){if(t==null)return t;var a=[],s=0;return Hr(t,a,"","",function(r){return e.call(n,r,s++)}),a}function yN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var C0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},xN={map:lc,forEach:function(t,e,n){lc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lc(t,function(){e++}),e},toArray:function(t){return lc(t,function(e){return e})||[]},only:function(t){if(!Jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Activity=hN;J.Children=xN;J.Component=Mi;J.Fragment=sN;J.Profiler=iN;J.PureComponent=Xm;J.StrictMode=rN;J.Suspense=uN;J.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=De;J.__COMPILER_RUNTIME={__proto__:null,c:function(t){return De.H.useMemoCache(t)}};J.cache=function(t){return function(){return t.apply(null,arguments)}};J.cacheSignal=function(){return null};J.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var a=zb({},t.props),s=t.key;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)!Vb.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(a[r]=e[r]);var r=arguments.length-2;if(r===1)a.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];a.children=l}return Zm(t.type,s,a)};J.createContext=function(t){return t={$$typeof:oN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:lN,_context:t},t};J.createElement=function(t,e,n){var a,s={},r=null;if(e!=null)for(a in e.key!==void 0&&(r=""+e.key),e)Vb.call(e,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(s[a]=e[a]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var o=Array(l),c=0;c<l;c++)o[c]=arguments[c+2];s.children=o}if(t&&t.defaultProps)for(a in l=t.defaultProps,l)s[a]===void 0&&(s[a]=l[a]);return Zm(t,r,s)};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:cN,render:t}};J.isValidElement=Jm;J.lazy=function(t){return{$$typeof:Ub,_payload:{_status:-1,_result:t},_init:yN}};J.memo=function(t,e){return{$$typeof:dN,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=De.T,n={};De.T=n;try{var a=t(),s=De.S;s!==null&&s(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(bf,C0)}catch(r){C0(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),De.T=e}};J.unstable_useCacheRefresh=function(){return De.H.useCacheRefresh()};J.use=function(t){return De.H.use(t)};J.useActionState=function(t,e,n){return De.H.useActionState(t,e,n)};J.useCallback=function(t,e){return De.H.useCallback(t,e)};J.useContext=function(t){return De.H.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t,e){return De.H.useDeferredValue(t,e)};J.useEffect=function(t,e){return De.H.useEffect(t,e)};J.useEffectEvent=function(t){return De.H.useEffectEvent(t)};J.useId=function(){return De.H.useId()};J.useImperativeHandle=function(t,e,n){return De.H.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return De.H.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return De.H.useLayoutEffect(t,e)};J.useMemo=function(t,e){return De.H.useMemo(t,e)};J.useOptimistic=function(t,e){return De.H.useOptimistic(t,e)};J.useReducer=function(t,e,n){return De.H.useReducer(t,e,n)};J.useRef=function(t){return De.H.useRef(t)};J.useState=function(t){return De.H.useState(t)};J.useSyncExternalStore=function(t,e,n){return De.H.useSyncExternalStore(t,e,n)};J.useTransition=function(){return De.H.useTransition()};J.version="19.2.0";Pb.exports=J;var p=Pb.exports;const td=Ob(p),bN=eN({__proto__:null,default:td},[p]);var Qb={exports:{}},nd={},Gb={exports:{}},$b={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,H){var O=I.length;I.push(H);e:for(;0<O;){var z=O-1>>>1,B=I[z];if(0<s(B,H))I[z]=H,I[O]=B,O=z;else break e}}function n(I){return I.length===0?null:I[0]}function a(I){if(I.length===0)return null;var H=I[0],O=I.pop();if(O!==H){I[0]=O;e:for(var z=0,B=I.length,Y=B>>>1;z<Y;){var ee=2*(z+1)-1,P=I[ee],V=ee+1,se=I[V];if(0>s(P,O))V<B&&0>s(se,P)?(I[z]=se,I[V]=O,z=V):(I[z]=P,I[ee]=O,z=ee);else if(V<B&&0>s(se,O))I[z]=se,I[V]=O,z=V;else break e}}return H}function s(I,H){var O=I.sortIndex-H.sortIndex;return O!==0?O:I.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],f=1,d=null,h=3,m=!1,b=!1,_=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function v(I){for(var H=n(u);H!==null;){if(H.callback===null)a(u);else if(H.startTime<=I)a(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(u)}}function k(I){if(_=!1,v(I),!b)if(n(c)!==null)b=!0,S||(S=!0,D());else{var H=n(u);H!==null&&W(k,H.startTime-I)}}var S=!1,C=-1,j=5,T=-1;function E(){return w?!0:!(t.unstable_now()-T<j)}function N(){if(w=!1,S){var I=t.unstable_now();T=I;var H=!0;try{e:{b=!1,_&&(_=!1,g(C),C=-1),m=!0;var O=h;try{t:{for(v(I),d=n(c);d!==null&&!(d.expirationTime>I&&E());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var B=z(d.expirationTime<=I);if(I=t.unstable_now(),typeof B=="function"){d.callback=B,v(I),H=!0;break t}d===n(c)&&a(c),v(I)}else a(c);d=n(c)}if(d!==null)H=!0;else{var Y=n(u);Y!==null&&W(k,Y.startTime-I),H=!1}}break e}finally{d=null,h=O,m=!1}H=void 0}}finally{H?D():S=!1}}}var D;if(typeof x=="function")D=function(){x(N)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,$=U.port2;U.port1.onmessage=N,D=function(){$.postMessage(null)}}else D=function(){y(N,0)};function W(I,H){C=y(function(){I(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(I){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var O=h;h=H;try{return I()}finally{h=O}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(I,H){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var O=h;h=I;try{return H()}finally{h=O}},t.unstable_scheduleCallback=function(I,H,O){var z=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?z+O:z):O=z,I){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=O+B,I={id:f++,callback:H,priorityLevel:I,startTime:O,expirationTime:B,sortIndex:-1},O>z?(I.sortIndex=O,e(u,I),n(c)===null&&I===n(u)&&(_?(g(C),C=-1):_=!0,W(k,O-z))):(I.sortIndex=B,e(c,I),b||m||(b=!0,S||(S=!0,D()))),I},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(I){var H=h;return function(){var O=h;h=H;try{return I.apply(this,arguments)}finally{h=O}}}})($b);Gb.exports=$b;var vN=Gb.exports,Wb={exports:{}},Bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N=p;function Yb(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qa(){}var Dt={d:{f:Qa,r:function(){throw Error(Yb(522))},D:Qa,C:Qa,L:Qa,m:Qa,X:Qa,S:Qa,M:Qa},p:0,findDOMNode:null},wN=Symbol.for("react.portal");function kN(t,e,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wN,key:a==null?null:""+a,children:t,containerInfo:e,implementation:n}}var Cl=_N.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ad(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dt;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Yb(299));return kN(t,e,null,n)};Bt.flushSync=function(t){var e=Cl.T,n=Dt.p;try{if(Cl.T=null,Dt.p=2,t)return t()}finally{Cl.T=e,Dt.p=n,Dt.d.f()}};Bt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Dt.d.C(t,e))};Bt.prefetchDNS=function(t){typeof t=="string"&&Dt.d.D(t)};Bt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,a=ad(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Dt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:a,integrity:s,fetchPriority:r}):n==="script"&&Dt.d.X(t,{crossOrigin:a,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Bt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=ad(e.as,e.crossOrigin);Dt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Dt.d.M(t)};Bt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,a=ad(n,e.crossOrigin);Dt.d.L(t,n,{crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Bt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=ad(e.as,e.crossOrigin);Dt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Dt.d.m(t)};Bt.requestFormReset=function(t){Dt.d.r(t)};Bt.unstable_batchedUpdates=function(t,e){return t(e)};Bt.useFormState=function(t,e,n){return Cl.H.useFormState(t,e,n)};Bt.useFormStatus=function(){return Cl.H.useHostTransitionStatus()};Bt.version="19.2.0";function Kb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kb)}catch(t){console.error(t)}}Kb(),Wb.exports=Bt;var CN=Wb.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=vN,Xb=p,NN=CN;function A(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function To(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jb(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N0(t){if(To(t)!==t)throw Error(A(188))}function SN(t){var e=t.alternate;if(!e){if(e=To(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,a=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return N0(s),t;if(r===a)return N0(s),e;r=r.sibling}throw Error(A(188))}if(n.return!==a.return)n=s,a=r;else{for(var l=!1,o=s.child;o;){if(o===n){l=!0,n=s,a=r;break}if(o===a){l=!0,a=s,n=r;break}o=o.sibling}if(!l){for(o=r.child;o;){if(o===n){l=!0,n=r,a=s;break}if(o===a){l=!0,a=r,n=s;break}o=o.sibling}if(!l)throw Error(A(189))}}if(n.alternate!==a)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function ev(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=ev(t),e!==null)return e;t=t.sibling}return null}var Le=Object.assign,EN=Symbol.for("react.element"),oc=Symbol.for("react.transitional.element"),pl=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),vf=Symbol.for("react.profiler"),nv=Symbol.for("react.consumer"),ga=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),_f=Symbol.for("react.suspense"),wf=Symbol.for("react.suspense_list"),tg=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),kf=Symbol.for("react.activity"),jN=Symbol.for("react.memo_cache_sentinel"),S0=Symbol.iterator;function sl(t){return t===null||typeof t!="object"?null:(t=S0&&t[S0]||t["@@iterator"],typeof t=="function"?t:null)}var TN=Symbol.for("react.client.reference");function Cf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===TN?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qr:return"Fragment";case vf:return"Profiler";case tv:return"StrictMode";case _f:return"Suspense";case wf:return"SuspenseList";case kf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case pl:return"Portal";case ga:return t.displayName||"Context";case nv:return(t._context.displayName||"Context")+".Consumer";case eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tg:return e=t.displayName||null,e!==null?e:Cf(t.type)||"Memo";case $a:e=t._payload,t=t._init;try{return Cf(t(e))}catch{}}return null}var yl=Array.isArray,X=Xb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=NN.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nr={pending:!1,data:null,method:null,action:null},Nf=[],Gr=-1;function ea(t){return{current:t}}function vt(t){0>Gr||(t.current=Nf[Gr],Nf[Gr]=null,Gr--)}function Ie(t,e){Gr++,Nf[Gr]=t.current,t.current=e}var Yn=ea(null),Yl=ea(null),is=ea(null),Yc=ea(null);function Kc(t,e){switch(Ie(is,e),Ie(Yl,t),Ie(Yn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Ry(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Ry(e),t=w1(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}vt(Yn),Ie(Yn,t)}function mi(){vt(Yn),vt(Yl),vt(is)}function Sf(t){t.memoizedState!==null&&Ie(Yc,t);var e=Yn.current,n=w1(e,t.type);e!==n&&(Ie(Yl,t),Ie(Yn,n))}function Xc(t){Yl.current===t&&(vt(Yn),vt(Yl)),Yc.current===t&&(vt(Yc),ro._currentValue=nr)}var uh,E0;function $s(t){if(uh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uh=e&&e[1]||"",E0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uh+t+E0}var dh=!1;function hh(t,e){if(!t||dh)return"";dh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var h=m}Reflect.construct(t,[],d)}else{try{d.call()}catch(m){h=m}t.call(d.prototype)}}else{try{throw Error()}catch(m){h=m}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),l=r[0],o=r[1];if(l&&o){var c=l.split(`
`),u=o.split(`
`);for(s=a=0;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(a===c.length||s===u.length)for(a=c.length-1,s=u.length-1;1<=a&&0<=s&&c[a]!==u[s];)s--;for(;1<=a&&0<=s;a--,s--)if(c[a]!==u[s]){if(a!==1||s!==1)do if(a--,s--,0>s||c[a]!==u[s]){var f=`
`+c[a].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=a&&0<=s);break}}}finally{dh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?$s(n):""}function AN(t,e){switch(t.tag){case 26:case 27:case 5:return $s(t.type);case 16:return $s("Lazy");case 13:return t.child!==e&&e!==null?$s("Suspense Fallback"):$s("Suspense");case 19:return $s("SuspenseList");case 0:case 15:return hh(t.type,!1);case 11:return hh(t.type.render,!1);case 1:return hh(t.type,!0);case 31:return $s("Activity");default:return""}}function j0(t){try{var e="",n=null;do e+=AN(t,n),n=t,t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ef=Object.prototype.hasOwnProperty,ng=dt.unstable_scheduleCallback,fh=dt.unstable_cancelCallback,IN=dt.unstable_shouldYield,RN=dt.unstable_requestPaint,tn=dt.unstable_now,MN=dt.unstable_getCurrentPriorityLevel,av=dt.unstable_ImmediatePriority,sv=dt.unstable_UserBlockingPriority,qc=dt.unstable_NormalPriority,ON=dt.unstable_LowPriority,rv=dt.unstable_IdlePriority,DN=dt.log,LN=dt.unstable_setDisableYieldValue,Ao=null,nn=null;function Za(t){if(typeof DN=="function"&&LN(t),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(Ao,t)}catch{}}var an=Math.clz32?Math.clz32:BN,PN=Math.log,UN=Math.LN2;function BN(t){return t>>>=0,t===0?32:31-(PN(t)/UN|0)|0}var cc=256,uc=262144,dc=4194304;function Ws(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function sd(t,e,n){var a=t.pendingLanes;if(a===0)return 0;var s=0,r=t.suspendedLanes,l=t.pingedLanes;t=t.warmLanes;var o=a&134217727;return o!==0?(a=o&~r,a!==0?s=Ws(a):(l&=o,l!==0?s=Ws(l):n||(n=o&~t,n!==0&&(s=Ws(n))))):(o=a&~r,o!==0?s=Ws(o):l!==0?s=Ws(l):n||(n=a&~t,n!==0&&(s=Ws(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function Io(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function zN(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iv(){var t=dc;return dc<<=1,!(dc&62914560)&&(dc=4194304),t}function mh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ro(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function HN(t,e,n,a,s,r){var l=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(n=l&~n;0<n;){var f=31-an(n),d=1<<f;o[f]=0,c[f]=-1;var h=u[f];if(h!==null)for(u[f]=null,f=0;f<h.length;f++){var m=h[f];m!==null&&(m.lane&=-536870913)}n&=~d}a!==0&&lv(t,a,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(l&~e))}function lv(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var a=31-an(e);t.entangledLanes|=e,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function ov(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var a=31-an(n),s=1<<a;s&e|t[a]&e&&(t[a]|=e),n&=~s}}function cv(t,e){var n=e&-e;return n=n&42?1:ag(n),n&(t.suspendedLanes|e)?0:n}function ag(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sg(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function uv(){var t=pe.p;return t!==0?t:(t=window.event,t===void 0?32:M1(t.type))}function T0(t,e){var n=pe.p;try{return pe.p=t,e()}finally{pe.p=n}}var Ds=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Ds,$t="__reactProps$"+Ds,Oi="__reactContainer$"+Ds,jf="__reactEvents$"+Ds,FN="__reactListeners$"+Ds,VN="__reactHandles$"+Ds,A0="__reactResources$"+Ds,Mo="__reactMarker$"+Ds;function rg(t){delete t[Nt],delete t[$t],delete t[jf],delete t[FN],delete t[VN]}function $r(t){var e=t[Nt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Oi]||n[Nt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Py(t);t!==null;){if(n=t[Nt])return n;t=Py(t)}return e}t=n,n=t.parentNode}return null}function Di(t){if(t=t[Nt]||t[Oi]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function xl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(A(33))}function ni(t){var e=t[A0];return e||(e=t[A0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function xt(t){t[Mo]=!0}var dv=new Set,hv={};function Cr(t,e){gi(t,e),gi(t+"Capture",e)}function gi(t,e){for(hv[t]=e,t=0;t<e.length;t++)dv.add(e[t])}var QN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),I0={},R0={};function GN(t){return Ef.call(R0,t)?!0:Ef.call(I0,t)?!1:QN.test(t)?R0[t]=!0:(I0[t]=!0,!1)}function Tc(t,e,n){if(GN(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var a=e.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function hc(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function aa(t,e,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+a)}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $N(t,e,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,r=a.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,r.call(this,l)}}),Object.defineProperty(t,e,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tf(t){if(!t._valueTracker){var e=fv(t)?"checked":"value";t._valueTracker=$N(t,e,""+t[e])}}function mv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),a="";return t&&(a=fv(t)?t.checked?"true":"false":t.value),t=a,t!==n?(e.setValue(t),!0):!1}function Zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var WN=/[\n"\\]/g;function pn(t){return t.replace(WN,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Af(t,e,n,a,s,r,l,o){t.name="",l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.type=l:t.removeAttribute("type"),e!=null?l==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+fn(e)):t.value!==""+fn(e)&&(t.value=""+fn(e)):l!=="submit"&&l!=="reset"||t.removeAttribute("value"),e!=null?If(t,l,fn(e)):n!=null?If(t,l,fn(n)):a!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+fn(o):t.removeAttribute("name")}function gv(t,e,n,a,s,r,l,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){Tf(t);return}n=n!=null?""+fn(n):"",e=e!=null?""+fn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}a=a??s,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=o?t.checked:!!a,t.defaultChecked=!!a,l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(t.name=l),Tf(t)}function If(t,e,n){e==="number"&&Zc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ai(t,e,n,a){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&a&&(t[n].defaultSelected=!0)}else{for(n=""+fn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,a&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pv(t,e,n){if(e!=null&&(e=""+fn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+fn(n):""}function yv(t,e,n,a){if(e==null){if(a!=null){if(n!=null)throw Error(A(92));if(yl(a)){if(1<a.length)throw Error(A(93));a=a[0]}n=a}n==null&&(n=""),e=n}n=fn(e),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),Tf(t)}function pi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var YN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function M0(t,e,n){var a=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":a?t.setProperty(e,n):typeof n!="number"||n===0||YN.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function xv(t,e,n){if(e!=null&&typeof e!="object")throw Error(A(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||e!=null&&e.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var s in e)a=e[s],e.hasOwnProperty(s)&&n[s]!==a&&M0(t,s,a)}else for(var r in e)e.hasOwnProperty(r)&&M0(t,r,e[r])}function ig(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),XN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ac(t){return XN.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function pa(){}var Rf=null;function lg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wr=null,si=null;function O0(t){var e=Di(t);if(e&&(t=e.stateNode)){var n=t[$t]||null;e:switch(t=e.stateNode,e.type){case"input":if(Af(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var a=n[e];if(a!==t&&a.form===t.form){var s=a[$t]||null;if(!s)throw Error(A(90));Af(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)a=n[e],a.form===t.form&&mv(a)}break e;case"textarea":pv(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ai(t,!!n.multiple,e,!1)}}}var gh=!1;function bv(t,e,n){if(gh)return t(e,n);gh=!0;try{var a=t(e);return a}finally{if(gh=!1,(Wr!==null||si!==null)&&(pd(),Wr&&(e=Wr,t=si,si=Wr=null,O0(e),t)))for(e=0;e<t.length;e++)O0(t[e])}}function Kl(t,e){var n=t.stateNode;if(n===null)return null;var a=n[$t]||null;if(a===null)return null;n=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mf=!1;if(Ea)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){Mf=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{Mf=!1}var Ja=null,og=null,Ic=null;function vv(){if(Ic)return Ic;var t,e=og,n=e.length,a,s="value"in Ja?Ja.value:Ja.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(a=1;a<=l&&e[n-a]===s[r-a];a++);return Ic=s.slice(t,1<a?1-a:void 0)}function Rc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fc(){return!0}function D0(){return!1}function Yt(t){function e(n,a,s,r,l){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=r,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?fc:D0,this.isPropagationStopped=D0,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fc)},persist:function(){},isPersistent:fc}),e}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rd=Yt(Nr),Oo=Le({},Nr,{view:0,detail:0}),qN=Yt(Oo),ph,yh,il,id=Le({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(ph=t.screenX-il.screenX,yh=t.screenY-il.screenY):yh=ph=0,il=t),ph)},movementY:function(t){return"movementY"in t?t.movementY:yh}}),L0=Yt(id),ZN=Le({},id,{dataTransfer:0}),JN=Yt(ZN),eS=Le({},Oo,{relatedTarget:0}),xh=Yt(eS),tS=Le({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),nS=Yt(tS),aS=Le({},Nr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sS=Yt(aS),rS=Le({},Nr,{data:0}),P0=Yt(rS),iS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oS[t])?!!e[t]:!1}function cg(){return cS}var uS=Le({},Oo,{key:function(t){if(t.key){var e=iS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(t){return t.type==="keypress"?Rc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dS=Yt(uS),hS=Le({},id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U0=Yt(hS),fS=Le({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),mS=Yt(fS),gS=Le({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),pS=Yt(gS),yS=Le({},id,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xS=Yt(yS),bS=Le({},Nr,{newState:0,oldState:0}),vS=Yt(bS),_S=[9,13,27,32],ug=Ea&&"CompositionEvent"in window,Nl=null;Ea&&"documentMode"in document&&(Nl=document.documentMode);var wS=Ea&&"TextEvent"in window&&!Nl,_v=Ea&&(!ug||Nl&&8<Nl&&11>=Nl),B0=" ",z0=!1;function wv(t,e){switch(t){case"keyup":return _S.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yr=!1;function kS(t,e){switch(t){case"compositionend":return kv(e);case"keypress":return e.which!==32?null:(z0=!0,B0);case"textInput":return t=e.data,t===B0&&z0?null:t;default:return null}}function CS(t,e){if(Yr)return t==="compositionend"||!ug&&wv(t,e)?(t=vv(),Ic=og=Ja=null,Yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _v&&e.locale!=="ko"?null:e.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NS[t.type]:e==="textarea"}function Cv(t,e,n,a){Wr?si?si.push(a):si=[a]:Wr=a,e=pu(e,"onChange"),0<e.length&&(n=new rd("onChange","change",null,n,a),t.push({event:n,listeners:e}))}var Sl=null,Xl=null;function SS(t){b1(t,0)}function ld(t){var e=xl(t);if(mv(e))return t}function F0(t,e){if(t==="change")return e}var Nv=!1;if(Ea){var bh;if(Ea){var vh="oninput"in document;if(!vh){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),vh=typeof V0.oninput=="function"}bh=vh}else bh=!1;Nv=bh&&(!document.documentMode||9<document.documentMode)}function Q0(){Sl&&(Sl.detachEvent("onpropertychange",Sv),Xl=Sl=null)}function Sv(t){if(t.propertyName==="value"&&ld(Xl)){var e=[];Cv(e,Xl,t,lg(t)),bv(SS,e)}}function ES(t,e,n){t==="focusin"?(Q0(),Sl=e,Xl=n,Sl.attachEvent("onpropertychange",Sv)):t==="focusout"&&Q0()}function jS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ld(Xl)}function TS(t,e){if(t==="click")return ld(e)}function AS(t,e){if(t==="input"||t==="change")return ld(e)}function IS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:IS;function ql(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!Ef.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function G0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $0(t,e){var n=G0(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=e&&a>=e)return{node:n,offset:e-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=G0(n)}}function Ev(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ev(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jv(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Zc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zc(t.document)}return e}function dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var RS=Ea&&"documentMode"in document&&11>=document.documentMode,Kr=null,Of=null,El=null,Df=!1;function W0(t,e,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||Kr==null||Kr!==Zc(a)||(a=Kr,"selectionStart"in a&&dg(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),El&&ql(El,a)||(El=a,a=pu(Of,"onSelect"),0<a.length&&(e=new rd("onSelect","select",null,e,n),t.push({event:e,listeners:a}),e.target=Kr)))}function Qs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xr={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},_h={},Tv={};Ea&&(Tv=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function Sr(t){if(_h[t])return _h[t];if(!Xr[t])return t;var e=Xr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tv)return _h[t]=e[n];return t}var Av=Sr("animationend"),Iv=Sr("animationiteration"),Rv=Sr("animationstart"),MS=Sr("transitionrun"),OS=Sr("transitionstart"),DS=Sr("transitioncancel"),Mv=Sr("transitionend"),Ov=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function Un(t,e){Ov.set(t,e),Cr(e,[t])}var Jc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hn=[],qr=0,hg=0;function od(){for(var t=qr,e=hg=qr=0;e<t;){var n=hn[e];hn[e++]=null;var a=hn[e];hn[e++]=null;var s=hn[e];hn[e++]=null;var r=hn[e];if(hn[e++]=null,a!==null&&s!==null){var l=a.pending;l===null?s.next=s:(s.next=l.next,l.next=s),a.pending=s}r!==0&&Dv(n,s,r)}}function cd(t,e,n,a){hn[qr++]=t,hn[qr++]=e,hn[qr++]=n,hn[qr++]=a,hg|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function fg(t,e,n,a){return cd(t,e,n,a),eu(t)}function Er(t,e){return cd(t,null,null,e),eu(t)}function Dv(t,e,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-an(n),t=r.hiddenUpdates,a=t[s],a===null?t[s]=[e]:a.push(e),e.lane=n|536870912),r):null}function eu(t){if(50<Ll)throw Ll=0,am=null,Error(A(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Zr={};function LS(t,e,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,a){return new LS(t,e,n,a)}function mg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _a(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Lv(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Mc(t,e,n,a,s,r){var l=0;if(a=t,typeof t=="function")mg(t)&&(l=1);else if(typeof t=="string")l=HE(t,n,Yn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case kf:return t=Zt(31,n,e,s),t.elementType=kf,t.lanes=r,t;case Qr:return ar(n.children,s,r,e);case tv:l=8,s|=24;break;case vf:return t=Zt(12,n,e,s|2),t.elementType=vf,t.lanes=r,t;case _f:return t=Zt(13,n,e,s),t.elementType=_f,t.lanes=r,t;case wf:return t=Zt(19,n,e,s),t.elementType=wf,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ga:l=10;break e;case nv:l=9;break e;case eg:l=11;break e;case tg:l=14;break e;case $a:l=16,a=null;break e}l=29,n=Error(A(130,t===null?"null":typeof t,"")),a=null}return e=Zt(l,n,e,s),e.elementType=t,e.type=a,e.lanes=r,e}function ar(t,e,n,a){return t=Zt(7,t,a,e),t.lanes=n,t}function wh(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function Pv(t){var e=Zt(18,null,null,0);return e.stateNode=t,e}function kh(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Y0=new WeakMap;function yn(t,e){if(typeof t=="object"&&t!==null){var n=Y0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:j0(e)},Y0.set(t,e),e)}return{value:t,source:e,stack:j0(e)}}var Jr=[],ei=0,tu=null,Zl=0,mn=[],gn=0,ks=null,Qn=1,Gn="";function ca(t,e){Jr[ei++]=Zl,Jr[ei++]=tu,tu=t,Zl=e}function Uv(t,e,n){mn[gn++]=Qn,mn[gn++]=Gn,mn[gn++]=ks,ks=t;var a=Qn;t=Gn;var s=32-an(a)-1;a&=~(1<<s),n+=1;var r=32-an(e)+s;if(30<r){var l=s-s%5;r=(a&(1<<l)-1).toString(32),a>>=l,s-=l,Qn=1<<32-an(e)+s|n<<s|a,Gn=r+t}else Qn=1<<r|n<<s|a,Gn=t}function gg(t){t.return!==null&&(ca(t,1),Uv(t,1,0))}function pg(t){for(;t===tu;)tu=Jr[--ei],Jr[ei]=null,Zl=Jr[--ei],Jr[ei]=null;for(;t===ks;)ks=mn[--gn],mn[gn]=null,Gn=mn[--gn],mn[gn]=null,Qn=mn[--gn],mn[gn]=null}function Bv(t,e){mn[gn++]=Qn,mn[gn++]=Gn,mn[gn++]=ks,Qn=e.id,Gn=e.overflow,ks=t}var St=null,Oe=null,de=!1,ls=null,xn=!1,Pf=Error(A(519));function Cs(t){var e=Error(A(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(yn(e,t)),Pf}function K0(t){var e=t.stateNode,n=t.type,a=t.memoizedProps;switch(e[Nt]=t,e[$t]=a,n){case"dialog":oe("cancel",e),oe("close",e);break;case"iframe":case"object":case"embed":oe("load",e);break;case"video":case"audio":for(n=0;n<ao.length;n++)oe(ao[n],e);break;case"source":oe("error",e);break;case"img":case"image":case"link":oe("error",e),oe("load",e);break;case"details":oe("toggle",e);break;case"input":oe("invalid",e),gv(e,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":oe("invalid",e);break;case"textarea":oe("invalid",e),yv(e,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||a.suppressHydrationWarning===!0||_1(e.textContent,n)?(a.popover!=null&&(oe("beforetoggle",e),oe("toggle",e)),a.onScroll!=null&&oe("scroll",e),a.onScrollEnd!=null&&oe("scrollend",e),a.onClick!=null&&(e.onclick=pa),e=!0):e=!1,e||Cs(t,!0)}function X0(t){for(St=t.return;St;)switch(St.tag){case 5:case 31:case 13:xn=!1;return;case 27:case 3:xn=!0;return;default:St=St.return}}function Lr(t){if(t!==St)return!1;if(!de)return X0(t),de=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||om(t.type,t.memoizedProps)),n=!n),n&&Oe&&Cs(t),X0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));Oe=Ly(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));Oe=Ly(t)}else e===27?(e=Oe,Ls(t.type)?(t=hm,hm=null,Oe=t):Oe=e):Oe=St?wn(t.stateNode.nextSibling):null;return!0}function cr(){Oe=St=null,de=!1}function Ch(){var t=ls;return t!==null&&(Vt===null?Vt=t:Vt.push.apply(Vt,t),ls=null),t}function Jl(t){ls===null?ls=[t]:ls.push(t)}var Uf=ea(null),jr=null,ya=null;function Ya(t,e,n){Ie(Uf,e._currentValue),e._currentValue=n}function wa(t){t._currentValue=Uf.current,vt(Uf)}function Bf(t,e,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),t===n)break;t=t.return}}function zf(t,e,n,a){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var l=s.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=s;for(var c=0;c<e.length;c++)if(o.context===e[c]){r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Bf(r.return,n,t),a||(l=null);break e}r=o.next}}else if(s.tag===18){if(l=s.return,l===null)throw Error(A(341));l.lanes|=n,r=l.alternate,r!==null&&(r.lanes|=n),Bf(l,n,t),l=null}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}}function Li(t,e,n,a){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var l=s.alternate;if(l===null)throw Error(A(387));if(l=l.memoizedProps,l!==null){var o=s.type;ln(s.pendingProps.value,l.value)||(t!==null?t.push(o):t=[o])}}else if(s===Yc.current){if(l=s.alternate,l===null)throw Error(A(387));l.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(ro):t=[ro])}s=s.return}t!==null&&zf(e,t,n,a),e.flags|=262144}function nu(t){for(t=t.firstContext;t!==null;){if(!ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ur(t){jr=t,ya=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Et(t){return zv(jr,t)}function mc(t,e){return jr===null&&ur(t),zv(t,e)}function zv(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ya===null){if(t===null)throw Error(A(308));ya=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ya=ya.next=e;return n}var PS=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},US=dt.unstable_scheduleCallback,BS=dt.unstable_NormalPriority,rt={$$typeof:ga,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yg(){return{controller:new PS,data:new Map,refCount:0}}function Do(t){t.refCount--,t.refCount===0&&US(BS,function(){t.controller.abort()})}var jl=null,Hf=0,yi=0,ri=null;function zS(t,e){if(jl===null){var n=jl=[];Hf=0,yi=Fg(),ri={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Hf++,e.then(q0,q0),e}function q0(){if(--Hf===0&&jl!==null){ri!==null&&(ri.status="fulfilled");var t=jl;jl=null,yi=0,ri=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function HS(t,e){var n=[],a={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){a.status="fulfilled",a.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(a.status="rejected",a.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),a}var Z0=X.S;X.S=function(t,e){e1=tn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&zS(t,e),Z0!==null&&Z0(t,e)};var sr=ea(null);function xg(){var t=sr.current;return t!==null?t:Ee.pooledCache}function Oc(t,e){e===null?Ie(sr,sr.current):Ie(sr,e.pool)}function Hv(){var t=xg();return t===null?null:{parent:rt._currentValue,pool:t}}var Pi=Error(A(460)),bg=Error(A(474)),ud=Error(A(542)),au={then:function(){}};function J0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fv(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(pa,pa),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ty(t),t;default:if(typeof e.status=="string")e.then(pa,pa);else{if(t=Ee,t!==null&&100<t.shellSuspendCounter)throw Error(A(482));t=e,t.status="pending",t.then(function(a){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=a}},function(a){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=a}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ty(t),t}throw rr=e,Pi}}function Ys(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(rr=n,Pi):n}}var rr=null;function ey(){if(rr===null)throw Error(A(459));var t=rr;return rr=null,t}function ty(t){if(t===Pi||t===ud)throw Error(A(483))}var ii=null,eo=0;function gc(t){var e=eo;return eo+=1,ii===null&&(ii=[]),Fv(ii,t,e)}function ll(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function pc(t,e){throw e.$$typeof===EN?Error(A(525)):(t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Vv(t){function e(y,g){if(t){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function a(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(y,g){return y=_a(y,g),y.index=0,y.sibling=null,y}function r(y,g,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=67108866,g):x):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function l(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function o(y,g,x,v){return g===null||g.tag!==6?(g=wh(x,y.mode,v),g.return=y,g):(g=s(g,x),g.return=y,g)}function c(y,g,x,v){var k=x.type;return k===Qr?f(y,g,x.props.children,v,x.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===$a&&Ys(k)===g.type)?(g=s(g,x.props),ll(g,x),g.return=y,g):(g=Mc(x.type,x.key,x.props,null,y.mode,v),ll(g,x),g.return=y,g)}function u(y,g,x,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=kh(x,y.mode,v),g.return=y,g):(g=s(g,x.children||[]),g.return=y,g)}function f(y,g,x,v,k){return g===null||g.tag!==7?(g=ar(x,y.mode,v,k),g.return=y,g):(g=s(g,x),g.return=y,g)}function d(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=wh(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case oc:return x=Mc(g.type,g.key,g.props,null,y.mode,x),ll(x,g),x.return=y,x;case pl:return g=kh(g,y.mode,x),g.return=y,g;case $a:return g=Ys(g),d(y,g,x)}if(yl(g)||sl(g))return g=ar(g,y.mode,x,null),g.return=y,g;if(typeof g.then=="function")return d(y,gc(g),x);if(g.$$typeof===ga)return d(y,mc(y,g),x);pc(y,g)}return null}function h(y,g,x,v){var k=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return k!==null?null:o(y,g,""+x,v);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oc:return x.key===k?c(y,g,x,v):null;case pl:return x.key===k?u(y,g,x,v):null;case $a:return x=Ys(x),h(y,g,x,v)}if(yl(x)||sl(x))return k!==null?null:f(y,g,x,v,null);if(typeof x.then=="function")return h(y,g,gc(x),v);if(x.$$typeof===ga)return h(y,g,mc(y,x),v);pc(y,x)}return null}function m(y,g,x,v,k){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return y=y.get(x)||null,o(g,y,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case oc:return y=y.get(v.key===null?x:v.key)||null,c(g,y,v,k);case pl:return y=y.get(v.key===null?x:v.key)||null,u(g,y,v,k);case $a:return v=Ys(v),m(y,g,x,v,k)}if(yl(v)||sl(v))return y=y.get(x)||null,f(g,y,v,k,null);if(typeof v.then=="function")return m(y,g,x,gc(v),k);if(v.$$typeof===ga)return m(y,g,x,mc(g,v),k);pc(g,v)}return null}function b(y,g,x,v){for(var k=null,S=null,C=g,j=g=0,T=null;C!==null&&j<x.length;j++){C.index>j?(T=C,C=null):T=C.sibling;var E=h(y,C,x[j],v);if(E===null){C===null&&(C=T);break}t&&C&&E.alternate===null&&e(y,C),g=r(E,g,j),S===null?k=E:S.sibling=E,S=E,C=T}if(j===x.length)return n(y,C),de&&ca(y,j),k;if(C===null){for(;j<x.length;j++)C=d(y,x[j],v),C!==null&&(g=r(C,g,j),S===null?k=C:S.sibling=C,S=C);return de&&ca(y,j),k}for(C=a(C);j<x.length;j++)T=m(C,y,j,x[j],v),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?j:T.key),g=r(T,g,j),S===null?k=T:S.sibling=T,S=T);return t&&C.forEach(function(N){return e(y,N)}),de&&ca(y,j),k}function _(y,g,x,v){if(x==null)throw Error(A(151));for(var k=null,S=null,C=g,j=g=0,T=null,E=x.next();C!==null&&!E.done;j++,E=x.next()){C.index>j?(T=C,C=null):T=C.sibling;var N=h(y,C,E.value,v);if(N===null){C===null&&(C=T);break}t&&C&&N.alternate===null&&e(y,C),g=r(N,g,j),S===null?k=N:S.sibling=N,S=N,C=T}if(E.done)return n(y,C),de&&ca(y,j),k;if(C===null){for(;!E.done;j++,E=x.next())E=d(y,E.value,v),E!==null&&(g=r(E,g,j),S===null?k=E:S.sibling=E,S=E);return de&&ca(y,j),k}for(C=a(C);!E.done;j++,E=x.next())E=m(C,y,j,E.value,v),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?j:E.key),g=r(E,g,j),S===null?k=E:S.sibling=E,S=E);return t&&C.forEach(function(D){return e(y,D)}),de&&ca(y,j),k}function w(y,g,x,v){if(typeof x=="object"&&x!==null&&x.type===Qr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case oc:e:{for(var k=x.key;g!==null;){if(g.key===k){if(k=x.type,k===Qr){if(g.tag===7){n(y,g.sibling),v=s(g,x.props.children),v.return=y,y=v;break e}}else if(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===$a&&Ys(k)===g.type){n(y,g.sibling),v=s(g,x.props),ll(v,x),v.return=y,y=v;break e}n(y,g);break}else e(y,g);g=g.sibling}x.type===Qr?(v=ar(x.props.children,y.mode,v,x.key),v.return=y,y=v):(v=Mc(x.type,x.key,x.props,null,y.mode,v),ll(v,x),v.return=y,y=v)}return l(y);case pl:e:{for(k=x.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),v=s(g,x.children||[]),v.return=y,y=v;break e}else{n(y,g);break}else e(y,g);g=g.sibling}v=kh(x,y.mode,v),v.return=y,y=v}return l(y);case $a:return x=Ys(x),w(y,g,x,v)}if(yl(x))return b(y,g,x,v);if(sl(x)){if(k=sl(x),typeof k!="function")throw Error(A(150));return x=k.call(x),_(y,g,x,v)}if(typeof x.then=="function")return w(y,g,gc(x),v);if(x.$$typeof===ga)return w(y,g,mc(y,x),v);pc(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),v=s(g,x),v.return=y,y=v):(n(y,g),v=wh(x,y.mode,v),v.return=y,y=v),l(y)):n(y,g)}return function(y,g,x,v){try{eo=0;var k=w(y,g,x,v);return ii=null,k}catch(C){if(C===Pi||C===ud)throw C;var S=Zt(29,C,null,y.mode);return S.lanes=v,S.return=y,S}finally{}}}var dr=Vv(!0),Qv=Vv(!1),Wa=!1;function vg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ff(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function os(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function cs(t,e,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,ge&2){var s=a.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),a.pending=e,e=eu(t),Dv(t,null,n),e}return cd(t,a,e,n),eu(t)}function Tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,ov(t,n)}}function Nh(t,e){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var l={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=l:r=r.next=l,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Vf=!1;function Al(){if(Vf){var t=ri;if(t!==null)throw t}}function Il(t,e,n,a){Vf=!1;var s=t.updateQueue;Wa=!1;var r=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?r=u:l.next=u,l=c;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==l&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;l=0,f=u=c=null,o=r;do{var h=o.lane&-536870913,m=h!==o.lane;if(m?(ue&h)===h:(a&h)===h){h!==0&&h===yi&&(Vf=!0),f!==null&&(f=f.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var b=t,_=o;h=e;var w=n;switch(_.tag){case 1:if(b=_.payload,typeof b=="function"){d=b.call(w,d,h);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,h=typeof b=="function"?b.call(w,d,h):b,h==null)break e;d=Le({},d,h);break e;case 2:Wa=!0}}h=o.callback,h!==null&&(t.flags|=64,m&&(t.flags|=8192),m=s.callbacks,m===null?s.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,l|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,r===null&&(s.shared.lanes=0),Ss|=l,t.lanes=l,t.memoizedState=d}}function Gv(t,e){if(typeof t!="function")throw Error(A(191,t));t.call(e)}function $v(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Gv(n[t],e)}var xi=ea(null),su=ea(0);function ny(t,e){t=Ia,Ie(su,t),Ie(xi,e),Ia=t|e.baseLanes}function Qf(){Ie(su,Ia),Ie(xi,xi.current)}function _g(){Ia=su.current,vt(xi),vt(su)}var on=ea(null),_n=null;function Ka(t){var e=t.alternate;Ie(Ze,Ze.current&1),Ie(on,t),_n===null&&(e===null||xi.current!==null||e.memoizedState!==null)&&(_n=t)}function Gf(t){Ie(Ze,Ze.current),Ie(on,t),_n===null&&(_n=t)}function Wv(t){t.tag===22?(Ie(Ze,Ze.current),Ie(on,t),_n===null&&(_n=t)):Xa()}function Xa(){Ie(Ze,Ze.current),Ie(on,on.current)}function qt(t){vt(on),_n===t&&(_n=null),vt(Ze)}var Ze=ea(0);function ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||um(n)||dm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ja=0,te=null,Ne=null,at=null,iu=!1,li=!1,hr=!1,lu=0,to=0,oi=null,FS=0;function Ge(){throw Error(A(321))}function wg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function kg(t,e,n,a,s,r){return ja=r,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,X.H=t===null||t.memoizedState===null?C_:Og,hr=!1,r=n(a,s),hr=!1,li&&(r=Kv(e,n,a,s)),Yv(t),r}function Yv(t){X.H=no;var e=Ne!==null&&Ne.next!==null;if(ja=0,at=Ne=te=null,iu=!1,to=0,oi=null,e)throw Error(A(300));t===null||it||(t=t.dependencies,t!==null&&nu(t)&&(it=!0))}function Kv(t,e,n,a){te=t;var s=0;do{if(li&&(oi=null),to=0,li=!1,25<=s)throw Error(A(301));if(s+=1,at=Ne=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}X.H=N_,r=e(n,a)}while(li);return r}function VS(){var t=X.H,e=t.useState()[0];return e=typeof e.then=="function"?Lo(e):e,t=t.useState()[0],(Ne!==null?Ne.memoizedState:null)!==t&&(te.flags|=1024),e}function Cg(){var t=lu!==0;return lu=0,t}function Ng(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Sg(t){if(iu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}iu=!1}ja=0,at=Ne=te=null,li=!1,to=lu=0,oi=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?te.memoizedState=at=t:at=at.next=t,at}function et(){if(Ne===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=at===null?te.memoizedState:at.next;if(e!==null)at=e,Ne=t;else{if(t===null)throw te.alternate===null?Error(A(467)):Error(A(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},at===null?te.memoizedState=at=t:at=at.next=t}return at}function dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lo(t){var e=to;return to+=1,oi===null&&(oi=[]),t=Fv(oi,t,e),e=te,(at===null?e.memoizedState:at.next)===null&&(e=e.alternate,X.H=e===null||e.memoizedState===null?C_:Og),t}function hd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Lo(t);if(t.$$typeof===ga)return Et(t)}throw Error(A(438,String(t)))}function Eg(t){var e=null,n=te.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var a=te.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(e={data:a.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=dd(),te.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),a=0;a<t;a++)n[a]=jN;return e.index++,n}function Ta(t,e){return typeof e=="function"?e(t):e}function Dc(t){var e=et();return jg(e,Ne,t)}function jg(t,e,n){var a=t.queue;if(a===null)throw Error(A(311));a.lastRenderedReducer=n;var s=t.baseQueue,r=a.pending;if(r!==null){if(s!==null){var l=s.next;s.next=r.next,r.next=l}e.baseQueue=s=r,a.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var o=l=null,c=null,u=e,f=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(ue&d)===d:(ja&d)===d){var h=u.revertLane;if(h===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===yi&&(f=!0);else if((ja&h)===h){u=u.next,h===yi&&(f=!0);continue}else d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=d,l=r):c=c.next=d,te.lanes|=h,Ss|=h;d=u.action,hr&&n(r,d),r=u.hasEagerState?u.eagerState:n(r,d)}else h={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=h,l=r):c=c.next=h,te.lanes|=d,Ss|=d;u=u.next}while(u!==null&&u!==e);if(c===null?l=r:c.next=o,!ln(r,t.memoizedState)&&(it=!0,f&&(n=ri,n!==null)))throw n;t.memoizedState=r,t.baseState=l,t.baseQueue=c,a.lastRenderedState=r}return s===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Sh(t){var e=et(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var a=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do r=t(r,l.action),l=l.next;while(l!==s);ln(r,e.memoizedState)||(it=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,a]}function Xv(t,e,n){var a=te,s=et(),r=de;if(r){if(n===void 0)throw Error(A(407));n=n()}else n=e();var l=!ln((Ne||s).memoizedState,n);if(l&&(s.memoizedState=n,it=!0),s=s.queue,Tg(Jv.bind(null,a,s,t),[t]),s.getSnapshot!==e||l||at!==null&&at.memoizedState.tag&1){if(a.flags|=2048,bi(9,{destroy:void 0},Zv.bind(null,a,s,n,e),null),Ee===null)throw Error(A(349));r||ja&127||qv(a,e,n)}return n}function qv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e=dd(),te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zv(t,e,n,a){e.value=n,e.getSnapshot=a,e_(e)&&t_(t)}function Jv(t,e,n){return n(function(){e_(e)&&t_(t)})}function e_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function t_(t){var e=Er(t,2);e!==null&&Gt(e,t,2)}function $f(t){var e=Ot();if(typeof t=="function"){var n=t;if(t=n(),hr){Za(!0);try{n()}finally{Za(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e}function n_(t,e,n,a){return t.baseState=n,jg(t,Ne,typeof a=="function"?a:Ta)}function QS(t,e,n,a,s){if(md(t))throw Error(A(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(l){r.listeners.push(l)}};X.T!==null?n(!0):r.isTransition=!1,a(r),n=e.pending,n===null?(r.next=e.pending=r,a_(e,r)):(r.next=n.next,e.pending=n.next=r)}}function a_(t,e){var n=e.action,a=e.payload,s=t.state;if(e.isTransition){var r=X.T,l={};X.T=l;try{var o=n(s,a),c=X.S;c!==null&&c(l,o),ay(t,e,o)}catch(u){Wf(t,e,u)}finally{r!==null&&l.types!==null&&(r.types=l.types),X.T=r}}else try{r=n(s,a),ay(t,e,r)}catch(u){Wf(t,e,u)}}function ay(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){sy(t,e,a)},function(a){return Wf(t,e,a)}):sy(t,e,n)}function sy(t,e,n){e.status="fulfilled",e.value=n,s_(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,a_(t,n)))}function Wf(t,e,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do e.status="rejected",e.reason=n,s_(e),e=e.next;while(e!==a)}t.action=null}function s_(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function r_(t,e){return e}function ry(t,e){if(de){var n=Ee.formState;if(n!==null){e:{var a=te;if(de){if(Oe){t:{for(var s=Oe,r=xn;s.nodeType!==8;){if(!r){s=null;break t}if(s=wn(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Oe=wn(s.nextSibling),a=s.data==="F!";break e}}Cs(a)}a=!1}a&&(e=n[0])}}return n=Ot(),n.memoizedState=n.baseState=e,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:e},n.queue=a,n=__.bind(null,te,a),a.dispatch=n,a=$f(!1),r=Mg.bind(null,te,!1,a.queue),a=Ot(),s={state:e,dispatch:null,action:t,pending:null},a.queue=s,n=QS.bind(null,te,s,r,n),s.dispatch=n,a.memoizedState=t,[e,n,!1]}function iy(t){var e=et();return i_(e,Ne,t)}function i_(t,e,n){if(e=jg(t,e,r_)[0],t=Dc(Ta)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var a=Lo(e)}catch(l){throw l===Pi?ud:l}else a=e;e=et();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(te.flags|=2048,bi(9,{destroy:void 0},GS.bind(null,s,n),null)),[a,r,t]}function GS(t,e){t.action=e}function ly(t){var e=et(),n=Ne;if(n!==null)return i_(e,n,t);et(),e=e.memoizedState,n=et();var a=n.queue.dispatch;return n.memoizedState=t,[e,a,!1]}function bi(t,e,n,a){return t={tag:t,create:n,deps:a,inst:e,next:null},e=te.updateQueue,e===null&&(e=dd(),te.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,e.lastEffect=t),t}function l_(){return et().memoizedState}function Lc(t,e,n,a){var s=Ot();te.flags|=t,s.memoizedState=bi(1|e,{destroy:void 0},n,a===void 0?null:a)}function fd(t,e,n,a){var s=et();a=a===void 0?null:a;var r=s.memoizedState.inst;Ne!==null&&a!==null&&wg(a,Ne.memoizedState.deps)?s.memoizedState=bi(e,r,n,a):(te.flags|=t,s.memoizedState=bi(1|e,r,n,a))}function oy(t,e){Lc(8390656,8,t,e)}function Tg(t,e){fd(2048,8,t,e)}function $S(t){te.flags|=4;var e=te.updateQueue;if(e===null)e=dd(),te.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function o_(t){var e=et().memoizedState;return $S({ref:e,nextImpl:t}),function(){if(ge&2)throw Error(A(440));return e.impl.apply(void 0,arguments)}}function c_(t,e){return fd(4,2,t,e)}function u_(t,e){return fd(4,4,t,e)}function d_(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function h_(t,e,n){n=n!=null?n.concat([t]):null,fd(4,4,d_.bind(null,e,t),n)}function Ag(){}function f_(t,e){var n=et();e=e===void 0?null:e;var a=n.memoizedState;return e!==null&&wg(e,a[1])?a[0]:(n.memoizedState=[t,e],t)}function m_(t,e){var n=et();e=e===void 0?null:e;var a=n.memoizedState;if(e!==null&&wg(e,a[1]))return a[0];if(a=t(),hr){Za(!0);try{t()}finally{Za(!1)}}return n.memoizedState=[a,e],a}function Ig(t,e,n){return n===void 0||ja&1073741824&&!(ue&261930)?t.memoizedState=e:(t.memoizedState=n,t=n1(),te.lanes|=t,Ss|=t,n)}function g_(t,e,n,a){return ln(n,e)?n:xi.current!==null?(t=Ig(t,n,a),ln(t,e)||(it=!0),t):!(ja&42)||ja&1073741824&&!(ue&261930)?(it=!0,t.memoizedState=n):(t=n1(),te.lanes|=t,Ss|=t,e)}function p_(t,e,n,a,s){var r=pe.p;pe.p=r!==0&&8>r?r:8;var l=X.T,o={};X.T=o,Mg(t,!1,e,n);try{var c=s(),u=X.S;if(u!==null&&u(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=HS(c,a);Rl(t,e,f,sn(t))}else Rl(t,e,a,sn(t))}catch(d){Rl(t,e,{then:function(){},status:"rejected",reason:d},sn())}finally{pe.p=r,l!==null&&o.types!==null&&(l.types=o.types),X.T=l}}function WS(){}function Yf(t,e,n,a){if(t.tag!==5)throw Error(A(476));var s=y_(t).queue;p_(t,s,e,nr,n===null?WS:function(){return x_(t),n(a)})}function y_(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:nr,baseState:nr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:nr},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function x_(t){var e=y_(t);e.next===null&&(e=t.alternate.memoizedState),Rl(t,e.next.queue,{},sn())}function Rg(){return Et(ro)}function b_(){return et().memoizedState}function v_(){return et().memoizedState}function YS(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=sn();t=os(n);var a=cs(e,t,n);a!==null&&(Gt(a,e,n),Tl(a,e,n)),e={cache:yg()},t.payload=e;return}e=e.return}}function KS(t,e,n){var a=sn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},md(t)?w_(e,n):(n=fg(t,e,n,a),n!==null&&(Gt(n,t,a),k_(n,e,a)))}function __(t,e,n){var a=sn();Rl(t,e,n,a)}function Rl(t,e,n,a){var s={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(md(t))w_(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var l=e.lastRenderedState,o=r(l,n);if(s.hasEagerState=!0,s.eagerState=o,ln(o,l))return cd(t,e,s,0),Ee===null&&od(),!1}catch{}finally{}if(n=fg(t,e,s,a),n!==null)return Gt(n,t,a),k_(n,e,a),!0}return!1}function Mg(t,e,n,a){if(a={lane:2,revertLane:Fg(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},md(t)){if(e)throw Error(A(479))}else e=fg(t,n,a,2),e!==null&&Gt(e,t,2)}function md(t){var e=t.alternate;return t===te||e!==null&&e===te}function w_(t,e){li=iu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k_(t,e,n){if(n&4194048){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,ov(t,n)}}var no={readContext:Et,use:hd,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};no.useEffectEvent=Ge;var C_={readContext:Et,use:hd,useCallback:function(t,e){return Ot().memoizedState=[t,e===void 0?null:e],t},useContext:Et,useEffect:oy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Lc(4194308,4,d_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lc(4194308,4,t,e)},useInsertionEffect:function(t,e){Lc(4,2,t,e)},useMemo:function(t,e){var n=Ot();e=e===void 0?null:e;var a=t();if(hr){Za(!0);try{t()}finally{Za(!1)}}return n.memoizedState=[a,e],a},useReducer:function(t,e,n){var a=Ot();if(n!==void 0){var s=n(e);if(hr){Za(!0);try{n(e)}finally{Za(!1)}}}else s=e;return a.memoizedState=a.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=KS.bind(null,te,t),[a.memoizedState,t]},useRef:function(t){var e=Ot();return t={current:t},e.memoizedState=t},useState:function(t){t=$f(t);var e=t.queue,n=__.bind(null,te,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Ag,useDeferredValue:function(t,e){var n=Ot();return Ig(n,t,e)},useTransition:function(){var t=$f(!1);return t=p_.bind(null,te,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var a=te,s=Ot();if(de){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),Ee===null)throw Error(A(349));ue&127||qv(a,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,oy(Jv.bind(null,a,r,t),[t]),a.flags|=2048,bi(9,{destroy:void 0},Zv.bind(null,a,r,n,e),null),n},useId:function(){var t=Ot(),e=Ee.identifierPrefix;if(de){var n=Gn,a=Qn;n=(a&~(1<<32-an(a)-1)).toString(32)+n,e="_"+e+"R_"+n,n=lu++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=FS++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Rg,useFormState:ry,useActionState:ry,useOptimistic:function(t){var e=Ot();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Mg.bind(null,te,!0,n),n.dispatch=e,[t,e]},useMemoCache:Eg,useCacheRefresh:function(){return Ot().memoizedState=YS.bind(null,te)},useEffectEvent:function(t){var e=Ot(),n={impl:t};return e.memoizedState=n,function(){if(ge&2)throw Error(A(440));return n.impl.apply(void 0,arguments)}}},Og={readContext:Et,use:hd,useCallback:f_,useContext:Et,useEffect:Tg,useImperativeHandle:h_,useInsertionEffect:c_,useLayoutEffect:u_,useMemo:m_,useReducer:Dc,useRef:l_,useState:function(){return Dc(Ta)},useDebugValue:Ag,useDeferredValue:function(t,e){var n=et();return g_(n,Ne.memoizedState,t,e)},useTransition:function(){var t=Dc(Ta)[0],e=et().memoizedState;return[typeof t=="boolean"?t:Lo(t),e]},useSyncExternalStore:Xv,useId:b_,useHostTransitionStatus:Rg,useFormState:iy,useActionState:iy,useOptimistic:function(t,e){var n=et();return n_(n,Ne,t,e)},useMemoCache:Eg,useCacheRefresh:v_};Og.useEffectEvent=o_;var N_={readContext:Et,use:hd,useCallback:f_,useContext:Et,useEffect:Tg,useImperativeHandle:h_,useInsertionEffect:c_,useLayoutEffect:u_,useMemo:m_,useReducer:Sh,useRef:l_,useState:function(){return Sh(Ta)},useDebugValue:Ag,useDeferredValue:function(t,e){var n=et();return Ne===null?Ig(n,t,e):g_(n,Ne.memoizedState,t,e)},useTransition:function(){var t=Sh(Ta)[0],e=et().memoizedState;return[typeof t=="boolean"?t:Lo(t),e]},useSyncExternalStore:Xv,useId:b_,useHostTransitionStatus:Rg,useFormState:ly,useActionState:ly,useOptimistic:function(t,e){var n=et();return Ne!==null?n_(n,Ne,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Eg,useCacheRefresh:v_};N_.useEffectEvent=o_;function Eh(t,e,n,a){e=t.memoizedState,n=n(a,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kf={enqueueSetState:function(t,e,n){t=t._reactInternals;var a=sn(),s=os(a);s.payload=e,n!=null&&(s.callback=n),e=cs(t,s,a),e!==null&&(Gt(e,t,a),Tl(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var a=sn(),s=os(a);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=cs(t,s,a),e!==null&&(Gt(e,t,a),Tl(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),a=os(n);a.tag=2,e!=null&&(a.callback=e),e=cs(t,a,n),e!==null&&(Gt(e,t,n),Tl(e,t,n))}};function cy(t,e,n,a,s,r,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,r,l):e.prototype&&e.prototype.isPureReactComponent?!ql(n,a)||!ql(s,r):!0}function uy(t,e,n,a){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,a),e.state!==t&&Kf.enqueueReplaceState(e,e.state,null)}function fr(t,e){var n=e;if("ref"in e){n={};for(var a in e)a!=="ref"&&(n[a]=e[a])}if(t=t.defaultProps){n===e&&(n=Le({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function S_(t){Jc(t)}function E_(t){console.error(t)}function j_(t){Jc(t)}function ou(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(a){setTimeout(function(){throw a})}}function dy(t,e,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Xf(t,e,n){return n=os(n),n.tag=3,n.payload={element:null},n.callback=function(){ou(t,e)},n}function T_(t){return t=os(t),t.tag=3,t}function A_(t,e,n,a){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=a.value;t.payload=function(){return s(r)},t.callback=function(){dy(e,n,a)}}var l=n.stateNode;l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){dy(e,n,a),typeof s!="function"&&(us===null?us=new Set([this]):us.add(this));var o=a.stack;this.componentDidCatch(a.value,{componentStack:o!==null?o:""})})}function XS(t,e,n,a,s){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(e=n.alternate,e!==null&&Li(e,n,s,!0),n=on.current,n!==null){switch(n.tag){case 31:case 13:return _n===null?fu():n.alternate===null&&$e===0&&($e=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===au?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([a]):e.add(a),Uh(t,a,s)),!1;case 22:return n.flags|=65536,a===au?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([a]):n.add(a)),Uh(t,a,s)),!1}throw Error(A(435,n.tag))}return Uh(t,a,s),fu(),!1}if(de)return e=on.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,a!==Pf&&(t=Error(A(422),{cause:a}),Jl(yn(t,n)))):(a!==Pf&&(e=Error(A(423),{cause:a}),Jl(yn(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,a=yn(a,n),s=Xf(t.stateNode,a,s),Nh(t,s),$e!==4&&($e=2)),!1;var r=Error(A(520),{cause:a});if(r=yn(r,n),Dl===null?Dl=[r]:Dl.push(r),$e!==4&&($e=2),e===null)return!0;a=yn(a,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Xf(n.stateNode,a,t),Nh(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(us===null||!us.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=T_(s),A_(s,t,n,a),Nh(n,s),!1}n=n.return}while(n!==null);return!1}var Dg=Error(A(461)),it=!1;function Ct(t,e,n,a){e.child=t===null?Qv(e,null,n,a):dr(e,t.child,n,a)}function hy(t,e,n,a,s){n=n.render;var r=e.ref;if("ref"in a){var l={};for(var o in a)o!=="ref"&&(l[o]=a[o])}else l=a;return ur(e),a=kg(t,e,n,l,r,s),o=Cg(),t!==null&&!it?(Ng(t,e,s),Aa(t,e,s)):(de&&o&&gg(e),e.flags|=1,Ct(t,e,a,s),e.child)}function fy(t,e,n,a,s){if(t===null){var r=n.type;return typeof r=="function"&&!mg(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,I_(t,e,r,a,s)):(t=Mc(n.type,null,a,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!Lg(t,s)){var l=r.memoizedProps;if(n=n.compare,n=n!==null?n:ql,n(l,a)&&t.ref===e.ref)return Aa(t,e,s)}return e.flags|=1,t=_a(r,a),t.ref=e.ref,t.return=e,e.child=t}function I_(t,e,n,a,s){if(t!==null){var r=t.memoizedProps;if(ql(r,a)&&t.ref===e.ref)if(it=!1,e.pendingProps=a=r,Lg(t,s))t.flags&131072&&(it=!0);else return e.lanes=t.lanes,Aa(t,e,s)}return qf(t,e,n,a,s)}function R_(t,e,n,a){var s=a.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(a=e.child=t.child,s=0;a!==null;)s=s|a.lanes|a.childLanes,a=a.sibling;a=s&~r}else a=0,e.child=null;return my(t,e,r,n,a)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Oc(e,r!==null?r.cachePool:null),r!==null?ny(e,r):Qf(),Wv(e);else return a=e.lanes=536870912,my(t,e,r!==null?r.baseLanes|n:n,n,a)}else r!==null?(Oc(e,r.cachePool),ny(e,r),Xa(),e.memoizedState=null):(t!==null&&Oc(e,null),Qf(),Xa());return Ct(t,e,s,n),e.child}function bl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function my(t,e,n,a,s){var r=xg();return r=r===null?null:{parent:rt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&Oc(e,null),Qf(),Wv(e),t!==null&&Li(t,e,a,!0),e.childLanes=s,null}function Pc(t,e){return e=cu({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function gy(t,e,n){return dr(e,t.child,null,n),t=Pc(e,e.pendingProps),t.flags|=2,qt(e),e.memoizedState=null,t}function qS(t,e,n){var a=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(de){if(a.mode==="hidden")return t=Pc(e,a),e.lanes=536870912,bl(null,t);if(Gf(e),(t=Oe)?(t=C1(t,xn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ks!==null?{id:Qn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},n=Pv(t),n.return=e,e.child=n,St=e,Oe=null)):t=null,t===null)throw Cs(e);return e.lanes=536870912,null}return Pc(e,a)}var r=t.memoizedState;if(r!==null){var l=r.dehydrated;if(Gf(e),s)if(e.flags&256)e.flags&=-257,e=gy(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(A(558));else if(it||Li(t,e,n,!1),s=(n&t.childLanes)!==0,it||s){if(a=Ee,a!==null&&(l=cv(a,n),l!==0&&l!==r.retryLane))throw r.retryLane=l,Er(t,l),Gt(a,t,l),Dg;fu(),e=gy(t,e,n)}else t=r.treeContext,Oe=wn(l.nextSibling),St=e,de=!0,ls=null,xn=!1,t!==null&&Bv(e,t),e=Pc(e,a),e.flags|=4096;return e}return t=_a(t.child,{mode:a.mode,children:a.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Uc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(A(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function qf(t,e,n,a,s){return ur(e),n=kg(t,e,n,a,void 0,s),a=Cg(),t!==null&&!it?(Ng(t,e,s),Aa(t,e,s)):(de&&a&&gg(e),e.flags|=1,Ct(t,e,n,s),e.child)}function py(t,e,n,a,s,r){return ur(e),e.updateQueue=null,n=Kv(e,a,n,s),Yv(t),a=Cg(),t!==null&&!it?(Ng(t,e,r),Aa(t,e,r)):(de&&a&&gg(e),e.flags|=1,Ct(t,e,n,r),e.child)}function yy(t,e,n,a,s){if(ur(e),e.stateNode===null){var r=Zr,l=n.contextType;typeof l=="object"&&l!==null&&(r=Et(l)),r=new n(a,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Kf,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=a,r.state=e.memoizedState,r.refs={},vg(e),l=n.contextType,r.context=typeof l=="object"&&l!==null?Et(l):Zr,r.state=e.memoizedState,l=n.getDerivedStateFromProps,typeof l=="function"&&(Eh(e,n,l,a),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(l=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),l!==r.state&&Kf.enqueueReplaceState(r,r.state,null),Il(e,a,r,s),Al(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),a=!0}else if(t===null){r=e.stateNode;var o=e.memoizedProps,c=fr(n,o);r.props=c;var u=r.context,f=n.contextType;l=Zr,typeof f=="object"&&f!==null&&(l=Et(f));var d=n.getDerivedStateFromProps;f=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,f||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||u!==l)&&uy(e,r,a,l),Wa=!1;var h=e.memoizedState;r.state=h,Il(e,a,r,s),Al(),u=e.memoizedState,o||h!==u||Wa?(typeof d=="function"&&(Eh(e,n,d,a),u=e.memoizedState),(c=Wa||cy(e,n,c,a,h,u,l))?(f||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=u),r.props=a,r.state=u,r.context=l,a=c):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{r=e.stateNode,Ff(t,e),l=e.memoizedProps,f=fr(n,l),r.props=f,d=e.pendingProps,h=r.context,u=n.contextType,c=Zr,typeof u=="object"&&u!==null&&(c=Et(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l!==d||h!==c)&&uy(e,r,a,c),Wa=!1,h=e.memoizedState,r.state=h,Il(e,a,r,s),Al();var m=e.memoizedState;l!==d||h!==m||Wa||t!==null&&t.dependencies!==null&&nu(t.dependencies)?(typeof o=="function"&&(Eh(e,n,o,a),m=e.memoizedState),(f=Wa||cy(e,n,f,a,h,m,c)||t!==null&&t.dependencies!==null&&nu(t.dependencies))?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(a,m,c),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(a,m,c)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=m),r.props=a,r.state=m,r.context=c,a=f):(typeof r.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),a=!1)}return r=a,Uc(t,e),a=(e.flags&128)!==0,r||a?(r=e.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&a?(e.child=dr(e,t.child,null,s),e.child=dr(e,null,n,s)):Ct(t,e,n,s),e.memoizedState=r.state,t=e.child):t=Aa(t,e,s),t}function xy(t,e,n,a){return cr(),e.flags|=256,Ct(t,e,n,a),e.child}var jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Th(t){return{baseLanes:t,cachePool:Hv()}}function Ah(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=en),t}function M_(t,e,n){var a=e.pendingProps,s=!1,r=(e.flags&128)!==0,l;if((l=r)||(l=t!==null&&t.memoizedState===null?!1:(Ze.current&2)!==0),l&&(s=!0,e.flags&=-129),l=(e.flags&32)!==0,e.flags&=-33,t===null){if(de){if(s?Ka(e):Xa(),(t=Oe)?(t=C1(t,xn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ks!==null?{id:Qn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},n=Pv(t),n.return=e,e.child=n,St=e,Oe=null)):t=null,t===null)throw Cs(e);return dm(t)?e.lanes=32:e.lanes=536870912,null}var o=a.children;return a=a.fallback,s?(Xa(),s=e.mode,o=cu({mode:"hidden",children:o},s),a=ar(a,s,n,null),o.return=e,a.return=e,o.sibling=a,e.child=o,a=e.child,a.memoizedState=Th(n),a.childLanes=Ah(t,l,n),e.memoizedState=jh,bl(null,a)):(Ka(e),Zf(e,o))}var c=t.memoizedState;if(c!==null&&(o=c.dehydrated,o!==null)){if(r)e.flags&256?(Ka(e),e.flags&=-257,e=Ih(t,e,n)):e.memoizedState!==null?(Xa(),e.child=t.child,e.flags|=128,e=null):(Xa(),o=a.fallback,s=e.mode,a=cu({mode:"visible",children:a.children},s),o=ar(o,s,n,null),o.flags|=2,a.return=e,o.return=e,a.sibling=o,e.child=a,dr(e,t.child,null,n),a=e.child,a.memoizedState=Th(n),a.childLanes=Ah(t,l,n),e.memoizedState=jh,e=bl(null,a));else if(Ka(e),dm(o)){if(l=o.nextSibling&&o.nextSibling.dataset,l)var u=l.dgst;l=u,a=Error(A(419)),a.stack="",a.digest=l,Jl({value:a,source:null,stack:null}),e=Ih(t,e,n)}else if(it||Li(t,e,n,!1),l=(n&t.childLanes)!==0,it||l){if(l=Ee,l!==null&&(a=cv(l,n),a!==0&&a!==c.retryLane))throw c.retryLane=a,Er(t,a),Gt(l,t,a),Dg;um(o)||fu(),e=Ih(t,e,n)}else um(o)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Oe=wn(o.nextSibling),St=e,de=!0,ls=null,xn=!1,t!==null&&Bv(e,t),e=Zf(e,a.children),e.flags|=4096);return e}return s?(Xa(),o=a.fallback,s=e.mode,c=t.child,u=c.sibling,a=_a(c,{mode:"hidden",children:a.children}),a.subtreeFlags=c.subtreeFlags&65011712,u!==null?o=_a(u,o):(o=ar(o,s,n,null),o.flags|=2),o.return=e,a.return=e,a.sibling=o,e.child=a,bl(null,a),a=e.child,o=t.child.memoizedState,o===null?o=Th(n):(s=o.cachePool,s!==null?(c=rt._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Hv(),o={baseLanes:o.baseLanes|n,cachePool:s}),a.memoizedState=o,a.childLanes=Ah(t,l,n),e.memoizedState=jh,bl(t.child,a)):(Ka(e),n=t.child,t=n.sibling,n=_a(n,{mode:"visible",children:a.children}),n.return=e,n.sibling=null,t!==null&&(l=e.deletions,l===null?(e.deletions=[t],e.flags|=16):l.push(t)),e.child=n,e.memoizedState=null,n)}function Zf(t,e){return e=cu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function cu(t,e){return t=Zt(22,t,null,e),t.lanes=0,t}function Ih(t,e,n){return dr(e,t.child,null,n),t=Zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function by(t,e,n){t.lanes|=e;var a=t.alternate;a!==null&&(a.lanes|=e),Bf(t.return,e,n)}function Rh(t,e,n,a,s,r){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s,treeForkCount:r}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=n,l.tailMode=s,l.treeForkCount=r)}function O_(t,e,n){var a=e.pendingProps,s=a.revealOrder,r=a.tail;a=a.children;var l=Ze.current,o=(l&2)!==0;if(o?(l=l&1|2,e.flags|=128):l&=1,Ie(Ze,l),Ct(t,e,a,n),a=de?Zl:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,n,e);else if(t.tag===19)by(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ru(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rh(e,!1,s,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ru(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rh(e,!0,n,null,r,a);break;case"together":Rh(e,!1,null,null,void 0,a);break;default:e.memoizedState=null}return e.child}function Aa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))if(t!==null){if(Li(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=_a(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_a(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Lg(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&nu(t)))}function ZS(t,e,n){switch(e.tag){case 3:Kc(e,e.stateNode.containerInfo),Ya(e,rt,t.memoizedState.cache),cr();break;case 27:case 5:Sf(e);break;case 4:Kc(e,e.stateNode.containerInfo);break;case 10:Ya(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Gf(e),null;break;case 13:var a=e.memoizedState;if(a!==null)return a.dehydrated!==null?(Ka(e),e.flags|=128,null):n&e.child.childLanes?M_(t,e,n):(Ka(e),t=Aa(t,e,n),t!==null?t.sibling:null);Ka(e);break;case 19:var s=(t.flags&128)!==0;if(a=(n&e.childLanes)!==0,a||(Li(t,e,n,!1),a=(n&e.childLanes)!==0),s){if(a)return O_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ze,Ze.current),a)break;return null;case 22:return e.lanes=0,R_(t,e,n,e.pendingProps);case 24:Ya(e,rt,t.memoizedState.cache)}return Aa(t,e,n)}function D_(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)it=!0;else{if(!Lg(t,n)&&!(e.flags&128))return it=!1,ZS(t,e,n);it=!!(t.flags&131072)}else it=!1,de&&e.flags&1048576&&Uv(e,Zl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var a=e.pendingProps;if(t=Ys(e.elementType),e.type=t,typeof t=="function")mg(t)?(a=fr(t,a),e.tag=1,e=yy(null,e,t,a,n)):(e.tag=0,e=qf(null,e,t,a,n));else{if(t!=null){var s=t.$$typeof;if(s===eg){e.tag=11,e=hy(null,e,t,a,n);break e}else if(s===tg){e.tag=14,e=fy(null,e,t,a,n);break e}}throw e=Cf(t)||t,Error(A(306,e,""))}}return e;case 0:return qf(t,e,e.type,e.pendingProps,n);case 1:return a=e.type,s=fr(a,e.pendingProps),yy(t,e,a,s,n);case 3:e:{if(Kc(e,e.stateNode.containerInfo),t===null)throw Error(A(387));a=e.pendingProps;var r=e.memoizedState;s=r.element,Ff(t,e),Il(e,a,null,n);var l=e.memoizedState;if(a=l.cache,Ya(e,rt,a),a!==r.cache&&zf(e,[rt],n,!0),Al(),a=l.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:l.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=xy(t,e,a,n);break e}else if(a!==s){s=yn(Error(A(424)),e),Jl(s),e=xy(t,e,a,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Oe=wn(t.firstChild),St=e,de=!0,ls=null,xn=!0,n=Qv(e,null,a,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(cr(),a===s){e=Aa(t,e,n);break e}Ct(t,e,a,n)}e=e.child}return e;case 26:return Uc(t,e),t===null?(n=By(e.type,null,e.pendingProps,null))?e.memoizedState=n:de||(n=e.type,t=e.pendingProps,a=yu(is.current).createElement(n),a[Nt]=e,a[$t]=t,jt(a,n,t),xt(a),e.stateNode=a):e.memoizedState=By(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Sf(e),t===null&&de&&(a=e.stateNode=N1(e.type,e.pendingProps,is.current),St=e,xn=!0,s=Oe,Ls(e.type)?(hm=s,Oe=wn(a.firstChild)):Oe=s),Ct(t,e,e.pendingProps.children,n),Uc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&de&&((s=a=Oe)&&(a=jE(a,e.type,e.pendingProps,xn),a!==null?(e.stateNode=a,St=e,Oe=wn(a.firstChild),xn=!1,s=!0):s=!1),s||Cs(e)),Sf(e),s=e.type,r=e.pendingProps,l=t!==null?t.memoizedProps:null,a=r.children,om(s,r)?a=null:l!==null&&om(s,l)&&(e.flags|=32),e.memoizedState!==null&&(s=kg(t,e,VS,null,null,n),ro._currentValue=s),Uc(t,e),Ct(t,e,a,n),e.child;case 6:return t===null&&de&&((t=n=Oe)&&(n=TE(n,e.pendingProps,xn),n!==null?(e.stateNode=n,St=e,Oe=null,t=!0):t=!1),t||Cs(e)),null;case 13:return M_(t,e,n);case 4:return Kc(e,e.stateNode.containerInfo),a=e.pendingProps,t===null?e.child=dr(e,null,a,n):Ct(t,e,a,n),e.child;case 11:return hy(t,e,e.type,e.pendingProps,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:return a=e.pendingProps,Ya(e,e.type,a.value),Ct(t,e,a.children,n),e.child;case 9:return s=e.type._context,a=e.pendingProps.children,ur(e),s=Et(s),a=a(s),e.flags|=1,Ct(t,e,a,n),e.child;case 14:return fy(t,e,e.type,e.pendingProps,n);case 15:return I_(t,e,e.type,e.pendingProps,n);case 19:return O_(t,e,n);case 31:return qS(t,e,n);case 22:return R_(t,e,n,e.pendingProps);case 24:return ur(e),a=Et(rt),t===null?(s=xg(),s===null&&(s=Ee,r=yg(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:a,cache:s},vg(e),Ya(e,rt,s)):(t.lanes&n&&(Ff(t,e),Il(e,null,null,n),Al()),s=t.memoizedState,r=e.memoizedState,s.parent!==a?(s={parent:a,cache:a},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Ya(e,rt,a)):(a=r.cache,Ya(e,rt,a),a!==s.cache&&zf(e,[rt],n,!0))),Ct(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(A(156,e.tag))}function sa(t){t.flags|=4}function Mh(t,e,n,a,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(r1())t.flags|=8192;else throw rr=au,bg}else t.flags&=-16777217}function vy(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!j1(e))if(r1())t.flags|=8192;else throw rr=au,bg}function yc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?iv():536870912,t.lanes|=e,vi|=e)}function ol(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Me(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&65011712,a|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=a,t.childLanes=n,e}function JS(t,e,n){var a=e.pendingProps;switch(pg(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(e),null;case 1:return Me(e),null;case 3:return n=e.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),wa(rt),mi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lr(e)?sa(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ch())),Me(e),null;case 26:var s=e.type,r=e.memoizedState;return t===null?(sa(e),r!==null?(Me(e),vy(e,r)):(Me(e),Mh(e,s,null,a,n))):r?r!==t.memoizedState?(sa(e),Me(e),vy(e,r)):(Me(e),e.flags&=-16777217):(t=t.memoizedProps,t!==a&&sa(e),Me(e),Mh(e,s,t,a,n)),null;case 27:if(Xc(e),n=is.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&sa(e);else{if(!a){if(e.stateNode===null)throw Error(A(166));return Me(e),null}t=Yn.current,Lr(e)?K0(e):(t=N1(s,a,n),e.stateNode=t,sa(e))}return Me(e),null;case 5:if(Xc(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&sa(e);else{if(!a){if(e.stateNode===null)throw Error(A(166));return Me(e),null}if(r=Yn.current,Lr(e))K0(e);else{var l=yu(is.current);switch(r){case 1:r=l.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=l.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=l.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof a.is=="string"?l.createElement("select",{is:a.is}):l.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r=typeof a.is=="string"?l.createElement(s,{is:a.is}):l.createElement(s)}}r[Nt]=e,r[$t]=a;e:for(l=e.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===e)break e;for(;l.sibling===null;){if(l.return===null||l.return===e)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}e.stateNode=r;e:switch(jt(r,s,a),s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&sa(e)}}return Me(e),Mh(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==a&&sa(e);else{if(typeof a!="string"&&e.stateNode===null)throw Error(A(166));if(t=is.current,Lr(e)){if(t=e.stateNode,n=e.memoizedProps,a=null,s=St,s!==null)switch(s.tag){case 27:case 5:a=s.memoizedProps}t[Nt]=e,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||_1(t.nodeValue,n)),t||Cs(e,!0)}else t=yu(t).createTextNode(a),t[Nt]=e,e.stateNode=t}return Me(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(a=Lr(e),n!==null){if(t===null){if(!a)throw Error(A(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(557));t[Nt]=e}else cr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Me(e),t=!1}else n=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(qt(e),e):(qt(e),null);if(e.flags&128)throw Error(A(558))}return Me(e),null;case 13:if(a=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Lr(e),a!==null&&a.dehydrated!==null){if(t===null){if(!s)throw Error(A(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[Nt]=e}else cr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Me(e),s=!1}else s=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(qt(e),e):(qt(e),null)}return qt(e),e.flags&128?(e.lanes=n,e):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=e.child,s=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(s=a.alternate.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==s&&(a.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),yc(e,e.updateQueue),Me(e),null);case 4:return mi(),t===null&&Vg(e.stateNode.containerInfo),Me(e),null;case 10:return wa(e.type),Me(e),null;case 19:if(vt(Ze),a=e.memoizedState,a===null)return Me(e),null;if(s=(e.flags&128)!==0,r=a.rendering,r===null)if(s)ol(a,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=ru(t),r!==null){for(e.flags|=128,ol(a,!1),t=r.updateQueue,e.updateQueue=t,yc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Lv(n,t),n=n.sibling;return Ie(Ze,Ze.current&1|2),de&&ca(e,a.treeForkCount),e.child}t=t.sibling}a.tail!==null&&tn()>du&&(e.flags|=128,s=!0,ol(a,!1),e.lanes=4194304)}else{if(!s)if(t=ru(r),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,yc(e,t),ol(a,!0),a.tail===null&&a.tailMode==="hidden"&&!r.alternate&&!de)return Me(e),null}else 2*tn()-a.renderingStartTime>du&&n!==536870912&&(e.flags|=128,s=!0,ol(a,!1),e.lanes=4194304);a.isBackwards?(r.sibling=e.child,e.child=r):(t=a.last,t!==null?t.sibling=r:e.child=r,a.last=r)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=tn(),t.sibling=null,n=Ze.current,Ie(Ze,s?n&1|2:n&1),de&&ca(e,a.treeForkCount),t):(Me(e),null);case 22:case 23:return qt(e),_g(),a=e.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(e.flags|=8192):a&&(e.flags|=8192),a?n&536870912&&!(e.flags&128)&&(Me(e),e.subtreeFlags&6&&(e.flags|=8192)):Me(e),n=e.updateQueue,n!==null&&yc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),a!==n&&(e.flags|=2048),t!==null&&vt(sr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),wa(rt),Me(e),null;case 25:return null;case 30:return null}throw Error(A(156,e.tag))}function eE(t,e){switch(pg(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wa(rt),mi(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Xc(e),null;case 31:if(e.memoizedState!==null){if(qt(e),e.alternate===null)throw Error(A(340));cr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(qt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));cr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(Ze),null;case 4:return mi(),null;case 10:return wa(e.type),null;case 22:case 23:return qt(e),_g(),t!==null&&vt(sr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return wa(rt),null;case 25:return null;default:return null}}function L_(t,e){switch(pg(e),e.tag){case 3:wa(rt),mi();break;case 26:case 27:case 5:Xc(e);break;case 4:mi();break;case 31:e.memoizedState!==null&&qt(e);break;case 13:qt(e);break;case 19:vt(Ze);break;case 10:wa(e.type);break;case 22:case 23:qt(e),_g(),t!==null&&vt(sr);break;case 24:wa(rt)}}function Po(t,e){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var s=a.next;n=s;do{if((n.tag&t)===t){a=void 0;var r=n.create,l=n.inst;a=r(),l.destroy=a}n=n.next}while(n!==s)}}catch(o){ve(e,e.return,o)}}function Ns(t,e,n){try{var a=e.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var r=s.next;a=r;do{if((a.tag&t)===t){var l=a.inst,o=l.destroy;if(o!==void 0){l.destroy=void 0,s=e;var c=n,u=o;try{u()}catch(f){ve(s,c,f)}}}a=a.next}while(a!==r)}}catch(f){ve(e,e.return,f)}}function P_(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{$v(e,n)}catch(a){ve(t,t.return,a)}}}function U_(t,e,n){n.props=fr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){ve(t,e,a)}}function Ml(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(s){ve(t,e,s)}}function $n(t,e){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(s){ve(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){ve(t,e,s)}else n.current=null}function B_(t){var e=t.type,n=t.memoizedProps,a=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){ve(t,t.return,s)}}function Oh(t,e,n){try{var a=t.stateNode;wE(a,t.type,n,e),a[$t]=e}catch(s){ve(t,t.return,s)}}function z_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ls(t.type)||t.tag===4}function Dh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ls(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pa));else if(a!==4&&(a===27&&Ls(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Jf(t,e,n),t=t.sibling;t!==null;)Jf(t,e,n),t=t.sibling}function uu(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(a!==4&&(a===27&&Ls(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(uu(t,e,n),t=t.sibling;t!==null;)uu(t,e,n),t=t.sibling}function H_(t){var e=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);jt(e,a,n),e[Nt]=t,e[$t]=n}catch(r){ve(t,t.return,r)}}var ua=!1,st=!1,Lh=!1,_y=typeof WeakSet=="function"?WeakSet:Set,pt=null;function tE(t,e){if(t=t.containerInfo,im=_u,t=jv(t),dg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(o=l+s),d!==r||a!==0&&d.nodeType!==3||(c=l+a),d.nodeType===3&&(l+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++u===s&&(o=l),h===r&&++f===a&&(c=l),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lm={focusedElem:t,selectionRange:n},_u=!1,pt=e;pt!==null;)if(e=pt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pt=t;else for(;pt!==null;){switch(e=pt,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var b=fr(n.type,s);t=a.getSnapshotBeforeUpdate(b,r),a.__reactInternalSnapshotBeforeUpdate=t}catch(_){ve(n,n.return,_)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)cm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(A(163))}if(t=e.sibling,t!==null){t.return=e.return,pt=t;break}pt=e.return}}function F_(t,e,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:ia(t,n),a&4&&Po(5,n);break;case 1:if(ia(t,n),a&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(l){ve(n,n.return,l)}else{var s=fr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(l){ve(n,n.return,l)}}a&64&&P_(n),a&512&&Ml(n,n.return);break;case 3:if(ia(t,n),a&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{$v(t,e)}catch(l){ve(n,n.return,l)}}break;case 27:e===null&&a&4&&H_(n);case 26:case 5:ia(t,n),e===null&&a&4&&B_(n),a&512&&Ml(n,n.return);break;case 12:ia(t,n);break;case 31:ia(t,n),a&4&&G_(t,n);break;case 13:ia(t,n),a&4&&$_(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=uE.bind(null,n),AE(t,n))));break;case 22:if(a=n.memoizedState!==null||ua,!a){e=e!==null&&e.memoizedState!==null||st,s=ua;var r=st;ua=a,(st=e)&&!r?oa(t,n,(n.subtreeFlags&8772)!==0):ia(t,n),ua=s,st=r}break;case 30:break;default:ia(t,n)}}function V_(t){var e=t.alternate;e!==null&&(t.alternate=null,V_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&rg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Be=null,Ft=!1;function ra(t,e,n){for(n=n.child;n!==null;)Q_(t,e,n),n=n.sibling}function Q_(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Ao,n)}catch{}switch(n.tag){case 26:st||$n(n,e),ra(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:st||$n(n,e);var a=Be,s=Ft;Ls(n.type)&&(Be=n.stateNode,Ft=!1),ra(t,e,n),Pl(n.stateNode),Be=a,Ft=s;break;case 5:st||$n(n,e);case 6:if(a=Be,s=Ft,Be=null,ra(t,e,n),Be=a,Ft=s,Be!==null)if(Ft)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(n.stateNode)}catch(r){ve(n,e,r)}else try{Be.removeChild(n.stateNode)}catch(r){ve(n,e,r)}break;case 18:Be!==null&&(Ft?(t=Be,Oy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ci(t)):Oy(Be,n.stateNode));break;case 4:a=Be,s=Ft,Be=n.stateNode.containerInfo,Ft=!0,ra(t,e,n),Be=a,Ft=s;break;case 0:case 11:case 14:case 15:Ns(2,n,e),st||Ns(4,n,e),ra(t,e,n);break;case 1:st||($n(n,e),a=n.stateNode,typeof a.componentWillUnmount=="function"&&U_(n,e,a)),ra(t,e,n);break;case 21:ra(t,e,n);break;case 22:st=(a=st)||n.memoizedState!==null,ra(t,e,n),st=a;break;default:ra(t,e,n)}}function G_(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ci(t)}catch(n){ve(e,e.return,n)}}}function $_(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ci(t)}catch(n){ve(e,e.return,n)}}function nE(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new _y),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new _y),e;default:throw Error(A(435,t.tag))}}function xc(t,e){var n=nE(t);e.forEach(function(a){if(!n.has(a)){n.add(a);var s=dE.bind(null,t,a);a.then(s,s)}})}function zt(t,e){var n=e.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a],r=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 27:if(Ls(o.type)){Be=o.stateNode,Ft=!1;break e}break;case 5:Be=o.stateNode,Ft=!1;break e;case 3:case 4:Be=o.stateNode.containerInfo,Ft=!0;break e}o=o.return}if(Be===null)throw Error(A(160));Q_(r,l,s),Be=null,Ft=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)W_(e,t),e=e.sibling}var Mn=null;function W_(t,e){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zt(e,t),Ht(t),a&4&&(Ns(3,t,t.return),Po(3,t),Ns(5,t,t.return));break;case 1:zt(e,t),Ht(t),a&512&&(st||n===null||$n(n,n.return)),a&64&&ua&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var s=Mn;if(zt(e,t),Ht(t),a&512&&(st||n===null||$n(n,n.return)),a&4){var r=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){e:{a=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":r=s.getElementsByTagName("title")[0],(!r||r[Mo]||r[Nt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(a),s.head.insertBefore(r,s.querySelector("head > title"))),jt(r,a,n),r[Nt]=t,xt(r),a=r;break e;case"link":var l=Hy("link","href",s).get(a+(n.href||""));if(l){for(var o=0;o<l.length;o++)if(r=l[o],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){l.splice(o,1);break t}}r=s.createElement(a),jt(r,a,n),s.head.appendChild(r);break;case"meta":if(l=Hy("meta","content",s).get(a+(n.content||""))){for(o=0;o<l.length;o++)if(r=l[o],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){l.splice(o,1);break t}}r=s.createElement(a),jt(r,a,n),s.head.appendChild(r);break;default:throw Error(A(468,a))}r[Nt]=t,xt(r),a=r}t.stateNode=a}else Fy(s,t.type,t.stateNode);else t.stateNode=zy(s,a,t.memoizedProps);else r!==a?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,a===null?Fy(s,t.type,t.stateNode):zy(s,a,t.memoizedProps)):a===null&&t.stateNode!==null&&Oh(t,t.memoizedProps,n.memoizedProps)}break;case 27:zt(e,t),Ht(t),a&512&&(st||n===null||$n(n,n.return)),n!==null&&a&4&&Oh(t,t.memoizedProps,n.memoizedProps);break;case 5:if(zt(e,t),Ht(t),a&512&&(st||n===null||$n(n,n.return)),t.flags&32){s=t.stateNode;try{pi(s,"")}catch(b){ve(t,t.return,b)}}a&4&&t.stateNode!=null&&(s=t.memoizedProps,Oh(t,s,n!==null?n.memoizedProps:s)),a&1024&&(Lh=!0);break;case 6:if(zt(e,t),Ht(t),a&4){if(t.stateNode===null)throw Error(A(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(b){ve(t,t.return,b)}}break;case 3:if(Hc=null,s=Mn,Mn=xu(e.containerInfo),zt(e,t),Mn=s,Ht(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Ci(e.containerInfo)}catch(b){ve(t,t.return,b)}Lh&&(Lh=!1,Y_(t));break;case 4:a=Mn,Mn=xu(t.stateNode.containerInfo),zt(e,t),Ht(t),Mn=a;break;case 12:zt(e,t),Ht(t);break;case 31:zt(e,t),Ht(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,xc(t,a)));break;case 13:zt(e,t),Ht(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(gd=tn()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,xc(t,a)));break;case 22:s=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=ua,f=st;if(ua=u||s,st=f||c,zt(e,t),st=f,ua=u,Ht(t),a&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||c||ua||st||Ks(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(r=c.stateNode,s)l=r.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none";else{o=c.stateNode;var d=c.memoizedProps.style,h=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(b){ve(c,c.return,b)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(b){ve(c,c.return,b)}}}else if(e.tag===18){if(n===null){c=e;try{var m=c.stateNode;s?Dy(m,!0):Dy(c.stateNode,!1)}catch(b){ve(c,c.return,b)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,xc(t,n))));break;case 19:zt(e,t),Ht(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,xc(t,a)));break;case 30:break;case 21:break;default:zt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{for(var n,a=t.return;a!==null;){if(z_(a)){n=a;break}a=a.return}if(n==null)throw Error(A(160));switch(n.tag){case 27:var s=n.stateNode,r=Dh(t);uu(t,r,s);break;case 5:var l=n.stateNode;n.flags&32&&(pi(l,""),n.flags&=-33);var o=Dh(t);uu(t,o,l);break;case 3:case 4:var c=n.stateNode.containerInfo,u=Dh(t);Jf(t,u,c);break;default:throw Error(A(161))}}catch(f){ve(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Y_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Y_(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ia(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)F_(t,e.alternate,e),e=e.sibling}function Ks(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ns(4,e,e.return),Ks(e);break;case 1:$n(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&U_(e,e.return,n),Ks(e);break;case 27:Pl(e.stateNode);case 26:case 5:$n(e,e.return),Ks(e);break;case 22:e.memoizedState===null&&Ks(e);break;case 30:Ks(e);break;default:Ks(e)}t=t.sibling}}function oa(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var a=e.alternate,s=t,r=e,l=r.flags;switch(r.tag){case 0:case 11:case 15:oa(s,r,n),Po(4,r);break;case 1:if(oa(s,r,n),a=r,s=a.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){ve(a,a.return,u)}if(a=r,s=a.updateQueue,s!==null){var o=a.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)Gv(c[s],o)}catch(u){ve(a,a.return,u)}}n&&l&64&&P_(r),Ml(r,r.return);break;case 27:H_(r);case 26:case 5:oa(s,r,n),n&&a===null&&l&4&&B_(r),Ml(r,r.return);break;case 12:oa(s,r,n);break;case 31:oa(s,r,n),n&&l&4&&G_(s,r);break;case 13:oa(s,r,n),n&&l&4&&$_(s,r);break;case 22:r.memoizedState===null&&oa(s,r,n),Ml(r,r.return);break;case 30:break;default:oa(s,r,n)}e=e.sibling}}function Pg(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Do(n))}function Ug(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Do(t))}function Rn(t,e,n,a){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)K_(t,e,n,a),e=e.sibling}function K_(t,e,n,a){var s=e.flags;switch(e.tag){case 0:case 11:case 15:Rn(t,e,n,a),s&2048&&Po(9,e);break;case 1:Rn(t,e,n,a);break;case 3:Rn(t,e,n,a),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Do(t)));break;case 12:if(s&2048){Rn(t,e,n,a),t=e.stateNode;try{var r=e.memoizedProps,l=r.id,o=r.onPostCommit;typeof o=="function"&&o(l,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){ve(e,e.return,c)}}else Rn(t,e,n,a);break;case 31:Rn(t,e,n,a);break;case 13:Rn(t,e,n,a);break;case 23:break;case 22:r=e.stateNode,l=e.alternate,e.memoizedState!==null?r._visibility&2?Rn(t,e,n,a):Ol(t,e):r._visibility&2?Rn(t,e,n,a):(r._visibility|=2,Fr(t,e,n,a,(e.subtreeFlags&10256)!==0||!1)),s&2048&&Pg(l,e);break;case 24:Rn(t,e,n,a),s&2048&&Ug(e.alternate,e);break;default:Rn(t,e,n,a)}}function Fr(t,e,n,a,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,l=e,o=n,c=a,u=l.flags;switch(l.tag){case 0:case 11:case 15:Fr(r,l,o,c,s),Po(8,l);break;case 23:break;case 22:var f=l.stateNode;l.memoizedState!==null?f._visibility&2?Fr(r,l,o,c,s):Ol(r,l):(f._visibility|=2,Fr(r,l,o,c,s)),s&&u&2048&&Pg(l.alternate,l);break;case 24:Fr(r,l,o,c,s),s&&u&2048&&Ug(l.alternate,l);break;default:Fr(r,l,o,c,s)}e=e.sibling}}function Ol(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,a=e,s=a.flags;switch(a.tag){case 22:Ol(n,a),s&2048&&Pg(a.alternate,a);break;case 24:Ol(n,a),s&2048&&Ug(a.alternate,a);break;default:Ol(n,a)}e=e.sibling}}var vl=8192;function Pr(t,e,n){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)X_(t,e,n),t=t.sibling}function X_(t,e,n){switch(t.tag){case 26:Pr(t,e,n),t.flags&vl&&t.memoizedState!==null&&FE(n,Mn,t.memoizedState,t.memoizedProps);break;case 5:Pr(t,e,n);break;case 3:case 4:var a=Mn;Mn=xu(t.stateNode.containerInfo),Pr(t,e,n),Mn=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=vl,vl=16777216,Pr(t,e,n),vl=a):Pr(t,e,n));break;default:Pr(t,e,n)}}function q_(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function cl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];pt=a,J_(a,t)}q_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Z_(t),t=t.sibling}function Z_(t){switch(t.tag){case 0:case 11:case 15:cl(t),t.flags&2048&&Ns(9,t,t.return);break;case 3:cl(t);break;case 12:cl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Bc(t)):cl(t);break;default:cl(t)}}function Bc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];pt=a,J_(a,t)}q_(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ns(8,e,e.return),Bc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Bc(e));break;default:Bc(e)}t=t.sibling}}function J_(t,e){for(;pt!==null;){var n=pt;switch(n.tag){case 0:case 11:case 15:Ns(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Do(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,pt=a;else e:for(n=t;pt!==null;){a=pt;var s=a.sibling,r=a.return;if(V_(a),a===n){pt=null;break e}if(s!==null){s.return=r,pt=s;break e}pt=r}}}var aE={getCacheForType:function(t){var e=Et(rt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Et(rt).controller.signal}},sE=typeof WeakMap=="function"?WeakMap:Map,ge=0,Ee=null,ce=null,ue=0,xe=0,Xt=null,es=!1,Ui=!1,Bg=!1,Ia=0,$e=0,Ss=0,ir=0,zg=0,en=0,vi=0,Dl=null,Vt=null,em=!1,gd=0,e1=0,du=1/0,hu=null,us=null,ct=0,ds=null,_i=null,ka=0,tm=0,nm=null,t1=null,Ll=0,am=null;function sn(){return ge&2&&ue!==0?ue&-ue:X.T!==null?Fg():uv()}function n1(){if(en===0)if(!(ue&536870912)||de){var t=uc;uc<<=1,!(uc&3932160)&&(uc=262144),en=t}else en=536870912;return t=on.current,t!==null&&(t.flags|=32),en}function Gt(t,e,n){(t===Ee&&(xe===2||xe===9)||t.cancelPendingCommit!==null)&&(wi(t,0),ts(t,ue,en,!1)),Ro(t,n),(!(ge&2)||t!==Ee)&&(t===Ee&&(!(ge&2)&&(ir|=n),$e===4&&ts(t,ue,en,!1)),ta(t))}function a1(t,e,n){if(ge&6)throw Error(A(327));var a=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Io(t,e),s=a?lE(t,e):Ph(t,e,!0),r=a;do{if(s===0){Ui&&!a&&ts(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!rE(n)){s=Ph(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var l=0;else l=t.pendingLanes&-536870913,l=l!==0?l:l&536870912?536870912:0;if(l!==0){e=l;e:{var o=t;s=Dl;var c=o.current.memoizedState.isDehydrated;if(c&&(wi(o,l).flags|=256),l=Ph(o,l,!1),l!==2){if(Bg&&!c){o.errorRecoveryDisabledLanes|=r,ir|=r,s=4;break e}r=Vt,Vt=s,r!==null&&(Vt===null?Vt=r:Vt.push.apply(Vt,r))}s=l}if(r=!1,s!==2)continue}}if(s===1){wi(t,0),ts(t,e,0,!0);break}e:{switch(a=t,r=s,r){case 0:case 1:throw Error(A(345));case 4:if((e&4194048)!==e)break;case 6:ts(a,e,en,!es);break e;case 2:Vt=null;break;case 3:case 5:break;default:throw Error(A(329))}if((e&62914560)===e&&(s=gd+300-tn(),10<s)){if(ts(a,e,en,!es),sd(a,0,!0)!==0)break e;ka=e,a.timeoutHandle=k1(wy.bind(null,a,n,Vt,hu,em,e,en,ir,vi,es,r,"Throttled",-0,0),s);break e}wy(a,n,Vt,hu,em,e,en,ir,vi,es,r,null,-0,0)}}break}while(!0);ta(t)}function wy(t,e,n,a,s,r,l,o,c,u,f,d,h,m){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},X_(e,r,d);var b=(r&62914560)===r?gd-tn():(r&4194048)===r?e1-tn():0;if(b=VE(d,b),b!==null){ka=r,t.cancelPendingCommit=b(Cy.bind(null,t,e,r,n,a,s,l,o,c,f,d,null,h,m)),ts(t,r,l,!u);return}}Cy(t,e,r,n,a,s,l,o,c)}function rE(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!ln(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e,n,a){e&=~zg,e&=~ir,t.suspendedLanes|=e,t.pingedLanes&=~e,a&&(t.warmLanes|=e),a=t.expirationTimes;for(var s=e;0<s;){var r=31-an(s),l=1<<r;a[r]=-1,s&=~l}n!==0&&lv(t,n,e)}function pd(){return ge&6?!0:(Uo(0),!1)}function Hg(){if(ce!==null){if(xe===0)var t=ce.return;else t=ce,ya=jr=null,Sg(t),ii=null,eo=0,t=ce;for(;t!==null;)L_(t.alternate,t),t=t.return;ce=null}}function wi(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,NE(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ka=0,Hg(),Ee=t,ce=n=_a(t.current,null),ue=e,xe=0,Xt=null,es=!1,Ui=Io(t,e),Bg=!1,vi=en=zg=ir=Ss=$e=0,Vt=Dl=null,em=!1,e&8&&(e|=e&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=e;0<a;){var s=31-an(a),r=1<<s;e|=t[s],a&=~r}return Ia=e,od(),n}function s1(t,e){te=null,X.H=no,e===Pi||e===ud?(e=ey(),xe=3):e===bg?(e=ey(),xe=4):xe=e===Dg?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Xt=e,ce===null&&($e=1,ou(t,yn(e,t.current)))}function r1(){var t=on.current;return t===null?!0:(ue&4194048)===ue?_n===null:(ue&62914560)===ue||ue&536870912?t===_n:!1}function i1(){var t=X.H;return X.H=no,t===null?no:t}function l1(){var t=X.A;return X.A=aE,t}function fu(){$e=4,es||(ue&4194048)!==ue&&on.current!==null||(Ui=!0),!(Ss&134217727)&&!(ir&134217727)||Ee===null||ts(Ee,ue,en,!1)}function Ph(t,e,n){var a=ge;ge|=2;var s=i1(),r=l1();(Ee!==t||ue!==e)&&(hu=null,wi(t,e)),e=!1;var l=$e;e:do try{if(xe!==0&&ce!==null){var o=ce,c=Xt;switch(xe){case 8:Hg(),l=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(e=!0);var u=xe;if(xe=0,Xt=null,ti(t,o,c,u),n&&Ui){l=0;break e}break;default:u=xe,xe=0,Xt=null,ti(t,o,c,u)}}iE(),l=$e;break}catch(f){s1(t,f)}while(!0);return e&&t.shellSuspendCounter++,ya=jr=null,ge=a,X.H=s,X.A=r,ce===null&&(Ee=null,ue=0,od()),l}function iE(){for(;ce!==null;)o1(ce)}function lE(t,e){var n=ge;ge|=2;var a=i1(),s=l1();Ee!==t||ue!==e?(hu=null,du=tn()+500,wi(t,e)):Ui=Io(t,e);e:do try{if(xe!==0&&ce!==null){e=ce;var r=Xt;t:switch(xe){case 1:xe=0,Xt=null,ti(t,e,r,1);break;case 2:case 9:if(J0(r)){xe=0,Xt=null,ky(e);break}e=function(){xe!==2&&xe!==9||Ee!==t||(xe=7),ta(t)},r.then(e,e);break e;case 3:xe=7;break e;case 4:xe=5;break e;case 7:J0(r)?(xe=0,Xt=null,ky(e)):(xe=0,Xt=null,ti(t,e,r,7));break;case 5:var l=null;switch(ce.tag){case 26:l=ce.memoizedState;case 5:case 27:var o=ce;if(l?j1(l):o.stateNode.complete){xe=0,Xt=null;var c=o.sibling;if(c!==null)ce=c;else{var u=o.return;u!==null?(ce=u,yd(u)):ce=null}break t}}xe=0,Xt=null,ti(t,e,r,5);break;case 6:xe=0,Xt=null,ti(t,e,r,6);break;case 8:Hg(),$e=6;break e;default:throw Error(A(462))}}oE();break}catch(f){s1(t,f)}while(!0);return ya=jr=null,X.H=a,X.A=s,ge=n,ce!==null?0:(Ee=null,ue=0,od(),$e)}function oE(){for(;ce!==null&&!IN();)o1(ce)}function o1(t){var e=D_(t.alternate,t,Ia);t.memoizedProps=t.pendingProps,e===null?yd(t):ce=e}function ky(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=py(n,e,e.pendingProps,e.type,void 0,ue);break;case 11:e=py(n,e,e.pendingProps,e.type.render,e.ref,ue);break;case 5:Sg(e);default:L_(n,e),e=ce=Lv(e,Ia),e=D_(n,e,Ia)}t.memoizedProps=t.pendingProps,e===null?yd(t):ce=e}function ti(t,e,n,a){ya=jr=null,Sg(e),ii=null,eo=0;var s=e.return;try{if(XS(t,s,e,n,ue)){$e=1,ou(t,yn(n,t.current)),ce=null;return}}catch(r){if(s!==null)throw ce=s,r;$e=1,ou(t,yn(n,t.current)),ce=null;return}e.flags&32768?(de||a===1?t=!0:Ui||ue&536870912?t=!1:(es=t=!0,(a===2||a===9||a===3||a===6)&&(a=on.current,a!==null&&a.tag===13&&(a.flags|=16384))),c1(e,t)):yd(e)}function yd(t){var e=t;do{if(e.flags&32768){c1(e,es);return}t=e.return;var n=JS(e.alternate,e,Ia);if(n!==null){ce=n;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);$e===0&&($e=5)}function c1(t,e){do{var n=eE(t.alternate,t);if(n!==null){n.flags&=32767,ce=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ce=t;return}ce=t=n}while(t!==null);$e=6,ce=null}function Cy(t,e,n,a,s,r,l,o,c){t.cancelPendingCommit=null;do xd();while(ct!==0);if(ge&6)throw Error(A(327));if(e!==null){if(e===t.current)throw Error(A(177));if(r=e.lanes|e.childLanes,r|=hg,HN(t,n,r,l,o,c),t===Ee&&(ce=Ee=null,ue=0),_i=e,ds=t,ka=n,tm=r,nm=s,t1=a,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,hE(qc,function(){return m1(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(e.flags&13878)!==0,e.subtreeFlags&13878||a){a=X.T,X.T=null,s=pe.p,pe.p=2,l=ge,ge|=4;try{tE(t,e,n)}finally{ge=l,pe.p=s,X.T=a}}ct=1,u1(),d1(),h1()}}function u1(){if(ct===1){ct=0;var t=ds,e=_i,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=X.T,X.T=null;var a=pe.p;pe.p=2;var s=ge;ge|=4;try{W_(e,t);var r=lm,l=jv(t.containerInfo),o=r.focusedElem,c=r.selectionRange;if(l!==o&&o&&o.ownerDocument&&Ev(o.ownerDocument.documentElement,o)){if(c!==null&&dg(o)){var u=c.start,f=c.end;if(f===void 0&&(f=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(f,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),b=o.textContent.length,_=Math.min(c.start,b),w=c.end===void 0?_:Math.min(c.end,b);!m.extend&&_>w&&(l=w,w=_,_=l);var y=$0(o,_),g=$0(o,w);if(y&&g&&(m.rangeCount!==1||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var x=d.createRange();x.setStart(y.node,y.offset),m.removeAllRanges(),_>w?(m.addRange(x),m.extend(g.node,g.offset)):(x.setEnd(g.node,g.offset),m.addRange(x))}}}}for(d=[],m=o;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var v=d[o];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}_u=!!im,lm=im=null}finally{ge=s,pe.p=a,X.T=n}}t.current=e,ct=2}}function d1(){if(ct===2){ct=0;var t=ds,e=_i,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=X.T,X.T=null;var a=pe.p;pe.p=2;var s=ge;ge|=4;try{F_(t,e.alternate,e)}finally{ge=s,pe.p=a,X.T=n}}ct=3}}function h1(){if(ct===4||ct===3){ct=0,RN();var t=ds,e=_i,n=ka,a=t1;e.subtreeFlags&10256||e.flags&10256?ct=5:(ct=0,_i=ds=null,f1(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(us=null),sg(n),e=e.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Ao,e,void 0,(e.current.flags&128)===128)}catch{}if(a!==null){e=X.T,s=pe.p,pe.p=2,X.T=null;try{for(var r=t.onRecoverableError,l=0;l<a.length;l++){var o=a[l];r(o.value,{componentStack:o.stack})}}finally{X.T=e,pe.p=s}}ka&3&&xd(),ta(t),s=t.pendingLanes,n&261930&&s&42?t===am?Ll++:(Ll=0,am=t):Ll=0,Uo(0)}}function f1(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Do(e)))}function xd(){return u1(),d1(),h1(),m1()}function m1(){if(ct!==5)return!1;var t=ds,e=tm;tm=0;var n=sg(ka),a=X.T,s=pe.p;try{pe.p=32>n?32:n,X.T=null,n=nm,nm=null;var r=ds,l=ka;if(ct=0,_i=ds=null,ka=0,ge&6)throw Error(A(331));var o=ge;if(ge|=4,Z_(r.current),K_(r,r.current,l,n),ge=o,Uo(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Ao,r)}catch{}return!0}finally{pe.p=s,X.T=a,f1(t,e)}}function Ny(t,e,n){e=yn(n,e),e=Xf(t.stateNode,e,2),t=cs(t,e,2),t!==null&&(Ro(t,2),ta(t))}function ve(t,e,n){if(t.tag===3)Ny(t,t,n);else for(;e!==null;){if(e.tag===3){Ny(e,t,n);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(us===null||!us.has(a))){t=yn(n,t),n=T_(2),a=cs(e,n,2),a!==null&&(A_(n,a,e,t),Ro(a,2),ta(a));break}}e=e.return}}function Uh(t,e,n){var a=t.pingCache;if(a===null){a=t.pingCache=new sE;var s=new Set;a.set(e,s)}else s=a.get(e),s===void 0&&(s=new Set,a.set(e,s));s.has(n)||(Bg=!0,s.add(n),t=cE.bind(null,t,e,n),e.then(t,t))}function cE(t,e,n){var a=t.pingCache;a!==null&&a.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ee===t&&(ue&n)===n&&($e===4||$e===3&&(ue&62914560)===ue&&300>tn()-gd?!(ge&2)&&wi(t,0):zg|=n,vi===ue&&(vi=0)),ta(t)}function g1(t,e){e===0&&(e=iv()),t=Er(t,e),t!==null&&(Ro(t,e),ta(t))}function uE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),g1(t,n)}function dE(t,e){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(A(314))}a!==null&&a.delete(e),g1(t,n)}function hE(t,e){return ng(t,e)}var mu=null,Vr=null,sm=!1,gu=!1,Bh=!1,ns=0;function ta(t){t!==Vr&&t.next===null&&(Vr===null?mu=Vr=t:Vr=Vr.next=t),gu=!0,sm||(sm=!0,mE())}function Uo(t,e){if(!Bh&&gu){Bh=!0;do for(var n=!1,a=mu;a!==null;){if(t!==0){var s=a.pendingLanes;if(s===0)var r=0;else{var l=a.suspendedLanes,o=a.pingedLanes;r=(1<<31-an(42|t)+1)-1,r&=s&~(l&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Sy(a,r))}else r=ue,r=sd(a,a===Ee?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(r&3)||Io(a,r)||(n=!0,Sy(a,r));a=a.next}while(n);Bh=!1}}function fE(){p1()}function p1(){gu=sm=!1;var t=0;ns!==0&&CE()&&(t=ns);for(var e=tn(),n=null,a=mu;a!==null;){var s=a.next,r=y1(a,e);r===0?(a.next=null,n===null?mu=s:n.next=s,s===null&&(Vr=n)):(n=a,(t!==0||r&3)&&(gu=!0)),a=s}ct!==0&&ct!==5||Uo(t),ns!==0&&(ns=0)}function y1(t,e){for(var n=t.suspendedLanes,a=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var l=31-an(r),o=1<<l,c=s[l];c===-1?(!(o&n)||o&a)&&(s[l]=zN(o,e)):c<=e&&(t.expiredLanes|=o),r&=~o}if(e=Ee,n=ue,n=sd(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===e&&(xe===2||xe===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&fh(a),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Io(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(a!==null&&fh(a),sg(n)){case 2:case 8:n=sv;break;case 32:n=qc;break;case 268435456:n=rv;break;default:n=qc}return a=x1.bind(null,t),n=ng(n,a),t.callbackPriority=e,t.callbackNode=n,e}return a!==null&&a!==null&&fh(a),t.callbackPriority=2,t.callbackNode=null,2}function x1(t,e){if(ct!==0&&ct!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(xd()&&t.callbackNode!==n)return null;var a=ue;return a=sd(t,t===Ee?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(a1(t,a,e),y1(t,tn()),t.callbackNode!=null&&t.callbackNode===n?x1.bind(null,t):null)}function Sy(t,e){if(xd())return null;a1(t,e,!0)}function mE(){SE(function(){ge&6?ng(av,fE):p1()})}function Fg(){if(ns===0){var t=yi;t===0&&(t=cc,cc<<=1,!(cc&261888)&&(cc=256)),ns=t}return ns}function Ey(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ac(""+t)}function jy(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function gE(t,e,n,a,s){if(e==="submit"&&n&&n.stateNode===s){var r=Ey((s[$t]||null).action),l=a.submitter;l&&(e=(e=l[$t]||null)?Ey(e.formAction):l.getAttribute("formAction"),e!==null&&(r=e,l=null));var o=new rd("action","action",null,a,s);t.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ns!==0){var c=l?jy(s,l):new FormData(s);Yf(n,{pending:!0,data:c,method:s.method,action:r},null,c)}}else typeof r=="function"&&(o.preventDefault(),c=l?jy(s,l):new FormData(s),Yf(n,{pending:!0,data:c,method:s.method,action:r},r,c))},currentTarget:s}]})}}for(var zh=0;zh<Lf.length;zh++){var Hh=Lf[zh],pE=Hh.toLowerCase(),yE=Hh[0].toUpperCase()+Hh.slice(1);Un(pE,"on"+yE)}Un(Av,"onAnimationEnd");Un(Iv,"onAnimationIteration");Un(Rv,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(MS,"onTransitionRun");Un(OS,"onTransitionStart");Un(DS,"onTransitionCancel");Un(Mv,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ao));function b1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],s=a.event;a=a.listeners;e:{var r=void 0;if(e)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=u;try{r(s)}catch(f){Jc(f)}s.currentTarget=null,r=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=u;try{r(s)}catch(f){Jc(f)}s.currentTarget=null,r=c}}}}function oe(t,e){var n=e[jf];n===void 0&&(n=e[jf]=new Set);var a=t+"__bubble";n.has(a)||(v1(e,t,2,!1),n.add(a))}function Fh(t,e,n){var a=0;e&&(a|=4),v1(n,t,a,e)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Vg(t){if(!t[bc]){t[bc]=!0,dv.forEach(function(n){n!=="selectionchange"&&(xE.has(n)||Fh(n,!1,t),Fh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bc]||(e[bc]=!0,Fh("selectionchange",!1,e))}}function v1(t,e,n,a){switch(M1(e)){case 2:var s=$E;break;case 8:s=WE;break;default:s=Wg}n=s.bind(null,e,n,t),s=void 0,!Mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),a?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vh(t,e,n,a,s){var r=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===s)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&l.stateNode.containerInfo===s)return;l=l.return}for(;o!==null;){if(l=$r(o),l===null)return;if(c=l.tag,c===5||c===6||c===26||c===27){a=r=l;continue e}o=o.parentNode}}a=a.return}bv(function(){var u=r,f=lg(n),d=[];e:{var h=Ov.get(t);if(h!==void 0){var m=rd,b=t;switch(t){case"keypress":if(Rc(n)===0)break e;case"keydown":case"keyup":m=dS;break;case"focusin":b="focus",m=xh;break;case"focusout":b="blur",m=xh;break;case"beforeblur":case"afterblur":m=xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=L0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=JN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=mS;break;case Av:case Iv:case Rv:m=nS;break;case Mv:m=pS;break;case"scroll":case"scrollend":m=qN;break;case"wheel":m=xS;break;case"copy":case"cut":case"paste":m=sS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=U0;break;case"toggle":case"beforetoggle":m=vS}var _=(e&4)!==0,w=!_&&(t==="scroll"||t==="scrollend"),y=_?h!==null?h+"Capture":null:h;_=[];for(var g=u,x;g!==null;){var v=g;if(x=v.stateNode,v=v.tag,v!==5&&v!==26&&v!==27||x===null||y===null||(v=Kl(g,y),v!=null&&_.push(so(g,v,x))),w)break;g=g.return}0<_.length&&(h=new m(h,b,null,n,f),d.push({event:h,listeners:_}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Rf&&(b=n.relatedTarget||n.fromElement)&&($r(b)||b[Oi]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=u,b=b?$r(b):null,b!==null&&(w=To(b),_=b.tag,b!==w||_!==5&&_!==27&&_!==6)&&(b=null)):(m=null,b=u),m!==b)){if(_=L0,v="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(_=U0,v="onPointerLeave",y="onPointerEnter",g="pointer"),w=m==null?h:xl(m),x=b==null?h:xl(b),h=new _(v,g+"leave",m,n,f),h.target=w,h.relatedTarget=x,v=null,$r(f)===u&&(_=new _(y,g+"enter",b,n,f),_.target=x,_.relatedTarget=w,v=_),w=v,m&&b)t:{for(_=bE,y=m,g=b,x=0,v=y;v;v=_(v))x++;v=0;for(var k=g;k;k=_(k))v++;for(;0<x-v;)y=_(y),x--;for(;0<v-x;)g=_(g),v--;for(;x--;){if(y===g||g!==null&&y===g.alternate){_=y;break t}y=_(y),g=_(g)}_=null}else _=null;m!==null&&Ty(d,h,m,_,!1),b!==null&&w!==null&&Ty(d,w,b,_,!0)}}e:{if(h=u?xl(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var S=F0;else if(H0(h))if(Nv)S=AS;else{S=jS;var C=ES}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?u&&ig(u.elementType)&&(S=F0):S=TS;if(S&&(S=S(t,u))){Cv(d,S,n,f);break e}C&&C(t,h,u),t==="focusout"&&u&&h.type==="number"&&u.memoizedProps.value!=null&&If(h,"number",h.value)}switch(C=u?xl(u):window,t){case"focusin":(H0(C)||C.contentEditable==="true")&&(Kr=C,Of=u,El=null);break;case"focusout":El=Of=Kr=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,W0(d,n,f);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":W0(d,n,f)}var j;if(ug)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Yr?wv(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(_v&&n.locale!=="ko"&&(Yr||T!=="onCompositionStart"?T==="onCompositionEnd"&&Yr&&(j=vv()):(Ja=f,og="value"in Ja?Ja.value:Ja.textContent,Yr=!0)),C=pu(u,T),0<C.length&&(T=new P0(T,t,null,n,f),d.push({event:T,listeners:C}),j?T.data=j:(j=kv(n),j!==null&&(T.data=j)))),(j=wS?kS(t,n):CS(t,n))&&(T=pu(u,"onBeforeInput"),0<T.length&&(C=new P0("onBeforeInput","beforeinput",null,n,f),d.push({event:C,listeners:T}),C.data=j)),gE(d,t,u,n,f)}b1(d,e)})}function so(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pu(t,e){for(var n=e+"Capture",a=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Kl(t,n),s!=null&&a.unshift(so(t,s,r)),s=Kl(t,e),s!=null&&a.push(so(t,s,r))),t.tag===3)return a;t=t.return}return[]}function bE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ty(t,e,n,a,s){for(var r=e._reactName,l=[];n!==null&&n!==a;){var o=n,c=o.alternate,u=o.stateNode;if(o=o.tag,c!==null&&c===a)break;o!==5&&o!==26&&o!==27||u===null||(c=u,s?(u=Kl(n,r),u!=null&&l.unshift(so(n,u,c))):s||(u=Kl(n,r),u!=null&&l.push(so(n,u,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var vE=/\r\n?/g,_E=/\u0000|\uFFFD/g;function Ay(t){return(typeof t=="string"?t:""+t).replace(vE,`
`).replace(_E,"")}function _1(t,e){return e=Ay(e),Ay(t)===e}function Ce(t,e,n,a,s,r){switch(n){case"children":typeof a=="string"?e==="body"||e==="textarea"&&a===""||pi(t,a):(typeof a=="number"||typeof a=="bigint")&&e!=="body"&&pi(t,""+a);break;case"className":hc(t,"class",a);break;case"tabIndex":hc(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":hc(t,n,a);break;case"style":xv(t,a,r);break;case"data":if(e!=="object"){hc(t,"data",a);break}case"src":case"href":if(a===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Ac(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Ce(t,e,"name",s.name,s,null),Ce(t,e,"formEncType",s.formEncType,s,null),Ce(t,e,"formMethod",s.formMethod,s,null),Ce(t,e,"formTarget",s.formTarget,s,null)):(Ce(t,e,"encType",s.encType,s,null),Ce(t,e,"method",s.method,s,null),Ce(t,e,"target",s.target,s,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Ac(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=pa);break;case"onScroll":a!=null&&oe("scroll",t);break;case"onScrollEnd":a!=null&&oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(A(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(A(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=Ac(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":oe("beforetoggle",t),oe("toggle",t),Tc(t,"popover",a);break;case"xlinkActuate":aa(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":aa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":aa(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":aa(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":aa(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":aa(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":aa(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":aa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":aa(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Tc(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=KN.get(n)||n,Tc(t,n,a))}}function rm(t,e,n,a,s,r){switch(n){case"style":xv(t,a,r);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(A(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(A(60));t.innerHTML=n}}break;case"children":typeof a=="string"?pi(t,a):(typeof a=="number"||typeof a=="bigint")&&pi(t,""+a);break;case"onScroll":a!=null&&oe("scroll",t);break;case"onScrollEnd":a!=null&&oe("scrollend",t);break;case"onClick":a!=null&&(t.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[$t]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof a=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,a,s);break e}n in t?t[n]=a:a===!0?t.setAttribute(n,""):Tc(t,n,a)}}}function jt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",t),oe("load",t);var a=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(l!=null)switch(r){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(A(137,e));default:Ce(t,e,r,l,n,null)}}s&&Ce(t,e,"srcSet",n.srcSet,n,null),a&&Ce(t,e,"src",n.src,n,null);return;case"input":oe("invalid",t);var o=r=l=s=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var f=n[a];if(f!=null)switch(a){case"name":s=f;break;case"type":l=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":r=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(A(137,e));break;default:Ce(t,e,a,f,n,null)}}gv(t,r,o,c,u,l,s,!1);return;case"select":oe("invalid",t),a=l=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:Ce(t,e,s,o,n,null)}e=r,n=l,t.multiple=!!a,e!=null?ai(t,!!a,e,!1):n!=null&&ai(t,!!a,n,!0);return;case"textarea":oe("invalid",t),r=s=a=null;for(l in n)if(n.hasOwnProperty(l)&&(o=n[l],o!=null))switch(l){case"value":a=o;break;case"defaultValue":s=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(A(91));break;default:Ce(t,e,l,o,n,null)}yv(t,a,s,r);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(a=n[c],a!=null))switch(c){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ce(t,e,c,a,n,null)}return;case"dialog":oe("beforetoggle",t),oe("toggle",t),oe("cancel",t),oe("close",t);break;case"iframe":case"object":oe("load",t);break;case"video":case"audio":for(a=0;a<ao.length;a++)oe(ao[a],t);break;case"image":oe("error",t),oe("load",t);break;case"details":oe("toggle",t);break;case"embed":case"source":case"link":oe("error",t),oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(a=n[u],a!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(A(137,e));default:Ce(t,e,u,a,n,null)}return;default:if(ig(e)){for(f in n)n.hasOwnProperty(f)&&(a=n[f],a!==void 0&&rm(t,e,f,a,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(a=n[o],a!=null&&Ce(t,e,o,a,n,null))}function wE(t,e,n,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,l=null,o=null,c=null,u=null,f=null;for(m in n){var d=n[m];if(n.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=d;default:a.hasOwnProperty(m)||Ce(t,e,m,null,a,d)}}for(var h in a){var m=a[h];if(d=n[h],a.hasOwnProperty(h)&&(m!=null||d!=null))switch(h){case"type":r=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":f=m;break;case"value":l=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(A(137,e));break;default:m!==d&&Ce(t,e,h,m,a,d)}}Af(t,l,o,c,u,f,r,s);return;case"select":m=l=o=h=null;for(r in n)if(c=n[r],n.hasOwnProperty(r)&&c!=null)switch(r){case"value":break;case"multiple":m=c;default:a.hasOwnProperty(r)||Ce(t,e,r,null,a,c)}for(s in a)if(r=a[s],c=n[s],a.hasOwnProperty(s)&&(r!=null||c!=null))switch(s){case"value":h=r;break;case"defaultValue":o=r;break;case"multiple":l=r;default:r!==c&&Ce(t,e,s,r,a,c)}e=o,n=l,a=m,h!=null?ai(t,!!n,h,!1):!!a!=!!n&&(e!=null?ai(t,!!n,e,!0):ai(t,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(o in n)if(s=n[o],n.hasOwnProperty(o)&&s!=null&&!a.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ce(t,e,o,null,a,s)}for(l in a)if(s=a[l],r=n[l],a.hasOwnProperty(l)&&(s!=null||r!=null))switch(l){case"value":h=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(A(91));break;default:s!==r&&Ce(t,e,l,s,a,r)}pv(t,h,m);return;case"option":for(var b in n)if(h=n[b],n.hasOwnProperty(b)&&h!=null&&!a.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:Ce(t,e,b,null,a,h)}for(c in a)if(h=a[c],m=n[c],a.hasOwnProperty(c)&&h!==m&&(h!=null||m!=null))switch(c){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ce(t,e,c,h,a,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _ in n)h=n[_],n.hasOwnProperty(_)&&h!=null&&!a.hasOwnProperty(_)&&Ce(t,e,_,null,a,h);for(u in a)if(h=a[u],m=n[u],a.hasOwnProperty(u)&&h!==m&&(h!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(A(137,e));break;default:Ce(t,e,u,h,a,m)}return;default:if(ig(e)){for(var w in n)h=n[w],n.hasOwnProperty(w)&&h!==void 0&&!a.hasOwnProperty(w)&&rm(t,e,w,void 0,a,h);for(f in a)h=a[f],m=n[f],!a.hasOwnProperty(f)||h===m||h===void 0&&m===void 0||rm(t,e,f,h,a,m);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!a.hasOwnProperty(y)&&Ce(t,e,y,null,a,h);for(d in a)h=a[d],m=n[d],!a.hasOwnProperty(d)||h===m||h==null&&m==null||Ce(t,e,d,h,a,m)}function Iy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var s=n[a],r=s.transferSize,l=s.initiatorType,o=s.duration;if(r&&o&&Iy(l)){for(l=0,o=s.responseEnd,a+=1;a<n.length;a++){var c=n[a],u=c.startTime;if(u>o)break;var f=c.transferSize,d=c.initiatorType;f&&Iy(d)&&(c=c.responseEnd,l+=f*(c<o?1:(o-u)/(c-u)))}if(--a,e+=8*(r+l)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var im=null,lm=null;function yu(t){return t.nodeType===9?t:t.ownerDocument}function Ry(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w1(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qh=null;function CE(){var t=window.event;return t&&t.type==="popstate"?t===Qh?!1:(Qh=t,!0):(Qh=null,!1)}var k1=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0,My=typeof Promise=="function"?Promise:void 0,SE=typeof queueMicrotask=="function"?queueMicrotask:typeof My<"u"?function(t){return My.resolve(null).then(t).catch(EE)}:k1;function EE(t){setTimeout(function(){throw t})}function Ls(t){return t==="head"}function Oy(t,e){var n=e,a=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(s),Ci(e);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Pl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Pl(n);for(var r=n.firstChild;r;){var l=r.nextSibling,o=r.nodeName;r[Mo]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=l}}else n==="body"&&Pl(t.ownerDocument.body);n=s}while(n);Ci(e)}function Dy(t,e){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function cm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":cm(n),rg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function jE(t,e,n,a){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Mo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=wn(t.nextSibling),t===null)break}return null}function TE(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=wn(t.nextSibling),t===null))return null;return t}function C1(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=wn(t.nextSibling),t===null))return null;return t}function um(t){return t.data==="$?"||t.data==="$~"}function dm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function AE(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var a=function(){e(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var hm=null;function Ly(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return wn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Py(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function N1(t,e,n){switch(e=yu(n),t){case"html":if(t=e.documentElement,!t)throw Error(A(452));return t;case"head":if(t=e.head,!t)throw Error(A(453));return t;case"body":if(t=e.body,!t)throw Error(A(454));return t;default:throw Error(A(451))}}function Pl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);rg(t)}var Nn=new Map,Uy=new Set;function xu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pa=pe.d;pe.d={f:IE,r:RE,D:ME,C:OE,L:DE,m:LE,X:UE,S:PE,M:BE};function IE(){var t=Pa.f(),e=pd();return t||e}function RE(t){var e=Di(t);e!==null&&e.tag===5&&e.type==="form"?x_(e):Pa.r(t)}var Bi=typeof document>"u"?null:document;function S1(t,e,n){var a=Bi;if(a&&typeof e=="string"&&e){var s=pn(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Uy.has(s)||(Uy.add(s),t={rel:t,crossOrigin:n,href:e},a.querySelector(s)===null&&(e=a.createElement("link"),jt(e,"link",t),xt(e),a.head.appendChild(e)))}}function ME(t){Pa.D(t),S1("dns-prefetch",t,null)}function OE(t,e){Pa.C(t,e),S1("preconnect",t,e)}function DE(t,e,n){Pa.L(t,e,n);var a=Bi;if(a&&t&&e){var s='link[rel="preload"][as="'+pn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+pn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+pn(n.imageSizes)+'"]')):s+='[href="'+pn(t)+'"]';var r=s;switch(e){case"style":r=ki(t);break;case"script":r=zi(t)}Nn.has(r)||(t=Le({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Nn.set(r,t),a.querySelector(s)!==null||e==="style"&&a.querySelector(Bo(r))||e==="script"&&a.querySelector(zo(r))||(e=a.createElement("link"),jt(e,"link",t),xt(e),a.head.appendChild(e)))}}function LE(t,e){Pa.m(t,e);var n=Bi;if(n&&t){var a=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+pn(a)+'"][href="'+pn(t)+'"]',r=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=zi(t)}if(!Nn.has(r)&&(t=Le({rel:"modulepreload",href:t},e),Nn.set(r,t),n.querySelector(s)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(zo(r)))return}a=n.createElement("link"),jt(a,"link",t),xt(a),n.head.appendChild(a)}}}function PE(t,e,n){Pa.S(t,e,n);var a=Bi;if(a&&t){var s=ni(a).hoistableStyles,r=ki(t);e=e||"default";var l=s.get(r);if(!l){var o={loading:0,preload:null};if(l=a.querySelector(Bo(r)))o.loading=5;else{t=Le({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Nn.get(r))&&Qg(t,n);var c=l=a.createElement("link");xt(c),jt(c,"link",t),c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,zc(l,e,a)}l={type:"stylesheet",instance:l,count:1,state:o},s.set(r,l)}}}function UE(t,e){Pa.X(t,e);var n=Bi;if(n&&t){var a=ni(n).hoistableScripts,s=zi(t),r=a.get(s);r||(r=n.querySelector(zo(s)),r||(t=Le({src:t,async:!0},e),(e=Nn.get(s))&&Gg(t,e),r=n.createElement("script"),xt(r),jt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}}function BE(t,e){Pa.M(t,e);var n=Bi;if(n&&t){var a=ni(n).hoistableScripts,s=zi(t),r=a.get(s);r||(r=n.querySelector(zo(s)),r||(t=Le({src:t,async:!0,type:"module"},e),(e=Nn.get(s))&&Gg(t,e),r=n.createElement("script"),xt(r),jt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}}function By(t,e,n,a){var s=(s=is.current)?xu(s):null;if(!s)throw Error(A(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=ki(n.href),n=ni(s).hoistableStyles,a=n.get(e),a||(a={type:"style",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=ki(n.href);var r=ni(s).hoistableStyles,l=r.get(t);if(l||(s=s.ownerDocument||s,l={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,l),(r=s.querySelector(Bo(t)))&&!r._p&&(l.instance=r,l.state.loading=5),Nn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nn.set(t,n),r||zE(s,t,n,l.state))),e&&a===null)throw Error(A(528,""));return l}if(e&&a!==null)throw Error(A(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=zi(n),n=ni(s).hoistableScripts,a=n.get(e),a||(a={type:"script",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(A(444,t))}}function ki(t){return'href="'+pn(t)+'"'}function Bo(t){return'link[rel="stylesheet"]['+t+"]"}function E1(t){return Le({},t,{"data-precedence":t.precedence,precedence:null})}function zE(t,e,n,a){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?a.loading=1:(e=t.createElement("link"),a.preload=e,e.addEventListener("load",function(){return a.loading|=1}),e.addEventListener("error",function(){return a.loading|=2}),jt(e,"link",n),xt(e),t.head.appendChild(e))}function zi(t){return'[src="'+pn(t)+'"]'}function zo(t){return"script[async]"+t}function zy(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var a=t.querySelector('style[data-href~="'+pn(n.href)+'"]');if(a)return e.instance=a,xt(a),a;var s=Le({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),xt(a),jt(a,"style",s),zc(a,n.precedence,t),e.instance=a;case"stylesheet":s=ki(n.href);var r=t.querySelector(Bo(s));if(r)return e.state.loading|=4,e.instance=r,xt(r),r;a=E1(n),(s=Nn.get(s))&&Qg(a,s),r=(t.ownerDocument||t).createElement("link"),xt(r);var l=r;return l._p=new Promise(function(o,c){l.onload=o,l.onerror=c}),jt(r,"link",a),e.state.loading|=4,zc(r,n.precedence,t),e.instance=r;case"script":return r=zi(n.src),(s=t.querySelector(zo(r)))?(e.instance=s,xt(s),s):(a=n,(s=Nn.get(r))&&(a=Le({},n),Gg(a,s)),t=t.ownerDocument||t,s=t.createElement("script"),xt(s),jt(s,"link",a),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(A(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(a=e.instance,e.state.loading|=4,zc(a,n.precedence,t));return e.instance}function zc(t,e,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,r=s,l=0;l<a.length;l++){var o=a[l];if(o.dataset.precedence===e)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Qg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Gg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Hc=null;function Hy(t,e,n){if(Hc===null){var a=new Map,s=Hc=new Map;s.set(n,a)}else s=Hc,a=s.get(n),a||(a=new Map,s.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[Mo]||r[Nt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var l=r.getAttribute(e)||"";l=t+l;var o=a.get(l);o?o.push(r):a.set(l,[r])}}return a}function Fy(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function HE(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function j1(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function FE(t,e,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=ki(a.href),r=e.querySelector(Bo(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=bu.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,xt(r);return}r=e.ownerDocument||e,a=E1(a),(s=Nn.get(s))&&Qg(a,s),r=r.createElement("link"),xt(r);var l=r;l._p=new Promise(function(o,c){l.onload=o,l.onerror=c}),jt(r,"link",a),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=bu.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Gh=0;function VE(t,e){return t.stylesheets&&t.count===0&&Fc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&Fc(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&Gh===0&&(Gh=62500*kE());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fc(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Gh?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(s)}}:null}function bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vu=null;function Fc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vu=new Map,e.forEach(QE,t),vu=null,bu.call(t))}function QE(t,e){if(!(e.state.loading&4)){var n=vu.get(t);if(n)var a=n.get(null);else{n=new Map,vu.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var l=s[r];(l.nodeName==="LINK"||l.getAttribute("media")!=="not all")&&(n.set(l.dataset.precedence,l),a=l)}a&&n.set(null,a)}s=e.instance,l=s.getAttribute("data-precedence"),r=n.get(l)||a,r===a&&n.set(null,s),n.set(l,s),this.count++,a=bu.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var ro={$$typeof:ga,Provider:null,Consumer:null,_currentValue:nr,_currentValue2:nr,_threadCount:0};function GE(t,e,n,a,s,r,l,o,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.hiddenUpdates=mh(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function T1(t,e,n,a,s,r,l,o,c,u,f,d){return t=new GE(t,e,n,l,c,u,f,d,o),e=1,r===!0&&(e|=24),r=Zt(3,null,null,e),t.current=r,r.stateNode=t,e=yg(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:e},vg(r),t}function A1(t){return t?(t=Zr,t):Zr}function I1(t,e,n,a,s,r){s=A1(s),a.context===null?a.context=s:a.pendingContext=s,a=os(e),a.payload={element:n},r=r===void 0?null:r,r!==null&&(a.callback=r),n=cs(t,a,e),n!==null&&(Gt(n,t,e),Tl(n,t,e))}function Vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $g(t,e){Vy(t,e),(t=t.alternate)&&Vy(t,e)}function R1(t){if(t.tag===13||t.tag===31){var e=Er(t,67108864);e!==null&&Gt(e,t,67108864),$g(t,67108864)}}function Qy(t){if(t.tag===13||t.tag===31){var e=sn();e=ag(e);var n=Er(t,e);n!==null&&Gt(n,t,e),$g(t,e)}}var _u=!0;function $E(t,e,n,a){var s=X.T;X.T=null;var r=pe.p;try{pe.p=2,Wg(t,e,n,a)}finally{pe.p=r,X.T=s}}function WE(t,e,n,a){var s=X.T;X.T=null;var r=pe.p;try{pe.p=8,Wg(t,e,n,a)}finally{pe.p=r,X.T=s}}function Wg(t,e,n,a){if(_u){var s=fm(a);if(s===null)Vh(t,e,a,wu,n),Gy(t,a);else if(KE(s,t,e,n,a))a.stopPropagation();else if(Gy(t,a),e&4&&-1<YE.indexOf(t)){for(;s!==null;){var r=Di(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var l=Ws(r.pendingLanes);if(l!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;l;){var c=1<<31-an(l);o.entanglements[1]|=c,l&=~c}ta(r),!(ge&6)&&(du=tn()+500,Uo(0))}}break;case 31:case 13:o=Er(r,2),o!==null&&Gt(o,r,2),pd(),$g(r,2)}if(r=fm(a),r===null&&Vh(t,e,a,wu,n),r===s)break;s=r}s!==null&&a.stopPropagation()}else Vh(t,e,a,null,n)}}function fm(t){return t=lg(t),Yg(t)}var wu=null;function Yg(t){if(wu=null,t=$r(t),t!==null){var e=To(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Zb(e),t!==null)return t;t=null}else if(n===31){if(t=Jb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return wu=t,null}function M1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(MN()){case av:return 2;case sv:return 8;case qc:case ON:return 32;case rv:return 268435456;default:return 32}default:return 32}}var mm=!1,hs=null,fs=null,ms=null,io=new Map,lo=new Map,qa=[],YE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gy(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":io.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(e.pointerId)}}function ul(t,e,n,a,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Di(e),e!==null&&R1(e)),t):(t.eventSystemFlags|=a,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function KE(t,e,n,a,s){switch(e){case"focusin":return hs=ul(hs,t,e,n,a,s),!0;case"dragenter":return fs=ul(fs,t,e,n,a,s),!0;case"mouseover":return ms=ul(ms,t,e,n,a,s),!0;case"pointerover":var r=s.pointerId;return io.set(r,ul(io.get(r)||null,t,e,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,lo.set(r,ul(lo.get(r)||null,t,e,n,a,s)),!0}return!1}function O1(t){var e=$r(t.target);if(e!==null){var n=To(e);if(n!==null){if(e=n.tag,e===13){if(e=Zb(n),e!==null){t.blockedOn=e,T0(t.priority,function(){Qy(n)});return}}else if(e===31){if(e=Jb(n),e!==null){t.blockedOn=e,T0(t.priority,function(){Qy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fm(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Rf=a,n.target.dispatchEvent(a),Rf=null}else return e=Di(n),e!==null&&R1(e),t.blockedOn=n,!1;e.shift()}return!0}function $y(t,e,n){Vc(t)&&n.delete(e)}function XE(){mm=!1,hs!==null&&Vc(hs)&&(hs=null),fs!==null&&Vc(fs)&&(fs=null),ms!==null&&Vc(ms)&&(ms=null),io.forEach($y),lo.forEach($y)}function vc(t,e){t.blockedOn===e&&(t.blockedOn=null,mm||(mm=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,XE)))}var _c=null;function Wy(t){_c!==t&&(_c=t,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,function(){_c===t&&(_c=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],s=t[e+2];if(typeof a!="function"){if(Yg(a||n)===null)continue;break}var r=Di(n);r!==null&&(t.splice(e,3),e-=3,Yf(r,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function Ci(t){function e(c){return vc(c,t)}hs!==null&&vc(hs,t),fs!==null&&vc(fs,t),ms!==null&&vc(ms,t),io.forEach(e),lo.forEach(e);for(var n=0;n<qa.length;n++){var a=qa[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<qa.length&&(n=qa[0],n.blockedOn===null);)O1(n),n.blockedOn===null&&qa.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var s=n[a],r=n[a+1],l=s[$t]||null;if(typeof r=="function")l||Wy(n);else if(l){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,l=r[$t]||null)o=l.formAction;else if(Yg(s)!==null)continue}else o=l.action;typeof o=="function"?n[a+1]=o:(n.splice(a,3),a-=3),Wy(n)}}}function D1(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(l){return s=l})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function Kg(t){this._internalRoot=t}bd.prototype.render=Kg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));var n=e.current,a=sn();I1(n,a,t,e,null,null)};bd.prototype.unmount=Kg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;I1(t.current,2,null,t,null,null),pd(),e[Oi]=null}};function bd(t){this._internalRoot=t}bd.prototype.unstable_scheduleHydration=function(t){if(t){var e=uv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qa.length&&e!==0&&e<qa[n].priority;n++);qa.splice(n,0,t),n===0&&O1(t)}};var Yy=Xb.version;if(Yy!=="19.2.0")throw Error(A(527,Yy,"19.2.0"));pe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=SN(e),t=t!==null?ev(t):null,t=t===null?null:t.stateNode,t};var qE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{Ao=wc.inject(qE),nn=wc}catch{}}nd.createRoot=function(t,e){if(!qb(t))throw Error(A(299));var n=!1,a="",s=S_,r=E_,l=j_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=T1(t,1,!1,null,null,n,a,null,s,r,l,D1),t[Oi]=e.current,Vg(t),new Kg(e)};nd.hydrateRoot=function(t,e,n){if(!qb(t))throw Error(A(299));var a=!1,s="",r=S_,l=E_,o=j_,c=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(l=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=T1(t,1,!0,e,n??null,a,s,c,r,l,o,D1),e.context=A1(null),n=e.current,a=sn(),a=ag(a),s=os(a),s.callback=null,cs(n,s,a),n=a,e.current.lanes=n,Ro(e,n),ta(e),t[Oi]=e.current,Vg(t),new bd(e)};nd.version="19.2.0";function L1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L1)}catch(t){console.error(t)}}L1(),Qb.exports=nd;var ZE=Qb.exports;const JE=Ob(ZE);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oo.apply(this,arguments)}var as;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(as||(as={}));const Ky="popstate";function ej(t){t===void 0&&(t={});function e(s,r){let{pathname:l="/",search:o="",hash:c=""}=Tr(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),gm("",{pathname:l,search:o,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){let l=s.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof r=="string"?r:ku(r))}function a(s,r){Xg(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(r)+")")}return nj(e,n,a,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tj(){return Math.random().toString(36).substr(2,8)}function Xy(t,e){return{usr:t.state,key:t.key,idx:e}}function gm(t,e,n,a){return n===void 0&&(n=null),oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Tr(e):e,{state:n,key:e&&e.key||a||tj()})}function ku(t){let{pathname:e="/",search:n="",hash:a=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Tr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substr(a),t=t.substr(0,a)),t&&(e.pathname=t)}return e}function nj(t,e,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:r=!1}=a,l=s.history,o=as.Pop,c=null,u=f();u==null&&(u=0,l.replaceState(oo({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function d(){o=as.Pop;let w=f(),y=w==null?null:w-u;u=w,c&&c({action:o,location:_.location,delta:y})}function h(w,y){o=as.Push;let g=gm(_.location,w,y);n&&n(g,w),u=f()+1;let x=Xy(g,u),v=_.createHref(g);try{l.pushState(x,"",v)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(v)}r&&c&&c({action:o,location:_.location,delta:1})}function m(w,y){o=as.Replace;let g=gm(_.location,w,y);n&&n(g,w),u=f();let x=Xy(g,u),v=_.createHref(g);l.replaceState(x,"",v),r&&c&&c({action:o,location:_.location,delta:0})}function b(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:ku(w);return g=g.replace(/ $/,"%20"),Qe(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let _={get action(){return o},get location(){return t(s,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ky,d),c=w,()=>{s.removeEventListener(Ky,d),c=null}},createHref(w){return e(s,w)},createURL:b,encodeLocation(w){let y=b(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(w){return l.go(w)}};return _}var qy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qy||(qy={}));function aj(t,e,n){return n===void 0&&(n="/"),sj(t,e,n)}function sj(t,e,n,a){let s=typeof e=="string"?Tr(e):e,r=Ni(s.pathname||"/",n);if(r==null)return null;let l=P1(t);rj(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=pj(r);o=mj(l[c],u)}return o}function P1(t,e,n,a){e===void 0&&(e=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(r,l,o)=>{let c={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:l,route:r};c.relativePath.startsWith("/")&&(Qe(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let u=gs([a,c.relativePath]),f=n.concat(c);r.children&&r.children.length>0&&(Qe(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),P1(r.children,e,f,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:hj(u,r.index),routesMeta:f})};return t.forEach((r,l)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))s(r,l);else for(let c of U1(r.path))s(r,l,c)}),e}function U1(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(a.length===0)return s?[r,""]:[r];let l=U1(a.join("/")),o=[];return o.push(...l.map(c=>c===""?r:[r,c].join("/"))),s&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function rj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fj(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const ij=/^:[\w-]+$/,lj=3,oj=2,cj=1,uj=10,dj=-2,Zy=t=>t==="*";function hj(t,e){let n=t.split("/"),a=n.length;return n.some(Zy)&&(a+=dj),e&&(a+=oj),n.filter(s=>!Zy(s)).reduce((s,r)=>s+(ij.test(r)?lj:r===""?cj:uj),a)}function fj(t,e){return t.length===e.length&&t.slice(0,-1).every((a,s)=>a===e[s])?t[t.length-1]-e[e.length-1]:0}function mj(t,e,n){let{routesMeta:a}=t,s={},r="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],u=o===a.length-1,f=r==="/"?e:e.slice(r.length)||"/",d=pm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d)return null;Object.assign(s,d.params),l.push({params:s,pathname:gs([r,d.pathname]),pathnameBase:vj(gs([r,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(r=gs([r,d.pathnameBase]))}return l}function pm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=gj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],l=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:a.reduce((u,f,d)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let _=o[d]||"";l=r.slice(0,r.length-_.length).replace(/(.)\/+$/,"$1")}const b=o[d];return m&&!b?u[h]=void 0:u[h]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:l,pattern:t}}function gj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Xg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function pj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ni(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function yj(t,e){e===void 0&&(e="/");let{pathname:n,search:a="",hash:s=""}=typeof t=="string"?Tr(t):t;return{pathname:n?n.startsWith("/")?n:xj(n,e):e,search:_j(a),hash:wj(s)}}function xj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function $h(t,e,n,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qg(t,e){let n=bj(t);return e?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function Zg(t,e,n,a){a===void 0&&(a=!1);let s;typeof t=="string"?s=Tr(t):(s=oo({},t),Qe(!s.pathname||!s.pathname.includes("?"),$h("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),$h("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),$h("#","search","hash",s)));let r=t===""||s.pathname==="",l=r?"/":s.pathname,o;if(l==null)o=n;else{let d=e.length-1;if(!a&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}o=d>=0?e[d]:"/"}let c=yj(s,o),u=l&&l!=="/"&&l.endsWith("/"),f=(r||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const gs=t=>t.join("/").replace(/\/\/+/g,"/"),vj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_j=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B1=["post","put","patch","delete"];new Set(B1);const Cj=["get",...B1];new Set(Cj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},co.apply(this,arguments)}const vd=p.createContext(null),z1=p.createContext(null),Ua=p.createContext(null),_d=p.createContext(null),Ps=p.createContext({outlet:null,matches:[],isDataRoute:!1}),H1=p.createContext(null);function Nj(t,e){let{relative:n}=e===void 0?{}:e;Hi()||Qe(!1);let{basename:a,navigator:s}=p.useContext(Ua),{hash:r,pathname:l,search:o}=wd(t,{relative:n}),c=l;return a!=="/"&&(c=l==="/"?a:gs([a,l])),s.createHref({pathname:c,search:o,hash:r})}function Hi(){return p.useContext(_d)!=null}function Ba(){return Hi()||Qe(!1),p.useContext(_d).location}function F1(t){p.useContext(Ua).static||p.useLayoutEffect(t)}function V1(){let{isDataRoute:t}=p.useContext(Ps);return t?Uj():Sj()}function Sj(){Hi()||Qe(!1);let t=p.useContext(vd),{basename:e,future:n,navigator:a}=p.useContext(Ua),{matches:s}=p.useContext(Ps),{pathname:r}=Ba(),l=JSON.stringify(qg(s,n.v7_relativeSplatPath)),o=p.useRef(!1);return F1(()=>{o.current=!0}),p.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){a.go(u);return}let d=Zg(u,JSON.parse(l),r,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:gs([e,d.pathname])),(f.replace?a.replace:a.push)(d,f.state,f)},[e,a,l,r,t])}function wd(t,e){let{relative:n}=e===void 0?{}:e,{future:a}=p.useContext(Ua),{matches:s}=p.useContext(Ps),{pathname:r}=Ba(),l=JSON.stringify(qg(s,a.v7_relativeSplatPath));return p.useMemo(()=>Zg(t,JSON.parse(l),r,n==="path"),[t,l,r,n])}function Ej(t,e){return jj(t,e)}function jj(t,e,n,a){Hi()||Qe(!1);let{navigator:s}=p.useContext(Ua),{matches:r}=p.useContext(Ps),l=r[r.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=Ba(),f;if(e){var d;let w=typeof e=="string"?Tr(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Qe(!1),f=w}else f=u;let h=f.pathname||"/",m=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=aj(t,{pathname:m}),_=Mj(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:gs([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:gs([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),r,n,a);return e&&_?p.createElement(_d.Provider,{value:{location:co({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:as.Pop}},_):_}function Tj(){let t=Pj(),e=kj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,null)}const Aj=p.createElement(Tj,null);class Ij extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(Ps.Provider,{value:this.props.routeContext},p.createElement(H1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rj(t){let{routeContext:e,match:n,children:a}=t,s=p.useContext(vd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Ps.Provider,{value:e},a)}function Mj(t,e,n,a){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),a===void 0&&(a=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=a)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let f=l.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);f>=0||Qe(!1),l=l.slice(0,Math.min(l.length,f+1))}let c=!1,u=-1;if(n&&a&&a.v7_partialHydration)for(let f=0;f<l.length;f++){let d=l[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:m}=n,b=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||b){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,d,h)=>{let m,b=!1,_=null,w=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,_=d.route.errorElement||Aj,c&&(u<0&&h===0?(Bj("route-fallback"),b=!0,w=null):u===h&&(b=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(l.slice(0,h+1)),g=()=>{let x;return m?x=_:b?x=w:d.route.Component?x=p.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=f,p.createElement(Rj,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?p.createElement(Ij,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var Q1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Q1||{}),G1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(G1||{});function Oj(t){let e=p.useContext(vd);return e||Qe(!1),e}function Dj(t){let e=p.useContext(z1);return e||Qe(!1),e}function Lj(t){let e=p.useContext(Ps);return e||Qe(!1),e}function $1(t){let e=Lj(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function Pj(){var t;let e=p.useContext(H1),n=Dj(),a=$1();return e!==void 0?e:(t=n.errors)==null?void 0:t[a]}function Uj(){let{router:t}=Oj(Q1.UseNavigateStable),e=$1(G1.UseNavigateStable),n=p.useRef(!1);return F1(()=>{n.current=!0}),p.useCallback(function(s,r){r===void 0&&(r={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,co({fromRouteId:e},r)))},[t,e])}const Jy={};function Bj(t,e,n){Jy[t]||(Jy[t]=!0)}function zj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Zs(t){let{to:e,replace:n,state:a,relative:s}=t;Hi()||Qe(!1);let{future:r,static:l}=p.useContext(Ua),{matches:o}=p.useContext(Ps),{pathname:c}=Ba(),u=V1(),f=Zg(e,qg(o,r.v7_relativeSplatPath),c,s==="path"),d=JSON.stringify(f);return p.useEffect(()=>u(JSON.parse(d),{replace:n,state:a,relative:s}),[u,d,s,n,a]),null}function He(t){Qe(!1)}function Hj(t){let{basename:e="/",children:n=null,location:a,navigationType:s=as.Pop,navigator:r,static:l=!1,future:o}=t;Hi()&&Qe(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:r,static:l,future:co({v7_relativeSplatPath:!1},o)}),[c,o,r,l]);typeof a=="string"&&(a=Tr(a));let{pathname:f="/",search:d="",hash:h="",state:m=null,key:b="default"}=a,_=p.useMemo(()=>{let w=Ni(f,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:m,key:b},navigationType:s}},[c,f,d,h,m,b,s]);return _==null?null:p.createElement(Ua.Provider,{value:u},p.createElement(_d.Provider,{children:n,value:_}))}function kd(t){let{children:e,location:n}=t;return Ej(ym(e),n)}new Promise(()=>{});function ym(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(a,s)=>{if(!p.isValidElement(a))return;let r=[...e,s];if(a.type===p.Fragment){n.push.apply(n,ym(a.props.children,r));return}a.type!==He&&Qe(!1),!a.props.index||!a.props.children||Qe(!1);let l={id:a.props.id||r.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=ym(a.props.children,r)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Cu.apply(this,arguments)}function W1(t,e){if(t==null)return{};var n={},a=Object.keys(t),s,r;for(r=0;r<a.length;r++)s=a[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Fj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vj(t,e){return t.button===0&&(!e||e==="_self")&&!Fj(t)}const Qj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Gj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],$j="6";try{window.__reactRouterVersion=$j}catch{}const Wj=p.createContext({isTransitioning:!1}),Yj="startTransition",ex=bN[Yj];function Kj(t){let{basename:e,children:n,future:a,window:s}=t,r=p.useRef();r.current==null&&(r.current=ej({window:s,v5Compat:!0}));let l=r.current,[o,c]=p.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},f=p.useCallback(d=>{u&&ex?ex(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>l.listen(f),[l,f]),p.useEffect(()=>zj(a),[a]),p.createElement(Hj,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:l,future:a})}const Xj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vn=p.forwardRef(function(e,n){let{onClick:a,relative:s,reloadDocument:r,replace:l,state:o,target:c,to:u,preventScrollReset:f,viewTransition:d}=e,h=W1(e,Qj),{basename:m}=p.useContext(Ua),b,_=!1;if(typeof u=="string"&&qj.test(u)&&(b=u,Xj))try{let x=new URL(window.location.href),v=u.startsWith("//")?new URL(x.protocol+u):new URL(u),k=Ni(v.pathname,m);v.origin===x.origin&&k!=null?u=k+v.search+v.hash:_=!0}catch{}let w=Nj(u,{relative:s}),y=Jj(u,{replace:l,state:o,target:c,preventScrollReset:f,relative:s,viewTransition:d});function g(x){a&&a(x),x.defaultPrevented||y(x)}return p.createElement("a",Cu({},h,{href:b||w,onClick:_||r?a:g,ref:n,target:c}))}),Ul=p.forwardRef(function(e,n){let{"aria-current":a="page",caseSensitive:s=!1,className:r="",end:l=!1,style:o,to:c,viewTransition:u,children:f}=e,d=W1(e,Gj),h=wd(c,{relative:d.relative}),m=Ba(),b=p.useContext(z1),{navigator:_,basename:w}=p.useContext(Ua),y=b!=null&&e5(h)&&u===!0,g=_.encodeLocation?_.encodeLocation(h).pathname:h.pathname,x=m.pathname,v=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(x=x.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&w&&(v=Ni(v,w)||v);const k=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=x===g||!l&&x.startsWith(g)&&x.charAt(k)==="/",C=v!=null&&(v===g||!l&&v.startsWith(g)&&v.charAt(g.length)==="/"),j={isActive:S,isPending:C,isTransitioning:y},T=S?a:void 0,E;typeof r=="function"?E=r(j):E=[r,S?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(j):o;return p.createElement(Vn,Cu({},d,{"aria-current":T,className:E,ref:n,style:N,to:c,viewTransition:u}),typeof f=="function"?f(j):f)});var xm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xm||(xm={}));var tx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tx||(tx={}));function Zj(t){let e=p.useContext(vd);return e||Qe(!1),e}function Jj(t,e){let{target:n,replace:a,state:s,preventScrollReset:r,relative:l,viewTransition:o}=e===void 0?{}:e,c=V1(),u=Ba(),f=wd(t,{relative:l});return p.useCallback(d=>{if(Vj(d,n)){d.preventDefault();let h=a!==void 0?a:ku(u)===ku(f);c(t,{replace:h,state:s,preventScrollReset:r,relative:l,viewTransition:o})}},[u,c,f,a,s,n,t,r,l,o])}function e5(t,e){e===void 0&&(e={});let n=p.useContext(Wj);n==null&&Qe(!1);let{basename:a}=Zj(xm.useViewTransitionState),s=wd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let r=Ni(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=Ni(n.nextLocation.pathname,a)||n.nextLocation.pathname;return pm(s.pathname,l)!=null||pm(s.pathname,r)!=null}const Kn=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Sn=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Fi=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Ca=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Y1=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),K1=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),X1=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M22 10.5h-6m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),nx=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),t5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})}),mr=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),ax=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5"})}),n5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),uo=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Jg=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),ep=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"})}),q1=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})}),a5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})}),s5=t=>i.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("polyline",{points:"16 18 22 12 16 6"}),i.jsx("polyline",{points:"8 6 2 12 8 18"})]}),tp=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),r5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),Ho=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),gr=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),i5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})}),l5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),o5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Z1=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),lt=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),J1=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),sx=t=>i.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),i.jsx("line",{x1:"9",x2:"9",y1:"3",y2:"21"})]}),_e=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})}),np=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Nu=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 00-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),rx=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 00-9 0v3.75m.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),Mt=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})}),Fo=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0l2.77-.693a9 9 0 016.208.682l.108.054a9 9 0 006.086.71l3.114-.732a48.524 48.524 0 01-.005-10.499l-3.11.732a9 9 0 01-6.085-.711l-.108-.054a9 9 0 00-6.208-.682L3 4.5M3 15V4.5"})}),Cd=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),ps=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),ew=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 21.75l-.648-1.188a2.25 2.25 0 01-1.47-1.47l-1.188-.648 1.188-.648a2.25 2.25 0 011.47-1.47l.648-1.188.648 1.188a2.25 2.25 0 011.47 1.47l1.188.648-1.188.648a2.25 2.25 0 01-1.47 1.47z"})}),bm=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})}),c5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),Nd=t=>i.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),u5=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L6.228 6.228"})}),Su=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),Eu=t=>i.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),d5=t=>i.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("polyline",{points:"4 17 10 11 4 5"}),i.jsx("line",{x1:"12",x2:"20",y1:"19",y2:"19"})]}),h5=({isOpen:t,onClose:e,title:n,children:a})=>t?i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all p-6",onClick:s=>s.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200","aria-label":"Tutup",children:i.jsx(lt,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"text-gray-700 dark:text-gray-300 mt-4 whitespace-pre-wrap",children:a}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:e,className:"font-bold py-2 px-6 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:"Tutup"})})]})}):null,f5=({title:t,message:e,icon:n,onClose:a})=>{const[s,r]=p.useState(!1);p.useEffect(()=>()=>{},[]);const l=()=>{r(!0),setTimeout(a,300)};return p.useEffect(()=>{const o=setTimeout(()=>{r(!0)},3700);return()=>clearTimeout(o)},[]),i.jsx("div",{className:`fixed top-5 right-5 z-50 max-w-sm ${s?"animate-slide-out-to-right":"animate-slide-in-from-right"}`,role:"alert",children:i.jsxs("div",{className:"flex items-center w-full p-4 text-gray-500 bg-white rounded-lg shadow-lg dark:text-gray-400 dark:bg-gray-800",children:[i.jsx("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-blue-500 bg-blue-100 rounded-lg dark:bg-blue-800 dark:text-blue-200",children:n}),i.jsxs("div",{className:"ms-3 text-sm font-normal",children:[i.jsx("span",{className:"mb-1 text-sm font-semibold text-gray-900 dark:text-white",children:t}),i.jsx("div",{className:"mb-2 text-sm font-normal",children:e})]}),i.jsxs("button",{type:"button",className:"ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","aria-label":"Close",onClick:l,children:[i.jsx("span",{className:"sr-only",children:"Close"}),i.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})})]})]})})};var We=(t=>(t.PLAYER="player",t.MASTER="master",t))(We||{}),Fn=(t=>(t.MALE="Pria",t.FEMALE="Wanita",t))(Fn||{}),Js=(t=>(t.ANY_COMPLETION="any_completion",t.PERFECT_SCORE="perfect_score",t))(Js||{}),Ae=(t=>(t.QUIZ="quiz",t.CODE="code",t))(Ae||{}),he=(t=>(t.TUTORIAL="tutorial",t.MAIN="main",t.CHALLENGE="challenge",t))(he||{});const ap=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#E0E7FF"}),i.jsx("path",{d:"M9 9.5L7 12L9 14.5",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M15 9.5L17 12L15 14.5",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M12 15L11 9",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M10 4.5C10 4.5 10.5 6 12 6C13.5 6 14 4.5 14 4.5",stroke:"#6D28D9",strokeWidth:"1.5",strokeLinecap:"round"})]}),tw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FCE7F3"}),i.jsx("path",{d:"M9 9.5L7 12L9 14.5",stroke:"#DB2777",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M15 9.5L17 12L15 14.5",stroke:"#DB2777",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M10 17C10 15.8954 10.8954 15 12 15C13.1046 15 14 15.8954 14 17",stroke:"#DB2777",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M9 5C9 5 10 3 12 3C14 3 15 5 15 5",stroke:"#9D174D",strokeWidth:"1.5",strokeLinecap:"round"})]}),nw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"10",rx:"2",fill:"#9CA3AF"}),i.jsx("rect",{x:"8",y:"4",width:"8",height:"8",rx:"2",fill:"#E5E7EB"}),i.jsx("circle",{cx:"10",cy:"8",r:"1",fill:"#4F46E5"}),i.jsx("circle",{cx:"14",cy:"8",r:"1",fill:"#4F46E5"}),i.jsx("line",{x1:"3",y1:"13",x2:"5",y2:"13",stroke:"#9CA3AF",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"19",y1:"13",x2:"21",y2:"13",stroke:"#9CA3AF",strokeWidth:"2",strokeLinecap:"round"})]}),aw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M8 20C8 17.2667 11.3333 16.2 13 15C15 13.5 13 11.5 11.5 10C10 8.5 7.5 7 9 5C10.5 3 14.5 4 16 6",stroke:"#4F46E5",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M7 6C7 4.16667 9.83333 3.8 11 5C12.5 6.5 10.5 8.5 9 10C7.5 11.5 5 13 7 15C9 17 12.5 16 14 14",stroke:"#F59E0B",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),sw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#D1FAE5"}),i.jsx("rect",{x:"8",y:"12",width:"2",height:"5",fill:"#10B981"}),i.jsx("rect",{x:"11",y:"9",width:"2",height:"8",fill:"#10B981"}),i.jsx("rect",{x:"14",y:"14",width:"2",height:"3",fill:"#10B981"}),i.jsx("circle",{cx:"12",cy:"8",r:"3",fill:"#10B981"})]}),rw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#1F2937"}),i.jsx("path",{d:"M9 14H7V12H9V14Z",fill:"#A78BFA"}),i.jsx("path",{d:"M12 11H10V9H12V11Z",fill:"#A78BFA"}),i.jsx("path",{d:"M15 14H13V12H15V14Z",fill:"#A78BFA"}),i.jsx("path",{d:"M12 17H10V15H12V17Z",fill:"#A78BFA"}),i.jsx("circle",{cx:"16.5",cy:"10.5",r:"1.5",fill:"#F472B6"})]}),iw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FEF2F2"}),i.jsx("path",{d:"M12 17V15M12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12C15 13.6569 13.6569 15 12 15ZM16 7L18 5M6 7L4 5M16 17L18 19M6 17L4 19",stroke:"#EF4444",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M10 7H14",stroke:"#B91C1C",strokeWidth:"1.5",strokeLinecap:"round"})]}),lw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#4B5563"}),i.jsx("path",{d:"M8 12C8 12 9.5 10 12 10C14.5 10 16 12 16 12",stroke:"#10B981",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M9 15L15 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M12 3V6",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M12 18V21",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"})]}),ow=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#DBEAFE"}),i.jsx("circle",{cx:"12",cy:"9",r:"3",fill:"#60A5FA"}),i.jsx("path",{d:"M12 12V17M12 17C10.3431 17 9 18.3431 9 20M12 17C13.6569 17 15 18.3431 15 20",stroke:"#1E40AF",strokeWidth:"1.5",strokeLinecap:"round"})]}),cw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FEE2E2"}),i.jsx("path",{d:"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z",fill:"#F87171"}),i.jsx("path",{d:"M12 12V17M12 17C10.3431 17 9 18.3431 9 20M12 17C13.6569 17 15 18.3431 15 20",stroke:"#991B1B",strokeWidth:"1.5",strokeLinecap:"round"})]}),uw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z",fill:"#DDD6FE"}),i.jsx("path",{d:"M12 18V14M12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14ZM12 14H15.5C16.8807 14 18 15.1193 18 16.5C18 17.8807 16.8807 19 15.5 19H12M12 14H8.5C7.11929 14 6 15.1193 6 16.5C6 17.8807 7.11929 19 8.5 19H12",stroke:"#7C3AED",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),dw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#111827"}),i.jsx("path",{d:"M7 11L9.5 13L7 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M17 11L14.5 13L17 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M6 10C6 10 8 8 12 8C16 8 18 10 18 10",stroke:"#4F46E5",strokeWidth:"1.5",strokeLinecap:"round"})]}),hw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FFFBEB"}),i.jsx("path",{d:"M12 13V19M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",fill:"#FBBF24"}),i.jsx("path",{d:"M9 19H15",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M10 16H14",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round"})]}),fw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M12 2L4 5V11C4 16.5 7.5 21.5 12 22C16.5 21.5 20 16.5 20 11V5L12 2Z",fill:"#E0F2FE"}),i.jsx("path",{d:"M12 2L4 5V11C4 16.5 7.5 21.5 12 22C16.5 21.5 20 16.5 20 11V5L12 2Z",stroke:"#0EA5E9",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M10 13L12 15L15 10",stroke:"#0284C7",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),mw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:"7",y:"2",width:"10",height:"20",rx:"2",fill:"#E5E7EB"}),i.jsx("path",{d:"M10 5L14 5",stroke:"#4B5563",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("circle",{cx:"12",cy:"19",r:"1",fill:"#4B5563"}),i.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#3B82F6"})]}),gw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F0FDF4"}),i.jsx("circle",{cx:"12",cy:"18",r:"2",stroke:"#22C55E",strokeWidth:"1.5"}),i.jsx("circle",{cx:"18",cy:"9",r:"2",stroke:"#22C55E",strokeWidth:"1.5"}),i.jsx("circle",{cx:"6",cy:"9",r:"2",stroke:"#22C55E",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 16V12",stroke:"#22C55E",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 12L16.5 9.75",stroke:"#22C55E",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 12L7.5 9.75",stroke:"#22C55E",strokeWidth:"1.5"})]}),pw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F3E8FF"}),i.jsx("path",{d:"M6 9H18V15H6V9Z",fill:"#A855F7"}),i.jsx("path",{d:"M6 12H2",stroke:"#A855F7",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M18 12H22",stroke:"#A855F7",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("circle",{cx:"9.5",cy:"12",r:"1.5",fill:"#F5D0FE"}),i.jsx("circle",{cx:"14.5",cy:"12",r:"1.5",fill:"#F5D0FE"})]}),yw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",fill:"#EFF6FF"}),i.jsx("circle",{cx:"8",cy:"10",r:"1",fill:"#3B82F6"}),i.jsx("circle",{cx:"12",cy:"10",r:"1",fill:"#3B82F6"}),i.jsx("circle",{cx:"16",cy:"10",r:"1",fill:"#3B82F6"})]}),xw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#E0F2FE"}),i.jsx("path",{d:"M9 16V12L12 14L15 10V16",stroke:"#0EA5E9",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{cx:"12",cy:"8",r:"3",fill:"#7DD3FC"}),i.jsx("path",{d:"M10 8H14",stroke:"#0369A1",strokeWidth:"1"})]}),bw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FDF2F8"}),i.jsx("path",{d:"M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8",stroke:"#F472B6",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M12 16V8",stroke:"#F472B6",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M12 8H16",stroke:"#F472B6",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M15 5C15 5 14 3 12 3C10 3 9 5 9 5",stroke:"#BE185D",strokeWidth:"1.5",strokeLinecap:"round"})]}),vw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M18 10H18.25C19.7688 10 21 11.2312 21 12.75C21 14.2688 19.7688 15.5 18.25 15.5H5.75C4.23122 15.5 3 14.2688 3 12.75C3 11.2312 4.23122 10 5.75 10H6",stroke:"#94A3B8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M12 12C10.3431 12 9 10.6569 9 9C9 7.34315 10.3431 6 12 6C13.6569 6 15 7.34315 15 9C15 10.6569 13.6569 12 12 12Z",fill:"#38BDF8"}),i.jsx("path",{d:"M12 12V18",stroke:"#0EA5E9",strokeWidth:"1.5",strokeLinecap:"round"})]}),_w=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F5F3FF"}),i.jsx("rect",{x:"10",y:"5",width:"4",height:"4",rx:"1",stroke:"#8B5CF6",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 9V12",stroke:"#8B5CF6",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 15L15 19H9L12 15Z",stroke:"#8B5CF6",strokeWidth:"1.5",strokeLinejoin:"round"}),i.jsx("path",{d:"M7 12H17",stroke:"#8B5CF6",strokeWidth:"1.5"})]}),ww=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F0F9FF"}),i.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"1",fill:"#7DD3FC"}),i.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"white"}),i.jsx("path",{d:"M16 5L19 8",stroke:"#0EA5E9",strokeWidth:"2",strokeLinecap:"round"})]}),kw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2",fill:"#374151"}),i.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1",fill:"#9CA3AF"}),i.jsx("path",{d:"M12 6V2",stroke:"#4F46E5",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 22V18",stroke:"#4F46E5",strokeWidth:"1.5"}),i.jsx("path",{d:"M18 12H22",stroke:"#4F46E5",strokeWidth:"1.5"}),i.jsx("path",{d:"M2 12H6",stroke:"#4F46E5",strokeWidth:"1.5"})]}),Cw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#E2E8F0"}),i.jsx("path",{d:"M9 8H10.5V16H9",fill:"#1E293B"}),i.jsx("path",{d:"M14 16C15.6569 16 17 14.6569 17 13C17 11.3431 15.6569 10 14 10C12.3431 10 11 11.3431 11 13C11 14.6569 12.3431 16 14 16Z",fill:"#1E293B"}),i.jsx("path",{d:"M6 11H7.5V13H6",fill:"#1E293B",opacity:"0.5"}),i.jsx("path",{d:"M18 9H19.5V11H18",fill:"#1E293B",opacity:"0.5"})]}),Nw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#4338CA"}),i.jsx("ellipse",{cx:"12",cy:"12",rx:"8",ry:"3",stroke:"#6366F1",strokeWidth:"1.5"}),i.jsx("ellipse",{cx:"12",cy:"12",rx:"3",ry:"8",transform:"rotate(90 12 12)",stroke:"#6366F1",strokeWidth:"1.5"}),i.jsx("path",{d:"M5.5 15.5L4 17",stroke:"#A5B4FC",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M18.5 15.5L20 17",stroke:"#A5B4FC",strokeWidth:"1.5",strokeLinecap:"round"})]}),Sw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F1F5F9"}),i.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#475569",strokeWidth:"1.5"}),i.jsx("path",{d:"M20 12C20 16.4183 16.4183 20 12 20C10.1537 20 8.48283 19.3722 7.15286 18.3312",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M4 12C4 7.58172 7.58172 4 12 4C13.8463 4 15.5172 4.62778 16.8471 5.66878",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M6 19L7.15286 18.3312L8 19.5",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M18 5L16.8471 5.66878L16 4.5",stroke:"#475569",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ew=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#111827"}),i.jsx("path",{d:"M5 10C5 8.89543 5.89543 8 7 8H17C18.1046 8 19 8.89543 19 10V14H5V10Z",fill:"#3730A3"}),i.jsx("path",{d:"M8 11H10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M19 12H21",stroke:"#4F46E5",strokeWidth:"2",strokeLinecap:"round"})]}),jw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FDF4FF"}),i.jsx("path",{d:"M16 9H8V11H16V9Z",fill:"#D946EF"}),i.jsx("path",{d:"M14 14H10V15H14V14Z",stroke:"#A21CAF",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M15 5C15 5 14 3 12 3C10 3 9 5 9 5",stroke:"#701A75",strokeWidth:"1.5",strokeLinecap:"round"})]}),Tw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("ellipse",{cx:"12",cy:"17",rx:"5",ry:"2",fill:"#9CA3AF"}),i.jsx("path",{d:"M7 12C7 10.8954 9.23858 10 12 10C14.7614 10 17 10.8954 17 12V17H7V12Z",fill:"#D1D5DB"}),i.jsx("ellipse",{cx:"12",cy:"12",rx:"5",ry:"2",fill:"#9CA3AF"}),i.jsx("path",{d:"M7 7C7 5.89543 9.23858 5 12 5C14.7614 5 17 5.89543 17 7V12H7V7Z",fill:"#D1D5DB"}),i.jsx("ellipse",{cx:"12",cy:"7",rx:"5",ry:"2",fill:"#9CA3AF"})]}),Aw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#FEF3C7"}),i.jsx("path",{d:"M15 5C15 5 14 3 12 3C10 3 9 5 9 5",stroke:"#D97706",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("circle",{cx:"12",cy:"9",r:"3",fill:"#FCD34D"}),i.jsx("path",{d:"M12 12L12 16",stroke:"#B45309",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 16L16 20L18 18",stroke:"#9CA3AF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Iw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{cx:"6",cy:"7",r:"2",stroke:"#16A34A",strokeWidth:"1.5"}),i.jsx("circle",{cx:"6",cy:"17",r:"2",stroke:"#16A34A",strokeWidth:"1.5"}),i.jsx("circle",{cx:"18",cy:"12",r:"2",stroke:"#16A34A",strokeWidth:"1.5"}),i.jsx("path",{d:"M8 7.5L16 11.5",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round"}),i.jsx("path",{d:"M8 16.5L16 12.5",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round"})]}),Rw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2L8 6v4h8V6l-4-4z",fill:"#E5E7EB"}),i.jsx("path",{d:"M18 10H6c-1.1 0-2 .9-2 2v8h16v-8c0-1.1-.9-2-2-2z",fill:"#9CA3AF"}),i.jsx("path",{d:"M12 14v4"}),i.jsx("path",{d:"M9 14h6"}),i.jsx("path",{d:"M12 12h.01"})]}),Mw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2l-8 5 3 13h10l3-13z",fill:"#A78BFA"}),i.jsx("path",{d:"M12 2l4 8-4 2-4-2z",fill:"#C4B5FD"}),i.jsx("path",{d:"M12 22a2 2 0 100-4 2 2 0 000 4z",fill:"#FBBF24"})]}),Ow=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2L9 5v3h6V5l-3-3z",fill:"#D1D5DB"}),i.jsx("rect",{x:"5",y:"8",width:"14",height:"10",rx:"2",fill:"#6B7280"}),i.jsx("path",{d:"M9 18v4h6v-4"}),i.jsx("path",{d:"M12 12v3"})]}),Dw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 4l-2 4h4z",fill:"#F87171"}),i.jsx("path",{d:"M6 8h12l-2 12H8z",fill:"#9CA3AF"}),i.jsx("path",{d:"M12 8V6"})]}),Lw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2L4 8l8 14 8-14z",fill:"#60A5FA"}),i.jsx("path",{d:"M12 12l-3 5h6z",fill:"#93C5FD"}),i.jsx("circle",{cx:"12",cy:"7",r:"2",fill:"#FFFFFF"})]}),Pw=t=>i.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2 L6 22 L18 22 Z",fill:"#C084FC"}),i.jsx("circle",{cx:"12",cy:"8",r:"3",fill:"#FBCFE8"}),i.jsx("path",{d:"M10 12h4",stroke:"#A21CAF"})]}),m5=ap,g5={coder_male:ap,coder_female:tw,robot_sidekick:nw,python_snake:aw,data_analyst:sw,game_dev:rw,bug_fixer:iw,ethical_hacker:lw,student_male:ow,student_female:cw,ai_brain:uw,code_ninja:dw,idea_inventor:hw,security_specialist:fw,mobile_dev:mw,open_source:gw,vr_developer:pw,ai_chatbot:yw,data_scientist_male:xw,data_scientist_female:bw,cloud_engineer:vw,algorithm_master:_w,ui_designer:ww,hardware_engineer:kw,binary_brain:Cw,quantum_coder:Nw,devops_automator:Sw,ar_goggles:Ew,cyberpunk_hacker_female:jw,database_admin:Tw,robotics_engineer_female:Aw,ml_model:Iw,knight:Rw,wizard:Mw,warrior_male:Ow,warrior_female:Dw,mage_male:Lw,mage_female:Pw},sp=[{id:"coder_male",component:ap,name:"Koder Pria",gender:"male"},{id:"coder_female",component:tw,name:"Koder Wanita",gender:"female"},{id:"student_male",component:ow,name:"Pelajar Pria",gender:"male"},{id:"student_female",component:cw,name:"Pelajar Wanita",gender:"female"},{id:"data_scientist_male",component:xw,name:"Data Scientist Pria",gender:"male"},{id:"data_scientist_female",component:bw,name:"Data Scientist Wanita",gender:"female"},{id:"cyberpunk_hacker_female",component:jw,name:"Cyberpunk Hacker",gender:"female"},{id:"robotics_engineer_female",component:Aw,name:"Insinyur Robotik",gender:"female"},{id:"robot_sidekick",component:nw,name:"Asisten Robot",gender:"unisex"},{id:"python_snake",component:aw,name:"Python Star",gender:"unisex"},{id:"code_ninja",component:dw,name:"Code Ninja",gender:"unisex"},{id:"ethical_hacker",component:lw,name:"Ethical Hacker",gender:"unisex"},{id:"bug_fixer",component:iw,name:"Pembasmi Bug",gender:"unisex"},{id:"game_dev",component:rw,name:"Game Developer",gender:"unisex"},{id:"data_analyst",component:sw,name:"Analis Data",gender:"unisex"},{id:"ai_brain",component:uw,name:"AI Engineer",gender:"unisex"},{id:"idea_inventor",component:hw,name:"Sang Inovator",gender:"unisex"},{id:"security_specialist",component:fw,name:"Spesialis Keamanan",gender:"unisex"},{id:"mobile_dev",component:mw,name:"Mobile Developer",gender:"unisex"},{id:"open_source",component:gw,name:"Kontributor Open Source",gender:"unisex"},{id:"vr_developer",component:pw,name:"VR Developer",gender:"unisex"},{id:"ai_chatbot",component:yw,name:"AI Chatbot",gender:"unisex"},{id:"cloud_engineer",component:vw,name:"Cloud Engineer",gender:"unisex"},{id:"algorithm_master",component:_w,name:"Master Algoritma",gender:"unisex"},{id:"ui_designer",component:ww,name:"UI/UX Designer",gender:"unisex"},{id:"hardware_engineer",component:kw,name:"Hardware Engineer",gender:"unisex"},{id:"binary_brain",component:Cw,name:"Binary Brain",gender:"unisex"},{id:"quantum_coder",component:Nw,name:"Quantum Coder",gender:"unisex"},{id:"devops_automator",component:Sw,name:"DevOps Automator",gender:"unisex"},{id:"ar_goggles",component:Ew,name:"AR Developer",gender:"unisex"},{id:"database_admin",component:Tw,name:"Database Admin",gender:"unisex"},{id:"ml_model",component:Iw,name:"Machine Learning",gender:"unisex"},{id:"knight",component:Rw,name:"Ksatria Kode",gender:"male"},{id:"warrior_male",component:Ow,name:"Pejuang Pria",gender:"male"},{id:"warrior_female",component:Dw,name:"Pejuang Wanita",gender:"female"},{id:"wizard",component:Mw,name:"Penyihir Bijak",gender:"male"},{id:"mage_male",component:Lw,name:"Mage Pria",gender:"male"},{id:"mage_female",component:Pw,name:"Mage Wanita",gender:"female"}],Us=t=>g5[t]||m5,p5=(t,e=500)=>{const[n,a]=p.useState(t),s=p.useRef(null),r=p.useRef(t);return p.useEffect(()=>{const l=r.current,o=t;let c=null;const u=f=>{c||(c=f);const d=f-c,h=Math.min(d/e,1),m=Math.floor(l+(o-l)*h);a(m),d<e?s.current=requestAnimationFrame(u):(a(o),r.current=o)};return s.current=requestAnimationFrame(u),()=>{s.current&&cancelAnimationFrame(s.current)}},[t,e]),Math.round(n)},na=(t,e)=>{const n=[...e].sort((a,s)=>s.xpThreshold-a.xpThreshold);for(const a of n)if(t>=a.xpThreshold)return a;return e.find(a=>a.xpThreshold===0)||{name:"Pemula",xpThreshold:0}},y5=(t,e)=>{const n=[...e].sort((r,l)=>r.xpThreshold-l.xpThreshold),a=na(t,n),s=n.findIndex(r=>r.name===a.name);return s<n.length-1?n[s+1]:null},Je=t=>t?t.replace(/ Player$/,""):"",Uw=p.createContext(void 0),Bw=p.createContext(void 0),zw=p.createContext(void 0),Hw=p.createContext(void 0),un=()=>{const t=p.useContext(Bw);if(t===void 0)throw new Error("useUI must be used within a UIProvider");return t},x5=({user:t,onLogout:e,onProfileClick:n})=>{const{theme:a,toggleTheme:s}=un(),r=Us(t.avatarId),l=p5(t.xp,500);return i.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm p-4 flex justify-between items-center flex-shrink-0 z-10",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-indigo-400",children:"Python Quest"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 hidden sm:block",children:t.role===We.MASTER?`Selamat datang kembali, ${Je(t.name)}!`:"Petualangan Koding Menantimu!"})]}),i.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[i.jsxs("button",{onClick:n,disabled:!n,className:"flex items-center gap-2 sm:gap-4 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:hover:bg-transparent disabled:cursor-default",children:[i.jsx("div",{className:"text-right",children:t.role===We.PLAYER?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"font-semibold hidden sm:block",children:t.rank}),i.jsxs("p",{className:"text-sm text-accent dark:text-amber-400 font-bold",children:[l," XP"]})]}):i.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 hidden sm:block",children:Je(t.name)})}),i.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center p-1",children:i.jsx(r,{className:"w-10 h-10"})})]}),i.jsx("button",{onClick:s,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:a==="light"?i.jsx(Eu,{className:"w-6 h-6"}):i.jsx(Su,{className:"w-6 h-6"})}),i.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-gray-200 dark:bg-gray-700 hover:bg-red-100 dark:hover:bg-red-900/50 text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 font-semibold py-2 px-3 rounded-lg transition-colors",children:[i.jsx(t5,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden sm:inline",children:"Keluar"})]})]})]})},b5=td.memo(x5),vm=({user:t,onLogout:e,onProfileClick:n,children:a,fullWidth:s=!1})=>i.jsxs("div",{className:"h-screen bg-gray-50 dark:bg-gray-900 flex flex-col overflow-hidden",children:[i.jsx(b5,{user:t,onLogout:e,onProfileClick:n}),i.jsx("main",{className:"flex-grow overflow-y-auto p-4 sm:p-6 lg:p-8",children:i.jsx("div",{className:s?"":"max-w-7xl mx-auto",children:a})})]}),v5=[{id:"beranda",label:"Beranda",icon:Z1},{id:"misi",label:"Misi",icon:Fo},{id:"tantangan",label:"Tantangan",icon:uo},{id:"peringkat",label:"Peringkat",icon:Mt},{id:"playground",label:"Arena Koding",icon:ep}],_5=()=>i.jsx("nav",{className:"bg-white dark:bg-gray-800/50 p-2 rounded-xl shadow-sm flex items-center justify-center gap-1 sm:gap-2",children:v5.map(t=>i.jsxs(Ul,{to:t.id,className:({isActive:e})=>`flex-1 flex items-center justify-center gap-2 font-semibold p-2 sm:p-3 rounded-lg transition-colors duration-200 ${e?"bg-primary text-white shadow":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsx(t.icon,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden sm:inline",children:t.label})]},t.id))}),dn=()=>{const t=p.useContext(Uw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Sd=t=>{let e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");const n=["return","if","else","elif","for","while","in","and","or","not","True","False","None"],a=["print","len","range","int","str","input"],s=new RegExp(['([fF]"(?:\\\\.|[^"\\\\])*")',"([fF]'(?:\\\\.|[^'\\\\])*')",'("(?:\\\\.|[^"\\\\])*")',"('(?:\\\\.|[^'\\\\])*')","(#.*)","\\b(def)\\s+([a-zA-Z_]\\w*)",`\\b(${n.join("|")})\\b`,`\\b(${a.join("|")})\\b(?=\\()`,"\\b([a-zA-Z_]\\w*)\\s*(?=\\()","\\b(\\d+(?:\\.\\d+)?)"].join("|"),"g");return e=e.replace(s,(r,l,o,c,u,f,d,h,m,b,_,w)=>l||o?`<span class="text-green-400">${(l||o).replace(/{([^}]+)}/g,'{<span class="text-pink-400">$1</span>}')}</span>`:c||u?`<span class="text-green-400">${c||u}</span>`:f?`<span class="text-gray-500">${f}</span>`:d&&h?`<span class="text-sky-400 font-semibold">${d}</span> <span class="text-purple-400">${h}</span>`:m?`<span class="text-sky-400 font-semibold">${m}</span>`:b?`<span class="text-pink-400">${b}</span>`:_?`<span class="text-purple-400">${_}</span>`:w?`<span class="text-amber-400">${w}</span>`:r),e},ho=t=>{if(!t)return"";const e=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),n=r=>{if(!r)return"";const l=[];let o=r.replace(/\\([*`_#|\\])/g,(c,u)=>(l.push(u),`__MD_ESCAPE_${l.length-1}__`));return o=e(o).replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-700 text-red-600 dark:text-red-400 font-mono rounded px-2 py-1 border border-gray-200 dark:border-gray-600">$1</code>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic">$1</em>'),l.forEach((c,u)=>{o=o.replace(`__MD_ESCAPE_${u}__`,e(c))}),o};return t.trim().split(/\n\s*\n/).map(r=>{const l=r.trim(),o=l.split(`
`);if(o.length>=2&&o[0].trim().startsWith("|")&&o[0].trim().endsWith("|")&&o[1].trim().startsWith("|")&&o[1].trim().includes("-")&&o[1].trim().endsWith("|"))try{const f=w=>w.trim().split("|").slice(1,-1).map(y=>y.trim()),d=f(o[0]),h=o[1],m=o.slice(2).map(w=>f(w)).filter(w=>w.length>0&&w.some(y=>y)),b=f(h).map(w=>{const y=w.trim();return y.startsWith(":")&&y.endsWith(":")?"center":y.endsWith(":")?"right":(y.startsWith(":"),"left")});let _='<table class="w-full my-4 text-left border-collapse text-sm">';return _+='<thead><tr class="border-b-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">',d.forEach((w,y)=>{const g=`text-align: ${b[y]||"left"};`;_+=`<th class="p-3 font-bold uppercase text-gray-800 dark:text-gray-200 tracking-wider" style="${g}">${n(w)}</th>`}),_+="</tr></thead>",_+="<tbody>",m.forEach(w=>{_+='<tr class="border-b border-gray-200 dark:border-gray-700 last:border-b-0 hover:bg-gray-50/50 dark:hover:bg-gray-700">';for(let y=0;y<d.length;y++){const g=w[y]||"",x=`text-align: ${b[y]||"left"};`;_+=`<td class="p-3 align-middle text-gray-700 dark:text-gray-300" style="${x}">${n(g)}</td>`}_+="</tr>"}),_+="</tbody></table>",_}catch(f){console.error("Markdown table parsing failed, rendering as paragraph.",f)}if(l.startsWith("###### "))return`<h6 class="text-sm font-bold uppercase tracking-wider mt-2 mb-1 text-primary dark:text-indigo-400">${n(l.substring(7))}</h6>`;if(l.startsWith("##### "))return`<h5 class="text-base font-bold mt-2 mb-1 text-primary dark:text-indigo-400">${n(l.substring(6))}</h5>`;if(l.startsWith("#### "))return`<h4 class="text-lg font-bold mt-3 mb-1 text-primary dark:text-indigo-400">${n(l.substring(5))}</h4>`;if(l.startsWith("### "))return`<h3 class="text-xl font-bold mt-4 mb-2 text-primary dark:text-indigo-400">${n(l.substring(4))}</h3>`;if(l.startsWith("## "))return`<h2 class="text-2xl font-bold text-primary dark:text-indigo-400 mt-5 mb-2 border-b border-gray-200 dark:border-gray-700 pb-2">${n(l.substring(3))}</h2>`;if(l.startsWith("# "))return`<h1 class="text-3xl font-bold text-primary dark:text-indigo-400 mt-6 mb-3 border-b pb-2">${n(l.substring(2))}</h1>`;if(l.startsWith(">"))return`<blockquote class="pl-4 border-l-4 border-gray-300 dark:border-gray-600 italic my-4 text-gray-600 dark:text-gray-400"><p>${l.split(`
`).map(d=>d.replace(/^>\s?/,"")).map(n).join("<br />")}</p></blockquote>`;if(l.startsWith("- ")||l.startsWith("* ")){const f=l.split(`
`);let d="";const h=[];for(f.forEach(m=>{const b=m.match(/^(\s*)/),_=b?b[1].length:0,w=m.match(/^\s*([-*])\s+(.*)/);if(!w){d.endsWith("</li>")&&(d=d.slice(0,-5)+`<br />${n(m.trim())}</li>`);return}const y=w[2];let g=h.length>0?h[h.length-1]:-1;if(_>g){const x=h.length===0?"list-disc pl-5 space-y-2 my-4":"list-disc pl-5 space-y-1 mt-2";d+=`<ul class="${x}">`,h.push(_)}else{for(;_<g;)d+="</li></ul>",h.pop(),g=h.length>0?h[h.length-1]:-1;d.length>0&&(d+="</li>")}d+=`<li>${n(y)}`});h.length>0;)d+="</li></ul>",h.pop();return d}return`<p class="my-3">${l.split(`
`).map(n).join("<br />")}</p>`}).join("")},Na=({content:t})=>{const e=t.split(/(```python[\s\S]*?```)/g);return i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-800 dark:text-gray-300 leading-relaxed",children:e.map((n,a)=>{if(n.startsWith("```python")){const s=n.replace(/^```python\n?/,"").replace(/```\s*$/,"").trim();return i.jsx("pre",{className:"bg-gray-900 text-white p-4 rounded-md overflow-x-auto font-mono text-sm my-4 not-prose",children:i.jsx("code",{dangerouslySetInnerHTML:{__html:Sd(s)}})},a)}return n.trim()?i.jsx("div",{dangerouslySetInnerHTML:{__html:ho(n)}},a):null})})},w5="modulepreload",k5=function(t){return"/python-quest/"+t},ix={},kn=function(e,n,a){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=k5(c),c in ix)return;ix[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":w5,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})},Fw={apiKey:"AIzaSyCYkAMPSAMr4Np4P46_o-ANeIQmEWBBn78",authDomain:"python-quest-e0acc.firebaseapp.com",databaseURL:"https://python-quest-e0acc-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"python-quest-e0acc",storageBucket:"python-quest-e0acc.firebasestorage.app",messagingSenderId:"940215015347",appId:"1:940215015347:web:42d21572da9f9ee7d71dc6"};let kc=null;const ae=async()=>{if(kc)return kc;const t=await kn(()=>import("./index.esm-CikVx1j_.js"),[]),e=await kn(()=>Promise.resolve().then(()=>Rp),void 0),n=await kn(()=>Promise.resolve().then(()=>pO),void 0),a=t.getApps().length>0?t.getApp():t.initializeApp(Fw),s=e.getAuth(a),r=n.getDatabase(a);return kc={app:a,auth:s,database:r,initializeApp:t.initializeApp,modularDeleteApp:t.deleteApp},kc},rp=Object.freeze(Object.defineProperty({__proto__:null,firebaseConfig:Fw,getFirebaseServices:ae},Symbol.toStringTag,{value:"Module"})),C5=()=>{};var lx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M=function(t,e){if(!t)throw Vi(e)},Vi=function(t){return new Error("Firebase Database ("+Vw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=function(t){const e=[];let n=0;for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&a+1<t.length&&(t.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++a)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},N5=function(t){const e=[];let n=0,a=0;for(;n<t.length;){const s=t[n++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[a++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],l=t[n++],o=t[n++],c=((s&7)<<18|(r&63)<<12|(l&63)<<6|o&63)-65536;e[a++]=String.fromCharCode(55296+(c>>10)),e[a++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],l=t[n++];e[a++]=String.fromCharCode((s&15)<<12|(r&63)<<6|l&63)}}return e.join("")},ip={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<t.length;s+=3){const r=t[s],l=s+1<t.length,o=l?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,f=r>>2,d=(r&3)<<4|o>>4;let h=(o&15)<<2|u>>6,m=u&63;c||(m=64,l||(h=64)),a.push(n[f],n[d],n[h],n[m])}return a.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):N5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||o==null||u==null||d==null)throw new S5;const h=r<<2|o>>4;if(a.push(h),u!==64){const m=o<<4&240|u>>2;if(a.push(m),d!==64){const b=u<<6&192|d;a.push(b)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class S5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gw=function(t){const e=Qw(t);return ip.encodeByteArray(e,!0)},ju=function(t){return Gw(t).replace(/\./g,"")},fo=function(t){try{return ip.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){return $w(void 0,t)}function $w(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!j5(n)||(t[n]=$w(t[n],e[n]));return t}function j5(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=()=>T5().__FIREBASE_DEFAULTS__,I5=()=>{if(typeof process>"u"||typeof lx>"u")return;const t=lx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fo(t[1]);return e&&JSON.parse(e)},lp=()=>{try{return C5()||A5()||I5()||R5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ww=t=>{var e,n;return(n=(e=lp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},M5=t=>{const e=Ww(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},op=()=>{var t;return(t=lp())==null?void 0:t.config},Yw=t=>{var e;return(e=lp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ju(JSON.stringify(n)),ju(JSON.stringify(l)),""].join(".")}const Bl={};function D5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bl))Bl[e]?t.emulator.push(e):t.prod.push(e);return t}function L5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ox=!1;function Xw(t,e){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Bl[t]===e||Bl[t]||ox)return;Bl[t]=e;function n(h){return`__firebase__banner__${h}`}const a="__firebase__banner",r=D5().prod.length>0;function l(){const h=document.getElementById(a);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{ox=!0,l()},h}function f(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=L5(a),m=n("text"),b=document.getElementById(m)||document.createElement("span"),_=n("learnmore"),w=document.getElementById(_)||document.createElement("a"),y=n("preprendIcon"),g=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const x=h.element;o(x),f(w,_);const v=u();c(g,y),x.append(g,b,w,v),document.body.appendChild(x)}r?(b.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function P5(){return typeof window<"u"||qw()}function qw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function U5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z5(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function H5(){return Vw.NODE_ADMIN===!0}function F5(){try{return typeof indexedDB=="object"}catch{return!1}}function V5(){return new Promise((t,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(a),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="FirebaseError";class Bs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=Q5,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],l=r?G5(r,a):"Error",o=`${this.serviceName}: ${l} (${s}).`;return new Bs(s,o,a)}}function G5(t,e){return t.replace($5,(n,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const $5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){return JSON.parse(t)}function ut(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=function(t){let e={},n={},a={},s="";try{const r=t.split(".");e=mo(fo(r[0])||""),n=mo(fo(r[1])||""),s=r[2],a=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:a,signature:s}},W5=function(t){const e=Jw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Y5=function(t){const e=Jw(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Tu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Au(t,e,n){const a={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=e.call(n,t[s],s,t));return a}function yr(t,e){if(t===e)return!0;const n=Object.keys(t),a=Object.keys(e);for(const s of n){if(!a.includes(s))return!1;const r=t[s],l=e[s];if(cx(r)&&cx(l)){if(!yr(r,l))return!1}else if(r!==l)return!1}for(const s of a)if(!n.includes(s))return!1;return!0}function cx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t){const e=[];for(const[n,a]of Object.entries(t))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function _l(t){const e={};return t.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[s,r]=a.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function wl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const a=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)a[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)a[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=a[d-3]^a[d-8]^a[d-14]^a[d-16];a[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],l=this.chain_[2],o=this.chain_[3],c=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=o^r&(l^o),f=1518500249):(u=r^l^o,f=1859775393):d<60?(u=r&l|o&(r|l),f=2400959708):(u=r^l^o,f=3395469782);const h=(s<<5|s>>>27)+u+c+f+a[d]&4294967295;c=o,o=l,l=(r<<30|r>>>2)&4294967295,r=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const a=n-this.blockSize;let s=0;const r=this.buf_;let l=this.inbuf_;for(;s<n;){if(l===0)for(;s<=a;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(r),l=0;break}}else for(;s<n;)if(r[l]=e[s],++l,++s,l===this.blockSize){this.compress_(r),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let a=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[a]=this.chain_[s]>>r&255,++a;return e}}function X5(t,e){const n=new q5(t,e);return n.subscribe.bind(n)}class q5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let s;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");Z5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:a},s.next===void 0&&(s.next=Wh),s.error===void 0&&(s.error=Wh),s.complete===void 0&&(s.complete=Wh);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wh(){}function xr(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=function(t){const e=[];let n=0;for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);if(s>=55296&&s<=56319){const r=s-55296;a++,M(a<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(a)-56320;s=65536+(r<<10)+l}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ed=function(t){let e=0;for(let n=0;n<t.length;n++){const a=t.charCodeAt(n);a<128?e++:a<2048?e+=2:a>=55296&&a<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t){return t&&t._delegate?t._delegate:t}class Ra{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Jt;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tT(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});a.resolve(r)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[r,l]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);a===o&&l.resolve(s)}return s}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const r=this.instances.get(a);return r&&e(r,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const s of a)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:eT(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eT(t){return t===Xs?void 0:t}function tT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _m(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=[];var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const ek={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},nT=be.INFO,aT={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},sT=(t,e,...n)=>{if(e<t.logLevel)return;const a=new Date().toISOString(),s=aT[e];if(s)console[s](`[${a}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hp{constructor(e){this.name=e,this._logLevel=nT,this._logHandler=sT,this._userLogHandler=null,dp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ek[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}function rT(t){dp.forEach(e=>{e.setLogLevel(t)})}function iT(t,e){for(const n of dp){let a=null;e&&e.level&&(a=ek[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,r,...l)=>{const o=l.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");r>=(a??s.logLevel)&&t({level:be[r].toLowerCase(),message:o,args:l,type:s.name})}}}const lT=(t,e)=>e.some(n=>t instanceof n);let ux,dx;function oT(){return ux||(ux=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cT(){return dx||(dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tk=new WeakMap,wm=new WeakMap,nk=new WeakMap,Yh=new WeakMap,fp=new WeakMap;function uT(t){const e=new Promise((n,a)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",l)},r=()=>{n(ys(t.result)),s()},l=()=>{a(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&tk.set(n,t)}).catch(()=>{}),fp.set(e,t),e}function dT(t){if(wm.has(t))return;const e=new Promise((n,a)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",l),t.removeEventListener("abort",l)},r=()=>{n(),s()},l=()=>{a(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",l),t.addEventListener("abort",l)});wm.set(t,e)}let km={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hT(t){km=t(km)}function fT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=t.call(Kh(this),e,...n);return nk.set(a,e.sort?e.sort():[e]),ys(a)}:cT().includes(t)?function(...e){return t.apply(Kh(this),e),ys(tk.get(this))}:function(...e){return ys(t.apply(Kh(this),e))}}function mT(t){return typeof t=="function"?fT(t):(t instanceof IDBTransaction&&dT(t),lT(t,oT())?new Proxy(t,km):t)}function ys(t){if(t instanceof IDBRequest)return uT(t);if(Yh.has(t))return Yh.get(t);const e=mT(t);return e!==t&&(Yh.set(t,e),fp.set(e,t)),e}const Kh=t=>fp.get(t);function gT(t,e,{blocked:n,upgrade:a,blocking:s,terminated:r}={}){const l=indexedDB.open(t,e),o=ys(l);return a&&l.addEventListener("upgradeneeded",c=>{a(ys(l.result),c.oldVersion,c.newVersion,ys(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const pT=["get","getKey","getAll","getAllKeys","count"],yT=["put","add","delete","clear"],Xh=new Map;function hx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xh.get(e))return Xh.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,s=yT.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(s||pT.includes(n)))return;const r=async function(l,...o){const c=this.transaction(l,s?"readwrite":"readonly");let u=c.store;return a&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&c.done]))[0]};return Xh.set(e,r),r}hT(t=>({...t,get:(e,n,a)=>hx(e,n)||t.get(e,n,a),has:(e,n)=>!!hx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bT(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function bT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iu="@firebase/app",Cm="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new hp("@firebase/app"),vT="@firebase/app-compat",_T="@firebase/analytics-compat",wT="@firebase/analytics",kT="@firebase/app-check-compat",CT="@firebase/app-check",NT="@firebase/auth",ST="@firebase/auth-compat",ET="@firebase/database",jT="@firebase/data-connect",TT="@firebase/database-compat",AT="@firebase/functions",IT="@firebase/functions-compat",RT="@firebase/installations",MT="@firebase/installations-compat",OT="@firebase/messaging",DT="@firebase/messaging-compat",LT="@firebase/performance",PT="@firebase/performance-compat",UT="@firebase/remote-config",BT="@firebase/remote-config-compat",zT="@firebase/storage",HT="@firebase/storage-compat",FT="@firebase/firestore",VT="@firebase/ai",QT="@firebase/firestore-compat",GT="firebase",$T="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="[DEFAULT]",WT={[Iu]:"fire-core",[vT]:"fire-core-compat",[wT]:"fire-analytics",[_T]:"fire-analytics-compat",[CT]:"fire-app-check",[kT]:"fire-app-check-compat",[NT]:"fire-auth",[ST]:"fire-auth-compat",[ET]:"fire-rtdb",[jT]:"fire-data-connect",[TT]:"fire-rtdb-compat",[AT]:"fire-fn",[IT]:"fire-fn-compat",[RT]:"fire-iid",[MT]:"fire-iid-compat",[OT]:"fire-fcm",[DT]:"fire-fcm-compat",[LT]:"fire-perf",[PT]:"fire-perf-compat",[UT]:"fire-rc",[BT]:"fire-rc-compat",[zT]:"fire-gcs",[HT]:"fire-gcs-compat",[FT]:"fire-fst",[QT]:"fire-fst-compat",[VT]:"fire-vertex","fire-js":"fire-js",[GT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Map,go=new Map,po=new Map;function fx(t,e){try{t.container.addComponent(e)}catch(n){Ma.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nL(t,e){t.container.addOrOverwriteComponent(e)}function Si(t){const e=t.name;if(po.has(e))return Ma.debug(`There were multiple attempts to register component ${e}.`),!1;po.set(e,t);for(const n of br.values())fx(n,t);for(const n of go.values())fx(n,t);return!0}function jd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function aL(t,e,n=Ru){jd(t,e).clearInstance(n)}function ak(t){return t.options!==void 0}function YT(t){return ak(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Ve(t){return t==null?!1:t.settings!==void 0}function sL(){po.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rn=new Vo("app","Firebase",KT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){const n=fo(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,r=new Date().getTime();s-r<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class XT extends sk{constructor(e,n,a,s){const r=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,l={name:a,automaticDataCollectionEnabled:r};if(e.apiKey!==void 0)super(e,l,s);else{const o=e;super(o.options,l,s)}this._serverConfig={automaticDataCollectionEnabled:r,...n},this._serverConfig.authIdToken&&mx(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&mx(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,xs(Iu,Cm,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ZT(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw rn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=$T;function qT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const a={name:Ru,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw rn.create("bad-app-name",{appName:String(s)});if(n||(n=op()),!n)throw rn.create("no-options");const r=br.get(s);if(r){if(yr(n,r.options)&&yr(a,r.config))return r;throw rn.create("duplicate-app",{appName:s})}const l=new up(s);for(const c of po.values())l.addComponent(c);const o=new sk(n,a,l);return br.set(s,o),o}function rL(t,e={}){if(P5()&&!qw())throw rn.create("invalid-server-app-environment");let n,a=e||{};if(t&&(ak(t)?n=t.options:YT(t)?a=t:n=t),a.automaticDataCollectionEnabled===void 0&&(a.automaticDataCollectionEnabled=!0),n||(n=op()),!n)throw rn.create("no-options");const s={...a,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const r=f=>[...f].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(a.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw rn.create("finalization-registry-not-supported",{});const l=""+r(JSON.stringify(s)),o=go.get(l);if(o)return o.incRefCount(a.releaseOnDeref),o;const c=new up(l);for(const f of po.values())c.addComponent(f);const u=new XT(n,a,l,c);return go.set(l,u),u}function rk(t=Ru){const e=br.get(t);if(!e&&t===Ru&&op())return qT();if(!e)throw rn.create("no-app",{appName:t});return e}function iL(){return Array.from(br.values())}async function ZT(t){let e=!1;const n=t.name;br.has(n)?(e=!0,br.delete(n)):go.has(n)&&t.decRefCount()<=0&&(go.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(a=>a.delete())),t.isDeleted=!0)}function xs(t,e,n){let a=WT[t]??t;n&&(a+=`-${n}`);const s=a.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&r&&l.push("and"),r&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ma.warn(l.join(" "));return}Si(new Ra(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function lL(t,e){if(t!==null&&typeof t!="function")throw rn.create("invalid-log-argument");iT(t,e)}function oL(t){rT(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="firebase-heartbeat-database",eA=1,yo="firebase-heartbeat-store";let qh=null;function ik(){return qh||(qh=gT(JT,eA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yo)}catch(n){console.warn(n)}}}}).catch(t=>{throw rn.create("idb-open",{originalErrorMessage:t.message})})),qh}async function tA(t){try{const n=(await ik()).transaction(yo),a=await n.objectStore(yo).get(lk(t));return await n.done,a}catch(e){if(e instanceof Bs)Ma.warn(e.message);else{const n=rn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ma.warn(n.message)}}}async function gx(t,e){try{const a=(await ik()).transaction(yo,"readwrite");await a.objectStore(yo).put(e,lk(t)),await a.done}catch(n){if(n instanceof Bs)Ma.warn(n.message);else{const a=rn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ma.warn(a.message)}}}function lk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=1024,aA=30;class sA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iA(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=px();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>aA){const l=lA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ma.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=px(),{heartbeatsToSend:a,unsentEntries:s}=rA(this._heartbeatsCache.heartbeats),r=ju(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ma.warn(n),""}}}function px(){return new Date().toISOString().substring(0,10)}function rA(t,e=nA){const n=[];let a=t.slice();for(const s of t){const r=n.find(l=>l.agent===s.agent);if(r){if(r.dates.push(s.date),yx(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yx(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class iA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F5()?V5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function yx(t){return ju(JSON.stringify({version:2,heartbeats:t})).length}function lA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let a=1;a<t.length;a++)t[a].date<n&&(n=t[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){Si(new Ra("platform-logger",e=>new xT(e),"PRIVATE")),Si(new Ra("heartbeat",e=>new sA(e),"PRIVATE")),xs(Iu,Cm,t),xs(Iu,Cm,"esm2020"),xs("fire-js","")}oA("");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={PHONE:"phone",TOTP:"totp"},uA={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},dA={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},hA={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},fA={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function ok(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gA=mA,ck=ok,uk=new Vo("auth","Firebase",ok()),pA={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new hp("@firebase/auth");function yA(t,...e){Mu.logLevel<=be.WARN&&Mu.warn(`Auth (${Gi}): ${t}`,...e)}function Qc(t,...e){Mu.logLevel<=be.ERROR&&Mu.error(`Auth (${Gi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t,...e){throw gp(t,...e)}function Pt(t,...e){return gp(t,...e)}function mp(t,e,n){const a={...ck(),[e]:n};return new Vo("auth","Firebase",a).create(e,{appName:t.name})}function _t(t){return mp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $i(t,e,n){const a=n;if(!(e instanceof a))throw a.name!==e.constructor.name&&Wt(t,"argument-error"),mp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gp(t,...e){if(typeof t!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=t.name),t._errorFactory.create(n,...a)}return uk.create(t,...e)}function R(t,e,...n){if(!t)throw gp(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qc(e),new Error(e)}function Oa(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function pp(){return xx()==="http:"||xx()==="https:"}function xx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pp()||B5()||"connection"in navigator)?navigator.onLine:!0}function bA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Oa(n>e,"Short delay should be less than long delay!"),this.isMobile=cp()||Zw()}get(){return xA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t,e){Oa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wA=new Qo(3e4,6e4);function Pe(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ue(t,e,n,a,s={}){return hk(t,s,async()=>{let r={},l={};a&&(e==="GET"?l=a:r={body:JSON.stringify(a)});const o=Ar({key:t.config.apiKey,...l}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...r};return U5()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(u.credentials="include"),dk.fetch()(await fk(t,t.config.apiHost,n,o),u)})}async function hk(t,e,n){t._canInitEmulator=!1;const a={...vA,...e};try{const s=new CA(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await r.json();if("needConfirmation"in l)throw kl(t,"account-exists-with-different-credential",l);if(r.ok&&!("errorMessage"in l))return l;{const o=r.ok?l.errorMessage:l.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kl(t,"credential-already-in-use",l);if(c==="EMAIL_EXISTS")throw kl(t,"email-already-in-use",l);if(c==="USER_DISABLED")throw kl(t,"user-disabled",l);const f=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw mp(t,f,u);Wt(t,f)}}catch(s){if(s instanceof Bs)throw s;Wt(t,"network-request-failed",{message:String(s)})}}async function za(t,e,n,a,s={}){const r=await Ue(t,e,n,a,s);return"mfaPendingCredential"in r&&Wt(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function fk(t,e,n,a){const s=`${e}${n}?${a}`,r=t,l=r.config.emulator?yp(t.config,s):`${t.config.apiScheme}://${s}`;return _A.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(l).toString():l}function kA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Pt(this.auth,"network-request-failed")),wA.get())})}}function kl(t,e,n){const a={appName:t.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const s=Pt(t,e,a);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){return t!==void 0&&t.getResponse!==void 0}function vx(t){return t!==void 0&&t.enterprise!==void 0}class mk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return kA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t){return(await Ue(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function gk(t,e){return Ue(t,"GET","/v2/recaptchaConfig",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e){return Ue(t,"POST","/v1/accounts:delete",e)}async function EA(t,e){return Ue(t,"POST","/v1/accounts:update",e)}async function Ou(t,e){return Ue(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t,e=!1){return G(t).getIdToken(e)}async function yk(t,e=!1){const n=G(t),a=await n.getIdToken(e),s=Td(a);R(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,l=r==null?void 0:r.sign_in_provider;return{claims:s,token:a,authTime:zl(Zh(s.auth_time)),issuedAtTime:zl(Zh(s.iat)),expirationTime:zl(Zh(s.exp)),signInProvider:l||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Zh(t){return Number(t)*1e3}function Td(t){const[e,n,a]=t.split(".");if(e===void 0||n===void 0||a===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=fo(n);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _x(t){const e=Td(t);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Bs&&jA(a)&&t.auth.currentUser===t&&await t.auth.signOut(),a}}function jA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t){var d;const e=t.auth,n=await t.getIdToken(),a=await Da(t,Ou(e,{idToken:n}));R(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const r=(d=s.providerUserInfo)!=null&&d.length?bk(s.providerUserInfo):[],l=AA(t.providerData,r),o=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),u=o?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Nm(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function xk(t){const e=G(t);await bo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AA(t,e){return[...t.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function bk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(t,e){const n=await hk(t,{},async()=>{const a=Ar({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,l=await fk(t,s,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:a};return t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(c.credentials="include"),dk.fetch()(l,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RA(t,e){return Ue(t,"POST","/v2/accounts:revokeToken",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_x(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){R(e.length!==0,"internal-error");const n=_x(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(R(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:s,expiresIn:r}=await IA(e,n);this.updateTokensAndExpiration(a,s,Number(r))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:s,expirationTime:r}=n,l=new ci;return a&&(R(typeof a=="string","internal-error",{appName:e}),l.refreshToken=a),s&&(R(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),r&&(R(typeof r=="number","internal-error",{appName:e}),l.expirationTime=r),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ci,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t,e){R(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class On{constructor({uid:e,auth:n,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new TA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Da(this,this.stsTokenManager.getToken(this.auth,e));return R(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yk(this,e)}reload(){return xk(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new On({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await bo(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ve(this.auth.app))return Promise.reject(_t(this.auth));const e=await this.getIdToken();return await Da(this,SA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,l=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:m,providerData:b,stsTokenManager:_}=n;R(d&&_,e,"internal-error");const w=ci.fromJSON(this.name,_);R(typeof d=="string",e,"internal-error"),Ga(a,e.name),Ga(s,e.name),R(typeof h=="boolean",e,"internal-error"),R(typeof m=="boolean",e,"internal-error"),Ga(r,e.name),Ga(l,e.name),Ga(o,e.name),Ga(c,e.name),Ga(u,e.name),Ga(f,e.name);const y=new On({uid:d,auth:e,email:s,emailVerified:h,displayName:a,isAnonymous:m,photoURL:l,phoneNumber:r,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(y.providerData=b.map(g=>({...g}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,n,a=!1){const s=new ci;s.updateFromServerResponse(n);const r=new On({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await bo(r),r}static async _fromGetAccountInfoResponse(e,n,a){const s=n.users[0];R(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?bk(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),o=new ci;o.updateFromIdToken(a);const c=new On({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:l}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Nm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Map;function xa(t){Oa(t instanceof Function,"Expected a class definition");let e=wx.get(t);return e?(Oa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vk.type="NONE";const Sm=vk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t,e,n){return`firebase:${t}:${e}:${n}`}class ui{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:s,name:r}=this.auth;this.fullUserKey=Gc(this.userKey,s.apiKey,r),this.fullPersistenceKey=Gc("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ou(this.auth,{idToken:e}).catch(()=>{});return n?On._fromGetAccountInfoResponse(this.auth,n,e):null}return On._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new ui(xa(Sm),e,a);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||xa(Sm);const l=Gc(a,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(l);if(f){let d;if(typeof f=="string"){const h=await Ou(e,{idToken:f}).catch(()=>{});if(!h)break;d=await On._fromGetAccountInfoResponse(e,h,f)}else d=On._fromJSON(e,f);u!==r&&(o=d),r=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new ui(r,e,a):(r=c[0],o&&await r._set(l,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(l)}catch{}})),new ui(r,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ck(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_k(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sk(e))return"Blackberry";if(Ek(e))return"Webos";if(wk(e))return"Safari";if((e.includes("chrome/")||kk(e))&&!e.includes("edge/"))return"Chrome";if(Nk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=t.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function _k(t=Ut()){return/firefox\//i.test(t)}function wk(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kk(t=Ut()){return/crios\//i.test(t)}function Ck(t=Ut()){return/iemobile/i.test(t)}function Nk(t=Ut()){return/android/i.test(t)}function Sk(t=Ut()){return/blackberry/i.test(t)}function Ek(t=Ut()){return/webos/i.test(t)}function xp(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MA(t=Ut()){var e;return xp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function OA(){return z5()&&document.documentMode===10}function jk(t=Ut()){return xp(t)||Nk(t)||Ek(t)||Sk(t)||/windows phone/i.test(t)||Ck(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t,e=[]){let n;switch(t){case"Browser":n=kx(Ut());break;case"Worker":n=`${kx(Ut())}-${t}`;break;default:n=t}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gi}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=r=>new Promise((l,o)=>{try{const c=e(r);l(c)}catch(c){o(c)}});a.onAbort=n,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e={}){return Ue(t,"GET","/v2/passwordPolicy",Pe(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=6;class UA{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??PA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,a,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cx(this),this.idTokenSubscription=new Cx(this),this.beforeStateQueue=new DA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xa(n)),this._initializationPromise=this.queue(async()=>{var a,s,r;if(!this._deleted&&(this.persistenceManager=await ui.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ou(this,{idToken:e}),a=await On._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ve(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(r=this.redirectUser)==null?void 0:r._redirectEventId,o=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===o)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ve(this.app))return Promise.reject(_t(this));const n=e?G(e):null;return n&&R(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ve(this.app)?Promise.reject(_t(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ve(this.app)?Promise.reject(_t(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LA(this),n=new UA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await RA(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xa(e)||this._popupRedirectResolver;R(n,this,"argument-error"),this.redirectPersistenceManager=await ui.create(this,[xa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let l=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(o,this,"internal-error"),o.then(()=>{l||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,a,s);return()=>{l=!0,c()}}else{const c=e.addObserver(n);return()=>{l=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(Ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&yA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ke(t){return G(t)}class Cx{constructor(e){this.auth=e,this.observer=null,this.addObserver=X5(n=>this.observer=n)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zA(t){Go=t}function bp(t){return Go.loadJS(t)}function HA(){return Go.recaptchaV2Script}function FA(){return Go.recaptchaEnterpriseScript}function VA(){return Go.gapiScript}function Ak(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=500,GA=6e4,Cc=1e12;class $A{constructor(e){this.auth=e,this.counter=Cc,this._widgets=new Map}render(e,n){const a=this.counter;return this._widgets.set(a,new KA(e,this.auth.name,n||{})),this.counter++,a}reset(e){var a;const n=e||Cc;(a=this._widgets.get(n))==null||a.delete(),this._widgets.delete(n)}getResponse(e){var a;const n=e||Cc;return((a=this._widgets.get(n))==null?void 0:a.getResponse())||""}async execute(e){var a;const n=e||Cc;return(a=this._widgets.get(n))==null||a.execute(),""}}class WA{constructor(){this.enterprise=new YA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class KA{constructor(e,n,a){this.params=a,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;R(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=XA(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},GA)},QA))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function XA(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let a=0;a<t;a++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const qA="recaptcha-enterprise",Hl="NO_RECAPTCHA";class Ik{constructor(e){this.type=qA,this.auth=Ke(e)}async verify(e="verify",n=!1){async function a(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(l,o)=>{gk(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mk(c);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,l(u.siteKey)}}).catch(c=>{o(c)})})}function s(r,l,o){const c=window.grecaptcha;vx(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(u=>{l(u)}).catch(()=>{l(Hl)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WA().execute("siteKey",{action:"verify"}):new Promise((r,l)=>{a(this.auth).then(o=>{if(!n&&vx(window.grecaptcha))s(o,r,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let c=FA();c.length!==0&&(c+=o),bp(c).then(()=>{s(o,r,l)}).catch(u=>{l(u)})}}).catch(o=>{l(o)})})}}async function dl(t,e,n,a=!1,s=!1){const r=new Ik(t);let l;if(s)l=Hl;else try{l=await r.verify(n)}catch{l=await r.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return a?Object.assign(o,{captchaResp:l}):Object.assign(o,{captchaResponse:l}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function bs(t,e,n,a,s){var r,l;if(s==="EMAIL_PASSWORD_PROVIDER")if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dl(t,e,n,n==="getOobCode");return a(t,o)}else return a(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await dl(t,e,n,n==="getOobCode");return a(t,c)}else return Promise.reject(o)});else if(s==="PHONE_PROVIDER")if((l=t._getRecaptchaConfig())!=null&&l.isProviderEnabled("PHONE_PROVIDER")){const o=await dl(t,e,n);return a(t,o).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await dl(t,e,n,!1,!0);return a(t,f)}return Promise.reject(c)})}else{const o=await dl(t,e,n,!1,!0);return a(t,o)}else return Promise.reject(s+" provider is not supported.")}async function Rk(t){const e=Ke(t),n=await gk(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new mk(n);e.tenantId==null?e._agentRecaptchaConfig=a:e._tenantRecaptchaConfigs[e.tenantId]=a,a.isAnyProviderEnabled()&&new Ik(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e){const n=jd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(yr(r,e??{}))return s;Wt(s,"already-initialized")}return n.initialize({options:e})}function ZA(t,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(xa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function Ok(t,e,n){const a=Ke(t);R(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=Dk(e),{host:l,port:o}=JA(e),c=o===null?"":`:${o}`,u={url:`${r}//${l}${c}/`},f=Object.freeze({host:l,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){R(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),R(yr(u,a.config.emulator)&&yr(f,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=u,a.emulatorConfig=f,a.settings.appVerificationDisabledForTesting=!0,Qi(l)?(Kw(`${r}//${l}${c}`),Xw("Auth",!0)):s||e4()}function Dk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JA(t){const e=Dk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const r=s[1];return{host:r,port:Nx(a.substr(r.length+1))}}else{const[r,l]=a.split(":");return{host:r,port:Nx(l)}}}function Nx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e){return Ue(t,"POST","/v1/accounts:resetPassword",Pe(t,e))}async function t4(t,e){return Ue(t,"POST","/v1/accounts:update",e)}async function n4(t,e){return Ue(t,"POST","/v1/accounts:signUp",e)}async function a4(t,e){return Ue(t,"POST","/v1/accounts:update",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return za(t,"POST","/v1/accounts:signInWithPassword",Pe(t,e))}async function Ad(t,e){return Ue(t,"POST","/v1/accounts:sendOobCode",Pe(t,e))}async function r4(t,e){return Ad(t,e)}async function i4(t,e){return Ad(t,e)}async function l4(t,e){return Ad(t,e)}async function o4(t,e){return Ad(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,e){return za(t,"POST","/v1/accounts:signInWithEmailLink",Pe(t,e))}async function u4(t,e){return za(t,"POST","/v1/accounts:signInWithEmailLink",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Wi{constructor(e,n,a,s=null){super("password",a),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ei(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new Ei(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bs(e,n,"signInWithPassword",s4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return c4(e,{email:this._email,oobCode:this._password});default:Wt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bs(e,a,"signUpPassword",n4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return u4(e,{idToken:n,email:this._email,oobCode:this._password});default:Wt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t,e){return za(t,"POST","/v1/accounts:signInWithIdp",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="http://localhost";class qn extends Wi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...r}=n;if(!a||!s)return null;const l=new qn(a,s);return l.idToken=r.idToken||void 0,l.accessToken=r.accessToken||void 0,l.secret=r.secret,l.nonce=r.nonce,l.pendingToken=r.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Sa(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Sa(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sa(e,n)}buildRequest(){const e={requestUri:d4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ar(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,e){return Ue(t,"POST","/v1/accounts:sendVerificationCode",Pe(t,e))}async function h4(t,e){return za(t,"POST","/v1/accounts:signInWithPhoneNumber",Pe(t,e))}async function f4(t,e){const n=await za(t,"POST","/v1/accounts:signInWithPhoneNumber",Pe(t,e));if(n.temporaryProof)throw kl(t,"account-exists-with-different-credential",n);return n}const m4={USER_NOT_FOUND:"user-not-found"};async function g4(t,e){const n={...e,operation:"REAUTH"};return za(t,"POST","/v1/accounts:signInWithPhoneNumber",Pe(t,n),m4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Wi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new vs({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new vs({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return h4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return f4(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return g4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:a,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:a,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:a,phoneNumber:s,temporaryProof:r}=e;return!a&&!n&&!s&&!r?null:new vs({verificationId:n,verificationCode:a,phoneNumber:s,temporaryProof:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y4(t){const e=_l(wl(t)).link,n=e?_l(wl(e)).deep_link_id:null,a=_l(wl(t)).deep_link_id;return(a?_l(wl(a)).link:null)||a||n||e||t}class Yi{constructor(e){const n=_l(wl(e)),a=n.apiKey??null,s=n.oobCode??null,r=p4(n.mode??null);R(a&&s&&r,"argument-error"),this.apiKey=a,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=y4(e);try{return new Yi(n)}catch{return null}}}function x4(t){return Yi.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(e,n){return Ei._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Yi.parseLink(n);return R(a,"argument-error"),Ei._fromEmailAndCode(e,a.code,a.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Ha{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fl extends Ki{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return R("providerId"in n&&"signInMethod"in n,"argument-error"),qn._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return R(e.idToken||e.accessToken,"argument-error"),qn._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Fl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a,oauthTokenSecret:s,pendingToken:r,nonce:l,providerId:o}=e;if(!a&&!s&&!n&&!r||!o)return null;try{return new Fl(o)._credential({idToken:n,accessToken:a,nonce:l,pendingToken:r})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Ki{constructor(){super("facebook.com")}static credential(e){return qn._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.FACEBOOK_SIGN_IN_METHOD="facebook.com";da.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Ki{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qn._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return ha.credential(n,a)}catch{return null}}}ha.GOOGLE_SIGN_IN_METHOD="google.com";ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Ki{constructor(){super("github.com")}static credential(e){return qn._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="http://localhost";class vo extends Wi{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Sa(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Sa(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sa(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,pendingToken:r}=n;return!a||!s||!r||a!==s?null:new vo(a,r)}static _create(e,n){return new vo(e,n)}buildRequest(){return{requestUri:b4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="saml.";class Du extends Ha{constructor(e){R(e.startsWith(v4),"argument-error"),super(e)}static credentialFromResult(e){return Du.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Du.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=vo.fromJSON(e);return R(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:a}=e;if(!n||!a)return null;try{return vo._create(a,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Ki{constructor(){super("twitter.com")}static credential(e,n){return qn._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return ma.credential(n,a)}catch{return null}}}ma.TWITTER_SIGN_IN_METHOD="twitter.com";ma.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(t,e){return za(t,"POST","/v1/accounts:signUp",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,s=!1){const r=await On._fromIdTokenResponse(e,a,s),l=Ex(a);return new En({user:r,providerId:l,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const s=Ex(a);return new En({user:e,providerId:s,_tokenResponse:a,operationType:n})}}function Ex(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t){var s;if(Ve(t.app))return Promise.reject(_t(t));const e=Ke(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new En({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await Pk(e,{returnSecureToken:!0}),a=await En._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends Bs{constructor(e,n,a,s){super(n.code,n.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,Lu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,s){return new Lu(e,n,a,s)}}function Uk(t,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Lu._fromErrorAndOperation(t,r,e,a):r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e){const n=G(t);await Id(!0,n,e);const{providerUserInfo:a}=await EA(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=Bk(a||[]);return n.providerData=n.providerData.filter(r=>s.has(r.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function vp(t,e,n=!1){const a=await Da(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return En._forOperation(t,"link",a)}async function Id(t,e,n){await bo(e);const a=Bk(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";R(a.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e,n=!1){const{auth:a}=t;if(Ve(a.app))return Promise.reject(_t(a));const s="reauthenticate";try{const r=await Da(t,Uk(a,s,e,t),n);R(r.idToken,a,"internal-error");const l=Td(r.idToken);R(l,a,"internal-error");const{sub:o}=l;return R(t.uid===o,a,"user-mismatch"),En._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Wt(a,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e,n=!1){if(Ve(t.app))return Promise.reject(_t(t));const a="signIn",s=await Uk(t,a,e),r=await En._fromIdTokenResponse(t,a,s);return n||await t._updateCurrentUser(r.user),r}async function Rd(t,e){return Hk(Ke(t),e)}async function Fk(t,e){const n=G(t);return await Id(!1,n,e.providerId),vp(n,e)}async function Vk(t,e){return zk(G(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e){return za(t,"POST","/v1/accounts:signInWithCustomToken",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e){if(Ve(t.app))return Promise.reject(_t(t));const n=Ke(t),a=await k4(n,{token:e,returnSecureToken:!0}),s=await En._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?_p._fromServerResponse(e,n):"totpInfo"in n?wp._fromServerResponse(e,n):Wt(e,"internal-error")}}class _p extends $o{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new _p(n)}}class wp extends $o{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new wp(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t,e,n){var a;R(((a=n.url)==null?void 0:a.length)>0,t,"invalid-continue-uri"),R(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),R(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(R(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(R(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kp(t){const e=Ke(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function N4(t,e,n){const a=Ke(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Md(a,s,n),await bs(a,s,"getOobCode",i4,"EMAIL_PASSWORD_PROVIDER")}async function S4(t,e,n){await Lk(G(t),{oobCode:e,newPassword:n}).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&kp(t),a})}async function E4(t,e){await a4(G(t),{oobCode:e})}async function Qk(t,e){const n=G(t),a=await Lk(n,{oobCode:e}),s=a.requestType;switch(R(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":R(a.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":R(a.mfaInfo,n,"internal-error");default:R(a.email,n,"internal-error")}let r=null;return a.mfaInfo&&(r=$o._fromServerResponse(Ke(n),a.mfaInfo)),{data:{email:(a.requestType==="VERIFY_AND_CHANGE_EMAIL"?a.newEmail:a.email)||null,previousEmail:(a.requestType==="VERIFY_AND_CHANGE_EMAIL"?a.email:a.newEmail)||null,multiFactorInfo:r},operation:s}}async function j4(t,e){const{data:n}=await Qk(G(t),e);return n.email}async function Gk(t,e,n){if(Ve(t.app))return Promise.reject(_t(t));const a=Ke(t),l=await bs(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pk,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&kp(t),c}),o=await En._fromIdTokenResponse(a,"signIn",l);return await a._updateCurrentUser(o.user),o}function $k(t,e,n){return Ve(t.app)?Promise.reject(_t(t)):Rd(G(t),zs.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&kp(t),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e,n){const a=Ke(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function r(l,o){R(o.handleCodeInApp,a,"argument-error"),o&&Md(a,l,o)}r(s,n),await bs(a,s,"getOobCode",l4,"EMAIL_PASSWORD_PROVIDER")}function A4(t,e){const n=Yi.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function I4(t,e,n){if(Ve(t.app))return Promise.reject(_t(t));const a=G(t),s=zs.credentialWithLink(e,n||xo());return R(s._tenantId===(a.tenantId||null),a,"tenant-id-mismatch"),Rd(a,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(t,e){return Ue(t,"POST","/v1/accounts:createAuthUri",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(t,e){const n=pp()?xo():"http://localhost",a={identifier:e,continueUri:n},{signinMethods:s}=await R4(G(t),a);return s||[]}async function O4(t,e){const n=G(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Md(n.auth,s,e);const{email:r}=await r4(n.auth,s);r!==t.email&&await t.reload()}async function D4(t,e,n){const a=G(t),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Md(a.auth,r,n);const{email:l}=await o4(a.auth,r);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4(t,e){return Ue(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const a=G(t),r={idToken:await a.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Da(a,L4(a.auth,r));a.displayName=l.displayName||null,a.photoURL=l.photoUrl||null;const o=a.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=a.displayName,o.photoURL=a.photoURL),await a._updateTokensIfNecessary(l)}function U4(t,e){const n=G(t);return Ve(n.auth.app)?Promise.reject(_t(n.auth)):Wk(n,e,null)}function B4(t,e){return Wk(G(t),null,e)}async function Wk(t,e,n){const{auth:a}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const l=await Da(t,t4(a,r));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t){var s,r;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const l=(r=(s=Td(t.idToken))==null?void 0:s.firebase)==null?void 0:r.sign_in_provider;if(l){const o=l!=="anonymous"&&l!=="custom"?l:null;return new di(a,o)}}if(!e)return null;switch(e){case"facebook.com":return new H4(a,n);case"github.com":return new F4(a,n);case"google.com":return new V4(a,n);case"twitter.com":return new Q4(a,n,t.screenName||null);case"custom":case"anonymous":return new di(a,null);default:return new di(a,e,n)}}class di{constructor(e,n,a={}){this.isNewUser=e,this.providerId=n,this.profile=a}}class Yk extends di{constructor(e,n,a,s){super(e,n,a),this.username=s}}class H4 extends di{constructor(e,n){super(e,"facebook.com",n)}}class F4 extends Yk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class V4 extends di{constructor(e,n){super(e,"google.com",n)}}class Q4 extends Yk{constructor(e,n,a){super(e,"twitter.com",n,a)}}function G4(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:z4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t,e){return G(t).setPersistence(e)}function W4(t){return Rk(t)}async function Y4(t,e){return Ke(t).validatePassword(e)}function Kk(t,e,n,a){return G(t).onIdTokenChanged(e,n,a)}function Xk(t,e,n){return G(t).beforeAuthStateChanged(e,n)}function qk(t,e,n,a){return G(t).onAuthStateChanged(e,n,a)}function K4(t){G(t).useDeviceLanguage()}function X4(t,e){return G(t).updateCurrentUser(e)}function Pu(t){return G(t).signOut()}function q4(t,e){return Ke(t).revokeAccessToken(e)}async function Z4(t){return G(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,a){this.type=e,this.credential=n,this.user=a}static _fromIdtoken(e,n){return new er("enroll",e,n)}static _fromMfaPendingCredential(e){return new er("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,a;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return er._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((a=e.multiFactorSession)!=null&&a.idToken)return er._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,a){this.session=e,this.hints=n,this.signInResolver=a}static _fromError(e,n){const a=Ke(e),s=n.customData._serverResponse,r=(s.mfaInfo||[]).map(o=>$o._fromServerResponse(a,o));R(s.mfaPendingCredential,a,"internal-error");const l=er._fromMfaPendingCredential(s.mfaPendingCredential);return new Cp(l,r,async o=>{const c=await o._process(a,l);delete s.mfaInfo,delete s.mfaPendingCredential;const u={...s,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const f=await En._fromIdTokenResponse(a,n.operationType,u);return await a._updateCurrentUser(f.user),f;case"reauthenticate":return R(n.user,a,"internal-error"),En._forOperation(n.user,n.operationType,u);default:Wt(a,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function J4(t,e){var s;const n=G(t),a=e;return R(e.customData.operationType,n,"argument-error"),R((s=a.customData._serverResponse)==null?void 0:s.mfaPendingCredential,n,"argument-error"),Cp._fromError(n,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e){return Ue(t,"POST","/v2/accounts/mfaEnrollment:start",Pe(t,e))}function eI(t,e){return Ue(t,"POST","/v2/accounts/mfaEnrollment:finalize",Pe(t,e))}function tI(t,e){return Ue(t,"POST","/v2/accounts/mfaEnrollment:start",Pe(t,e))}function nI(t,e){return Ue(t,"POST","/v2/accounts/mfaEnrollment:finalize",Pe(t,e))}function aI(t,e){return Ue(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Pe(t,e))}class Np{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(a=>$o._fromServerResponse(e.auth,a)))})}static _fromUser(e){return new Np(e)}async getSession(){return er._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const a=e,s=await this.getSession(),r=await Da(this.user,a._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,a=await this.user.getIdToken();try{const s=await Da(this.user,aI(this.user.auth,{idToken:a,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:r})=>r!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Jh=new WeakMap;function sI(t){const e=G(t);return Jh.has(e)||Jh.set(e,Np._fromUser(e)),Jh.get(e)}const Uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=1e3,iI=10;class Jk extends Zk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),s=this.localCache[n];a!==s&&e(n,s,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,o,c)=>{this.notifyListeners(l,c)});return}const a=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(a);!n&&this.localCache[a]===l||this.notifyListeners(a,l)},r=this.storage.getItem(a);OA()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iI):s()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},rI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jk.type="LOCAL";const e2=Jk;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=1e3;function ef(t){var a;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((a=document.cookie.match(n))==null?void 0:a[1])??null}function tf(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class t2{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=tf(e);if(window.cookieStore){const a=await window.cookieStore.get(n);return a==null?void 0:a.value}return ef(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const a=tf(e);document.cookie=`${a}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const a=tf(e);if(window.cookieStore){const o=u=>{const f=u.changed.find(h=>h.name===a);f&&n(f.value),u.deleted.find(h=>h.name===a)&&n(null)},c=()=>window.cookieStore.removeEventListener("change",o);return this.listenerUnsubscribes.set(n,c),window.cookieStore.addEventListener("change",o)}let s=ef(a);const r=setInterval(()=>{const o=ef(a);o!==s&&(n(o),s=o)},lI),l=()=>clearInterval(r);this.listenerUnsubscribes.set(n,l)}_removeListener(e,n){const a=this.listenerUnsubscribes.get(n);a&&(a(),this.listenerUnsubscribes.delete(n))}}t2.type="COOKIE";const oI=t2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends Zk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}n2.type="SESSION";const Sp=n2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const a=new Od(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:s,data:r}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const o=Array.from(l).map(async u=>u(n.origin,r)),c=await cI(o);n.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,l;return new Promise((o,c)=>{const u=Dd("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},a);l={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(f),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(h.data.response);break;default:clearTimeout(f),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(){return window}function dI(t){nt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){return typeof nt().WorkerGlobalScope<"u"&&typeof nt().importScripts=="function"}async function hI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function mI(){return Ep()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebaseLocalStorageDb",gI=1,Bu="firebaseLocalStorage",s2="fbase_key";class Wo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ld(t,e){return t.transaction([Bu],e?"readwrite":"readonly").objectStore(Bu)}function pI(){const t=indexedDB.deleteDatabase(a2);return new Wo(t).toPromise()}function Em(){const t=indexedDB.open(a2,gI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const a=t.result;try{a.createObjectStore(Bu,{keyPath:s2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const a=t.result;a.objectStoreNames.contains(Bu)?e(a):(a.close(),await pI(),e(await Em()))})})}async function Tx(t,e,n){const a=Ld(t,!0).put({[s2]:e,value:n});return new Wo(a).toPromise()}async function yI(t,e){const n=Ld(t,!1).get(e),a=await new Wo(n).toPromise();return a===void 0?null:a.value}function Ax(t,e){const n=Ld(t,!0).delete(e);return new Wo(n).toPromise()}const xI=800,bI=3;class r2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>bI)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ep()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(mI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await hI(),!this.activeServiceWorker)return;this.sender=new uI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await Tx(e,Uu,"1"),await Ax(e,Uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>Tx(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>yI(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ax(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Ld(s,!1).getAll();return new Wo(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}r2.type="LOCAL";const i2=r2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e){return Ue(t,"POST","/v2/accounts/mfaSignIn:start",Pe(t,e))}function vI(t,e){return Ue(t,"POST","/v2/accounts/mfaSignIn:finalize",Pe(t,e))}function _I(t,e){return Ue(t,"POST","/v2/accounts/mfaSignIn:finalize",Pe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=Ak("rcb"),wI=new Qo(3e4,6e4);class kI{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=nt().grecaptcha)!=null&&e.render)}load(e,n=""){return R(CI(n),e,"argument-error"),this.shouldResolveImmediately(n)&&bx(nt().grecaptcha)?Promise.resolve(nt().grecaptcha):new Promise((a,s)=>{const r=nt().setTimeout(()=>{s(Pt(e,"network-request-failed"))},wI.get());nt()[nf]=()=>{nt().clearTimeout(r),delete nt()[nf];const o=nt().grecaptcha;if(!o||!bx(o)){s(Pt(e,"internal-error"));return}const c=o.render;o.render=(u,f)=>{const d=c(u,f);return this.counter++,d},this.hostLanguage=n,a(o)};const l=`${HA()}?${Ar({onload:nf,render:"explicit",hl:n})}`;bp(l).catch(()=>{clearTimeout(r),s(Pt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=nt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function CI(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class NI{async load(e){return new $A(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl="recaptcha",SI={theme:"light",type:"image"};class EI{constructor(e,n,a={...SI}){this.parameters=a,this.type=Vl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ke(e),this.isInvisible=this.parameters.size==="invisible",R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;R(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new NI:new kI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),a=n.getResponse(e);return a||new Promise(s=>{const r=l=>{l&&(this.tokenChangeListeners.delete(r),s(l))};this.tokenChangeListeners.add(r),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){R(!this.parameters.sitekey,this.auth,"argument-error"),R(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(a=>a(n)),typeof e=="function")e(n);else if(typeof e=="string"){const a=nt()[e];typeof a=="function"&&a(n)}}}assertNotDestroyed(){R(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){R(pp()&&!Ep(),this.auth,"internal-error"),await jI(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await NA(this.auth);R(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return R(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function jI(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=vs._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function TI(t,e,n){if(Ve(t.app))return Promise.reject(_t(t));const a=Ke(t),s=await Pd(a,e,G(n));return new jp(s,r=>Rd(a,r))}async function AI(t,e,n){const a=G(t);await Id(!1,a,"phone");const s=await Pd(a.auth,e,G(n));return new jp(s,r=>Fk(a,r))}async function II(t,e,n){const a=G(t);if(Ve(a.auth.app))return Promise.reject(_t(a.auth));const s=await Pd(a.auth,e,G(n));return new jp(s,r=>Vk(a,r))}async function Pd(t,e,n){var a;if(!t._getRecaptchaConfig())try{await Rk(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const r=s.session;if("phoneNumber"in s){R(r.type==="enroll",t,"internal-error");const l={idToken:r.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await bs(t,l,"mfaSmsEnrollment",async(f,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===Hl){R((n==null?void 0:n.type)===Vl,f,"argument-error");const h=await af(f,d,n);return jx(f,h)}return jx(f,d)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{R(r.type==="signin",t,"internal-error");const l=((a=s.multiFactorHint)==null?void 0:a.uid)||s.multiFactorUid;R(l,t,"missing-multi-factor-info");const o={mfaPendingCredential:r.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await bs(t,o,"mfaSmsSignIn",async(d,h)=>{if(h.phoneSignInInfo.captchaResponse===Hl){R((n==null?void 0:n.type)===Vl,d,"argument-error");const m=await af(d,h,n);return Ix(d,m)}return Ix(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const r={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await bs(t,r,"sendVerificationCode",async(u,f)=>{if(f.captchaResponse===Hl){R((n==null?void 0:n.type)===Vl,u,"argument-error");const d=await af(u,f,n);return Sx(u,d)}return Sx(u,f)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function RI(t,e){const n=G(t);if(Ve(n.auth.app))return Promise.reject(_t(n.auth));await vp(n,e)}async function af(t,e,n){R(n.type===Vl,t,"argument-error");const a=await n.verify();R(typeof a=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const r=s.phoneEnrollmentInfo.phoneNumber,l=s.phoneEnrollmentInfo.captchaResponse,o=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:a,captchaResponse:l,clientType:o,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const r=s.phoneSignInInfo.captchaResponse,l=s.phoneSignInInfo.clientType,o=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:r,clientType:l,recaptchaVersion:o}}),s}else return Object.assign(s,{recaptchaToken:a}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.providerId=lr.PROVIDER_ID,this.auth=Ke(e)}verifyPhoneNumber(e,n){return Pd(this.auth,e,G(n))}static credential(e,n){return vs._fromVerification(e,n)}static credentialFromResult(e){const n=e;return lr.credentialFromTaggedObject(n)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:a}=e;return n&&a?vs._fromTokenResponse(n,a):null}}lr.PROVIDER_ID="phone";lr.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){return e?xa(e):(R(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends Wi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MI(t){return Hk(t.auth,new Tp(t),t.bypassAuthState)}function OI(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),zk(n,new Tp(t),t.bypassAuthState)}async function DI(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),vp(n,new Tp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,a,s,r=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:s,tenantId:r,error:l,type:o}=e;if(l){this.reject(l);return}const c={auth:this.auth,requestUri:n,sessionId:a,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MI;case"linkViaPopup":case"linkViaRedirect":return DI;case"reauthViaPopup":case"reauthViaRedirect":return OI;default:Wt(this.auth,"internal-error")}}resolve(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new Qo(2e3,1e4);async function PI(t,e,n){if(Ve(t.app))return Promise.reject(Pt(t,"operation-not-supported-in-this-environment"));const a=Ke(t);$i(t,e,Ha);const s=Ir(a,n);return new ba(a,"signInViaPopup",e,s).executeNotNull()}async function UI(t,e,n){const a=G(t);if(Ve(a.auth.app))return Promise.reject(Pt(a.auth,"operation-not-supported-in-this-environment"));$i(a.auth,e,Ha);const s=Ir(a.auth,n);return new ba(a.auth,"reauthViaPopup",e,s,a).executeNotNull()}async function BI(t,e,n){const a=G(t);$i(a.auth,e,Ha);const s=Ir(a.auth,n);return new ba(a.auth,"linkViaPopup",e,s,a).executeNotNull()}class ba extends l2{constructor(e,n,a,s,r){super(e,n,s,r),this.provider=a,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return R(e,this.auth,"internal-error"),e}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const e=Dd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LI.get())};e()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="pendingRedirect",$c=new Map;class HI extends l2{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const a=await FI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FI(t,e){const n=c2(e),a=o2(t);if(!await a._isAvailable())return!1;const s=await a._get(n)==="true";return await a._remove(n),s}async function Ap(t,e){return o2(t)._set(c2(e),"true")}function VI(t,e){$c.set(t._key(),e)}function o2(t){return xa(t._redirectPersistence)}function c2(t){return Gc(zI,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t,e,n){return GI(t,e,n)}async function GI(t,e,n){if(Ve(t.app))return Promise.reject(_t(t));const a=Ke(t);$i(t,e,Ha),await a._initializationPromise;const s=Ir(a,n);return await Ap(s,a),s._openRedirect(a,e,"signInViaRedirect")}function $I(t,e,n){return WI(t,e,n)}async function WI(t,e,n){const a=G(t);if($i(a.auth,e,Ha),Ve(a.auth.app))return Promise.reject(_t(a.auth));await a.auth._initializationPromise;const s=Ir(a.auth,n);await Ap(s,a.auth);const r=await d2(a);return s._openRedirect(a.auth,e,"reauthViaRedirect",r)}function YI(t,e,n){return KI(t,e,n)}async function KI(t,e,n){const a=G(t);$i(a.auth,e,Ha),await a.auth._initializationPromise;const s=Ir(a.auth,n);await Id(!1,a,e.providerId),await Ap(s,a.auth);const r=await d2(a);return s._openRedirect(a.auth,e,"linkViaRedirect",r)}async function XI(t,e){return await Ke(t)._initializationPromise,u2(t,e,!1)}async function u2(t,e,n=!1){if(Ve(t.app))return Promise.reject(_t(t));const a=Ke(t),s=Ir(a,e),l=await new HI(a,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await a._persistUserIfCurrent(l.user),await a._setRedirectUser(null,e)),l}async function d2(t){const e=Dd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=10*60*1e3;class ZI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!h2(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(Pt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rx(e))}saveEventToCache(e){this.cachedEventUids.add(Rx(e)),this.lastProcessedEventTime=Date.now()}}function Rx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function h2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(t,e={}){return Ue(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n3=/^https?/;async function a3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await e3(t);for(const n of e)try{if(s3(n))return}catch{}Wt(t,"unauthorized-domain")}function s3(t){const e=xo(),{protocol:n,hostname:a}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&a===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===a}if(!n3.test(n))return!1;if(t3.test(t))return a===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=new Qo(3e4,6e4);function Mx(){const t=nt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i3(t){return new Promise((e,n)=>{var s,r,l;function a(){Mx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mx(),n(Pt(t,"network-request-failed"))},timeout:r3.get()})}if((r=(s=nt().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((l=nt().gapi)!=null&&l.load)a();else{const o=Ak("iframefcb");return nt()[o]=()=>{gapi.load?a():n(Pt(t,"network-request-failed"))},bp(`${VA()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function l3(t){return Wc=Wc||i3(t),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=new Qo(5e3,15e3),c3="__/auth/iframe",u3="emulator/auth/iframe",d3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f3(t){const e=t.config;R(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yp(e,u3):`https://${t.config.authDomain}/${c3}`,a={apiKey:e.apiKey,appName:t.name,v:Gi},s=h3.get(t.config.apiHost);s&&(a.eid=s);const r=t._getFrameworks();return r.length&&(a.fw=r.join(",")),`${n}?${Ar(a).slice(1)}`}async function m3(t){const e=await l3(t),n=nt().gapi;return R(n,t,"internal-error"),e.open({where:document.body,url:f3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d3,dontclear:!0},a=>new Promise(async(s,r)=>{await a.restyle({setHideOnLeave:!1});const l=Pt(t,"network-request-failed"),o=nt().setTimeout(()=>{r(l)},o3.get());function c(){nt().clearTimeout(o),s(a)}a.ping(c).then(c,()=>{r(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p3=500,y3=600,x3="_blank",b3="http://localhost";class Ox{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v3(t,e,n,a=p3,s=y3){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-a)/2,0).toString();let o="";const c={...g3,width:a.toString(),height:s.toString(),top:r,left:l},u=Ut().toLowerCase();n&&(o=kk(u)?x3:n),_k(u)&&(e=e||b3,c.scrollbars="yes");const f=Object.entries(c).reduce((h,[m,b])=>`${h}${m}=${b},`,"");if(MA(u)&&o!=="_self")return _3(e||"",o),new Ox(null);const d=window.open(e||"",o,f);R(d,t,"popup-blocked");try{d.focus()}catch{}return new Ox(d)}function _3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="__/auth/handler",k3="emulator/auth/handler",C3=encodeURIComponent("fac");async function Dx(t,e,n,a,s,r){R(t.config.authDomain,t,"auth-domain-config-required"),R(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:a,v:Gi,eventId:s};if(e instanceof Ha){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Tu(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))l[f]=d}if(e instanceof Ki){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(l.scopes=f.join(","))}t.tenantId&&(l.tid=t.tenantId);const o=l;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${C3}=${encodeURIComponent(c)}`:"";return`${N3(t)}?${Ar(o).slice(1)}${u}`}function N3({config:t}){return t.emulator?yp(t,k3):`https://${t.authDomain}/${w3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="webStorageSupport";class S3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sp,this._completeRedirectFn=u2,this._overrideRedirectResult=VI}async _openPopup(e,n,a,s){var l;Oa((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const r=await Dx(e,n,a,xo(),s);return v3(e,r,Dd())}async _openRedirect(e,n,a,s){await this._originValidation(e);const r=await Dx(e,n,a,xo(),s);return dI(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Oa(r,"If manager is not set, promise should be"),r)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await m3(e),a=new ZI(e);return n.register("authEvent",s=>(R(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sf,{type:sf},s=>{var l;const r=(l=s==null?void 0:s[0])==null?void 0:l[sf];r!==void 0&&n(!!r),Wt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jk()||wk()||xp()}}const f2=S3;class m2{constructor(e){this.factorId=e}_process(e,n,a){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,a);case"signin":return this._finalizeSignIn(e,n.credential);default:return Wn("unexpected MultiFactorSessionType")}}}class Ip extends m2{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Ip(e)}_finalizeEnroll(e,n,a){return eI(e,{idToken:n,displayName:a,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return vI(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class g2{constructor(){}static assertion(e){return Ip._fromCredential(e)}}g2.FACTOR_ID="phone";class p2{static assertionForEnrollment(e,n){return _o._fromSecret(e,n)}static assertionForSignIn(e,n){return _o._fromEnrollmentId(e,n)}static async generateSecret(e){var s;const n=e;R(typeof((s=n.user)==null?void 0:s.auth)<"u","internal-error");const a=await tI(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Ud._fromStartTotpMfaEnrollmentResponse(a,n.user.auth)}}p2.FACTOR_ID="totp";class _o extends m2{constructor(e,n,a){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=a}static _fromSecret(e,n){return new _o(n,void 0,e)}static _fromEnrollmentId(e,n){return new _o(n,e)}async _finalizeEnroll(e,n,a){return R(typeof this.secret<"u",e,"argument-error"),nI(e,{idToken:n,displayName:a,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){R(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const a={verificationCode:this.otp};return _I(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:a})}}class Ud{constructor(e,n,a,s,r,l,o){this.sessionInfo=l,this.auth=o,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=a,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,n){return new Ud(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var s;let a=!1;return(Nc(e)||Nc(n))&&(a=!0),a&&(Nc(e)&&(e=((s=this.auth.currentUser)==null?void 0:s.email)||"unknownuser"),Nc(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Nc(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var Lx="@firebase/auth",Px="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T3(t){Si(new Ra("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:l,authDomain:o}=a.options;R(l&&!l.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:l,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tk(t)},u=new BA(a,s,r,c);return ZA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Si(new Ra("auth-internal",e=>{const n=Ke(e.getProvider("auth").getImmediate());return(a=>new E3(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(Lx,Px,j3(t)),xs(Lx,Px,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=5*60,I3=Yw("authIdTokenMaxAge")||A3;let Ux=null;const R3=t=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>I3)return;const s=n==null?void 0:n.token;Ux!==s&&(Ux=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function M3(t=rk()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Mk(t,{popupRedirectResolver:f2,persistence:[i2,e2,Sp]}),a=Yw("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(a,location.origin);if(location.origin===r.origin){const l=R3(r.toString());Xk(n,l,()=>l(n.currentUser)),Kk(n,o=>l(o))}}const s=Ww("auth");return s&&Ok(n,`http://${s}`),n}function O3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}zA({loadJS(t){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",t),a.onload=e,a.onerror=s=>{const r=Pt("internal-error");r.customData=s,n(r)},a.type="text/javascript",a.charset="UTF-8",O3().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T3("Browser");const Rp=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:fA,ActionCodeURL:Yi,AuthCredential:Wi,AuthErrorCodes:pA,EmailAuthCredential:Ei,EmailAuthProvider:zs,FacebookAuthProvider:da,FactorId:cA,GithubAuthProvider:fa,GoogleAuthProvider:ha,OAuthCredential:qn,OAuthProvider:Fl,OperationType:hA,PhoneAuthCredential:vs,PhoneAuthProvider:lr,PhoneMultiFactorGenerator:g2,ProviderId:uA,RecaptchaVerifier:EI,SAMLAuthProvider:Du,SignInMethod:dA,TotpMultiFactorGenerator:p2,TotpSecret:Ud,TwitterAuthProvider:ma,applyActionCode:E4,beforeAuthStateChanged:Xk,browserCookiePersistence:oI,browserLocalPersistence:e2,browserPopupRedirectResolver:f2,browserSessionPersistence:Sp,checkActionCode:Qk,confirmPasswordReset:S4,connectAuthEmulator:Ok,createUserWithEmailAndPassword:Gk,debugErrorMap:gA,deleteUser:Z4,fetchSignInMethodsForEmail:M4,getAdditionalUserInfo:G4,getAuth:M3,getIdToken:pk,getIdTokenResult:yk,getMultiFactorResolver:J4,getRedirectResult:XI,inMemoryPersistence:Sm,indexedDBLocalPersistence:i2,initializeAuth:Mk,initializeRecaptchaConfig:W4,isSignInWithEmailLink:A4,linkWithCredential:Fk,linkWithPhoneNumber:AI,linkWithPopup:BI,linkWithRedirect:YI,multiFactor:sI,onAuthStateChanged:qk,onIdTokenChanged:Kk,parseActionCodeURL:x4,prodErrorMap:ck,reauthenticateWithCredential:Vk,reauthenticateWithPhoneNumber:II,reauthenticateWithPopup:UI,reauthenticateWithRedirect:$I,reload:xk,revokeAccessToken:q4,sendEmailVerification:O4,sendPasswordResetEmail:N4,sendSignInLinkToEmail:T4,setPersistence:$4,signInAnonymously:_4,signInWithCredential:Rd,signInWithCustomToken:C4,signInWithEmailAndPassword:$k,signInWithEmailLink:I4,signInWithPhoneNumber:TI,signInWithPopup:PI,signInWithRedirect:QI,signOut:Pu,unlink:w4,updateCurrentUser:X4,updateEmail:U4,updatePassword:B4,updatePhoneNumber:RI,updateProfile:P4,useDeviceLanguage:K4,validatePassword:Y4,verifyBeforeUpdateEmail:D4,verifyPasswordResetCode:j4},Symbol.toStringTag,{value:"Module"}));var Bx={};const zx="@firebase/database",Hx="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y2="";function Mp(t){y2=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:mo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Bn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new D3(e)}}catch{}return new L3},tr=x2("localStorage"),jm=x2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new hp("@firebase/database"),b2=function(){let t=1;return function(){return t++}}(),v2=function(t){const e=J5(t),n=new K5;n.update(e);const a=n.digest();return ip.encodeByteArray(a)},Yo=function(...t){let e="";for(let n=0;n<t.length;n++){const a=t[n];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?e+=Yo.apply(null,a):typeof a=="object"?e+=ut(a):e+=a,e+=" "}return e};let or=null,Fx=!0;const _2=function(t,e){M(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(hi.logLevel=be.VERBOSE,or=hi.log.bind(hi),e&&jm.set("logging_enabled",!0)):typeof t=="function"?or=t:(or=null,jm.remove("logging_enabled"))},bt=function(...t){if(Fx===!0&&(Fx=!1,or===null&&jm.get("logging_enabled")===!0&&_2(!0)),or){const e=Yo.apply(null,t);or(e)}},Ko=function(t){return function(...e){bt(t,...e)}},Tm=function(...t){const e="FIREBASE INTERNAL ERROR: "+Yo(...t);hi.error(e)},Zn=function(...t){const e=`FIREBASE FATAL ERROR: ${Yo(...t)}`;throw hi.error(e),new Error(e)},It=function(...t){const e="FIREBASE WARNING: "+Yo(...t);hi.warn(e)},P3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&It("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bd=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},U3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Es="[MIN_NAME]",La="[MAX_NAME]",Rr=function(t,e){if(t===e)return 0;if(t===Es||e===La)return-1;if(e===Es||t===La)return 1;{const n=Vx(t),a=Vx(e);return n!==null?a!==null?n-a===0?t.length-e.length:n-a:-1:a!==null?1:t<e?-1:1}},B3=function(t,e){return t===e?0:t<e?-1:1},hl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ut(e))},Op=function(t){if(typeof t!="object"||t===null)return ut(t);const e=[];for(const a in t)e.push(a);e.sort();let n="{";for(let a=0;a<e.length;a++)a!==0&&(n+=","),n+=ut(e[a]),n+=":",n+=Op(t[e[a]]);return n+="}",n},w2=function(t,e){const n=t.length;if(n<=e)return[t];const a=[];for(let s=0;s<n;s+=e)s+e>n?a.push(t.substring(s,n)):a.push(t.substring(s,s+e));return a};function wt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const k2=function(t){M(!Bd(t),"Invalid JSON number");const e=11,n=52,a=(1<<e-1)-1;let s,r,l,o,c;t===0?(r=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-a)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),a),r=o+a,l=Math.round(t*Math.pow(2,n-o)-Math.pow(2,n))):(r=0,l=Math.round(t/Math.pow(2,1-a-n))));const u=[];for(c=n;c;c-=1)u.push(l%2?1:0),l=Math.floor(l/2);for(c=e;c;c-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(s?1:0),u.reverse();const f=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(f.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},z3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},H3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function F3(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const a=new Error(t+" at "+e._path.toString()+": "+n);return a.code=t.toUpperCase(),a}const V3=new RegExp("^-?(0*)\\d{1,10}$"),Q3=-2147483648,G3=2147483647,Vx=function(t){if(V3.test(t)){const e=Number(t);if(e>=Q3&&e<=G3)return e}return null},Xi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw It("Exception was thrown by user callback.",n),e},Math.floor(0))}},$3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ql=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ve(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(a=>this.appCheck=a)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,a)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,a):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(a=>a.addTokenListener(e))}notifyForInvalidToken(){It(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,a){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,a)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,a):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',It(e)}}class fi{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}fi.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="5",C2="v",N2="s",S2="r",E2="f",j2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,T2="ls",A2="p",Am="ac",I2="websocket",R2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,a,s,r=!1,l="",o=!1,c=!1,u=null){this.secure=n,this.namespace=a,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=l,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function K3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function O2(t,e,n){M(typeof e=="string","typeof type must == string"),M(typeof n=="object","typeof params must == object");let a;if(e===I2)a=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===R2)a=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);K3(t)&&(n.ns=t.namespace);const s=[];return wt(n,(r,l)=>{s.push(r+"="+l)}),a+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(){this.counters_={}}incrementCounter(e,n=1){Bn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return E5(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf={},lf={};function Lp(t){const e=t.toString();return rf[e]||(rf[e]=new X3),rf[e]}function q3(t,e){const n=t.toString();return lf[n]||(lf[n]=e()),lf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<a.length;++s)a[s]&&Xi(()=>{this.onMessage_(a[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="start",J3="close",eR="pLPCommand",tR="pRTLPCB",D2="id",L2="pw",P2="ser",nR="cb",aR="seg",sR="ts",rR="d",iR="dframe",U2=1870,B2=30,lR=U2-B2,oR=25e3,cR=3e4;class ss{constructor(e,n,a,s,r,l,o){this.connId=e,this.repoInfo=n,this.applicationId=a,this.appCheckToken=s,this.authToken=r,this.transportSessionId=l,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ko(e),this.stats_=Lp(n),this.urlFn=c=>(this.appCheckToken&&(c[Am]=this.appCheckToken),O2(n,R2,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Z3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cR)),U3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pp((...r)=>{const[l,o,c,u,f]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Qx)this.id=o,this.password=c;else if(l===J3)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...r)=>{const[l,o]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(l,o)},()=>{this.onClosed_()},this.urlFn);const a={};a[Qx]="t",a[P2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[nR]=this.scriptTagHolder.uniqueCallbackIdentifier),a[C2]=Dp,this.transportSessionId&&(a[N2]=this.transportSessionId),this.lastSessionId&&(a[T2]=this.lastSessionId),this.applicationId&&(a[A2]=this.applicationId),this.appCheckToken&&(a[Am]=this.appCheckToken),typeof location<"u"&&location.hostname&&j2.test(location.hostname)&&(a[S2]=E2);const s=this.urlFn(a);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ss.forceAllow_=!0}static forceDisallow(){ss.forceDisallow_=!0}static isAvailable(){return ss.forceAllow_?!0:!ss.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!z3()&&!H3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=Gw(n),s=w2(a,lR);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const a={};a[iR]="t",a[D2]=e,a[L2]=n,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ut(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Pp{constructor(e,n,a,s){this.onDisconnect=a,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=b2(),window[eR+this.uniqueCallbackIdentifier]=e,window[tR+this.uniqueCallbackIdentifier]=n,this.myIFrame=Pp.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(o){bt("frame writing exception"),o.stack&&bt(o.stack),bt(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bt("No IE domain setting required")}catch{const a=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[D2]=this.myID,e[L2]=this.myPW,e[P2]=this.currentSerial;let n=this.urlFn(e),a="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+B2+a.length<=U2;){const l=this.pendingSegs.shift();a=a+"&"+aR+s+"="+l.seg+"&"+sR+s+"="+l.ts+"&"+rR+s+"="+l.d,s++}return n=n+a,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,a){this.pendingSegs.push({seg:e,ts:n,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const a=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(a,Math.floor(oR)),r=()=>{clearTimeout(s),a()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){const s=a.readyState;(!s||s==="loaded"||s==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),n())},a.onerror=()=>{bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=16384,dR=45e3;let zu=null;typeof MozWebSocket<"u"?zu=MozWebSocket:typeof WebSocket<"u"&&(zu=WebSocket);class bn{constructor(e,n,a,s,r,l,o){this.connId=e,this.applicationId=a,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ko(this.connId),this.stats_=Lp(n),this.connURL=bn.connectionURL_(n,l,o,s,a),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,a,s,r){const l={};return l[C2]=Dp,typeof location<"u"&&location.hostname&&j2.test(location.hostname)&&(l[S2]=E2),n&&(l[N2]=n),a&&(l[T2]=a),s&&(l[Am]=s),r&&(l[A2]=r),O2(e,I2,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tr.set("previous_websocket_failure",!0);try{let a;H5(),this.mySock=new zu(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const s=a.message||a.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const s=a.message||a.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){bn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(n);a&&a.length>1&&parseFloat(a[1])<4.4&&(e=!0)}return!e&&zu!==null&&!bn.forceDisallow_}static previouslyFailed(){return tr.isInMemoryStorage||tr.get("previous_websocket_failure")===!0}markConnectionHealthy(){tr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const a=mo(n);this.onMessage(a)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(M(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const a=this.extractFrameCount_(n);a!==null&&this.appendFrame_(a)}}send(e){this.resetKeepAlive();const n=ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=w2(n,uR);a.length>1&&this.sendString_(String(a.length));for(let s=0;s<a.length;s++)this.sendString_(a[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dR))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}bn.responsesRequiredToBeHealthy=2;bn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{static get ALL_TRANSPORTS(){return[ss,bn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=bn&&bn.isAvailable();let a=n&&!bn.previouslyFailed();if(e.webSocketOnly&&(n||It("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[bn];else{const s=this.transports_=[];for(const r of ji.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);ji.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ji.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=6e4,fR=5e3,mR=10*1024,gR=100*1024,of="t",Gx="d",pR="s",$x="r",yR="e",Wx="o",Yx="a",Kx="n",Xx="p",xR="h";class bR{constructor(e,n,a,s,r,l,o,c,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=a,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=l,this.onReady_=o,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ko("c:"+this.id+":"),this.transportManager_=new ji(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,a)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ql(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(of in e){const n=e[of];n===Yx?this.upgradeIfSecondaryHealthy_():n===$x?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Wx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=hl("t",e),a=hl("d",e);if(n==="c")this.onSecondaryControl_(a);else if(n==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Xx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Yx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Kx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=hl("t",e),a=hl("d",e);n==="c"?this.onControl_(a):n==="d"&&this.onDataMessage_(a)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=hl(of,e);if(Gx in e){const a=e[Gx];if(n===xR){const s={...a};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Kx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pR?this.onConnectionShutdown_(a):n===$x?this.onReset_(a):n===yR?Tm("Server Error: "+a):n===Wx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Tm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,a=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Dp!==a&&It("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,a),Ql(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ql(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(fR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Xx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{put(e,n,a,s){}merge(e,n,a,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,a){}onDisconnectMerge(e,n,a){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const a=[...this.listeners_[e]];for(let s=0;s<a.length;s++)a[s].callback.apply(a[s].context,n)}}on(e,n,a){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:a});const s=this.getInitialEvent(e);s&&n.apply(a,s)}off(e,n,a){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!a||a===s[r].context)){s.splice(r,1);return}}validateEventType_(e){M(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends H2{static getInstance(){return new Hu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return M(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=32,Zx=768;class ye{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let a=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[a]=this.pieces_[s],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function fe(){return new ye("")}function re(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function js(t){return t.pieces_.length-t.pieceNum_}function Se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ye(t.pieces_,e)}function Up(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vR(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function wo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function F2(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ye(e,0)}function ze(t,e){const n=[];for(let a=t.pieceNum_;a<t.pieces_.length;a++)n.push(t.pieces_[a]);if(e instanceof ye)for(let a=e.pieceNum_;a<e.pieces_.length;a++)n.push(e.pieces_[a]);else{const a=e.split("/");for(let s=0;s<a.length;s++)a[s].length>0&&n.push(a[s])}return new ye(n,0)}function ie(t){return t.pieceNum_>=t.pieces_.length}function Lt(t,e){const n=re(t),a=re(e);if(n===null)return e;if(n===a)return Lt(Se(t),Se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _R(t,e){const n=wo(t,0),a=wo(e,0);for(let s=0;s<n.length&&s<a.length;s++){const r=Rr(n[s],a[s]);if(r!==0)return r}return n.length===a.length?0:n.length<a.length?-1:1}function Bp(t,e){if(js(t)!==js(e))return!1;for(let n=t.pieceNum_,a=e.pieceNum_;n<=t.pieces_.length;n++,a++)if(t.pieces_[n]!==e.pieces_[a])return!1;return!0}function vn(t,e){let n=t.pieceNum_,a=e.pieceNum_;if(js(t)>js(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[a])return!1;++n,++a}return!0}class wR{constructor(e,n){this.errorPrefix_=n,this.parts_=wo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=Ed(this.parts_[a]);V2(this)}}function kR(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ed(e),V2(t)}function CR(t){const e=t.parts_.pop();t.byteLength_-=Ed(e),t.parts_.length>0&&(t.byteLength_-=1)}function V2(t){if(t.byteLength_>Zx)throw new Error(t.errorPrefix_+"has a key path longer than "+Zx+" bytes ("+t.byteLength_+").");if(t.parts_.length>qx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qx+") or object contains a cycle "+qs(t))}function qs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends H2{static getInstance(){return new zp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const a=!document[e];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(e){return M(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=1e3,NR=60*5*1e3,Jx=30*1e3,SR=1.3,ER=3e4,jR="server_kill",eb=3;class Cn extends z2{constructor(e,n,a,s,r,l,o,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=a,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=l,this.appCheckTokenProvider_=o,this.authOverride_=c,this.id=Cn.nextPersistentConnectionId_++,this.log_=Ko("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fl,this.maxReconnectDelay_=NR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Hu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,a){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(ut(r)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),a&&(this.requestCBHash_[s]=a)}get(e){this.initConnection_();const n=new Jt,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const o=l.d;l.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,a,s){this.initConnection_();const r=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+r),this.listens.has(l)||this.listens.set(l,new Map),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(l).has(r),"listen() called twice for same path/queryId.");const o={onComplete:s,hashFn:n,query:e,tag:a};this.listens.get(l).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,a=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(a)})}sendListen_(e){const n=e.query,a=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+a+" for "+s);const r={p:a},l="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(l,r,o=>{const c=o.d,u=o.s;Cn.warnOnListenWarnings_(c,n),(this.listens.get(a)&&this.listens.get(a).get(s))===e&&(this.log_("listen response",o),u!=="ok"&&this.removeListen_(a,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Bn(e,"w")){const a=pr(e,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();It(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Y5(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Jx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=W5(e)?"auth":"gauth",a={cred:e};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(n,a,s=>{const r=s.s,l=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,a=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,a)})}unlisten(e,n){const a=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+a+" "+s),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,s)&&this.connected_&&this.sendUnlisten_(a,s,e._queryObject,n)}sendUnlisten_(e,n,a,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},l="n";s&&(r.q=a,r.t=s),this.sendRequest(l,r)}onDisconnectPut(e,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:a})}onDisconnectMerge(e,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:a})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,a,s){const r={p:n,d:a};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,n,a,s){this.putInternal("p",e,n,a,s)}merge(e,n,a,s){this.putInternal("m",e,n,a,s)}putInternal(e,n,a,s,r){this.initConnection_();const l={p:n,d:a};r!==void 0&&(l.h=r),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,a=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,a,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,a=>{if(a.s!=="ok"){const r=a.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ut(e));const n=e.r,a=this.requestCBHash_[n];a&&(delete this.requestCBHash_[n],a(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Tm("Unrecognized action received from server: "+ut(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ER&&(this.reconnectDelay_=fl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*SR)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Cn.nextConnectionId_++,r=this.lastSessionId;let l=!1,o=null;const c=function(){o?o.close():(l=!0,a())},u=function(d){M(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);l?bt("getToken() completed but was canceled"):(bt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,o=new bR(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,a,m=>{It(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(jR)},r))}catch(d){this.log_("Failed to get token: "+d),l||(this.repoInfo_.nodeAdmin&&It(d),c())}}}interrupt(e){bt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Tu(this.interruptReasons_)&&(this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let a;n?a=n.map(r=>Op(r)).join("$"):a="default";const s=this.removeListen_(e,a);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const a=new ye(e).toString();let s;if(this.listens.has(a)){const r=this.listens.get(a);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(a)}else s=void 0;return s}onAuthRevoked_(e,n){bt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eb&&(this.reconnectDelay_=Jx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){bt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+y2.replace(/\./g,"-")]=1,cp()?e["framework.cordova"]=1:Zw()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Hu.getInstance().currentlyOnline();return Tu(this.interruptReasons_)&&e}}Cn.nextPersistentConnectionId_=0;Cn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new le(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const a=new le(Es,e),s=new le(Es,n);return this.compare(a,s)!==0}minPost(){return le.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc;class Q2 extends zd{static get __EMPTY_NODE(){return Sc}static set __EMPTY_NODE(e){Sc=e}compare(e,n){return Rr(e.name,n.name)}isDefinedOn(e){throw Vi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return le.MIN}maxPost(){return new le(La,Sc)}makePost(e,n){return M(typeof e=="string","KeyIndex indexValue must always be a string."),new le(e,Sc)}toString(){return".key"}}const Xn=new Q2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,a,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?a(e.key,n):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class yt{constructor(e,n,a,s,r){this.key=e,this.value=n,this.color=a??yt.RED,this.left=s??Qt.EMPTY_NODE,this.right=r??Qt.EMPTY_NODE}copy(e,n,a,s,r){return new yt(e??this.key,n??this.value,a??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let s=this;const r=a(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,a),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,a)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let a,s;if(a=this,n(e,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),n(e,a.key)===0){if(a.right.isEmpty())return Qt.EMPTY_NODE;s=a.right.min_(),a=a.copy(s.key,s.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}yt.RED=!0;yt.BLACK=!1;class TR{copy(e,n,a,s,r){return this}insert(e,n,a){return new yt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Qt{constructor(e,n=Qt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Qt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yt.BLACK,null,null))}remove(e){return new Qt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yt.BLACK,null,null))}get(e){let n,a=this.root_;for(;!a.isEmpty();){if(n=this.comparator_(e,a.key),n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}getPredecessorKey(e){let n,a=this.root_,s=null;for(;!a.isEmpty();)if(n=this.comparator_(e,a.key),n===0){if(a.left.isEmpty())return s?s.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else n<0?a=a.left:n>0&&(s=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ec(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ec(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ec(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ec(this.root_,null,this.comparator_,!0,e)}}Qt.EMPTY_NODE=new TR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t,e){return Rr(t.name,e.name)}function Hp(t,e){return Rr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Im;function IR(t){Im=t}const G2=function(t){return typeof t=="number"?"number:"+k2(t):"string:"+t},$2=function(t){if(t.isLeafNode()){const e=t.val();M(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Bn(e,".sv"),"Priority must be a string or number.")}else M(t===Im||t.isEmpty(),"priority of unexpected type.");M(t===Im||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tb;class gt{static set __childrenNodeConstructor(e){tb=e}static get __childrenNodeConstructor(){return tb}constructor(e,n=gt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$2(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ie(e)?this:re(e)===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:gt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const a=re(e);return a===null?n:n.isEmpty()&&a!==".priority"?this:(M(a!==".priority"||js(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,gt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+G2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=k2(this.value_):e+=this.value_,this.lazyHash_=v2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gt.__childrenNodeConstructor?-1:(M(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,a=typeof this.value_,s=gt.VALUE_TYPE_ORDER.indexOf(n),r=gt.VALUE_TYPE_ORDER.indexOf(a);return M(s>=0,"Unknown leaf type: "+n),M(r>=0,"Unknown leaf type: "+a),s===r?a==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}gt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W2,Y2;function RR(t){W2=t}function MR(t){Y2=t}class OR extends zd{compare(e,n){const a=e.node.getPriority(),s=n.node.getPriority(),r=a.compareTo(s);return r===0?Rr(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return le.MIN}maxPost(){return new le(La,new gt("[PRIORITY-POST]",Y2))}makePost(e,n){const a=W2(e);return new le(n,new gt("[PRIORITY-POST]",a))}toString(){return".priority"}}const Re=new OR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=Math.log(2);class LR{constructor(e){const n=r=>parseInt(Math.log(r)/DR,10),a=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=a(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fu=function(t,e,n,a){t.sort(e);const s=function(c,u){const f=u-c;let d,h;if(f===0)return null;if(f===1)return d=t[c],h=n?n(d):d,new yt(h,d.node,yt.BLACK,null,null);{const m=parseInt(f/2,10)+c,b=s(c,m),_=s(m+1,u);return d=t[m],h=n?n(d):d,new yt(h,d.node,yt.BLACK,b,_)}},r=function(c){let u=null,f=null,d=t.length;const h=function(b,_){const w=d-b,y=d;d-=b;const g=s(w+1,y),x=t[w],v=n?n(x):x;m(new yt(v,x.node,_,null,g))},m=function(b){u?(u.left=b,u=b):(f=b,u=b)};for(let b=0;b<c.count;++b){const _=c.nextBitIsOne(),w=Math.pow(2,c.count-(b+1));_?h(w,yt.BLACK):(h(w,yt.BLACK),h(w,yt.RED))}return f},l=new LR(t.length),o=r(l);return new Qt(a||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf;const Ur={};class va{static get Default(){return M(Ur&&Re,"ChildrenNode.ts has not been loaded"),cf=cf||new va({".priority":Ur},{".priority":Re}),cf}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=pr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Qt?n:null}hasIndex(e){return Bn(this.indexSet_,e.toString())}addIndex(e,n){M(e!==Xn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let s=!1;const r=n.getIterator(le.Wrap);let l=r.getNext();for(;l;)s=s||e.isDefinedOn(l.node),a.push(l),l=r.getNext();let o;s?o=Fu(a,e.getCompare()):o=Ur;const c=e.toString(),u={...this.indexSet_};u[c]=e;const f={...this.indexes_};return f[c]=o,new va(f,u)}addToIndexes(e,n){const a=Au(this.indexes_,(s,r)=>{const l=pr(this.indexSet_,r);if(M(l,"Missing index implementation for "+r),s===Ur)if(l.isDefinedOn(e.node)){const o=[],c=n.getIterator(le.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&o.push(u),u=c.getNext();return o.push(e),Fu(o,l.getCompare())}else return Ur;else{const o=n.get(e.name);let c=s;return o&&(c=c.remove(new le(e.name,o))),c.insert(e,e.node)}});return new va(a,this.indexSet_)}removeFromIndexes(e,n){const a=Au(this.indexes_,s=>{if(s===Ur)return s;{const r=n.get(e.name);return r?s.remove(new le(e.name,r)):s}});return new va(a,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml;class K{static get EMPTY_NODE(){return ml||(ml=new K(new Qt(Hp),null,va.Default))}constructor(e,n,a){this.children_=e,this.priorityNode_=n,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&$2(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ml}updatePriority(e){return this.children_.isEmpty()?this:new K(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ml:n}}getChild(e){const n=re(e);return n===null?this:this.getImmediateChild(n).getChild(Se(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(M(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const a=new le(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(a,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(a,this.children_));const l=s.isEmpty()?ml:this.priorityNode_;return new K(s,l,r)}}updateChild(e,n){const a=re(e);if(a===null)return n;{M(re(e)!==".priority"||js(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(a).updateChild(Se(e),n);return this.updateImmediateChild(a,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let a=0,s=0,r=!0;if(this.forEachChild(Re,(l,o)=>{n[l]=o.val(e),a++,r&&K.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):r=!1}),!e&&r&&s<2*a){const l=[];for(const o in n)l[o]=n[o];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+G2(this.getPriority().val())+":"),this.forEachChild(Re,(n,a)=>{const s=a.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":v2(e)}return this.lazyHash_}getPredecessorChildName(e,n,a){const s=this.resolveIndex_(a);if(s){const r=s.getPredecessorKey(new le(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const a=n.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new le(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const a=n.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new le(n,this.children_.get(n)):null}forEachChild(e,n){const a=this.resolveIndex_(e);return a?a.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const a=this.resolveIndex_(n);if(a)return a.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,le.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const a=this.resolveIndex_(n);if(a)return a.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,le.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xo?-1:0}withIndex(e){if(e===Xn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new K(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Xn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const a=this.getIterator(Re),s=n.getIterator(Re);let r=a.getNext(),l=s.getNext();for(;r&&l;){if(r.name!==l.name||!r.node.equals(l.node))return!1;r=a.getNext(),l=s.getNext()}return r===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Xn?null:this.indexMap_.get(e.toString())}}K.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class PR extends K{constructor(){super(new Qt(Hp),K.EMPTY_NODE,va.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return K.EMPTY_NODE}isEmpty(){return!1}}const Xo=new PR;Object.defineProperties(le,{MIN:{value:new le(Es,K.EMPTY_NODE)},MAX:{value:new le(La,Xo)}});Q2.__EMPTY_NODE=K.EMPTY_NODE;gt.__childrenNodeConstructor=K;IR(Xo);MR(Xo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=!0;function Fe(t,e=null){if(t===null)return K.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),M(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new gt(n,Fe(e))}if(!(t instanceof Array)&&UR){const n=[];let a=!1;if(wt(t,(l,o)=>{if(l.substring(0,1)!=="."){const c=Fe(o);c.isEmpty()||(a=a||!c.getPriority().isEmpty(),n.push(new le(l,c)))}}),n.length===0)return K.EMPTY_NODE;const r=Fu(n,AR,l=>l.name,Hp);if(a){const l=Fu(n,Re.getCompare());return new K(r,Fe(e),new va({".priority":l},{".priority":Re}))}else return new K(r,Fe(e),va.Default)}else{let n=K.EMPTY_NODE;return wt(t,(a,s)=>{if(Bn(t,a)&&a.substring(0,1)!=="."){const r=Fe(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(a,r))}}),n.updatePriority(Fe(e))}}RR(Fe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends zd{constructor(e){super(),this.indexPath_=e,M(!ie(e)&&re(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const a=this.extractChild(e.node),s=this.extractChild(n.node),r=a.compareTo(s);return r===0?Rr(e.name,n.name):r}makePost(e,n){const a=Fe(e),s=K.EMPTY_NODE.updateChild(this.indexPath_,a);return new le(n,s)}maxPost(){const e=K.EMPTY_NODE.updateChild(this.indexPath_,Xo);return new le(La,e)}toString(){return wo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR extends zd{compare(e,n){const a=e.node.compareTo(n.node);return a===0?Rr(e.name,n.name):a}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return le.MIN}maxPost(){return le.MAX}makePost(e,n){const a=Fe(e);return new le(n,a)}toString(){return".value"}}const Vp=new BR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){return{type:"value",snapshotNode:t}}function Ti(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ko(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Co(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function zR(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.index_=e}updateChild(e,n,a,s,r,l){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(n);return o.getChild(s).equals(a.getChild(s))&&o.isEmpty()===a.isEmpty()||(l!=null&&(a.isEmpty()?e.hasChild(n)?l.trackChildChange(ko(n,o)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?l.trackChildChange(Ti(n,a)):l.trackChildChange(Co(n,a,o))),e.isLeafNode()&&a.isEmpty())?e:e.updateImmediateChild(n,a).withIndex(this.index_)}updateFullNode(e,n,a){return a!=null&&(e.isLeafNode()||e.forEachChild(Re,(s,r)=>{n.hasChild(s)||a.trackChildChange(ko(s,r))}),n.isLeafNode()||n.forEachChild(Re,(s,r)=>{if(e.hasChild(s)){const l=e.getImmediateChild(s);l.equals(r)||a.trackChildChange(Co(s,r,l))}else a.trackChildChange(Ti(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?K.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.indexedFilter_=new Qp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=No.getStartPost_(e),this.endPost_=No.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,a=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&a}updateChild(e,n,a,s,r,l){return this.matches(new le(n,a))||(a=K.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,a,s,r,l)}updateFullNode(e,n,a){n.isLeafNode()&&(n=K.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(K.EMPTY_NODE);const r=this;return n.forEachChild(Re,(l,o)=>{r.matches(new le(l,o))||(s=s.updateImmediateChild(l,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,a)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=n=>{const a=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new No(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,a,s,r,l){return this.rangedFilter_.matches(new le(n,a))||(a=K.EMPTY_NODE),e.getImmediateChild(n).equals(a)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,a,s,r,l):this.fullLimitUpdateChild_(e,n,a,r,l)}updateFullNode(e,n,a){let s;if(n.isLeafNode()||n.isEmpty())s=K.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=K.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;r.hasNext()&&l<this.limit_;){const o=r.getNext();if(this.withinDirectionalStart(o))if(this.withinDirectionalEnd(o))s=s.updateImmediateChild(o.name,o.node),l++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(K.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let l=0;for(;r.hasNext();){const o=r.getNext();l<this.limit_&&this.withinDirectionalStart(o)&&this.withinDirectionalEnd(o)?l++:s=s.updateImmediateChild(o.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,a)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,a,s,r){let l;if(this.reverse_){const d=this.index_.getCompare();l=(h,m)=>d(m,h)}else l=this.index_.getCompare();const o=e;M(o.numChildren()===this.limit_,"");const c=new le(n,a),u=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(o.hasChild(n)){const d=o.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||o.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const m=h==null?1:l(h,c);if(f&&!a.isEmpty()&&m>=0)return r!=null&&r.trackChildChange(Co(n,a,d)),o.updateImmediateChild(n,a);{r!=null&&r.trackChildChange(ko(n,d));const _=o.updateImmediateChild(n,K.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(r!=null&&r.trackChildChange(Ti(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return a.isEmpty()?e:f&&l(u,c)>=0?(r!=null&&(r.trackChildChange(ko(u.name,u.node)),r.trackChildChange(Ti(n,a))),o.updateImmediateChild(n,a).updateImmediateChild(u.name,K.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Re}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Es}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:La}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Re}copy(){const e=new Hd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function FR(t){return t.loadsAllData()?new Qp(t.getIndex()):t.hasLimit()?new HR(t):new No(t)}function VR(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function QR(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Rm(t,e,n){const a=t.copy();return a.startSet_=!0,e===void 0&&(e=null),a.indexStartValue_=e,n!=null?(a.startNameSet_=!0,a.indexStartName_=n):(a.startNameSet_=!1,a.indexStartName_=""),a}function GR(t,e,n){let a;return t.index_===Xn||n?a=Rm(t,e,n):a=Rm(t,e,La),a.startAfterSet_=!0,a}function Mm(t,e,n){const a=t.copy();return a.endSet_=!0,e===void 0&&(e=null),a.indexEndValue_=e,n!==void 0?(a.endNameSet_=!0,a.indexEndName_=n):(a.endNameSet_=!1,a.indexEndName_=""),a}function $R(t,e,n){let a;return t.index_===Xn||n?a=Mm(t,e,n):a=Mm(t,e,Es),a.endBeforeSet_=!0,a}function Fd(t,e){const n=t.copy();return n.index_=e,n}function nb(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Re?n="$priority":t.index_===Vp?n="$value":t.index_===Xn?n="$key":(M(t.index_ instanceof Fp,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ut(n),t.startSet_){const a=t.startAfterSet_?"startAfter":"startAt";e[a]=ut(t.indexStartValue_),t.startNameSet_&&(e[a]+=","+ut(t.indexStartName_))}if(t.endSet_){const a=t.endBeforeSet_?"endBefore":"endAt";e[a]=ut(t.indexEndValue_),t.endNameSet_&&(e[a]+=","+ut(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ab(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Re&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends z2{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,a,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=a,this.appCheckTokenProvider_=s,this.log_=Ko("p:rest:"),this.listens_={}}listen(e,n,a,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const l=Vu.getListenId_(e,a),o={};this.listens_[l]=o;const c=nb(e._queryParams);this.restRequest_(r+".json",c,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(r,d,!1,a),pr(this.listens_,l)===o){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(e,n){const a=Vu.getListenId_(e,n);delete this.listens_[a]}get(e){const n=nb(e._queryParams),a=e._path.toString(),s=new Jt;return this.restRequest_(a+".json",n,(r,l)=>{let o=l;r===404&&(o=null,r=null),r===null?(this.onDataUpdate_(a,o,!1,null),s.resolve(o)):s.reject(new Error(o))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},a){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ar(n);this.log_("Sending REST request for "+l);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(a&&o.readyState===4){this.log_("REST Response for "+l+" received. status:",o.status,"response:",o.responseText);let c=null;if(o.status>=200&&o.status<300){try{c=mo(o.responseText)}catch{It("Failed to parse JSON response for "+l+": "+o.responseText)}a(null,c)}else o.status!==401&&o.status!==404&&It("Got unsuccessful REST response for "+l+" Status: "+o.status),a(o.status);a=null}},o.open("GET",l,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(){return{value:null,children:new Map}}function qi(t,e,n){if(ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const a=re(e);t.children.has(a)||t.children.set(a,Qu());const s=t.children.get(a);e=Se(e),qi(s,e,n)}}function Om(t,e){if(ie(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Re,(a,s)=>{qi(t,new ye(a),s)}),Om(t,e)}}else if(t.children.size>0){const n=re(e);return e=Se(e),t.children.has(n)&&Om(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Dm(t,e,n){t.value!==null?n(e,t.value):YR(t,(a,s)=>{const r=new ye(e.toString()+"/"+a);Dm(s,r,n)})}function YR(t,e){t.children.forEach((n,a)=>{e(a,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&wt(this.last_,(a,s)=>{n[a]=n[a]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=10*1e3,XR=30*1e3,qR=5*60*1e3;class ZR{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new KR(e);const a=sb+(XR-sb)*Math.random();Ql(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const e=this.statsListener_.get(),n={};let a=!1;wt(e,(s,r)=>{r>0&&Bn(this.statsToReport_,s)&&(n[s]=r,a=!0)}),a&&this.server_.reportStats(n),Ql(this.reportStats_.bind(this),Math.floor(Math.random()*2*qR))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Dn||(Dn={}));function Gp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $p(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Wp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,a){this.path=e,this.affectedTree=n,this.revert=a,this.type=Dn.ACK_USER_WRITE,this.source=Gp()}operationForChild(e){if(ie(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ye(e));return new Gu(fe(),n,this.revert)}}else return M(re(this.path)===e,"operationForChild called for unrelated child."),new Gu(Se(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.source=e,this.path=n,this.type=Dn.LISTEN_COMPLETE}operationForChild(e){return ie(this.path)?new So(this.source,fe()):new So(this.source,Se(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,a){this.source=e,this.path=n,this.snap=a,this.type=Dn.OVERWRITE}operationForChild(e){return ie(this.path)?new vr(this.source,fe(),this.snap.getImmediateChild(e)):new vr(this.source,Se(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,a){this.source=e,this.path=n,this.children=a,this.type=Dn.MERGE}operationForChild(e){if(ie(this.path)){const n=this.children.subtree(new ye(e));return n.isEmpty()?null:n.value?new vr(this.source,fe(),n.value):new Ai(this.source,fe(),n)}else return M(re(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ai(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,a){this.node_=e,this.fullyInitialized_=n,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=re(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function e6(t,e,n,a){const s=[],r=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&r.push(zR(l.childName,l.snapshotNode))}),gl(t,s,"child_removed",e,a,n),gl(t,s,"child_added",e,a,n),gl(t,s,"child_moved",r,a,n),gl(t,s,"child_changed",e,a,n),gl(t,s,"value",e,a,n),s}function gl(t,e,n,a,s,r){const l=a.filter(o=>o.type===n);l.sort((o,c)=>n6(t,o,c)),l.forEach(o=>{const c=t6(t,o,r);s.forEach(u=>{u.respondsTo(o.type)&&e.push(u.createEvent(c,t.query_))})})}function t6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function n6(t,e,n){if(e.childName==null||n.childName==null)throw Vi("Should only compare child_ events.");const a=new le(e.childName,e.snapshotNode),s=new le(n.childName,n.snapshotNode);return t.index_.compare(a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t,e){return{eventCache:t,serverCache:e}}function Gl(t,e,n,a){return Vd(new Ts(e,n,a),t.serverCache)}function X2(t,e,n,a){return Vd(t.eventCache,new Ts(e,n,a))}function $u(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function _r(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;const a6=()=>(uf||(uf=new Qt(B3)),uf);class Te{static fromObject(e){let n=new Te(null);return wt(e,(a,s)=>{n=n.set(new ye(a),s)}),n}constructor(e,n=a6()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:fe(),value:this.value};if(ie(e))return null;{const a=re(e),s=this.children.get(a);if(s!==null){const r=s.findRootMostMatchingPathAndValue(Se(e),n);return r!=null?{path:ze(new ye(a),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ie(e))return this;{const n=re(e),a=this.children.get(n);return a!==null?a.subtree(Se(e)):new Te(null)}}set(e,n){if(ie(e))return new Te(n,this.children);{const a=re(e),r=(this.children.get(a)||new Te(null)).set(Se(e),n),l=this.children.insert(a,r);return new Te(this.value,l)}}remove(e){if(ie(e))return this.children.isEmpty()?new Te(null):new Te(null,this.children);{const n=re(e),a=this.children.get(n);if(a){const s=a.remove(Se(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new Te(null):new Te(this.value,r)}else return this}}get(e){if(ie(e))return this.value;{const n=re(e),a=this.children.get(n);return a?a.get(Se(e)):null}}setTree(e,n){if(ie(e))return n;{const a=re(e),r=(this.children.get(a)||new Te(null)).setTree(Se(e),n);let l;return r.isEmpty()?l=this.children.remove(a):l=this.children.insert(a,r),new Te(this.value,l)}}fold(e){return this.fold_(fe(),e)}fold_(e,n){const a={};return this.children.inorderTraversal((s,r)=>{a[s]=r.fold_(ze(e,s),n)}),n(e,this.value,a)}findOnPath(e,n){return this.findOnPath_(e,fe(),n)}findOnPath_(e,n,a){const s=this.value?a(n,this.value):!1;if(s)return s;if(ie(e))return null;{const r=re(e),l=this.children.get(r);return l?l.findOnPath_(Se(e),ze(n,r),a):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,fe(),n)}foreachOnPath_(e,n,a){if(ie(e))return this;{this.value&&a(n,this.value);const s=re(e),r=this.children.get(s);return r?r.foreachOnPath_(Se(e),ze(n,s),a):new Te(null)}}foreach(e){this.foreach_(fe(),e)}foreach_(e,n){this.children.inorderTraversal((a,s)=>{s.foreach_(ze(e,a),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,a)=>{a.value&&e(n,a.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.writeTree_=e}static empty(){return new Pn(new Te(null))}}function $l(t,e,n){if(ie(e))return new Pn(new Te(n));{const a=t.writeTree_.findRootMostValueAndPath(e);if(a!=null){const s=a.path;let r=a.value;const l=Lt(s,e);return r=r.updateChild(l,n),new Pn(t.writeTree_.set(s,r))}else{const s=new Te(n),r=t.writeTree_.setTree(e,s);return new Pn(r)}}}function Lm(t,e,n){let a=t;return wt(n,(s,r)=>{a=$l(a,ze(e,s),r)}),a}function rb(t,e){if(ie(e))return Pn.empty();{const n=t.writeTree_.setTree(e,new Te(null));return new Pn(n)}}function Pm(t,e){return Mr(t,e)!=null}function Mr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Lt(n.path,e)):null}function ib(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Re,(a,s)=>{e.push(new le(a,s))}):t.writeTree_.children.inorderTraversal((a,s)=>{s.value!=null&&e.push(new le(a,s.value))}),e}function _s(t,e){if(ie(e))return t;{const n=Mr(t,e);return n!=null?new Pn(new Te(n)):new Pn(t.writeTree_.subtree(e))}}function Um(t){return t.writeTree_.isEmpty()}function Ii(t,e){return q2(fe(),t.writeTree_,e)}function q2(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let a=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(M(r.value!==null,"Priority writes must always be leaf nodes"),a=r.value):n=q2(ze(t,s),r,n)}),!n.getChild(t).isEmpty()&&a!==null&&(n=n.updateChild(ze(t,".priority"),a)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e){return tC(e,t)}function s6(t,e,n,a,s){M(a>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:a,visible:s}),s&&(t.visibleWrites=$l(t.visibleWrites,e,n)),t.lastWriteId=a}function r6(t,e,n,a){M(a>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:a,visible:!0}),t.visibleWrites=Lm(t.visibleWrites,e,n),t.lastWriteId=a}function i6(t,e){for(let n=0;n<t.allWrites.length;n++){const a=t.allWrites[n];if(a.writeId===e)return a}return null}function l6(t,e){const n=t.allWrites.findIndex(o=>o.writeId===e);M(n>=0,"removeWrite called with nonexistent writeId.");const a=t.allWrites[n];t.allWrites.splice(n,1);let s=a.visible,r=!1,l=t.allWrites.length-1;for(;s&&l>=0;){const o=t.allWrites[l];o.visible&&(l>=n&&o6(o,a.path)?s=!1:vn(a.path,o.path)&&(r=!0)),l--}if(s){if(r)return c6(t),!0;if(a.snap)t.visibleWrites=rb(t.visibleWrites,a.path);else{const o=a.children;wt(o,c=>{t.visibleWrites=rb(t.visibleWrites,ze(a.path,c))})}return!0}else return!1}function o6(t,e){if(t.snap)return vn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&vn(ze(t.path,n),e))return!0;return!1}function c6(t){t.visibleWrites=Z2(t.allWrites,u6,fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function u6(t){return t.visible}function Z2(t,e,n){let a=Pn.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const l=r.path;let o;if(r.snap)vn(n,l)?(o=Lt(n,l),a=$l(a,o,r.snap)):vn(l,n)&&(o=Lt(l,n),a=$l(a,fe(),r.snap.getChild(o)));else if(r.children){if(vn(n,l))o=Lt(n,l),a=Lm(a,o,r.children);else if(vn(l,n))if(o=Lt(l,n),ie(o))a=Lm(a,fe(),r.children);else{const c=pr(r.children,re(o));if(c){const u=c.getChild(Se(o));a=$l(a,fe(),u)}}}else throw Vi("WriteRecord should have .snap or .children")}}return a}function J2(t,e,n,a,s){if(!a&&!s){const r=Mr(t.visibleWrites,e);if(r!=null)return r;{const l=_s(t.visibleWrites,e);if(Um(l))return n;if(n==null&&!Pm(l,fe()))return null;{const o=n||K.EMPTY_NODE;return Ii(l,o)}}}else{const r=_s(t.visibleWrites,e);if(!s&&Um(r))return n;if(!s&&n==null&&!Pm(r,fe()))return null;{const l=function(u){return(u.visible||s)&&(!a||!~a.indexOf(u.writeId))&&(vn(u.path,e)||vn(e,u.path))},o=Z2(t.allWrites,l,e),c=n||K.EMPTY_NODE;return Ii(o,c)}}}function d6(t,e,n){let a=K.EMPTY_NODE;const s=Mr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Re,(r,l)=>{a=a.updateImmediateChild(r,l)}),a;if(n){const r=_s(t.visibleWrites,e);return n.forEachChild(Re,(l,o)=>{const c=Ii(_s(r,new ye(l)),o);a=a.updateImmediateChild(l,c)}),ib(r).forEach(l=>{a=a.updateImmediateChild(l.name,l.node)}),a}else{const r=_s(t.visibleWrites,e);return ib(r).forEach(l=>{a=a.updateImmediateChild(l.name,l.node)}),a}}function h6(t,e,n,a,s){M(a||s,"Either existingEventSnap or existingServerSnap must exist");const r=ze(e,n);if(Pm(t.visibleWrites,r))return null;{const l=_s(t.visibleWrites,r);return Um(l)?s.getChild(n):Ii(l,s.getChild(n))}}function f6(t,e,n,a){const s=ze(e,n),r=Mr(t.visibleWrites,s);if(r!=null)return r;if(a.isCompleteForChild(n)){const l=_s(t.visibleWrites,s);return Ii(l,a.getNode().getImmediateChild(n))}else return null}function m6(t,e){return Mr(t.visibleWrites,e)}function g6(t,e,n,a,s,r,l){let o;const c=_s(t.visibleWrites,e),u=Mr(c,fe());if(u!=null)o=u;else if(n!=null)o=Ii(c,n);else return[];if(o=o.withIndex(l),!o.isEmpty()&&!o.isLeafNode()){const f=[],d=l.getCompare(),h=r?o.getReverseIteratorFrom(a,l):o.getIteratorFrom(a,l);let m=h.getNext();for(;m&&f.length<s;)d(m,a)!==0&&f.push(m),m=h.getNext();return f}else return[]}function p6(){return{visibleWrites:Pn.empty(),allWrites:[],lastWriteId:-1}}function Wu(t,e,n,a){return J2(t.writeTree,t.treePath,e,n,a)}function Yp(t,e){return d6(t.writeTree,t.treePath,e)}function lb(t,e,n,a){return h6(t.writeTree,t.treePath,e,n,a)}function Yu(t,e){return m6(t.writeTree,ze(t.treePath,e))}function y6(t,e,n,a,s,r){return g6(t.writeTree,t.treePath,e,n,a,s,r)}function Kp(t,e,n){return f6(t.writeTree,t.treePath,e,n)}function eC(t,e){return tC(ze(t.treePath,e),t.writeTree)}function tC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,a=e.childName;M(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),M(a!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(a);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(a,Co(a,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(a);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(a,ko(a,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(a,Ti(a,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(a,Co(a,e.snapshotNode,s.oldSnap));else throw Vi("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(a,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{getCompleteChild(e){return null}getChildAfterChild(e,n,a){return null}}const nC=new b6;class Xp{constructor(e,n,a=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=a}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const a=this.optCompleteServerCache_!=null?new Ts(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kp(this.writes_,e,a)}}getChildAfterChild(e,n,a){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:_r(this.viewCache_),r=y6(this.writes_,s,n,1,a,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(t){return{filter:t}}function _6(t,e){M(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function w6(t,e,n,a,s){const r=new x6;let l,o;if(n.type===Dn.OVERWRITE){const u=n;u.source.fromUser?l=Bm(t,e,u.path,u.snap,a,s,r):(M(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered()&&!ie(u.path),l=Ku(t,e,u.path,u.snap,a,s,o,r))}else if(n.type===Dn.MERGE){const u=n;u.source.fromUser?l=C6(t,e,u.path,u.children,a,s,r):(M(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered(),l=zm(t,e,u.path,u.children,a,s,o,r))}else if(n.type===Dn.ACK_USER_WRITE){const u=n;u.revert?l=E6(t,e,u.path,a,s,r):l=N6(t,e,u.path,u.affectedTree,a,s,r)}else if(n.type===Dn.LISTEN_COMPLETE)l=S6(t,e,n.path,a,r);else throw Vi("Unknown operation type: "+n.type);const c=r.getChanges();return k6(e,l,c),{viewCache:l,changes:c}}function k6(t,e,n){const a=e.eventCache;if(a.isFullyInitialized()){const s=a.getNode().isLeafNode()||a.getNode().isEmpty(),r=$u(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!a.getNode().equals(r)||!a.getNode().getPriority().equals(r.getPriority()))&&n.push(K2($u(e)))}}function aC(t,e,n,a,s,r){const l=e.eventCache;if(Yu(a,n)!=null)return e;{let o,c;if(ie(n))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=_r(e),f=u instanceof K?u:K.EMPTY_NODE,d=Yp(a,f);o=t.filter.updateFullNode(e.eventCache.getNode(),d,r)}else{const u=Wu(a,_r(e));o=t.filter.updateFullNode(e.eventCache.getNode(),u,r)}else{const u=re(n);if(u===".priority"){M(js(n)===1,"Can't have a priority with additional path components");const f=l.getNode();c=e.serverCache.getNode();const d=lb(a,n,f,c);d!=null?o=t.filter.updatePriority(f,d):o=l.getNode()}else{const f=Se(n);let d;if(l.isCompleteForChild(u)){c=e.serverCache.getNode();const h=lb(a,n,l.getNode(),c);h!=null?d=l.getNode().getImmediateChild(u).updateChild(f,h):d=l.getNode().getImmediateChild(u)}else d=Kp(a,u,e.serverCache);d!=null?o=t.filter.updateChild(l.getNode(),u,d,f,s,r):o=l.getNode()}}return Gl(e,o,l.isFullyInitialized()||ie(n),t.filter.filtersNodes())}}function Ku(t,e,n,a,s,r,l,o){const c=e.serverCache;let u;const f=l?t.filter:t.filter.getIndexedFilter();if(ie(n))u=f.updateFullNode(c.getNode(),a,null);else if(f.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(n,a);u=f.updateFullNode(c.getNode(),m,null)}else{const m=re(n);if(!c.isCompleteForPath(n)&&js(n)>1)return e;const b=Se(n),w=c.getNode().getImmediateChild(m).updateChild(b,a);m===".priority"?u=f.updatePriority(c.getNode(),w):u=f.updateChild(c.getNode(),m,w,b,nC,null)}const d=X2(e,u,c.isFullyInitialized()||ie(n),f.filtersNodes()),h=new Xp(s,d,r);return aC(t,d,n,s,h,o)}function Bm(t,e,n,a,s,r,l){const o=e.eventCache;let c,u;const f=new Xp(s,e,r);if(ie(n))u=t.filter.updateFullNode(e.eventCache.getNode(),a,l),c=Gl(e,u,!0,t.filter.filtersNodes());else{const d=re(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),a),c=Gl(e,u,o.isFullyInitialized(),o.isFiltered());else{const h=Se(n),m=o.getNode().getImmediateChild(d);let b;if(ie(h))b=a;else{const _=f.getCompleteChild(d);_!=null?Up(h)===".priority"&&_.getChild(F2(h)).isEmpty()?b=_:b=_.updateChild(h,a):b=K.EMPTY_NODE}if(m.equals(b))c=e;else{const _=t.filter.updateChild(o.getNode(),d,b,h,f,l);c=Gl(e,_,o.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function ob(t,e){return t.eventCache.isCompleteForChild(e)}function C6(t,e,n,a,s,r,l){let o=e;return a.foreach((c,u)=>{const f=ze(n,c);ob(e,re(f))&&(o=Bm(t,o,f,u,s,r,l))}),a.foreach((c,u)=>{const f=ze(n,c);ob(e,re(f))||(o=Bm(t,o,f,u,s,r,l))}),o}function cb(t,e,n){return n.foreach((a,s)=>{e=e.updateChild(a,s)}),e}function zm(t,e,n,a,s,r,l,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;ie(n)?u=a:u=new Te(null).setTree(n,a);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),b=cb(t,m,h);c=Ku(t,c,new ye(d),b,s,r,l,o)}}),u.children.inorderTraversal((d,h)=>{const m=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!m){const b=e.serverCache.getNode().getImmediateChild(d),_=cb(t,b,h);c=Ku(t,c,new ye(d),_,s,r,l,o)}}),c}function N6(t,e,n,a,s,r,l){if(Yu(s,n)!=null)return e;const o=e.serverCache.isFiltered(),c=e.serverCache;if(a.value!=null){if(ie(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ku(t,e,n,c.getNode().getChild(n),s,r,o,l);if(ie(n)){let u=new Te(null);return c.getNode().forEachChild(Xn,(f,d)=>{u=u.set(new ye(f),d)}),zm(t,e,n,u,s,r,o,l)}else return e}else{let u=new Te(null);return a.foreach((f,d)=>{const h=ze(n,f);c.isCompleteForPath(h)&&(u=u.set(f,c.getNode().getChild(h)))}),zm(t,e,n,u,s,r,o,l)}}function S6(t,e,n,a,s){const r=e.serverCache,l=X2(e,r.getNode(),r.isFullyInitialized()||ie(n),r.isFiltered());return aC(t,l,n,a,nC,s)}function E6(t,e,n,a,s,r){let l;if(Yu(a,n)!=null)return e;{const o=new Xp(a,e,s),c=e.eventCache.getNode();let u;if(ie(n)||re(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Wu(a,_r(e));else{const d=e.serverCache.getNode();M(d instanceof K,"serverChildren would be complete if leaf node"),f=Yp(a,d)}f=f,u=t.filter.updateFullNode(c,f,r)}else{const f=re(n);let d=Kp(a,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),d!=null?u=t.filter.updateChild(c,f,d,Se(n),o,r):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(c,f,K.EMPTY_NODE,Se(n),o,r):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Wu(a,_r(e)),l.isLeafNode()&&(u=t.filter.updateFullNode(u,l,r)))}return l=e.serverCache.isFullyInitialized()||Yu(a,fe())!=null,Gl(e,u,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const a=this.query_._queryParams,s=new Qp(a.getIndex()),r=FR(a);this.processor_=v6(r);const l=n.serverCache,o=n.eventCache,c=s.updateFullNode(K.EMPTY_NODE,l.getNode(),null),u=r.updateFullNode(K.EMPTY_NODE,o.getNode(),null),f=new Ts(c,l.isFullyInitialized(),s.filtersNodes()),d=new Ts(u,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=Vd(d,f),this.eventGenerator_=new JR(this.query_)}get query(){return this.query_}}function T6(t){return t.viewCache_.serverCache.getNode()}function A6(t){return $u(t.viewCache_)}function I6(t,e){const n=_r(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ie(e)&&!n.getImmediateChild(re(e)).isEmpty())?n.getChild(e):null}function ub(t){return t.eventRegistrations_.length===0}function R6(t,e){t.eventRegistrations_.push(e)}function db(t,e,n){const a=[];if(n){M(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(r=>{const l=r.createCancelEvent(n,s);l&&a.push(l)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){const l=t.eventRegistrations_[r];if(!l.matches(e))s.push(l);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return a}function hb(t,e,n,a){e.type===Dn.MERGE&&e.source.queryId!==null&&(M(_r(t.viewCache_),"We should always have a full cache before handling merges"),M($u(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=w6(t.processor_,s,e,n,a);return _6(t.processor_,r.viewCache),M(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,sC(t,r.changes,r.viewCache.eventCache.getNode(),null)}function M6(t,e){const n=t.viewCache_.eventCache,a=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Re,(r,l)=>{a.push(Ti(r,l))}),n.isFullyInitialized()&&a.push(K2(n.getNode())),sC(t,a,n.getNode(),e)}function sC(t,e,n,a){const s=a?[a]:t.eventRegistrations_;return e6(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu;class rC{constructor(){this.views=new Map}}function O6(t){M(!Xu,"__referenceConstructor has already been defined"),Xu=t}function D6(){return M(Xu,"Reference.ts has not been loaded"),Xu}function L6(t){return t.views.size===0}function qp(t,e,n,a){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return M(r!=null,"SyncTree gave us an op for an invalid query."),hb(r,e,n,a)}else{let r=[];for(const l of t.views.values())r=r.concat(hb(l,e,n,a));return r}}function iC(t,e,n,a,s){const r=e._queryIdentifier,l=t.views.get(r);if(!l){let o=Wu(n,s?a:null),c=!1;o?c=!0:a instanceof K?(o=Yp(n,a),c=!1):(o=K.EMPTY_NODE,c=!1);const u=Vd(new Ts(o,c,!1),new Ts(a,s,!1));return new j6(e,u)}return l}function P6(t,e,n,a,s,r){const l=iC(t,e,a,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),R6(l,n),M6(l,n)}function U6(t,e,n,a){const s=e._queryIdentifier,r=[];let l=[];const o=As(t);if(s==="default")for(const[c,u]of t.views.entries())l=l.concat(db(u,n,a)),ub(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||r.push(u.query));else{const c=t.views.get(s);c&&(l=l.concat(db(c,n,a)),ub(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||r.push(c.query)))}return o&&!As(t)&&r.push(new(D6())(e._repo,e._path)),{removed:r,events:l}}function lC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ws(t,e){let n=null;for(const a of t.views.values())n=n||I6(a,e);return n}function oC(t,e){if(e._queryParams.loadsAllData())return Gd(t);{const a=e._queryIdentifier;return t.views.get(a)}}function cC(t,e){return oC(t,e)!=null}function As(t){return Gd(t)!=null}function Gd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu;function B6(t){M(!qu,"__referenceConstructor has already been defined"),qu=t}function z6(){return M(qu,"Reference.ts has not been loaded"),qu}let H6=1;class fb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Te(null),this.pendingWriteTree_=p6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zp(t,e,n,a,s){return s6(t.pendingWriteTree_,e,n,a,s),s?Zi(t,new vr(Gp(),e,n)):[]}function F6(t,e,n,a){r6(t.pendingWriteTree_,e,n,a);const s=Te.fromObject(n);return Zi(t,new Ai(Gp(),e,s))}function rs(t,e,n=!1){const a=i6(t.pendingWriteTree_,e);if(l6(t.pendingWriteTree_,e)){let r=new Te(null);return a.snap!=null?r=r.set(fe(),!0):wt(a.children,l=>{r=r.set(new ye(l),!0)}),Zi(t,new Gu(a.path,r,n))}else return[]}function qo(t,e,n){return Zi(t,new vr($p(),e,n))}function V6(t,e,n){const a=Te.fromObject(n);return Zi(t,new Ai($p(),e,a))}function Q6(t,e){return Zi(t,new So($p(),e))}function G6(t,e,n){const a=Jp(t,n);if(a){const s=e0(a),r=s.path,l=s.queryId,o=Lt(r,e),c=new So(Wp(l),o);return t0(t,r,c)}else return[]}function Zu(t,e,n,a,s=!1){const r=e._path,l=t.syncPointTree_.get(r);let o=[];if(l&&(e._queryIdentifier==="default"||cC(l,e))){const c=U6(l,e,n,a);L6(l)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const u=c.removed;if(o=c.events,!s){const f=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(r,(h,m)=>As(m));if(f&&!d){const h=t.syncPointTree_.subtree(r);if(!h.isEmpty()){const m=Y6(h);for(let b=0;b<m.length;++b){const _=m[b],w=_.query,y=fC(t,_);t.listenProvider_.startListening(Wl(w),Eo(t,w),y.hashFn,y.onComplete)}}}!d&&u.length>0&&!a&&(f?t.listenProvider_.stopListening(Wl(e),null):u.forEach(h=>{const m=t.queryToTagMap.get(Wd(h));t.listenProvider_.stopListening(Wl(h),m)}))}K6(t,u)}return o}function uC(t,e,n,a){const s=Jp(t,a);if(s!=null){const r=e0(s),l=r.path,o=r.queryId,c=Lt(l,e),u=new vr(Wp(o),c,n);return t0(t,l,u)}else return[]}function $6(t,e,n,a){const s=Jp(t,a);if(s){const r=e0(s),l=r.path,o=r.queryId,c=Lt(l,e),u=Te.fromObject(n),f=new Ai(Wp(o),c,u);return t0(t,l,f)}else return[]}function Hm(t,e,n,a=!1){const s=e._path;let r=null,l=!1;t.syncPointTree_.foreachOnPath(s,(h,m)=>{const b=Lt(h,s);r=r||ws(m,b),l=l||As(m)});let o=t.syncPointTree_.get(s);o?(l=l||As(o),r=r||ws(o,fe())):(o=new rC,t.syncPointTree_=t.syncPointTree_.set(s,o));let c;r!=null?c=!0:(c=!1,r=K.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((m,b)=>{const _=ws(b,fe());_&&(r=r.updateImmediateChild(m,_))}));const u=cC(o,e);if(!u&&!e._queryParams.loadsAllData()){const h=Wd(e);M(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const m=X6();t.queryToTagMap.set(h,m),t.tagToQueryMap.set(m,h)}const f=Qd(t.pendingWriteTree_,s);let d=P6(o,e,n,f,r,c);if(!u&&!l&&!a){const h=oC(o,e);d=d.concat(q6(t,e,h))}return d}function $d(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(l,o)=>{const c=Lt(l,e),u=ws(o,c);if(u)return u});return J2(s,e,r,n,!0)}function W6(t,e){const n=e._path;let a=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const d=Lt(u,n);a=a||ws(f,d)});let s=t.syncPointTree_.get(n);s?a=a||ws(s,fe()):(s=new rC,t.syncPointTree_=t.syncPointTree_.set(n,s));const r=a!=null,l=r?new Ts(a,!0,!1):null,o=Qd(t.pendingWriteTree_,e._path),c=iC(s,e,o,r?l.getNode():K.EMPTY_NODE,r);return A6(c)}function Zi(t,e){return dC(e,t.syncPointTree_,null,Qd(t.pendingWriteTree_,fe()))}function dC(t,e,n,a){if(ie(t.path))return hC(t,e,n,a);{const s=e.get(fe());n==null&&s!=null&&(n=ws(s,fe()));let r=[];const l=re(t.path),o=t.operationForChild(l),c=e.children.get(l);if(c&&o){const u=n?n.getImmediateChild(l):null,f=eC(a,l);r=r.concat(dC(o,c,u,f))}return s&&(r=r.concat(qp(s,t,a,n))),r}}function hC(t,e,n,a){const s=e.get(fe());n==null&&s!=null&&(n=ws(s,fe()));let r=[];return e.children.inorderTraversal((l,o)=>{const c=n?n.getImmediateChild(l):null,u=eC(a,l),f=t.operationForChild(l);f&&(r=r.concat(hC(f,o,c,u)))}),s&&(r=r.concat(qp(s,t,a,n))),r}function fC(t,e){const n=e.query,a=Eo(t,n);return{hashFn:()=>(T6(e)||K.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return a?G6(t,n._path,a):Q6(t,n._path);{const r=F3(s,n);return Zu(t,n,null,r)}}}}function Eo(t,e){const n=Wd(e);return t.queryToTagMap.get(n)}function Wd(t){return t._path.toString()+"$"+t._queryIdentifier}function Jp(t,e){return t.tagToQueryMap.get(e)}function e0(t){const e=t.indexOf("$");return M(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ye(t.substr(0,e))}}function t0(t,e,n){const a=t.syncPointTree_.get(e);M(a,"Missing sync point for query tag that we're tracking");const s=Qd(t.pendingWriteTree_,e);return qp(a,n,s,null)}function Y6(t){return t.fold((e,n,a)=>{if(n&&As(n))return[Gd(n)];{let s=[];return n&&(s=lC(n)),wt(a,(r,l)=>{s=s.concat(l)}),s}})}function Wl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(z6())(t._repo,t._path):t}function K6(t,e){for(let n=0;n<e.length;++n){const a=e[n];if(!a._queryParams.loadsAllData()){const s=Wd(a),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function X6(){return H6++}function q6(t,e,n){const a=e._path,s=Eo(t,e),r=fC(t,n),l=t.listenProvider_.startListening(Wl(e),s,r.hashFn,r.onComplete),o=t.syncPointTree_.subtree(a);if(s)M(!As(o.value),"If we're adding a query, it shouldn't be shadowed");else{const c=o.fold((u,f,d)=>{if(!ie(u)&&f&&As(f))return[Gd(f).query];{let h=[];return f&&(h=h.concat(lC(f).map(m=>m.query))),wt(d,(m,b)=>{h=h.concat(b)}),h}});for(let u=0;u<c.length;++u){const f=c[u];t.listenProvider_.stopListening(Wl(f),Eo(t,f))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new n0(n)}node(){return this.node_}}class a0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ze(this.path_,e);return new a0(this.syncTree_,n)}node(){return $d(this.syncTree_,this.path_)}}const Z6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},mb=function(t,e,n){if(!t||typeof t!="object")return t;if(M(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return J6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return eM(t[".sv"],e);M(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},J6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:M(!1,"Unexpected server value: "+t)}},eM=function(t,e,n){t.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const a=t.increment;typeof a!="number"&&M(!1,"Unexpected increment value: "+a);const s=e.node();if(M(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return a;const l=s.getValue();return typeof l!="number"?a:l+a},mC=function(t,e,n,a){return r0(e,new a0(n,t),a)},s0=function(t,e,n){return r0(t,new n0(e),n)};function r0(t,e,n){const a=t.getPriority().val(),s=mb(a,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const l=t,o=mb(l.getValue(),e,n);return o!==l.getValue()||s!==l.getPriority().val()?new gt(o,Fe(s)):t}else{const l=t;return r=l,s!==l.getPriority().val()&&(r=r.updatePriority(new gt(s))),l.forEachChild(Re,(o,c)=>{const u=r0(c,e.getImmediateChild(o),n);u!==c&&(r=r.updateImmediateChild(o,u))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e="",n=null,a={children:{},childCount:0}){this.name=e,this.parent=n,this.node=a}}function Yd(t,e){let n=e instanceof ye?e:new ye(e),a=t,s=re(n);for(;s!==null;){const r=pr(a.node.children,s)||{children:{},childCount:0};a=new i0(s,a,r),n=Se(n),s=re(n)}return a}function Or(t){return t.node.value}function l0(t,e){t.node.value=e,Fm(t)}function gC(t){return t.node.childCount>0}function tM(t){return Or(t)===void 0&&!gC(t)}function Kd(t,e){wt(t.node.children,(n,a)=>{e(new i0(n,t,a))})}function pC(t,e,n,a){n&&e(t),Kd(t,s=>{pC(s,e,!0)})}function nM(t,e,n){let a=t.parent;for(;a!==null;){if(e(a))return!0;a=a.parent}return!1}function Zo(t){return new ye(t.parent===null?t.name:Zo(t.parent)+"/"+t.name)}function Fm(t){t.parent!==null&&aM(t.parent,t.name,t)}function aM(t,e,n){const a=tM(n),s=Bn(t.node.children,e);a&&s?(delete t.node.children[e],t.node.childCount--,Fm(t)):!a&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Fm(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=/[\[\].#$\/\u0000-\u001F\u007F]/,rM=/[\[\].#$\u0000-\u001F\u007F]/,df=10*1024*1024,Xd=function(t){return typeof t=="string"&&t.length!==0&&!sM.test(t)},yC=function(t){return typeof t=="string"&&t.length!==0&&!rM.test(t)},iM=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yC(t)},jo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Bd(t)||t&&typeof t=="object"&&Bn(t,".sv")},Jn=function(t,e,n,a){a&&e===void 0||Jo(xr(t,"value"),e,n)},Jo=function(t,e,n){const a=n instanceof ye?new wR(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+qs(a));if(typeof e=="function")throw new Error(t+"contains a function "+qs(a)+" with contents = "+e.toString());if(Bd(e))throw new Error(t+"contains "+e.toString()+" "+qs(a));if(typeof e=="string"&&e.length>df/3&&Ed(e)>df)throw new Error(t+"contains a string greater than "+df+" utf8 bytes "+qs(a)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(wt(e,(l,o)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(r=!0,!Xd(l)))throw new Error(t+" contains an invalid key ("+l+") "+qs(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kR(a,l),Jo(t,o,a),CR(a)}),s&&r)throw new Error(t+' contains ".value" child '+qs(a)+" in addition to actual children.")}},lM=function(t,e){let n,a;for(n=0;n<e.length;n++){a=e[n];const r=wo(a);for(let l=0;l<r.length;l++)if(!(r[l]===".priority"&&l===r.length-1)){if(!Xd(r[l]))throw new Error(t+"contains an invalid key ("+r[l]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(_R);let s=null;for(n=0;n<e.length;n++){if(a=e[n],s!==null&&vn(s,a))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+a.toString());s=a}},xC=function(t,e,n,a){const s=xr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const r=[];wt(e,(l,o)=>{const c=new ye(l);if(Jo(s,o,ze(n,c)),Up(c)===".priority"&&!jo(o))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(c)}),lM(s,r)},o0=function(t,e,n){if(Bd(e))throw new Error(xr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jo(e))throw new Error(xr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},ec=function(t,e,n,a){if(n!==void 0&&!Xd(n))throw new Error(xr(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},qd=function(t,e,n,a){if(!(a&&n===void 0)&&!yC(n))throw new Error(xr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},oM=function(t,e,n,a){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qd(t,e,n,a)},Ln=function(t,e){if(re(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},bC=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Xd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!iM(n))throw new Error(xr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Zd(t,e){let n=null;for(let a=0;a<e.length;a++){const s=e[a],r=s.getPath();n!==null&&!Bp(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function vC(t,e,n){Zd(t,n),_C(t,a=>Bp(a,e))}function cn(t,e,n){Zd(t,n),_C(t,a=>vn(a,e)||vn(e,a))}function _C(t,e){t.recursionDepth_++;let n=!0;for(let a=0;a<t.eventLists_.length;a++){const s=t.eventLists_[a];if(s){const r=s.path;e(r)?(uM(t.eventLists_[a]),t.eventLists_[a]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function uM(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const a=n.getEventRunner();or&&bt("event: "+n.toString()),Xi(a)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="repo_interrupt",dM=25;class hM{constructor(e,n,a,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=a,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qu(),this.transactionQueueTree_=new i0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fM(t,e,n){if(t.stats_=Lp(t.repoInfo_),t.forceRestClient_||$3())t.server_=new Vu(t.repoInfo_,(a,s,r,l)=>{gb(t,a,s,r,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>pb(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}t.persistentConnection_=new Cn(t.repoInfo_,e,(a,s,r,l)=>{gb(t,a,s,r,l)},a=>{pb(t,a)},a=>{mM(t,a)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(a=>{t.server_.refreshAuthToken(a)}),t.appCheckProvider_.addTokenChangeListener(a=>{t.server_.refreshAppCheckToken(a.token)}),t.statsReporter_=q3(t.repoInfo_,()=>new ZR(t.stats_,t.server_)),t.infoData_=new WR,t.infoSyncTree_=new fb({startListening:(a,s,r,l)=>{let o=[];const c=t.infoData_.getNode(a._path);return c.isEmpty()||(o=qo(t.infoSyncTree_,a._path,c),setTimeout(()=>{l("ok")},0)),o},stopListening:()=>{}}),c0(t,"connected",!1),t.serverSyncTree_=new fb({startListening:(a,s,r,l)=>(t.server_.listen(a,r,s,(o,c)=>{const u=l(o,c);cn(t.eventQueue_,a._path,u)}),[]),stopListening:(a,s)=>{t.server_.unlisten(a,s)}})}function kC(t){const n=t.infoData_.getNode(new ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function tc(t){return Z6({timestamp:kC(t)})}function gb(t,e,n,a,s){t.dataUpdateCount++;const r=new ye(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(s)if(a){const c=Au(n,u=>Fe(u));l=$6(t.serverSyncTree_,r,c,s)}else{const c=Fe(n);l=uC(t.serverSyncTree_,r,c,s)}else if(a){const c=Au(n,u=>Fe(u));l=V6(t.serverSyncTree_,r,c)}else{const c=Fe(n);l=qo(t.serverSyncTree_,r,c)}let o=r;l.length>0&&(o=Ri(t,r)),cn(t.eventQueue_,o,l)}function pb(t,e){c0(t,"connected",e),e===!1&&yM(t)}function mM(t,e){wt(e,(n,a)=>{c0(t,n,a)})}function c0(t,e,n){const a=new ye("/.info/"+e),s=Fe(n);t.infoData_.updateSnapshot(a,s);const r=qo(t.infoSyncTree_,a,s);cn(t.eventQueue_,a,r)}function Jd(t){return t.nextWriteId_++}function gM(t,e,n){const a=W6(t.serverSyncTree_,e);return a!=null?Promise.resolve(a):t.server_.get(e).then(s=>{const r=Fe(s).withIndex(e._queryParams.getIndex());Hm(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=qo(t.serverSyncTree_,e._path,r);else{const o=Eo(t.serverSyncTree_,e);l=uC(t.serverSyncTree_,e._path,r,o)}return cn(t.eventQueue_,e._path,l),Zu(t.serverSyncTree_,e,n,null,!0),r},s=>(Ji(t,"get for query "+ut(e)+" failed: "+s),Promise.reject(new Error(s))))}function u0(t,e,n,a,s){Ji(t,"set",{path:e.toString(),value:n,priority:a});const r=tc(t),l=Fe(n,a),o=$d(t.serverSyncTree_,e),c=s0(l,o,r),u=Jd(t),f=Zp(t.serverSyncTree_,e,c,u,!0);Zd(t.eventQueue_,f),t.server_.put(e.toString(),l.val(!0),(h,m)=>{const b=h==="ok";b||It("set at "+e+" failed: "+h);const _=rs(t.serverSyncTree_,u,!b);cn(t.eventQueue_,e,_),Is(t,s,h,m)});const d=h0(t,e);Ri(t,d),cn(t.eventQueue_,d,[])}function pM(t,e,n,a){Ji(t,"update",{path:e.toString(),value:n});let s=!0;const r=tc(t),l={};if(wt(n,(o,c)=>{s=!1,l[o]=mC(ze(e,o),Fe(c),t.serverSyncTree_,r)}),s)bt("update() called with empty data.  Don't do anything."),Is(t,a,"ok",void 0);else{const o=Jd(t),c=F6(t.serverSyncTree_,e,l,o);Zd(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,f)=>{const d=u==="ok";d||It("update at "+e+" failed: "+u);const h=rs(t.serverSyncTree_,o,!d),m=h.length>0?Ri(t,e):e;cn(t.eventQueue_,m,h),Is(t,a,u,f)}),wt(n,u=>{const f=h0(t,ze(e,u));Ri(t,f)}),cn(t.eventQueue_,e,[])}}function yM(t){Ji(t,"onDisconnectEvents");const e=tc(t),n=Qu();Dm(t.onDisconnect_,fe(),(s,r)=>{const l=mC(s,r,t.serverSyncTree_,e);qi(n,s,l)});let a=[];Dm(n,fe(),(s,r)=>{a=a.concat(qo(t.serverSyncTree_,s,r));const l=h0(t,s);Ri(t,l)}),t.onDisconnect_=Qu(),cn(t.eventQueue_,fe(),a)}function xM(t,e,n){t.server_.onDisconnectCancel(e.toString(),(a,s)=>{a==="ok"&&Om(t.onDisconnect_,e),Is(t,n,a,s)})}function yb(t,e,n,a){const s=Fe(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(r,l)=>{r==="ok"&&qi(t.onDisconnect_,e,s),Is(t,a,r,l)})}function bM(t,e,n,a,s){const r=Fe(n,a);t.server_.onDisconnectPut(e.toString(),r.val(!0),(l,o)=>{l==="ok"&&qi(t.onDisconnect_,e,r),Is(t,s,l,o)})}function vM(t,e,n,a){if(Tu(n)){bt("onDisconnect().update() called with empty data.  Don't do anything."),Is(t,a,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,r)=>{s==="ok"&&wt(n,(l,o)=>{const c=Fe(o);qi(t.onDisconnect_,ze(e,l),c)}),Is(t,a,s,r)})}function _M(t,e,n){let a;re(e._path)===".info"?a=Hm(t.infoSyncTree_,e,n):a=Hm(t.serverSyncTree_,e,n),vC(t.eventQueue_,e._path,a)}function Vm(t,e,n){let a;re(e._path)===".info"?a=Zu(t.infoSyncTree_,e,n):a=Zu(t.serverSyncTree_,e,n),vC(t.eventQueue_,e._path,a)}function CC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wC)}function wM(t){t.persistentConnection_&&t.persistentConnection_.resume(wC)}function Ji(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),bt(n,...e)}function Is(t,e,n,a){e&&Xi(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let r=s;a&&(r+=": "+a);const l=new Error(r);l.code=s,e(l)}})}function kM(t,e,n,a,s,r){Ji(t,"transaction on "+e);const l={path:e,update:n,onComplete:a,status:null,order:b2(),applyLocally:r,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},o=d0(t,e,void 0);l.currentInputSnapshot=o;const c=l.update(o.val());if(c===void 0)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Jo("transaction failed: Data returned ",c,l.path),l.status=0;const u=Yd(t.transactionQueueTree_,e),f=Or(u)||[];f.push(l),l0(u,f);let d;typeof c=="object"&&c!==null&&Bn(c,".priority")?(d=pr(c,".priority"),M(jo(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=($d(t.serverSyncTree_,e)||K.EMPTY_NODE).getPriority().val();const h=tc(t),m=Fe(c,d),b=s0(m,o,h);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=b,l.currentWriteId=Jd(t);const _=Zp(t.serverSyncTree_,e,b,l.currentWriteId,l.applyLocally);cn(t.eventQueue_,e,_),eh(t,t.transactionQueueTree_)}}function d0(t,e,n){return $d(t.serverSyncTree_,e,n)||K.EMPTY_NODE}function eh(t,e=t.transactionQueueTree_){if(e||th(t,e),Or(e)){const n=SC(t,e);M(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&CM(t,Zo(e),n)}else gC(e)&&Kd(e,n=>{eh(t,n)})}function CM(t,e,n){const a=n.map(u=>u.currentWriteId),s=d0(t,e,a);let r=s;const l=s.hash();for(let u=0;u<n.length;u++){const f=n[u];M(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=Lt(e,f.path);r=r.updateChild(d,f.currentOutputSnapshotRaw)}const o=r.val(!0),c=e;t.server_.put(c.toString(),o,u=>{Ji(t,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(rs(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();th(t,Yd(t.transactionQueueTree_,e)),eh(t,t.transactionQueueTree_),cn(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)Xi(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{It("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Ri(t,e)}},l)}function Ri(t,e){const n=NC(t,e),a=Zo(n),s=SC(t,n);return NM(t,s,a),a}function NM(t,e,n){if(e.length===0)return;const a=[];let s=[];const l=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const c=e[o],u=Lt(n,c.path);let f=!1,d;if(M(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,d=c.abortReason,s=s.concat(rs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=dM)f=!0,d="maxretry",s=s.concat(rs(t.serverSyncTree_,c.currentWriteId,!0));else{const h=d0(t,c.path,l);c.currentInputSnapshot=h;const m=e[o].update(h.val());if(m!==void 0){Jo("transaction failed: Data returned ",m,c.path);let b=Fe(m);typeof m=="object"&&m!=null&&Bn(m,".priority")||(b=b.updatePriority(h.getPriority()));const w=c.currentWriteId,y=tc(t),g=s0(b,h,y);c.currentOutputSnapshotRaw=b,c.currentOutputSnapshotResolved=g,c.currentWriteId=Jd(t),l.splice(l.indexOf(w),1),s=s.concat(Zp(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),s=s.concat(rs(t.serverSyncTree_,w,!0))}else f=!0,d="nodata",s=s.concat(rs(t.serverSyncTree_,c.currentWriteId,!0))}cn(t.eventQueue_,n,s),s=[],f&&(e[o].status=2,function(h){setTimeout(h,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(d==="nodata"?a.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):a.push(()=>e[o].onComplete(new Error(d),!1,null))))}th(t,t.transactionQueueTree_);for(let o=0;o<a.length;o++)Xi(a[o]);eh(t,t.transactionQueueTree_)}function NC(t,e){let n,a=t.transactionQueueTree_;for(n=re(e);n!==null&&Or(a)===void 0;)a=Yd(a,n),e=Se(e),n=re(e);return a}function SC(t,e){const n=[];return EC(t,e,n),n.sort((a,s)=>a.order-s.order),n}function EC(t,e,n){const a=Or(e);if(a)for(let s=0;s<a.length;s++)n.push(a[s]);Kd(e,s=>{EC(t,s,n)})}function th(t,e){const n=Or(e);if(n){let a=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[a]=n[s],a++);n.length=a,l0(e,n.length>0?n:void 0)}Kd(e,a=>{th(t,a)})}function h0(t,e){const n=Zo(NC(t,e)),a=Yd(t.transactionQueueTree_,e);return nM(a,s=>{hf(t,s)}),hf(t,a),pC(a,s=>{hf(t,s)}),n}function hf(t,e){const n=Or(e);if(n){const a=[];let s=[],r=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(M(r===l-1,"All SENT items should be at beginning of queue."),r=l,n[l].status=3,n[l].abortReason="set"):(M(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),s=s.concat(rs(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&a.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));r===-1?l0(e,void 0):n.length=r+1,cn(t.eventQueue_,Zo(e),s);for(let l=0;l<a.length;l++)Xi(a[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){let e="";const n=t.split("/");for(let a=0;a<n.length;a++)if(n[a].length>0){let s=n[a];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function EM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const a=n.split("=");a.length===2?e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):It(`Invalid query segment '${n}' in query '${t}'`)}return e}const Qm=function(t,e){const n=jM(t),a=n.namespace;n.domain==="firebase.com"&&Zn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&n.domain!=="localhost"&&Zn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||P3();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new M2(n.host,n.secure,a,s,e,"",a!==n.subdomain),path:new ye(n.pathString)}},jM=function(t){let e="",n="",a="",s="",r="",l=!0,o="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(o=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(s=SM(t.substring(f,d)));const h=EM(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(l=o==="https"||o==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const b=e.indexOf(".");a=e.substring(0,b).toLowerCase(),n=e.substring(b+1),r=a}"ns"in h&&(r=h.ns)}return{host:e,port:c,domain:n,subdomain:a,secure:l,scheme:o,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",TM=function(){let t=0;const e=[];return function(n){const a=n===t;t=n;let s;const r=new Array(8);for(s=7;s>=0;s--)r[s]=xb.charAt(n%64),n=Math.floor(n/64);M(n===0,"Cannot push at time == 0");let l=r.join("");if(a){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)l+=xb.charAt(e[s]);return M(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,a,s){this.eventType=e,this.eventRegistration=n,this.snapshot=a,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}}class TC{constructor(e,n,a){this.eventRegistration=e,this.error=n,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Jt;return xM(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ln("OnDisconnect.remove",this._path);const e=new Jt;return yb(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ln("OnDisconnect.set",this._path),Jn("OnDisconnect.set",e,this._path,!1);const n=new Jt;return yb(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Ln("OnDisconnect.setWithPriority",this._path),Jn("OnDisconnect.setWithPriority",e,this._path,!1),o0("OnDisconnect.setWithPriority",n);const a=new Jt;return bM(this._repo,this._path,e,n,a.wrapCallback(()=>{})),a.promise}update(e){Ln("OnDisconnect.update",this._path),xC("OnDisconnect.update",e,this._path);const n=new Jt;return vM(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,a,s){this._repo=e,this._path=n,this._queryParams=a,this._orderByCalled=s}get key(){return ie(this._path)?null:Up(this._path)}get ref(){return new jn(this._repo,this._path)}get _queryIdentifier(){const e=ab(this._queryParams),n=Op(e);return n==="{}"?"default":n}get _queryObject(){return ab(this._queryParams)}isEqual(e){if(e=G(e),!(e instanceof Kt))return!1;const n=this._repo===e._repo,a=Bp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&a&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+vR(this._path)}}function nh(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Hs(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Xn){const a="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Es)throw new Error(a);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==La)throw new Error(a);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===Re){if(e!=null&&!jo(e)||n!=null&&!jo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(M(t.getIndex()instanceof Fp||t.getIndex()===Vp,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ah(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class jn extends Kt{constructor(e,n){super(e,n,new Hd,!1)}get parent(){const e=F2(this._path);return e===null?null:new jn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Rs{constructor(e,n,a){this._node=e,this.ref=n,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ye(e),a=wr(this.ref,e);return new Rs(this._node.getChild(n),a,Re)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,s)=>e(new Rs(s,wr(this.ref,a),Re)))}hasChild(e){const n=new ye(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Q(t,e){return t=G(t),t._checkNotDeleted("ref"),e!==void 0?wr(t._root,e):t._root}function AM(t,e){t=G(t),t._checkNotDeleted("refFromURL");const n=Qm(e,t._repo.repoInfo_.nodeAdmin);bC("refFromURL",n);const a=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&a.host!==t._repo.repoInfo_.host&&Zn("refFromURL: Host name does not match the current database: (found "+a.host+" but expected "+t._repo.repoInfo_.host+")"),Q(t,n.path.toString())}function wr(t,e){return t=G(t),re(t._path)===null?oM("child","path",e,!1):qd("child","path",e,!1),new jn(t._repo,ze(t._path,e))}function IM(t){return t=G(t),new AC(t._repo,t._path)}function nc(t,e){t=G(t),Ln("push",t._path),Jn("push",e,t._path,!0);const n=kC(t._repo),a=TM(n),s=wr(t,a),r=wr(t,a);let l;return e!=null?l=Fa(r,e).then(()=>r):l=Promise.resolve(r),s.then=l.then.bind(l),s.catch=l.then.bind(l,void 0),s}function sh(t){return Ln("remove",t._path),Fa(t,null)}function Fa(t,e){t=G(t),Ln("set",t._path),Jn("set",e,t._path,!1);const n=new Jt;return u0(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function RM(t,e){t=G(t),Ln("setPriority",t._path),o0("setPriority",e);const n=new Jt;return u0(t._repo,ze(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function MM(t,e,n){if(Ln("setWithPriority",t._path),Jn("setWithPriority",e,t._path,!1),o0("setWithPriority",n),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const a=new Jt;return u0(t._repo,t._path,e,n,a.wrapCallback(()=>{})),a.promise}function Ye(t,e){xC("update",e,t._path);const n=new Jt;return pM(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function ht(t){t=G(t);const e=new f0(()=>{}),n=new ac(e);return gM(t._repo,t,n).then(a=>new Rs(a,new jn(t._repo,t._path),t._queryParams.getIndex()))}class ac{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const a=n._queryParams.getIndex();return new jC("value",this,new Rs(e.snapshotNode,new jn(n._repo,n._path),a))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new TC(this,e,n):null}matches(e){return e instanceof ac?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class rh{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new TC(this,e,n):null}createEvent(e,n){M(e.childName!=null,"Child events should have a childName.");const a=wr(new jn(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new jC(e.type,this,new Rs(e.snapshotNode,a,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rh?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function sc(t,e,n,a,s){let r;if(typeof a=="object"&&(r=void 0,s=a),typeof a=="function"&&(r=a),s&&s.onlyOnce){const c=n,u=(f,d)=>{Vm(t._repo,t,o),c(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const l=new f0(n,r||void 0),o=e==="value"?new ac(l):new rh(e,l);return _M(t._repo,t,o),()=>Vm(t._repo,t,o)}function el(t,e,n,a){return sc(t,"value",e,n,a)}function OM(t,e,n,a){return sc(t,"child_added",e,n,a)}function DM(t,e,n,a){return sc(t,"child_changed",e,n,a)}function LM(t,e,n,a){return sc(t,"child_moved",e,n,a)}function PM(t,e,n,a){return sc(t,"child_removed",e,n,a)}function UM(t,e,n){let a=null;const s=n?new f0(n):null;e==="value"?a=new ac(s):e&&(a=new rh(e,s)),Vm(t._repo,t,a)}class Tn{}class IC extends Tn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Jn("endAt",this._value,e._path,!0);const n=Mm(e._queryParams,this._value,this._key);if(ah(n),Hs(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Kt(e._repo,e._path,n,e._orderByCalled)}}function RC(t,e){return ec("endAt","key",e),new IC(t,e)}class BM extends Tn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Jn("endBefore",this._value,e._path,!1);const n=$R(e._queryParams,this._value,this._key);if(ah(n),Hs(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Kt(e._repo,e._path,n,e._orderByCalled)}}function zM(t,e){return ec("endBefore","key",e),new BM(t,e)}class MC extends Tn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Jn("startAt",this._value,e._path,!0);const n=Rm(e._queryParams,this._value,this._key);if(ah(n),Hs(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Kt(e._repo,e._path,n,e._orderByCalled)}}function OC(t=null,e){return ec("startAt","key",e),new MC(t,e)}class HM extends Tn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Jn("startAfter",this._value,e._path,!1);const n=GR(e._queryParams,this._value,this._key);if(ah(n),Hs(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Kt(e._repo,e._path,n,e._orderByCalled)}}function FM(t,e){return ec("startAfter","key",e),new HM(t,e)}class VM extends Tn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Kt(e._repo,e._path,VR(e._queryParams,this._limit),e._orderByCalled)}}function Gm(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new VM(t)}class QM extends Tn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Kt(e._repo,e._path,QR(e._queryParams,this._limit),e._orderByCalled)}}function $m(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QM(t)}class GM extends Tn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){nh(e,"orderByChild");const n=new ye(this._path);if(ie(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const a=new Fp(n),s=Fd(e._queryParams,a);return Hs(s),new Kt(e._repo,e._path,s,!0)}}function kr(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qd("orderByChild","path",t,!1),new GM(t)}class $M extends Tn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){nh(e,"orderByKey");const n=Fd(e._queryParams,Xn);return Hs(n),new Kt(e._repo,e._path,n,!0)}}function WM(){return new $M}class YM extends Tn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){nh(e,"orderByPriority");const n=Fd(e._queryParams,Re);return Hs(n),new Kt(e._repo,e._path,n,!0)}}function KM(){return new YM}class XM extends Tn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){nh(e,"orderByValue");const n=Fd(e._queryParams,Vp);return Hs(n),new Kt(e._repo,e._path,n,!0)}}function DC(){return new XM}class qM extends Tn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Jn("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IC(this._value,this._key)._apply(new MC(this._value,this._key)._apply(e))}}function ih(t,e){return ec("equalTo","key",e),new qM(t,e)}function Ms(t,...e){let n=G(t);for(const a of e)n=a._apply(n);return n}O6(jn);B6(jn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="FIREBASE_DATABASE_EMULATOR_HOST",Wm={};let LC=!1;function JM(t,e,n,a){const s=e.lastIndexOf(":"),r=e.substring(0,s),l=Qi(r);t.repoInfo_=new M2(e,l,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),a&&(t.authTokenProvider_=a)}function m0(t,e,n,a,s){let r=a||t.options.databaseURL;r===void 0&&(t.options.projectId||Zn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bt("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Qm(r,s),o=l.repoInfo,c,u;typeof process<"u"&&Bx&&(u=Bx[ZM]),u?(c=!0,r=`http://${u}?ns=${o.namespace}`,l=Qm(r,s),o=l.repoInfo):c=!l.repoInfo.secure;const f=s&&c?new fi(fi.OWNER):new Y3(t.name,t.options,e);bC("Invalid Firebase Database URL",l),ie(l.path)||Zn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=tO(o,t,f,new W3(t,n));return new PC(d,t)}function eO(t,e){const n=Wm[e];(!n||n[t.key]!==t)&&Zn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),CC(t),delete n[t.key]}function tO(t,e,n,a){let s=Wm[e.name];s||(s={},Wm[e.name]=s);let r=s[t.toURLString()];return r&&Zn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new hM(t,LC,n,a),s[t.toURLString()]=r,r}function nO(t){LC=t}class PC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jn(this._repo,fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Zn("Cannot call "+e+" on a deleted database.")}}function UC(){ji.IS_TRANSPORT_INITIALIZED&&It("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function aO(){UC(),ss.forceDisallow()}function sO(){UC(),bn.forceDisallow(),ss.forceAllow()}function rO(t=rk(),e){const n=jd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const a=M5("database");a&&BC(n,...a)}return n}function BC(t,e,n,a={}){t=G(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,r=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&yr(a,r.repoInfo_.emulatorOptions))return;Zn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(r.repoInfo_.nodeAdmin)a.mockUserToken&&Zn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new fi(fi.OWNER);else if(a.mockUserToken){const o=typeof a.mockUserToken=="string"?a.mockUserToken:O5(a.mockUserToken,t.app.options.projectId);l=new fi(o)}Qi(e)&&(Kw(e),Xw("Database",!0)),JM(r,s,a,l)}function iO(t){t=G(t),t._checkNotDeleted("goOffline"),CC(t._repo)}function lO(t){t=G(t),t._checkNotDeleted("goOnline"),wM(t._repo)}function oO(t,e){_2(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){Mp(Gi),Si(new Ra("database",(e,{instanceIdentifier:n})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return m0(a,s,r,n)},"PUBLIC").setMultipleInstances(!0)),xs(zx,Hx,t),xs(zx,Hx,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={".sv":"timestamp"};function dO(){return uO}function hO(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function HC(t,e,n){if(t=G(t),Ln("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const a=(n==null?void 0:n.applyLocally)??!0,s=new Jt,r=(o,c,u)=>{let f=null;o?s.reject(o):(f=new Rs(u,new jn(t._repo,t._path),Re),s.resolve(new zC(c,f)))},l=el(t,()=>{});return kM(t._repo,t._path,e,r,l,a),s.promise}Cn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Cn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};const fO=function(t){const e=Cn.prototype.put;return Cn.prototype.put=function(n,a,s,r){r!==void 0&&(r=t()),e.call(this,n,a,s,r)},function(){Cn.prototype.put=e}},mO=function(t){nO(t)};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO({app:t,url:e,version:n,customAuthImpl:a,customAppCheckImpl:s,nodeAdmin:r=!1}){Mp(n);const l=new up("database-standalone"),o=new _m("auth-internal",l);let c;return s&&(c=new _m("app-check-internal",l),c.setComponent(new Ra("app-check-internal",()=>s,"PRIVATE"))),o.setComponent(new Ra("auth-internal",()=>a,"PRIVATE")),m0(t,o,c,e,r)}cO();const pO=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:Rs,Database:PC,OnDisconnect:AC,QueryConstraint:Tn,TransactionResult:zC,_QueryImpl:Kt,_QueryParams:Hd,_ReferenceImpl:jn,_TEST_ACCESS_forceRestClient:mO,_TEST_ACCESS_hijackHash:fO,_initStandalone:gO,_repoManagerDatabaseFromApp:m0,_setSDKVersion:Mp,_validatePathString:qd,_validateWritablePath:Ln,child:wr,connectDatabaseEmulator:BC,enableLogging:oO,endAt:RC,endBefore:zM,equalTo:ih,forceLongPolling:sO,forceWebSockets:aO,get:ht,getDatabase:rO,goOffline:iO,goOnline:lO,increment:hO,limitToFirst:Gm,limitToLast:$m,off:UM,onChildAdded:OM,onChildChanged:DM,onChildMoved:LM,onChildRemoved:PM,onDisconnect:IM,onValue:el,orderByChild:kr,orderByKey:WM,orderByPriority:KM,orderByValue:DC,push:nc,query:Ms,ref:Q,refFromURL:AM,remove:sh,runTransaction:HC,serverTimestamp:dO,set:Fa,setPriority:RM,setWithPriority:MM,startAfter:FM,startAt:OC,update:Ye},Symbol.toStringTag,{value:"Module"})),yO=(t,e)=>{let n=()=>{};const a=ae().then(({auth:s,database:r})=>qk(s,l=>{if(n(),l){const o=Q(r,`users/${l.uid}`);n=el(o,c=>{const u=c.val();if(u){if(u.disabled){Pu(s),e();return}t({id:l.uid,...u})}else Pu(s),t(null)})}else t(null)}));return()=>{a.then(s=>s()),n()}},xO=async()=>{const{auth:t}=await ae();return Pu(t)},bO=async(t,e)=>{const{auth:n,database:a}=await ae();let s=t;if(!t.includes("@")){const r=Q(a,"users"),l=Ms(r,kr("username"),ih(t)),o=await ht(l);if(o.exists()){const c=o.val(),u=Object.keys(c)[0];if(s=c[u].email,!s)throw new Error("auth/user-not-found")}else throw new Error("auth/invalid-credential")}await $k(n,s,e)},vO=async t=>{const{auth:e,database:n}=await ae(),s=(await Gk(e,t.email,t.password)).user.uid,r={name:t.name,email:t.email,username:t.username,avatarId:t.avatarId,gender:t.gender,role:We.MASTER,xp:1e3,completedQuests:{},questAttempts:{},rank:"Master Sage"},l={};l[`/users/${s}`]=r,l[`/userRoles/${s}`]=We.MASTER,l[`/usernames/${r.username}`]=r.email,await Ye(Q(n),l)},_O=async t=>{const{database:e}=await ae(),n=Ms(Q(e,"userRoles"),DC(),ih(We.MASTER)),a=await ht(n);t(a.exists())},wO=async t=>{const{database:e}=await ae(),n=Q(e,t),s=(await ht(n)).val();if(!s)return[];const l=!Array.isArray(s)?Object.entries(s).map(([o,c])=>({...c,id:o})):s;return Array.isArray(l)?l:[]},jc=(t,e)=>{const n=ae().then(({database:a})=>{const s=Q(a,t);return el(s,r=>{const l=r.val();if(!l){e([]);return}const c=!Array.isArray(l)?Object.entries(l).map(([u,f])=>({...f,id:u})):l;e(Array.isArray(c)?c:[])})});return()=>{n.then(a=>a())}},bb=async()=>{const{database:t}=await ae(),e=Q(t,"users"),a=(await ht(e)).val();return a?Object.entries(a).map(([s,r])=>({...r,id:s})):[]},vb=async(t,e)=>{const{database:n}=await ae(),a=Q(n,"users");let s;const r=!!e,l=r?t+2:t+1;r?s=Ms(a,kr("name"),OC(e.name,e.id),Gm(l)):s=Ms(a,kr("name"),Gm(l));const o=await ht(s);if(!o.exists())return{players:[],hasNextPage:!1};let c=[];o.forEach(f=>{c.push({id:f.key,...f.val()})}),r&&c.shift();const u=c.length>t;return u&&c.pop(),{players:c,hasNextPage:u}},_b=async(t,e)=>{const{database:n}=await ae(),a=Q(n,"leaderboard");let s;const r=!!e,l=r?t+2:t+1;r?s=Ms(a,kr("xp"),RC(e.xp,e.id),$m(l)):s=Ms(a,kr("xp"),$m(l));const o=await ht(s);if(!o.exists())return{entries:[],hasNextPage:!1};let c=[];o.forEach(f=>{c.push(f.val())}),c.reverse(),r&&c.shift();const u=c.length>t;return u&&c.pop(),{entries:c,hasNextPage:u}},kO=async(t,e,n)=>{const{database:a,initializeApp:s,modularDeleteApp:r}=await ae(),{firebaseConfig:l}=await kn(async()=>{const{firebaseConfig:o}=await Promise.resolve().then(()=>rp);return{firebaseConfig:o}},void 0);if(t.id){const{id:o,...c}=t,u=await ht(Q(a,`users/${o}`));if(u.exists()){const f=u.val(),d="username"in c&&f.username!==c.username,h="email"in c&&f.email!==c.email;if(d||h){const m={};d&&(m[`/usernames/${f.username}`]=null);const b=c.username||f.username,_=c.email||f.email;m[`/usernames/${b}`]=_,await Ye(Q(a),m)}}return await Ye(Q(a,`users/${o}`),c),await Ye(Q(a,`leaderboard/${o}`),{name:c.name,avatarId:c.avatarId}),{message:`Data pemain "${c.name}" telah diperbarui.`}}else{const o=`player-creation-${Date.now()}`,c=s(l,o),u=await kn(()=>Promise.resolve().then(()=>Rp),void 0),f=u.getAuth,d=f(c);try{const m=(await u.createUserWithEmailAndPassword(d,t.email,n)).user.uid,{id:b,..._}=t,w={..._,role:We.PLAYER,xp:0,completedQuests:{},questAttempts:{},rank:na(0,e).name},y={userId:m,name:w.name,xp:0,rank:w.rank,avatarId:w.avatarId},g={};return g[`/users/${m}`]=w,g[`/userRoles/${m}`]=We.PLAYER,g[`/leaderboard/${m}`]=y,g[`/usernames/${w.username}`]=w.email,await Ye(Q(a),g),{message:`Pemain "${w.name}" berhasil dibuat.`}}finally{await r(c)}}},CO=async(t,e)=>{const{database:n,initializeApp:a,modularDeleteApp:s}=await ae(),{firebaseConfig:r}=await kn(async()=>{const{firebaseConfig:_}=await Promise.resolve().then(()=>rp);return{firebaseConfig:_}},void 0),l=`player-batch-creation-${Date.now()}`,o=a(r,l),c=await kn(()=>Promise.resolve().then(()=>Rp),void 0),u=c.getAuth,f=u(o);let d=0;const h=[],m={};try{for(const _ of t)try{const y=(await c.createUserWithEmailAndPassword(f,_.email,_.password)).user.uid,g={name:_.name,nisn:String(_.nisn),email:_.email,username:_.username,gender:_.gender||Fn.MALE,avatarId:"knight",role:We.PLAYER,xp:0,completedQuests:{},questAttempts:{},rank:na(0,e).name},x={userId:y,name:g.name,xp:0,rank:g.rank,avatarId:g.avatarId};m[`/users/${y}`]=g,m[`/userRoles/${y}`]=We.PLAYER,m[`/leaderboard/${y}`]=x,m[`/usernames/${g.username}`]=g.email,d++}catch(w){h.push(`Gagal membuat ${_.name} (${_.email}): ${w.message}`)}Object.keys(m).length>0&&await Ye(Q(n),m)}catch(_){h.push(`Gagal menyimpan data ke database: ${_.message}`)}finally{await s(o)}let b=`${d} dari ${t.length} pemain berhasil diimpor.`;return h.length>0&&(b+=`

Error:
- ${h.join(`
- `)}`),b},NO=async t=>{const{database:e}=await ae(),{id:n,...a}=t;await Fa(Q(e,`users/${n}`),a),a.role===We.PLAYER&&await Ye(Q(e,`leaderboard/${n}`),{name:a.name,rank:a.rank,xp:a.xp,avatarId:a.avatarId})},SO=async(t,e)=>{const{database:n}=await ae(),a={};a[`/users/${t.id}/disabled`]=e,e?a[`/leaderboard/${t.id}`]=null:a[`/leaderboard/${t.id}`]={userId:t.id,name:t.name,xp:t.xp,rank:t.rank,avatarId:t.avatarId},Ye(Q(n),a)},wb=async(t,e)=>{const{database:n}=await ae();Ye(Q(n,`users/${t}`),{activeQuestId:e})},EO=async t=>{const{database:e}=await ae(),n=Q(e,"users"),a=Ms(n,kr("roomId"),ih(t||null)),s=await ht(a);if(!s.exists())return[];const r=s.val();return Object.entries(r).map(([l,o])=>({...o,id:l}))},jO=async(t,e,n,a,s)=>{const{database:r}=await ae(),l=t.xp+n,o=na(l,a),c=t.rank,u=t.id,f={score:n,completedAt:Date.now()},d={};return d[`/users/${u}/xp`]=l,d[`/users/${u}/rank`]=o.name,d[`/users/${u}/completedQuests/${e.id}`]=f,d[`/leaderboard/${u}/xp`]=l,d[`/leaderboard/${u}/rank`]=o.name,e.type===Ae.CODE&&s&&(d[`/playerSolutions/${u}/${e.id}`]={solution:s}),e.category===he.MAIN&&(d[`/users/${u}/activeQuestId`]=null),await Ye(Q(r),d),o.name!==c?o:null},TO=async(t,e)=>{const{database:n}=await ae(),a=Q(n,`playerSolutions/${t}/${e}/solution`),s=await ht(a);return s.exists()?s.val():null},AO=async(t,e)=>{const{database:n}=await ae(),a=Q(n,`users/${t}/questAttempts/${e}`);HC(a,s=>(s||0)+1)},IO=async(t,e,n)=>{var h;const{database:a}=await ae(),r={...(await ht(Q(a,`users/${t}`))).val()},l=(h=r.completedQuests)==null?void 0:h[e];if(!r||!l)throw new Error("Pemain tidak ditemukan, atau pemain belum menyelesaikan misi ini.");let o;if(typeof l.score=="number")o=l.score;else{const b=(await ht(Q(a,`quests/${e}`))).val();if(!b)throw new Error(`Data misi (ID: ${e}) tidak ditemukan untuk reset. Progres tidak dapat direset.`);o=b.xp}const c=r.xp||0,u=Math.max(0,c-o);if(isNaN(u))throw new Error("Terjadi kesalahan perhitungan XP (hasil: NaN). Reset dibatalkan.");const f=na(u,n),d={};d[`/users/${t}/xp`]=u,d[`/users/${t}/rank`]=f.name,d[`/users/${t}/completedQuests/${e}`]=null,d[`/users/${t}/questAttempts/${e}`]=null,d[`/leaderboard/${t}/xp`]=u,d[`/leaderboard/${t}/rank`]=f.name,d[`/playerSolutions/${t}/${e}`]=null,await Ye(Q(a),d)},RO=async t=>{const{database:e}=await ae(),n=t.id.startsWith("new_")?nc(Q(e,"quests")).key:t.id,{id:a,content:s,material:r,...l}=t,o={};o[`/quests/${n}`]={...t,id:n},o[`/quests_metadata/${n}`]={...l,id:n},await Ye(Q(e),o)},MO=async t=>{const{database:e}=await ae(),n={};n[`/quests/${t}`]=null,n[`/quests_metadata/${t}`]=null,await Ye(Q(e),n)},FC=async t=>{const{database:e}=await ae(),n=Q(e,`quests/${t}`),a=await ht(n);return a.exists()?a.val():null},OO=async t=>{const{database:e}=await ae(),n={};for(const a of t){const{id:s,content:r,material:l,...o}=a;n[`/quests_metadata/${s}`]={...o,id:s}}Object.keys(n).length>0&&await Ye(Q(e),n)},DO=async t=>{const{database:e}=await ae(),n=t.id.startsWith("new_")?nc(Q(e,"questChapters")).key:t.id,{id:a,...s}=t;Fa(Q(e,`questChapters/${n}`),{...s,id:n})},LO=async t=>{const{database:e}=await ae();sh(Q(e,`questChapters/${t}`))},PO=async(t,e)=>{const{database:n}=await ae();await Fa(Q(n,"ranks"),t);const a={};e.forEach(s=>{if(s.role===We.PLAYER){const r=na(s.xp,t).name;s.rank!==r&&(a[`/users/${s.id}/rank`]=r,a[`/leaderboard/${s.id}/rank`]=r)}}),Object.keys(a).length>0&&await Ye(Q(n),a)},UO=async(t,e,n)=>{const{database:a}=await ae(),s=t.id||nc(Q(a,"rooms")).key;await Fa(Q(a,`rooms/${s}`),{id:s,name:t.name});const r={},l=n.filter(o=>o.roomId===s).map(o=>o.id);e.forEach(o=>{r[`/users/${o}/roomId`]=s}),l.forEach(o=>{e.includes(o)||(r[`/users/${o}/roomId`]=null)}),Object.keys(r).length>0&&await Ye(Q(a),r)},BO=async t=>{const{database:e}=await ae();sh(Q(e,`rooms/${t}`))},zO=async()=>{const{auth:t}=await ae(),{firebaseConfig:e}=await kn(async()=>{const{firebaseConfig:s}=await Promise.resolve().then(()=>rp);return{firebaseConfig:s}},void 0),n=e.databaseURL,a=t.currentUser;if(!a)return console.warn("fetchPlayerIdsWithFiles called without an authenticated user."),[];try{const s=await pk(a),r=`${n}/playerCodeFiles.json?shallow=true&auth=${s}`,l=await fetch(r);if(!l.ok){const c=await l.json();throw new Error(`Failed to fetch player IDs: ${c.error||l.statusText}`)}const o=await l.json();return o?Object.keys(o):[]}catch(s){console.error("Error fetching player IDs with files via REST, falling back to SDK:",s);const{database:r}=await ae(),l=Q(r,"playerCodeFiles"),o=await ht(l);return o.exists()?Object.keys(o.val()):[]}},VC=(t,e)=>{const n=ae().then(({database:a})=>{const s=Q(a,`playerCodeFiles/${t}`);return el(s,r=>{const l=r.val();if(!l){e([]);return}const o=Object.entries(l).map(([c,u])=>({...u,id:c}));e(Array.isArray(o)?o:[])})});return()=>{n.then(a=>a())}},HO=async(t,e)=>{const{database:n}=await ae(),a=!e.id,s=e.id||nc(Q(n,`playerCodeFiles/${t}`)).key,r={id:s,name:e.name,code:e.code,reviewStatus:a?"none":e.reviewStatus||"none"};return e.masterComment!==void 0&&(r.masterComment=e.masterComment),await Fa(Q(n,`playerCodeFiles/${t}/${s}`),r),r},FO=async(t,e)=>{const{database:n}=await ae();sh(Q(n,`playerCodeFiles/${t}/${e}`))},VO=async(t,e,n)=>{const{database:a}=await ae(),s=Q(a,`playerCodeFiles/${t}/${e}`);await Ye(s,n)},QO=async(t,e,n,a,s)=>{const{database:r}=await ae(),l=Q(r,`users/${t}`),o=await ht(l);if(!o.exists())throw new Error("Pemain tidak ditemukan.");const c={...o.val()},u=c.xp+a,f=na(u,s),d=f.name!==c.rank,h={},m=(await ht(Q(r,`playerCodeFiles/${t}/${e}`))).val();return h[`/playerCodeFiles/${t}/${e}`]={...m,...n,bonusXp:a},h[`/users/${t}/xp`]=u,h[`/users/${t}/rank`]=f.name,h[`/leaderboard/${t}/xp`]=u,h[`/leaderboard/${t}/rank`]=f.name,await Ye(Q(r),h),d?f:null},GO=async(t,e,n)=>{const{database:a}=await ae(),s=Q(a,`users/${t}`),r=Q(a,`playerCodeFiles/${t}/${e}`),[l,o]=await Promise.all([ht(s),ht(r)]);if(!l.exists()||!o.exists())throw new Error("Pemain atau file tidak ditemukan.");const c={...l.val()},f={...o.val()}.bonusXp||0;if(f<=0){await Ye(r,{reviewStatus:"submitted",masterComment:null,bonusXp:null});return}const d=c.xp||0,h=Math.max(0,d-f),m=na(h,n),b={};b[`/playerCodeFiles/${t}/${e}/reviewStatus`]="submitted",b[`/playerCodeFiles/${t}/${e}/masterComment`]=null,b[`/playerCodeFiles/${t}/${e}/bonusXp`]=null,b[`/users/${t}/xp`]=h,b[`/users/${t}/rank`]=m.name,b[`/leaderboard/${t}/xp`]=h,b[`/leaderboard/${t}/rank`]=m.name,await Ye(Q(a),b)},$O=async()=>{const{database:t}=await ae(),e=Q(t,"users"),n=await ht(e);if(!n.exists()){console.log("No users found to migrate.");return}const a=n.val(),s={};for(const r in a){const l={...a[r]};if(l.completedQuests)for(const o in l.completedQuests){const c=l.completedQuests[o];c&&typeof c.solution=="string"&&c.solution.length>0&&(s[`/playerSolutions/${r}/${o}/solution`]=c.solution,s[`/users/${r}/completedQuests/${o}/solution`]=null)}}s["/migration/solutionsMigrated"]=!0,Object.keys(s).length>1?await Ye(Q(t),s):await Fa(Q(t,"/migration/solutionsMigrated"),!0)},WO=t=>{const e=ae().then(({database:n})=>{const a=Q(n,"migration/solutionsMigrated");return el(a,s=>{t(s.val()===!0)})});return()=>{e.then(n=>n())}},YO=({quest:t,attemptsMade:e})=>i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-indigo-400",children:t.title}),t.category===he.MAIN&&t.type==="code"?i.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-1.5 font-semibold bg-accent/10 text-accent dark:text-amber-400 dark:bg-amber-900/50 px-3 py-1 rounded-full",children:[i.jsx(Mt,{className:"w-4 h-4"}),i.jsxs("span",{children:[t.xp," XP"]})]}),t.maxAttempts&&i.jsxs("div",{className:"flex items-center gap-1.5 font-semibold bg-blue-100 text-blue-600 dark:text-blue-400 dark:bg-blue-900/50 px-3 py-1 rounded-full",children:[i.jsx(mr,{className:"w-4 h-4"}),i.jsxs("span",{children:["Percobaan: ",e," / ",t.maxAttempts]})]}),t.xpPenaltyPerAttempt>0&&i.jsxs("div",{className:"flex items-center gap-1.5 font-semibold bg-red-100 text-red-600 dark:text-red-400 dark:bg-red-900/50 px-3 py-1 rounded-full",children:[i.jsx(lt,{className:"w-4 h-4"}),i.jsxs("span",{children:["Penalti: -",t.xpPenaltyPerAttempt," XP"]})]})]}):i.jsxs("span",{className:"mt-2 inline-block bg-accent/20 text-accent font-bold text-sm px-3 py-1 rounded-full",children:[t.xp," XP"]})]}),KO=({quiz:t})=>i.jsx("div",{className:"space-y-6",children:t.map((e,n)=>i.jsxs("div",{className:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600/50",children:[i.jsx("div",{className:"font-semibold select-none mb-4",children:i.jsx(Na,{content:`**Pertanyaan ${n+1}:** ${e.question}`})}),i.jsx("div",{className:"space-y-2",children:e.options.map((a,s)=>{const r=s===e.answerIndex;return i.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-md text-left ${r?"bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700/50":"bg-gray-50 dark:bg-gray-800"}`,children:[r&&i.jsx(_e,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),i.jsx("div",{className:`prose prose-sm max-w-none ${r?"font-semibold text-green-900 dark:text-green-200":"text-gray-700 dark:text-gray-300"}`,dangerouslySetInnerHTML:{__html:ho(a)}})]},s)})}),e.explanation&&i.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("h4",{className:"font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Pembahasan:"}),i.jsx(Na,{content:e.explanation})]})]},n))}),kb=({code:t})=>i.jsx("pre",{className:"bg-gray-900 text-white p-4 rounded-md overflow-x-auto font-mono text-sm my-4 not-prose",children:i.jsx("code",{dangerouslySetInnerHTML:{__html:Sd(t)}})}),XO=({quest:t,userSolution:e})=>{const[n,a]=p.useState(!1);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600/50",children:[i.jsx("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-2",children:"Kode Jawaban Anda:"}),e===null?i.jsx("p",{className:"italic text-gray-500",children:"Memuat solusi..."}):e?i.jsx(kb,{code:e}):i.jsx("p",{className:"italic text-gray-500",children:"Tidak ada data solusi yang tersimpan."})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600/50",children:[i.jsxs("button",{onClick:()=>a(!n),className:"w-full flex justify-between items-center font-bold text-lg text-gray-800 dark:text-gray-200",children:[i.jsx("span",{children:"Solusi Optimal"}),i.jsx(Nd,{className:`w-6 h-6 transition-transform ${n?"rotate-180":""}`})]}),n&&i.jsx("div",{className:"mt-4 animate-fade-in-down",children:i.jsx(kb,{code:t.content.solution})})]})]})},g0=({quest:t,onClose:e})=>{const{currentUser:n}=dn(),[a,s]=p.useState(null);p.useEffect(()=>{n&&t.type===Ae.CODE&&(s(null),TO(n.id,t.id).then(l=>{s(l||"")}))},[n,t.id,t.type]);const r=p.useMemo(()=>t.content,[t]);return i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-6 rounded-lg text-center",children:[i.jsx("h3",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:"Mode Ulasan"}),i.jsx("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:"Anda telah menyelesaikan misi ini. Berikut adalah materi dan ulasan dari pekerjaan Anda."})]}),t.material&&i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 sm:p-6 rounded-lg border dark:border-gray-700",children:[i.jsxs("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[i.jsx(uo,{className:"w-6 h-6"}),"Materi Pembelajaran"]}),i.jsx(Na,{content:t.material})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 sm:p-6 rounded-lg border dark:border-gray-700",children:[i.jsx("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-4",children:"Ulasan Latihan"}),t.type===Ae.QUIZ?i.jsx(KO,{quiz:r}):i.jsx(XO,{quest:t,userSolution:a})]}),i.jsx("button",{onClick:e,className:"mt-4 w-full bg-secondary text-white font-bold py-3 px-4 rounded-lg hover:bg-secondary/90 transition",children:"Kembali"})]})},qO=({totalQuestions:t,currentQuestionIndex:e,userAnswers:n,onJumpTo:a})=>i.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:Array.from({length:t}).map((s,r)=>{const l=n[r]!==void 0&&n[r]!==null,o=r===e;let c="w-10 h-10 flex items-center justify-center rounded-md font-bold border-2 transition-colors ";return o?c+="bg-primary text-white border-primary":l?c+="bg-green-100 text-green-800 border-green-300 dark:bg-green-900/50 dark:text-green-200 dark:border-green-700 hover:bg-green-200":c+="bg-gray-100 text-gray-700 border-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 hover:bg-gray-200",i.jsx("button",{onClick:()=>a(r),className:c,children:r+1},r)})}),p0=({quiz:t,onComplete:e,questCategory:n,isCbtMode:a=!1,onSubmitCbt:s,userId:r,questId:l})=>{const[o,c]=p.useState({}),[u,f]=p.useState(!1),[d,h]=p.useState(0),[m,b]=p.useState(null),[_,w]=p.useState(!1),[y,g]=p.useState(!1),[x,v]=p.useState(0),[k,S]=p.useState(0),C=t[d];p.useEffect(()=>{if(a)try{const B=`python-quest-cbt-answers-${r}-${l}`,Y=localStorage.getItem(B);if(Y){const ee=JSON.parse(Y),P={};t.forEach((V,se)=>{const me=V.question,Xe=ee[me];if(Xe){const Tt=V.options.findIndex(At=>At===Xe);Tt!==-1&&(P[se]=Tt)}}),c(P)}}catch(B){console.error("Failed to load and restore quiz answers:",B)}},[a,r,l,t]),p.useEffect(()=>{h(0),b(null),w(!1),g(!1),v(0),S(0),a||c({}),f(!1)},[t]);const j=()=>{b(null),w(!1),g(!1)},T=()=>{d<t.length-1?(h(B=>B+1),j()):e({score:k,mistakes:x})},E=()=>{if(m===null)return;const B=m===C.answerIndex;w(!0),g(B),B?S(Y=>Y+(C.points||0)):v(Y=>Y+1)},N=B=>_?B===C.answerIndex?"bg-green-100 dark:bg-green-900/30 border-green-500 dark:border-green-600 text-green-800 dark:text-green-200":B===m&&!y?"bg-red-100 dark:bg-red-900/30 border-red-500 dark:border-red-600 text-red-800 dark:text-red-200":"bg-gray-100 dark:bg-gray-700 border-transparent":m===B?"bg-primary/20 dark:bg-indigo-500/20 border-primary dark:border-indigo-500":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border-transparent",D=(B,Y)=>{const ee={...o,[d]:B};if(c(ee),a)try{const P=`python-quest-cbt-answers-${r}-${l}`,V=JSON.parse(localStorage.getItem(P)||"{}"),se=C.question;V[se]=Y,localStorage.setItem(P,JSON.stringify(V))}catch(P){console.error("Failed to save quiz answers:",P)}},U=()=>{d<t.length-1&&h(B=>B+1)},$=()=>{d>0&&h(B=>B-1)},W=B=>{h(B),f(!1)},I=B=>o[d]===B?"bg-primary/20 dark:bg-indigo-500/20 border-primary dark:border-indigo-500":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border-transparent",H=()=>{s&&s(o)},O=B=>B.preventDefault();if(!C)return i.jsx("p",{children:"Kuis tidak valid atau kosong."});const z=d===t.length-1;if(a){const B="flex items-center justify-center gap-2 font-bold rounded-lg transition-colors disabled:opacity-50",Y=`${B} py-2 sm:px-4 px-3`,ee=`${B} py-2 sm:px-4 px-3 font-semibold`;return i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 mb-4",children:[i.jsx("div",{className:"text-lg font-semibold select-none flex-grow",onCopy:O,onPaste:O,children:i.jsx(Na,{content:`**Soal ${d+1}:** ${C.question}`})}),i.jsx("div",{className:"flex items-center gap-2 self-start sm:self-center flex-shrink-0",children:n!==he.TUTORIAL&&C.points>0&&i.jsxs("span",{className:"text-sm font-bold text-accent dark:text-amber-300 bg-accent/10 dark:bg-amber-900/50 px-3 py-1 rounded-full",children:[C.points," Poin"]})})]}),i.jsx("div",{children:i.jsx("div",{className:"space-y-3 mb-6",children:C.options.map((P,V)=>i.jsx("button",{type:"button",onClick:()=>D(V,P),className:`w-full text-left p-3 rounded-lg border-2 transition select-none ${I(V)}`,onCopy:O,onPaste:O,children:i.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:ho(P)}})},V))})}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center relative gap-2",children:[i.jsxs("button",{onClick:$,disabled:d===0,className:`${Y} bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200`,children:[i.jsx(r5,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>f(!u),className:`${ee} bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300`,children:[i.jsx(q1,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden md:inline",children:"Daftar Soal"}),i.jsxs("span",{children:["(",d+1,"/",t.length,")"]})]}),u&&i.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-white dark:bg-gray-800 shadow-lg rounded-lg border dark:border-gray-700 p-4 w-[90vw] max-w-sm sm:w-96 z-10",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Navigasi Soal"}),i.jsx("button",{onClick:()=>f(!1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:i.jsx(lt,{className:"w-5 h-5"})})]}),i.jsx(qO,{totalQuestions:t.length,currentQuestionIndex:d,userAnswers:o,onJumpTo:W})]})]}),z?i.jsxs("button",{onClick:H,className:`${Y} bg-green-600 hover:bg-green-700 text-white`,children:[i.jsx(np,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden sm:inline",children:"Selesai"})]}):i.jsxs("button",{onClick:U,className:`${Y} bg-primary hover:bg-primary/90 text-white`,children:[i.jsx("span",{className:"hidden sm:inline",children:"Berikutnya"}),i.jsx(tp,{className:"w-5 h-5"})]})]})]})}return i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 mb-4",children:[i.jsx("div",{className:"text-lg font-semibold select-none flex-grow",onCopy:O,onPaste:O,children:i.jsx(Na,{content:C.question})}),t.length>1&&i.jsxs("span",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full flex-shrink-0",children:[d+1," / ",t.length]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"space-y-3 mb-4",children:C.options.map((B,Y)=>i.jsx("button",{type:"button",disabled:_,onClick:()=>b(Y),className:`w-full text-left p-3 rounded-lg border-2 transition select-none ${N(Y)}`,onCopy:O,onPaste:O,children:i.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:ho(B)}})},Y))}),!_&&i.jsx("button",{type:"button",onClick:E,disabled:m===null,className:"w-full bg-primary text-white font-bold py-2 px-4 rounded-lg hover:bg-primary/90 disabled:bg-gray-300 dark:disabled:bg-gray-600 transition",children:"Cek Jawaban"})]}),_&&i.jsxs("div",{className:`mt-4 p-4 rounded-lg ${y?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:[i.jsx("p",{className:"font-bold text-center",children:y?"Jawaban Benar!":"Jawaban Kurang Tepat."}),y&&C.explanation&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-green-300 dark:border-green-700/50 text-left select-none",onCopy:O,onPaste:O,children:[i.jsx("h4",{className:"font-bold text-green-900 dark:text-green-100 mb-1",children:"Pembahasan:"}),i.jsx(Na,{content:C.explanation})]}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:T,className:"mt-4 bg-secondary text-white font-bold py-2 px-6 rounded-lg hover:bg-secondary/90 transition",children:z?"Selesaikan Kuis":"Lanjut"})})]})]})},Rt=({isOpen:t,onClose:e,onConfirm:n,title:a,message:s,confirmText:r="Ya, Hapus",confirmIcon:l=i.jsx(Sn,{className:"w-5 h-5"}),confirmButtonClass:o="bg-red-600 hover:bg-red-700"})=>t?i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all p-6",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a}),i.jsx("button",{onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:i.jsx(lt,{className:"w-6 h-6"})})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:s}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:e,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Batal"}),i.jsxs("button",{onClick:n,className:`flex items-center gap-2 font-bold py-2 px-4 rounded-lg text-white transition-colors ${o}`,children:[l,r]})]})]})}):null,lh=({challenge:t,onCheckComplete:e,onSuccessSubmit:n,isPreviewMode:a=!1,showToast:s,category:r})=>{const[l,o]=p.useState(t.starterCode),[c,u]=p.useState(""),[f,d]=p.useState(!1),[h,m]=p.useState(!1),b=p.useRef(null),[_,w]=p.useState(!1),[y,g]=p.useState([]),[x,v]=p.useState(!1),k=p.useRef(null),S=p.useRef(null),C=p.useRef(null);p.useEffect(()=>{o(t.starterCode)},[t.starterCode]),p.useEffect(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=`${k.current.scrollHeight}px`)},[l]);const j=O=>{const z=O.currentTarget;if(O.key==="Enter"){O.preventDefault();const{value:Y,selectionStart:ee,selectionEnd:P}=z,V=Y.lastIndexOf(`
`,ee-1)+1,se=Y.substring(V,ee),me=se.match(/^\s*/);let Tt=me?me[0]:"";se.trim().endsWith(":")&&(Tt+="  ");const At=`
`+Tt,qe=Y.substring(0,ee)+At+Y.substring(P);z.value=qe;const q=ee+At.length;z.selectionStart=z.selectionEnd=q,o(qe);return}if(O.key==="Tab"){O.preventDefault();const{value:Y,selectionStart:ee,selectionEnd:P}=z,V="  ",se=Y.substring(0,ee)+V+Y.substring(P);z.value=se,z.selectionStart=z.selectionEnd=ee+V.length,o(se);return}const B={"(":")","[":"]","{":"}",'"':'"',"'":"'"};if(B[O.key]&&z.selectionStart===z.selectionEnd){O.preventDefault();const{value:Y,selectionStart:ee}=z,P=O.key,V=B[P],se=Y.substring(0,ee)+P+V+Y.substring(ee);z.value=se,z.selectionStart=z.selectionEnd=ee+1,o(se);return}},T=p.useMemo(()=>Sd(l),[l]),E=p.useMemo(()=>Array.from({length:l.split(`
`).length},(O,z)=>z+1).join(`
`),[l]),N=async()=>{if(d(!0),u(""),g([]),m(!1),!b.current){w(!0),g(["Mempersiapkan lingkungan pengecekan..."]);try{const Y=await(window.loadPyodide?window.loadPyodide:(await kn(async()=>{const{loadPyodide:ee}=await import("./pyodide-BXTO6cIR.js");return{loadPyodide:ee}},[])).loadPyodide)({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.1/full/"});b.current=Y,g(ee=>[...ee,"Lingkungan siap. Memulai pengecekan..."])}catch(B){console.error("Gagal memuat Pyodide:",B),g([`Gagal memuat lingkungan pengecekan: ${B.message}`]),d(!1),w(!1);return}w(!1)}const O=[];let z=!0;for(const[B,Y]of t.testCases.entries()){const ee=[];try{b.current.setStdout({batched:Tt=>{ee.push(Tt)}});const V=(Tt=>`
_inputs = iter("${Tt.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}".split('\\n'))
def custom_input(prompt=""):
    try:
        return next(_inputs)
    except StopIteration:
        # Match browser input() behavior on EOF which is often an empty string or error.
        # Empty string is safer for scripts that might call input in a loop.
        return "" 

__builtins__.input = custom_input
`)(Y.input);await b.current.runPythonAsync(V),await b.current.runPythonAsync(l);const me=ee.join(`
`).replace(/\r\n/g,`
`),Xe=Y.expectedOutput.trim().replace(/\r\n/g,`
`);me===Xe?O.push(` Tes #${B+1} berhasil.`):(O.push(` Tes #${B+1} gagal. Harusnya: ${JSON.stringify(Xe)}, Hasil: ${JSON.stringify(me)}`),z=!1)}catch(P){const V=(P.message||"").split(`
`).pop()||"Unknown error";O.push(` Tes #${B+1} gagal dengan error: ${V}`),z=!1}finally{b.current.setStdout()}}g(O),z&&(u("Semua tes berhasil! Kode benar."),r===he.TUTORIAL&&m(!0)),d(!1),e(z,l)},D=()=>{a?N():v(!0)},U=()=>{N(),v(!1)},$=O=>{const z=O.target.value;if(a){o(z);return}if(z.length-l.length>1){s("Aksi Diblokir","Fitur tempel dinonaktifkan untuk mendorong latihan mandiri.",i.jsx(ps,{className:"w-5 h-5 text-yellow-500"}));return}o(z)},W=O=>{a||(O.preventDefault(),s("Aksi Diblokir","Fitur salin/tempel dinonaktifkan untuk mendorong latihan mandiri.",i.jsx(ps,{className:"w-5 h-5 text-yellow-500"})))},I=O=>{a||(O.preventDefault(),s("Aksi Diblokir","Fitur salin/tempel dinonaktifkan untuk mendorong latihan mandiri.",i.jsx(ps,{className:"w-5 h-5 text-yellow-500"})))},H={tabSize:4,MozTabSize:4,lineHeight:1.6};return i.jsxs("div",{children:[i.jsx("div",{className:"mb-4 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg prose dark:prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:ho(t.description)}}),i.jsxs("div",{className:"flex bg-gray-900 text-white rounded-lg font-mono text-sm border border-gray-700",children:[i.jsx("pre",{ref:C,"aria-hidden":"true",className:"p-4 text-right text-gray-500 select-none bg-gray-800/20",style:H,children:E}),i.jsxs("div",{className:"relative flex-grow grid",children:[i.jsx("pre",{ref:S,"aria-hidden":"true",className:"col-start-1 row-start-1 p-4 pointer-events-none whitespace-pre-wrap break-words",style:H,children:i.jsx("code",{dangerouslySetInnerHTML:{__html:T+`
`}})}),i.jsx("textarea",{ref:k,value:l,onChange:$,onKeyDown:j,onCopy:W,onPaste:W,onContextMenu:I,className:"col-start-1 row-start-1 p-4 bg-transparent text-transparent caret-white outline-none resize-none font-mono text-sm whitespace-pre-wrap break-words select-none overflow-hidden",spellCheck:"false","aria-label":"Python code editor",style:H})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:D,disabled:f||h&&!a||_,className:"w-full bg-primary text-white font-bold py-2 px-4 rounded-lg hover:bg-primary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:_?"Memuat Lingkungan...":f?"Memeriksa...":"Jalankan & Cek Jawaban"})}),y.length>0&&i.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-100 dark:bg-gray-800/50",children:[i.jsx("p",{className:"font-bold mb-2 text-gray-800 dark:text-gray-200",children:"Hasil Pengecekan:"}),i.jsx("div",{className:"space-y-1 text-sm font-mono bg-gray-800 text-white p-3 rounded-md overflow-x-auto",children:y.map((O,z)=>i.jsx("p",{className:O.startsWith("")?"text-green-400":O.startsWith("")?"text-red-400":"text-yellow-400",children:O},z))})]}),h&&i.jsxs("div",{className:"mt-4 text-center",children:[i.jsx("div",{className:"p-4 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",children:i.jsx("p",{className:"font-bold",children:c})}),!a&&i.jsx("button",{type:"button",onClick:()=>n(l),className:"mt-4 bg-secondary text-white font-bold py-2 px-6 rounded-lg hover:bg-secondary/90 transition",children:"Lanjutkan"})]}),!a&&i.jsx(Rt,{isOpen:x,onClose:()=>v(!1),onConfirm:U,title:"Konfirmasi Jalankan Kode",message:"Anda yakin ingin menjalankan dan memeriksa kode ini? Jika ini adalah misi utama, tindakan ini akan dihitung sebagai satu percobaan.",confirmText:"Ya, Jalankan",confirmIcon:i.jsx(np,{className:"w-5 h-5"}),confirmButtonClass:"bg-primary hover:bg-primary/90"})]})},y0=({quest:t,score:e,onClose:n,nextQuest:a,onStartNextQuest:s,isReviewable:r,onShowReview:l})=>{const o=()=>{a&&s(a)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4","aria-modal":"true",role:"dialog",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 text-center max-w-md w-full transform transition-all animate-fade-in",children:[i.jsx(Mt,{className:"w-16 h-16 text-accent dark:text-amber-400 mx-auto animate-bounce"}),i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold font-display text-primary dark:text-indigo-400 mt-4",children:"Misi Selesai!"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:"Kerja bagus! Kamu telah menyelesaikan misi:"}),i.jsx("p",{className:"font-semibold text-lg mt-1",children:t.title}),i.jsxs("div",{className:"mt-6 bg-accent/10 text-accent dark:text-amber-400 font-bold text-xl py-3 px-6 rounded-lg inline-block",children:["+",e," XP"]}),i.jsx("div",{className:"mt-8 space-y-3",children:r?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105",children:[i.jsx(uo,{className:"w-5 h-5"}),i.jsx("span",{children:"Ulasan Latihan"})]}),i.jsx("button",{onClick:n,className:"w-full font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 bg-transparent text-primary dark:text-indigo-400 hover:bg-primary/10 dark:hover:bg-indigo-500/10",children:"Kembali ke Daftar Misi"})]}):i.jsxs(i.Fragment,{children:[a&&i.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105",children:[i.jsx(Fo,{className:"w-5 h-5"}),i.jsx("span",{children:"Mulai Misi Berikutnya"})]}),i.jsx("button",{onClick:n,className:`w-full font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 ${a?"bg-transparent text-primary dark:text-indigo-400 hover:bg-primary/10 dark:hover:bg-indigo-500/10":"bg-secondary hover:bg-secondary/90 text-white"}`,children:a?"Kembali ke Daftar Misi":"Lanjutkan Petualangan"})]})})]})})},Ju=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e},ZO=({quest:t,onClose:e,onComplete:n,nextQuest:a,onStartNextQuest:s})=>{const{currentUser:r}=dn(),{showToast:l}=un(),[o,c]=p.useState(t.material?"material":"challenge"),[u,f]=p.useState(0),[d,h]=p.useState(!1),[m,b]=p.useState(!1),_=p.useMemo(()=>{var x;return!!((x=r==null?void 0:r.completedQuests)!=null&&x[t.id])},[r,t.id]),w=p.useMemo(()=>{if(t.type!==Ae.QUIZ)return t.content;let x=[...t.content];return t.shuffleQuestions&&(x=Ju(x)),t.shuffleOptions&&(x=x.map(v=>{if(!v.options||v.options.length===0)return v;const k=v.options[v.answerIndex],S=Ju(v.options),C=S.indexOf(k);return{...v,options:S,answerIndex:C}})),x},[t]),y=x=>{!t.passingCriteria||t.passingCriteria===Js.ANY_COMPLETION||t.passingCriteria===Js.PERFECT_SCORE&&x.mistakes===0?(f(t.xp),_||n(t,t.xp),h(!0)):b(!0)},g=x=>{f(t.xp),_||n(t,t.xp,x),h(!0)};return r?_&&!d?i.jsx(g0,{quest:t,onClose:e}):i.jsxs(i.Fragment,{children:[o==="material"&&t.material?i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 sm:p-6 rounded-lg",children:i.jsx(Na,{content:t.material})}),i.jsx("button",{onClick:()=>c("challenge"),className:"mt-6 w-full bg-primary text-white font-bold py-3 px-4 rounded-lg hover:bg-primary/90 transition transform hover:scale-105",children:"Mulai Latihan"})]}):i.jsxs("div",{className:"pt-6",children:[t.type===Ae.QUIZ&&i.jsx(p0,{quiz:w,onComplete:y,questCategory:t.category,userId:r.id,questId:t.id}),t.type===Ae.CODE&&i.jsx(lh,{challenge:t.content,onCheckComplete:(x,v)=>{x&&g(v)},onSuccessSubmit:g,showToast:l,category:t.category})]}),d&&i.jsx(y0,{quest:t,score:u,onClose:e,nextQuest:a,onStartNextQuest:s}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4","aria-modal":"true",role:"dialog",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 text-center max-w-md w-full animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-primary dark:text-indigo-400 mt-4",children:"Tantangan Selesai!"}),i.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:["Kamu berhasil menyelesaikan tantangan, tetapi belum memenuhi kriteria kelulusan: ",i.jsx("strong",{children:"Selesaikan Tanpa Kesalahan"}),"."]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Misi ini belum ditandai selesai. Coba lagi untuk mendapatkan hasil sempurna!"}),i.jsx("button",{onClick:()=>{b(!1),e()},className:"mt-6 w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg",children:"Coba Lagi Nanti"})]})})]}):null},rc=()=>{const t=p.useContext(Hw);if(t===void 0)throw new Error("usePlayer must be used within a PlayerDataProvider");return t},JO=({quest:t,onClose:e,onComplete:n})=>{var S;const{currentUser:a}=dn(),{handleRecordAttempt:s}=rc(),{showToast:r}=un(),[l,o]=p.useState(0),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(null),b=p.useMemo(()=>{var C;return!!((C=a==null?void 0:a.completedQuests)!=null&&C[t.id])},[a,t.id]),_=((S=a==null?void 0:a.questAttempts)==null?void 0:S[t.id])||0,w=p.useMemo(()=>{if(t.type!==Ae.QUIZ)return t.content;let C=[...t.content];return t.shuffleQuestions&&(C=Ju(C)),t.shuffleOptions&&(C=C.map(j=>{if(!j.options||j.options.length===0)return j;const T=j.options[j.answerIndex],E=Ju(j.options),N=E.indexOf(T);return{...j,options:E,answerIndex:N}})),C},[t]),y=C=>{m(C),d(!0)},g=()=>{if(!h||!a)return;let C=0;w.forEach((j,T)=>{h[T]!==null&&typeof h[T]<"u"&&h[T]===j.answerIndex&&(C+=j.points||0)}),o(C),b||n(t,C),localStorage.removeItem(`python-quest-cbt-answers-${a.id}-${t.id}`),d(!1),u(!0)},x=C=>{const j=t.xpPenaltyPerAttempt||0,T=Math.max(0,t.xp-_*j);o(T),b||n(t,T,C),u(!0)},v=(C,j)=>{if(C){x(j);return}s(t.id);const T=_+1;t.maxAttempts&&T>=t.maxAttempts&&(o(0),b||n(t,0,j),u(!0))};if(!a)return null;if(b&&!c)return i.jsx(g0,{quest:t,onClose:e});const k=t.type!==Ae.CODE||!t.maxAttempts||_<t.maxAttempts;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pt-6",children:[t.type===Ae.QUIZ&&i.jsx(p0,{quiz:w,onComplete:()=>{},questCategory:t.category,isCbtMode:!0,onSubmitCbt:y,userId:a.id,questId:t.id}),t.type===Ae.CODE&&(k?i.jsx(lh,{challenge:t.content,onCheckComplete:v,onSuccessSubmit:x,showToast:r,category:t.category}):i.jsxs("div",{className:"mt-6 text-center bg-red-50 dark:bg-red-900/30 p-6 rounded-lg",children:[i.jsx("h3",{className:"text-xl font-bold text-red-800 dark:text-red-200",children:"Kesempatan Habis"}),i.jsx("p",{className:"text-red-700 dark:text-red-300 mt-2",children:"Anda telah menggunakan semua kesempatan untuk mencoba tantangan ini."})]}))]}),c&&i.jsx(y0,{quest:t,score:l,onClose:e,nextQuest:null,onStartNextQuest:()=>{},isReviewable:!0,onShowReview:()=>u(!1)}),f&&i.jsx(Rt,{isOpen:f,onClose:()=>d(!1),onConfirm:g,title:"Konfirmasi Selesai Mengerjakan",message:"Yakin ingin menyelesaikan kuis ini? Jawaban tidak dapat diubah lagi.",confirmText:"Ya, Selesaikan",confirmIcon:i.jsx(np,{className:"w-5 h-5"}),confirmButtonClass:"bg-green-600 hover:bg-green-700"})]})},eD=({quest:t,onClose:e,onComplete:n,nextQuest:a,onStartNextQuest:s})=>{const{currentUser:r}=dn(),{showToast:l}=un(),[o,c]=p.useState(0),[u,f]=p.useState(!1),d=p.useMemo(()=>{var m;return!!((m=r==null?void 0:r.completedQuests)!=null&&m[t.id])},[r,t.id]),h=m=>{const b=t.xp;c(b),n(t,b,m),f(!0)};return r?d&&!u?i.jsx(g0,{quest:t,onClose:e}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"pt-6",children:i.jsx(lh,{challenge:t.content,onCheckComplete:(m,b)=>{m&&h(b)},onSuccessSubmit:()=>{},showToast:l,category:t.category})}),u&&i.jsx(y0,{quest:t,score:o,onClose:e,nextQuest:a,onStartNextQuest:s})]}):null},Cb=t=>{var c,u;const{quest:e,onClose:n}=t,{currentUser:a}=dn();if(!e)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Memuat detail misi..."});const s=e.category===he.MAIN&&!((c=a==null?void 0:a.completedQuests)!=null&&c[e.id]),r=((u=a==null?void 0:a.questAttempts)==null?void 0:u[e.id])||0,l=f=>{f.preventDefault()},o=()=>{switch(e.category){case he.TUTORIAL:return i.jsx(ZO,{...t});case he.MAIN:return i.jsx(JO,{...t});case he.CHALLENGE:return i.jsx(eD,{...t});default:return i.jsx("div",{className:"p-8 text-center text-gray-500",children:"Tipe misi tidak dikenali."})}};return i.jsxs("div",{className:"h-screen bg-white dark:bg-gray-900 overflow-y-auto select-none",onContextMenu:l,children:[i.jsxs("header",{className:"p-4 sm:p-6 flex flex-col sm:flex-row justify-between items-start gap-4 sm:items-center border-b border-gray-200 dark:border-gray-700",children:[i.jsx(YO,{quest:e,attemptsMade:r}),!s&&i.jsxs("button",{onClick:n,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg transition-colors",children:[i.jsx(gr,{className:"w-5 h-5"}),i.jsx("span",{children:"Kembali"})]})]}),i.jsx("main",{className:"px-6 pb-6 sm:px-8 sm:pb-8 lg:px-12 lg:pb-12",children:o()})]})},QC=({user:t,quests:e,onClose:n,isEditable:a,onUpdateProfile:s})=>{const r=e.filter(x=>{var v;return(v=t.completedQuests)==null?void 0:v[x.id]}),l=t.role===We.MASTER,[o,c]=p.useState(!1),[u,f]=p.useState(Je(t.name)),[d,h]=p.useState(t.description||""),[m,b]=p.useState(t.avatarId),_=Us(o?m:t.avatarId),w=p.useMemo(()=>{const x=t.gender===Fn.FEMALE?"female":"male";return sp.filter(v=>v.gender===x||v.gender==="unisex")},[t.gender]);p.useEffect(()=>{f(Je(t.name)),h(t.description||""),b(t.avatarId),a||c(!1)},[t,a]);const y=()=>{s({...t,name:u,description:d,avatarId:m}),c(!1)},g=()=>{f(t.name),h(t.description||""),b(t.avatarId),c(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:n,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg transform transition-all flex flex-col",onClick:x=>x.stopPropagation(),children:[i.jsx("div",{className:"p-6 pt-10",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-grow flex flex-col sm:flex-row items-center sm:items-start text-center sm:text-left gap-6",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center p-2 flex-shrink-0 border-4 border-white dark:border-gray-700 shadow-md -mt-16",children:i.jsx(_,{className:"w-20 h-20"})}),i.jsxs("div",{className:"flex-grow w-full",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-grow",children:[o?i.jsx("input",{type:"text",value:u,onChange:x=>f(x.target.value),className:"text-2xl font-bold text-primary dark:text-indigo-400 bg-gray-100 dark:bg-gray-700 border-2 border-primary/50 dark:border-primary/50 rounded-md px-2 py-1 w-full",autoFocus:!0}):i.jsx("h2",{className:"text-2xl font-bold text-primary dark:text-indigo-400",children:Je(t.name)}),!l&&i.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:t.rank})]}),a&&!o&&i.jsx("div",{className:"flex-shrink-0 self-start mx-auto sm:mx-0 sm:self-center",children:i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 bg-primary/10 text-primary dark:text-indigo-400 text-sm font-semibold px-3 py-1.5 rounded-md hover:bg-primary/20 transition",children:[i.jsx(Fi,{className:"w-4 h-4"}),"Edit Profil"]})})]}),!l&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-accent/10 text-accent dark:text-amber-400 font-bold text-lg py-1 px-4 rounded-full",children:[i.jsx(Mt,{className:"w-5 h-5"}),i.jsxs("span",{children:[t.xp," XP"]})]}),i.jsx("div",{className:"mt-4",children:o?i.jsx("textarea",{value:d,onChange:x=>h(x.target.value),className:"text-sm text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 border-2 border-primary/50 dark:border-primary/50 rounded-md p-2 w-full h-24 resize-none",placeholder:"Tulis deskripsi singkat tentang dirimu..."}):i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:t.description||"Belum ada deskripsi."})})]})]}),i.jsx("button",{onClick:n,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup profil",children:i.jsx(lt,{className:"w-6 h-6"})})]})}),o&&i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:[i.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-3",children:"Pilih Avatar"}),i.jsx("div",{className:"flex items-center gap-3 flex-wrap bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg max-h-40 overflow-y-auto",children:w.map(x=>{const v=m===x.id;return i.jsx("button",{type:"button",onClick:()=>b(x.id),className:`p-2 rounded-full transition-all duration-200 ${v?"bg-primary/20 ring-2 ring-primary":"bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500"}`,title:x.name,children:i.jsx(x.component,{className:"w-12 h-12"})},x.id)})})]}),!l&&i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:[i.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-3",children:["Misi Selesai (",r.length,")"]}),i.jsx("div",{className:"max-h-60 overflow-y-auto pr-2 space-y-2",children:r.length>0?r.map(x=>i.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-50 dark:bg-green-900/50 rounded-md",children:[i.jsx(_e,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-green-800 dark:text-green-200",children:x.title}),i.jsxs("p",{className:"text-sm text-green-700/80 dark:text-green-300/80",children:["+",x.xp," XP"]})]})]},x.id)):i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Belum ada misi yang diselesaikan."})})]}),o&&i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-4 flex justify-end gap-3 rounded-b-2xl border-t border-gray-200 dark:border-gray-700 mt-auto",children:[i.jsx("button",{onClick:g,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Batal"}),i.jsxs("button",{onClick:y,className:"flex items-center gap-2 font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[i.jsx(Ca,{className:"w-5 h-5"}),"Simpan Perubahan"]})]})]})})},tD=({entries:t,onSelectUser:e,title:n})=>{const a=["text-yellow-400","text-gray-400","text-yellow-600"],s=n||"Papan Peringkat";return i.jsxs(i.Fragment,{children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2 text-primary dark:text-indigo-400",children:[i.jsx(Mt,{className:"w-6 h-6 text-accent dark:text-amber-400"}),i.jsx("span",{children:s})]}),t.length>0?i.jsx("ul",{className:"space-y-3",children:t.map((r,l)=>{const o=Us(r.avatarId);return i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(r.userId),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg transition-transform duration-200 hover:scale-[1.03] hover:bg-primary/5 dark:hover:bg-indigo-500/10 text-left",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:`font-bold text-lg w-8 text-center ${a[l]||"text-gray-800 dark:text-gray-200"}`,children:l+1}),i.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center",children:i.jsx(o,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Je(r.name)}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.rank})]})]}),i.jsxs("p",{className:"font-bold text-primary dark:text-indigo-400",children:[r.xp," XP"]})]})},r.userId)})}):i.jsx("div",{className:"text-center p-8 text-gray-500 italic bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:i.jsx("p",{children:"Belum ada peringkat untuk ditampilkan."})})]})},nD=({entries:t,onSelectUser:e,rooms:n,users:a,currentUser:s})=>{const{hasNextPage:r,isLoadingMore:l,handleLoadMoreLeaderboard:o}=rc(),c=p.useMemo(()=>s.roomId?n.find(d=>d.id===s.roomId):null,[s.roomId,n]),u=p.useMemo(()=>{const d=new Set(a.filter(h=>h.roomId===s.roomId).map(h=>h.id));return t.filter(h=>d.has(h.userId))},[s.roomId,t,a]),f=c?`Peringkat di Room: ${c.name}`:"Peringkat Pemain (Tanpa Room)";return i.jsxs("div",{children:[i.jsx(tD,{entries:u,onSelectUser:e,title:f}),r&&i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{onClick:o,disabled:l,className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-2 px-6 rounded-lg transition-colors disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-wait",children:l?"Memuat...":"Muat Lebih Banyak"})})]})};let aD=0;const x0=()=>{const t=p.useRef(null),e=p.useRef(!1),[n,a]=p.useState(!1),[s,r]=p.useState([]),[l,o]=p.useState(!1),[c,u]=p.useState(!1),[f,d]=p.useState(""),h=p.useRef(null),[m]=p.useState(()=>`__pyodide_input_${aD++}__`);p.useEffect(()=>()=>{delete window[m]},[m]);const b=p.useCallback(async()=>{if(!(t.current||e.current)){e.current=!0,a(!0),r(g=>[...g,{type:"system",content:"Memuat lingkungan Python untuk pertama kali..."}]);try{const x=await(window.loadPyodide?window.loadPyodide:(await kn(async()=>{const{loadPyodide:S}=await import("./pyodide-BXTO6cIR.js");return{loadPyodide:S}},[])).loadPyodide)({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.1/full/"});t.current=x;const v=S=>(d(S),u(!0),new Promise(C=>{h.current={resolve:C}}));window[m]=v;const k=`
from js import ${m} as js_input
import asyncio

async def custom_input(p=""):
    val = await js_input(p)
    return val

__builtins__.input = custom_input
            `;await t.current.runPythonAsync(k),r(S=>[...S,{type:"system",content:"Lingkungan siap."}])}catch(g){console.error("Gagal memuat Pyodide:",g),r(x=>[...x,{type:"stderr",content:`Gagal memuat lingkungan Python: ${g.message}`}])}finally{e.current=!1,a(!1)}}},[m]),_=p.useCallback(async g=>{var x,v;if(g){if(o(!0),r([]),t.current||await b(),!t.current){r([{type:"stderr",content:"Gagal menjalankan kode karena lingkungan Python tidak termuat."}]),o(!1);return}r(k=>[...k,{type:"system",content:"Menjalankan kode..."}]);try{t.current.setStdout({batched:S=>{r(C=>[...C,{type:"stdout",content:S}])}}),t.current.setStderr({batched:S=>{r(C=>[...C,{type:"stderr",content:S}])}});const k=g.replace(/\binput\s*\(/g,"await input(");await t.current.runPythonAsync(k)}catch(k){r(S=>[...S,{type:"stderr",content:`Error: ${k.message}`}])}finally{(x=t.current)==null||x.setStdout(),(v=t.current)==null||v.setStderr(),o(!1),u(!1)}}},[b]),w=p.useCallback(g=>{h.current&&(r(x=>[...x,{type:"stdin",content:`${f}${g}`}]),h.current.resolve(g),h.current=null,u(!1),d(""))},[f]),y=p.useCallback(()=>{r([])},[]);return{isPyodideLoading:n,isExecuting:l,isWaitingForInput:c,inputPrompt:f,outputLines:s,runCode:_,onInputSubmit:w,clearOutput:y}},ff={tabSize:2,MozTabSize:2,lineHeight:1.6},Os=({code:t,setCode:e=u=>{},onKeyDown:n,onCopy:a,onPaste:s,onContextMenu:r,readOnly:l=!1,height:o="min-h-[420px]",disableCopyPaste:c=!1})=>{const u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=()=>{if(f.current&&u.current&&d.current){const _=u.current.scrollTop,w=u.current.scrollLeft;f.current.scrollTop=_,f.current.scrollLeft=w,d.current.scrollTop=_}},m=p.useMemo(()=>Sd(t),[t]),b=p.useMemo(()=>Array.from({length:t.split(`
`).length},(_,w)=>w+1).join(`
`),[t]);return i.jsxs("div",{className:`flex bg-black text-white rounded-lg font-mono text-base overflow-hidden border border-gray-700 ${o} transition-all duration-300`,children:[i.jsx("pre",{ref:d,"aria-hidden":"true",className:"p-4 text-right text-gray-500 select-none bg-gray-800/20 overflow-y-hidden",style:ff,children:b}),i.jsxs("div",{className:"relative flex-grow",children:[i.jsx("pre",{ref:f,"aria-hidden":"true",className:"absolute top-0 left-0 w-full h-full p-4 overflow-auto pointer-events-none whitespace-pre-wrap break-words",style:ff,children:i.jsx("code",{dangerouslySetInnerHTML:{__html:m+`
`}})}),i.jsx("textarea",{ref:u,value:t,onChange:_=>e(_.target.value),onScroll:h,onKeyDown:n,onCopy:a,onPaste:s,onContextMenu:r,readOnly:l,disabled:l,className:`absolute top-0 left-0 w-full h-full p-4 bg-transparent text-transparent caret-white outline-none resize-none font-mono text-base whitespace-pre-wrap break-words ${c?"select-none":"select-text"}`,spellCheck:"false","aria-label":"Python code editor",style:ff})]})]})},sD={submitted:{icon:Cd,color:"text-yellow-500 dark:text-yellow-400",title:"Menunggu Penilaian"},approved:{icon:_e,color:"text-green-500 dark:text-green-400",title:"Disetujui"},rejected:{icon:lt,color:"text-red-500 dark:text-red-400",title:"Ditolak"},none:{icon:()=>null,color:"",title:""}},Nb=({savedFiles:t,activeFileId:e,onNewFile:n,onSelectFile:a,onDeleteFile:s})=>i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg border dark:border-gray-700 h-full flex flex-col",children:[i.jsx("h3",{className:"font-bold text-lg mb-2 dark:text-gray-100 flex-shrink-0",children:"File Saya"}),i.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 mb-3 bg-primary/10 text-primary dark:text-indigo-400 dark:bg-indigo-500/10 hover:bg-primary/20 dark:hover:bg-indigo-500/20 font-semibold py-2 px-3 rounded-md transition-colors flex-shrink-0",children:[i.jsx(Kn,{className:"w-5 h-5"}),i.jsx("span",{children:"File Baru"})]}),i.jsx("ul",{className:"space-y-2 overflow-y-auto flex-grow",children:t.length>0?t.map(r=>{const l=sD[r.reviewStatus||"none"],o=l.icon;return i.jsxs("li",{className:"flex items-center group",children:[i.jsxs("button",{onClick:()=>a(r),className:`flex-grow flex items-center justify-between gap-2 text-left p-2 rounded-md transition-colors min-w-0 ${e===r.id?"bg-primary text-white":"text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 truncate",children:[i.jsx(Jg,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{className:"truncate text-base",children:r.name})]}),r.reviewStatus!=="none"&&i.jsx(o,{className:`w-5 h-5 flex-shrink-0 ${e===r.id?"text-white":l.color}`,title:l.title})]}),i.jsx("button",{onClick:()=>s(r),className:`p-1 rounded-md ml-1 opacity-0 group-hover:opacity-100 transition-opacity ${e===r.id?"text-white/70 hover:text-white hover:bg-white/20":"text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50"}`,children:i.jsx(Sn,{className:"w-4 h-4"})})]},r.id)}):i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center mt-4",children:"Belum ada file."})})]}),rD=({prompt:t,onSubmit:e})=>{const[n,a]=p.useState(""),s=p.useRef(null);p.useEffect(()=>{var l;(l=s.current)==null||l.focus()},[]);const r=l=>{l.preventDefault(),e(n),a("")};return i.jsxs("form",{onSubmit:r,className:"flex w-full",children:[i.jsx("span",{className:"text-gray-400 flex-shrink-0",children:t}),i.jsx("input",{ref:s,type:"text",value:n,onChange:l=>a(l.target.value),className:"flex-grow bg-transparent text-white outline-none pl-2",autoComplete:"off"})]})},b0=({outputLines:t,isWaitingForInput:e,inputPrompt:n,onInputSubmit:a,height:s="h-full"})=>{const r=p.useRef(null);return p.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[t,e]),i.jsxs("div",{ref:r,className:`p-4 rounded-lg bg-black text-white font-mono text-base whitespace-pre-wrap ${s} overflow-y-auto`,children:[i.jsx("p",{className:"font-bold mb-2 text-gray-400",children:"> Output:"}),t.length>0?t.map((l,o)=>i.jsx("div",{className:l.type==="stderr"?"text-red-400":l.type==="stdin"?"text-cyan-400":l.type==="system"?"text-yellow-400 italic":"text-white",children:i.jsx("span",{children:l.content})},o)):i.jsx("p",{className:"text-gray-500 italic",children:'Tekan "Jalankan" untuk melihat hasilnya di sini.'}),e&&i.jsx(rD,{prompt:n,onSubmit:a})]})},mf=({outputLines:t,isWaitingForInput:e,inputPrompt:n,onInputSubmit:a,activeFile:s,view:r="both"})=>{const l=()=>s!=null&&s.masterComment?i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg border border-blue-200 dark:border-blue-700 flex-shrink-0 overflow-y-auto h-full",children:[i.jsx("h3",{className:"font-bold text-blue-800 dark:text-blue-200 mb-2",children:"Komentar dari Master:"}),i.jsx("div",{className:"text-sm",children:i.jsx(Na,{content:s.masterComment})})]}):null,o=()=>i.jsx(b0,{outputLines:t,isWaitingForInput:e,inputPrompt:n,onInputSubmit:a,height:"h-full"});return r==="terminal"?o():r==="review"?l():i.jsxs("div",{className:"h-full flex flex-col gap-4",children:[i.jsx("div",{className:"flex-grow min-h-0",children:o()}),l()]})},iD={submitted:{text:"Menunggu Penilaian",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",icon:Cd},approved:{text:"Disetujui",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",icon:_e},rejected:{text:"Ditolak",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200",icon:lt},none:{text:"Belum Diajukan",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",icon:()=>null}},lD=()=>{const{currentUser:t}=dn(),{showToast:e}=un(),{playerCodeFiles:n=[],handleSavePlayerCodeFile:a,handleDeletePlayerCodeFile:s,handleUpdatePlayerCodeFile:r}=rc(),{isPyodideLoading:l,isExecuting:o,outputLines:c,runCode:u,...f}=x0(),d=`# Coba gunakan fungsi input()!
nama = input("Masukkan namamu: ")
print("Halo, " + nama + "!")`,[h,m]=p.useState(null),[b,_]=p.useState("kode_interaktif.py"),[w,y]=p.useState(d),[g,x]=p.useState(null),[v,k]=p.useState(null),[S,C]=p.useState(!1),[j,T]=p.useState(!1),[E,N]=p.useState(!0),[D,U]=p.useState("editor"),$=p.useMemo(()=>h?n.find(q=>q.id===h):null,[h,n]),W=($==null?void 0:$.reviewStatus)||"none",I=p.useMemo(()=>W==="submitted"||W==="approved",[W]);p.useEffect(()=>{H()},[]);const H=()=>{m(null),_("kode_baru.py"),y(`# Tulis kode barumu di sini
`),x(null),U("editor")},O=q=>{m(q.id),_(q.name),y(q.code),x(null),U("editor")},z=()=>{let q=b.trim();if(q.endsWith(".py")||(q+=".py"),!q||q===".py"){x("Nama file tidak boleh kosong.");return}C(!0)},B=async()=>{if(!a)return;let q=b.trim();q.endsWith(".py")||(q+=".py");const je=!h,zn={...$,id:h||void 0,name:q,code:w},tt=await a(zn);e("Berhasil Disimpan",`File "${q}" berhasil disimpan!`,i.jsx(Ca,{className:"w-5 h-5"})),je&&tt?O(tt):_(q),C(!1)},Y=q=>k(q),ee=()=>{v&&s&&(s(v.id),h===v.id&&H(),k(null))},P=()=>{!h||W==="submitted"||W==="approved"||T(!0)},V=()=>{h&&t&&r&&r(t.id,h,{reviewStatus:"submitted"}),T(!1)},se=q=>{const je=q.currentTarget;if(q.key==="Enter"){q.preventDefault();const{value:tt,selectionStart:ft,selectionEnd:An}=je,In=tt.lastIndexOf(`
`,ft-1)+1,kt=tt.substring(In,ft),Va=kt.match(/^\s*/);let Fs=Va?Va[0]:"";kt.trim().endsWith(":")&&(Fs+="  ");const Vs=`
`+Fs,Dr=tt.substring(0,ft)+Vs+tt.substring(An);je.value=Dr;const nl=ft+Vs.length;je.selectionStart=je.selectionEnd=nl,y(Dr);return}if(q.key==="Tab"){q.preventDefault();const{value:tt,selectionStart:ft,selectionEnd:An}=je,In="  ",kt=tt.substring(0,ft)+In+tt.substring(An);je.value=kt,je.selectionStart=je.selectionEnd=ft+In.length,y(kt);return}const zn={"(":")","[":"]","{":"}",'"':'"',"'":"'"};if(zn[q.key]&&je.selectionStart===je.selectionEnd){q.preventDefault();const{value:tt,selectionStart:ft}=je,An=q.key,In=zn[An],kt=tt.substring(0,ft)+An+In+tt.substring(ft);je.value=kt,je.selectionStart=je.selectionEnd=ft+1,y(kt);return}},me=q=>{q.preventDefault(),e("Aksi Diblokir","Fitur salin/tempel dinonaktifkan untuk mendorong latihan mandiri.",i.jsx(ps,{className:"w-5 h-5 text-yellow-500"}))},Xe=q=>{if(!I&&q.length-w.length>1){e("Aksi Diblokir","Fitur tempel dinonaktifkan untuk mendorong latihan mandiri.",i.jsx(ps,{className:"w-5 h-5 text-yellow-500"}));return}y(q)},Tt=()=>{u(w),U("output")},At=iD[W],qe=(q,je,zn)=>i.jsxs("button",{onClick:()=>U(q),className:`flex-1 flex flex-col items-center gap-1 py-2 text-xs font-medium rounded-md ${D===q?"bg-primary/10 text-primary dark:text-indigo-300":"text-gray-500 dark:text-gray-400"}`,children:[i.jsx(je,{className:"w-5 h-5"}),i.jsx("span",{children:zn})]});return i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-4 flex-shrink-0",children:[i.jsx("button",{onClick:()=>N(!E),className:"hidden lg:block p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:i.jsx(sx,{className:`w-5 h-5 transition-transform ${E?"":"rotate-180"}`})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("input",{type:"text",value:b,onChange:q=>{_(q.target.value),x(null)},disabled:I,className:`w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border rounded-md font-mono text-sm dark:text-gray-200 focus:outline-none focus:ring-2 ${g?"border-red-500 ring-red-500/50":"border-gray-300 dark:border-gray-600 focus:ring-primary"} disabled:bg-gray-200 dark:disabled:bg-gray-600 disabled:text-gray-500 dark:disabled:text-gray-400`}),g&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:g})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[h&&i.jsxs("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 ${At.color}`,children:[i.jsx(At.icon,{className:"w-4 h-4"}),At.text]}),($==null?void 0:$.reviewStatus)==="approved"&&$.bonusXp>0&&i.jsxs("span",{className:"text-xs font-bold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 bg-accent/10 text-accent dark:text-amber-400 dark:bg-amber-900/50",title:`+${$.bonusXp} XP bonus!`,children:[" ",i.jsx(Mt,{className:"w-4 h-4"}),"+",$.bonusXp," XP"]}),i.jsxs("button",{onClick:z,disabled:I,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[i.jsx(Ca,{className:"w-5 h-5"}),i.jsx("span",{children:"Simpan"})]}),i.jsxs("button",{onClick:P,disabled:!h||W==="submitted"||W==="approved",className:"flex-1 sm:flex-none text-nowrap flex items-center justify-center gap-2 bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-600 transition disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[i.jsx(nx,{className:"w-5 h-5"}),W==="rejected"?"Ajukan Ulang":"Ajukan"]}),i.jsx("button",{onClick:Tt,disabled:o||l,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-secondary text-white font-bold py-2 px-4 rounded-lg hover:bg-secondary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:l?"Memuat...":o?"Menjalankan...":"Jalankan"})]})]}),I&&i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 p-3 rounded-md text-center text-sm text-yellow-800 dark:text-yellow-200 mb-3 border border-yellow-200 dark:border-yellow-800 flex-shrink-0",children:W==="submitted"?"File ini sedang menunggu penilaian.":"File ini telah disetujui."}),i.jsxs("div",{className:"flex-grow flex-col lg:flex-row flex gap-4 min-h-0",children:[i.jsxs("div",{className:"hidden lg:flex w-full h-full gap-4",children:[i.jsx("div",{className:`transition-all duration-300 ${E?"w-64":"w-0 hidden"}`,children:E&&i.jsx(Nb,{savedFiles:n,activeFileId:h,onNewFile:H,onSelectFile:O,onDeleteFile:Y})}),i.jsx("div",{className:"flex-grow",children:i.jsx(Os,{code:w,setCode:Xe,readOnly:I,onKeyDown:se,onCopy:me,onPaste:me,onContextMenu:me,disableCopyPaste:!0,height:"min-h-[420px]"})}),i.jsx("div",{className:"w-2/5 h-full",children:i.jsx(mf,{outputLines:c,isWaitingForInput:f.isWaitingForInput,inputPrompt:f.inputPrompt,onInputSubmit:f.onInputSubmit,activeFile:$})})]}),i.jsxs("div",{className:"lg:hidden flex flex-col w-full min-h-[70vh]",children:[i.jsxs("div",{className:"flex-grow min-h-0",children:[D==="files"&&i.jsx(Nb,{savedFiles:n,activeFileId:h,onNewFile:H,onSelectFile:O,onDeleteFile:Y}),D==="editor"&&i.jsx(Os,{code:w,setCode:Xe,readOnly:I,onKeyDown:se,onCopy:me,onPaste:me,onContextMenu:me,disableCopyPaste:!0,height:"min-h-[420px]"}),D==="output"&&i.jsx(mf,{outputLines:c,isWaitingForInput:f.isWaitingForInput,inputPrompt:f.inputPrompt,onInputSubmit:f.onInputSubmit,activeFile:$,view:"terminal"}),D==="review"&&i.jsx(mf,{outputLines:c,isWaitingForInput:f.isWaitingForInput,inputPrompt:f.inputPrompt,onInputSubmit:f.onInputSubmit,activeFile:$,view:"review"})]}),i.jsxs("div",{className:"flex-shrink-0 mt-4 p-1.5 bg-gray-100 dark:bg-gray-900 rounded-lg flex items-center justify-around gap-1",children:[qe("files",sx,"Files"),qe("editor",s5,"Editor"),qe("output",d5,"Output"),($==null?void 0:$.masterComment)&&qe("review",n5,"Review")]})]})]}),i.jsx(Rt,{isOpen:!!v,onClose:()=>k(null),onConfirm:ee,title:"Konfirmasi Hapus File",message:`Yakin ingin menghapus file "${v==null?void 0:v.name}"?`}),i.jsx(Rt,{isOpen:S,onClose:()=>C(!1),onConfirm:B,title:"Konfirmasi Simpan",message:`Simpan perubahan pada file "${b.trim().endsWith(".py")?b.trim():b.trim()+".py"}"?`,confirmText:"Ya, Simpan",confirmIcon:i.jsx(Ca,{className:"w-5 h-5"}),confirmButtonClass:"bg-blue-600 hover:bg-blue-700"}),i.jsx(Rt,{isOpen:j,onClose:()=>T(!1),onConfirm:V,title:"Konfirmasi Pengajuan",message:`Ajukan file "${b}" untuk dinilai? Anda tidak dapat mengeditnya selama proses penilaian.`,confirmText:"Ya, Ajukan",confirmIcon:i.jsx(nx,{className:"w-5 h-5"}),confirmButtonClass:"bg-indigo-600 hover:bg-indigo-700"})]})},oD=()=>i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex-shrink-0",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary dark:text-indigo-400",children:"Arena Koding"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Eksplorasi dan bereksperimen dengan Python di sini. Simpan kodemu untuk dilihat kembali nanti."})]}),i.jsx("div",{className:"flex-grow min-h-0",children:i.jsx(lD,{})})]}),cD=({quests:t,user:e,onSelectQuest:n,showToast:a,questChapters:s})=>{const[r,l]=p.useState(new Set),o=p.useMemo(()=>{const d=[...s].sort((_,w)=>_.order-w.order),h=[],m=new Map(d.map(_=>[_.id,{..._,children:[],quests:[]}]));t.forEach(_=>{_.chapterId&&m.has(_.chapterId)&&m.get(_.chapterId).quests.push(_)});for(const _ of d)_.parentId&&m.has(_.parentId)?m.get(_.parentId).children.push(m.get(_.id)):h.push(m.get(_.id));const b=t.filter(_=>!_.chapterId);return{tree:h,uncategorizedQuests:b}},[t,s]);p.useEffect(()=>{const d=t.find(h=>{var m,b;return!((m=e.completedQuests)!=null&&m[h.id])&&!(h.requiredQuestId&&!((b=e.completedQuests)!=null&&b[h.requiredQuestId]))});if(d!=null&&d.chapterId){const h=new Map(s.map(_=>[_.id,_]));let m=h.get(d.chapterId);const b=new Set;for(;m;)b.add(m.id),m=m.parentId?h.get(m.parentId):void 0;l(b)}},[t,s,e.completedQuests]);const c=d=>{l(h=>{const m=new Set(h);return m.has(d)?m.delete(d):m.add(d),m})},u=(d,h)=>i.jsx("ul",{className:`space-y-3 ${h?"pt-3":"pl-4 pt-3 border-l-2 border-gray-200 dark:border-gray-700 ml-4"}`,children:d.map(m=>{var y,g;const b=(y=e.completedQuests)==null?void 0:y[m.id],_=m.requiredQuestId?!((g=e.completedQuests)!=null&&g[m.requiredQuestId]):!1,w=()=>{if(_){const x=t.find(v=>v.id===m.requiredQuestId);a("Misi Terkunci",`Selesaikan misi "${(x==null?void 0:x.title)||"sebelumnya"}" terlebih dahulu untuk membuka ini.`,i.jsx(Nu,{className:"w-5 h-5 text-yellow-500"}))}else n(m)};return i.jsx("li",{children:i.jsxs("button",{onClick:w,className:`w-full flex items-center justify-between p-4 bg-white dark:bg-gray-700/50 rounded-lg transition-colors duration-200 text-left ${_?"cursor-not-allowed opacity-60":"hover:bg-primary/5 dark:hover:bg-indigo-500/10"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[b?i.jsx(_e,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold flex-shrink-0 ${_?"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-primary/10 text-primary dark:text-indigo-400"}`,children:m.xp}),i.jsxs("div",{children:[i.jsx("p",{className:`font-semibold ${b?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-gray-100"}`,children:m.title}),i.jsx("p",{className:`text-sm ${b?"text-gray-500/80 dark:text-gray-500":"text-gray-600 dark:text-gray-400"}`,children:m.description})]})]}),_?i.jsx(Nu,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"}):i.jsx(tp,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})]})},m.id)})}),f=d=>{const h=r.has(d.id);return i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl overflow-hidden border dark:border-gray-700/50",children:[i.jsxs("button",{onClick:()=>c(d.id),className:"w-full flex justify-between items-center p-4 text-left",children:[i.jsx("h4",{className:"font-bold text-lg text-primary dark:text-indigo-400",children:d.title}),i.jsx(Ho,{className:`w-6 h-6 text-gray-500 dark:text-gray-400 transition-transform ${h?"rotate-180":""}`})]}),h&&i.jsxs("div",{className:"px-4 pb-4 animate-fade-in-down",children:[d.description&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:d.description}),d.quests.length>0&&u(d.quests,!1),d.children.length>0&&i.jsx("div",{className:"space-y-3 mt-4 ml-4 pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:d.children.map(m=>{const b=m.quests.length>0;return i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-gray-800 dark:text-gray-200",children:m.title}),m.description&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:m.description}),b?u(m.quests,!0):i.jsx("p",{className:"text-sm italic text-gray-400 dark:text-gray-500 py-2",children:"Segera hadir..."})]},m.id)})})]})]},d.id)};return i.jsxs("div",{className:"space-y-4",children:[o.tree.map(d=>f(d)),o.uncategorizedQuests.length>0&&i.jsxs("div",{className:"mt-8",children:[i.jsx("h4",{className:"font-bold text-lg text-gray-500 dark:text-gray-400 mb-3",children:"Misi Lainnya"}),i.jsx("div",{className:"space-y-3",children:u(o.uncategorizedQuests,!0)})]})]})},tl=()=>{const t=p.useContext(zw);if(t===void 0)throw new Error("useData must be used within a DataProvider");return t},uD=({user:t,allQuests:e,onSelectQuest:n,showToast:a})=>{const{questChapters:s}=tl();return i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary dark:text-indigo-400",children:"Daftar Misi"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Jelajahi semua misi yang tersedia. Selesaikan misi pembelajaran untuk membuka konsep baru dan taklukkan misi utama untuk naik peringkat!"}),i.jsx(cD,{quests:e,user:t,onSelectQuest:n,showToast:a,questChapters:s})]})},dD=({isOpen:t,onClose:e,ranks:n,user:a})=>{if(!t)return null;const s=[...n].sort((l,o)=>l.xpThreshold-o.xpThreshold),r=na(a.xp,n);return i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg transform transition-all flex flex-col",onClick:l=>l.stopPropagation(),children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mt,{className:"w-7 h-7 text-primary dark:text-indigo-400"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Daftar Gelar Peringkat"})]}),i.jsx("button",{type:"button",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:i.jsx(lt,{className:"w-6 h-6"})})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Ini adalah semua gelar yang bisa kamu raih dalam petualanganmu!"})]}),i.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:i.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2 space-y-3",children:s.map((l,o)=>{const c=s[o+1],u=l.name===r.name,f=c?c.xpThreshold-l.xpThreshold:0,d=a.xp-l.xpThreshold;return i.jsxs("div",{className:`p-4 rounded-lg border-2 ${u?"bg-primary/5 border-primary dark:bg-indigo-500/10 dark:border-indigo-500":"bg-gray-50 border-transparent dark:bg-gray-800/50"}`,children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:`font-bold text-lg ${u?"text-primary dark:text-indigo-400":"text-gray-800 dark:text-gray-200"}`,children:l.name}),i.jsxs("span",{className:"font-mono font-semibold text-sm text-gray-600 dark:text-gray-400",children:[l.xpThreshold," XP ",c?"":"+"]})]}),c?i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 relative",children:u&&f>0&&i.jsx("div",{className:"bg-accent h-1.5 rounded-full",style:{width:`${Math.min(100,d/f*100)}%`}})}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-500 mt-1 font-mono",children:[i.jsx("span",{children:l.xpThreshold}),i.jsx("span",{children:c.xpThreshold})]})]}):u&&i.jsx("p",{className:"text-xs text-accent dark:text-amber-400 mt-2",children:"Kamu berada di peringkat tertinggi!"})]},l.name)})})}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-4 flex justify-end rounded-b-2xl border-t border-gray-200 dark:border-gray-700 mt-auto",children:i.jsx("button",{onClick:e,className:"font-semibold py-2 px-6 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Tutup"})})]})})},Sb=5,hD=({value:t,max:e})=>{const n=e>0?t/e*100:0;return i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-accent h-2.5 rounded-full",style:{width:`${n}%`}})})},fD=({user:t,nextQuest:e,quests:n,onSelectQuest:a,ranks:s,playerCodeFiles:r})=>{const[l,o]=p.useState(!1),[c,u]=p.useState(Sb),f=Us(t.avatarId),d=na(t.xp,s),h=y5(t.xp,s),m=h?h.xpThreshold-d.xpThreshold:0,b=t.xp-d.xpThreshold,_=p.useMemo(()=>{if(!t.completedQuests)return[];const g=Object.entries(t.completedQuests);return n.map(x=>{const v=g.find(([S])=>S===x.id);if(!v)return null;const k=v[1];return{...x,completedAt:k.completedAt||0,score:k.score}}).filter(x=>x!==null).sort((x,v)=>v.completedAt-x.completedAt)},[t.completedQuests,n]),w=_.slice(0,c),y=p.useMemo(()=>r?r.filter(g=>g.reviewStatus==="approved"&&g.bonusXp&&g.bonusXp>0).sort((g,x)=>x.id.localeCompare(g.id)):[],[r]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 p-6 bg-gradient-to-r from-primary/80 to-primary rounded-2xl text-white shadow-lg",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-white/20 flex items-center justify-center p-2 flex-shrink-0 border-4 border-white",children:i.jsx(f,{className:"w-20 h-20"})}),i.jsxs("div",{className:"text-center sm:text-left",children:[i.jsxs("h2",{className:"text-3xl font-bold font-display",children:["Halo, ",Je(t.name),"!"]}),i.jsx("p",{className:"text-lg opacity-90 mt-1",children:"Selamat datang kembali di Python Quest. Siap untuk petualangan hari ini?"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-2 bg-gray-50 dark:bg-gray-800/50 p-6 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Progres Peringkat"}),i.jsx("button",{onClick:()=>o(!0),className:"p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",title:"Lihat semua gelar peringkat",children:i.jsx(ps,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:d.name}),h&&i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:h.name})]}),i.jsx(hD,{value:b,max:m}),i.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("span",{children:[t.xp," XP"]}),h&&i.jsxs("span",{children:[h.xpThreshold," XP"]})]}),h?i.jsxs("p",{className:"text-center text-sm text-accent dark:text-amber-400 font-semibold mt-4",children:["Kamu butuh ",h.xpThreshold-t.xp," XP lagi untuk mencapai peringkat ",h.name,"!"]}):i.jsx("p",{className:"text-center text-sm text-accent dark:text-amber-400 font-semibold mt-4",children:"Kamu telah mencapai peringkat tertinggi!"})]}),e?i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-6 rounded-lg flex flex-col justify-center",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Misi Berikutnya"}),i.jsx("button",{onClick:()=>a(e),className:"w-full p-4 bg-white dark:bg-gray-700 hover:bg-secondary/10 dark:hover:bg-pink-500/10 rounded-lg shadow-sm text-left transition-all hover:shadow-md transform hover:-translate-y-1 group",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-secondary dark:text-pink-400 group-hover:text-secondary/80 dark:group-hover:text-pink-400/80",children:e.title}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.xp," XP"]})]}),i.jsx(Fo,{className:"w-8 h-8 text-secondary/50 dark:text-pink-400/50 group-hover:text-secondary dark:group-hover:text-pink-400"})]})})]}):i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-6 rounded-lg flex flex-col justify-center items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Semua Misi Selesai!"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"Kerja bagus! Kamu telah menyelesaikan semua misi yang tersedia."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[i.jsx(_e,{className:"w-6 h-6 text-green-500"}),"Misi Selesai"]}),_.length>0?i.jsxs(i.Fragment,{children:[i.jsx("ul",{className:"space-y-2",children:w.map(g=>i.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/40 flex items-center justify-center text-green-600 dark:text-green-300 flex-shrink-0",children:i.jsx(_e,{className:"w-5 h-5"})}),i.jsxs("div",{className:"overflow-hidden",children:[i.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 truncate",children:g.title}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:g.description})]})]}),i.jsx("div",{className:"text-right flex-shrink-0 ml-4 min-w-[70px]",children:(()=>{const x=g.score===g.xp;return i.jsxs("div",{children:[i.jsxs("p",{className:`font-bold text-lg ${x?"text-green-500 dark:text-green-400":"text-accent dark:text-amber-400"}`,children:["+",g.score," XP"]}),!x&&g.xp>0&&i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 -mt-1",children:["dari ",g.xp]})]})})()})]},g.id))}),c<_.length&&i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:()=>u(g=>g+Sb),className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-2 px-6 rounded-lg transition-colors",children:"Tampilkan Lebih Banyak"})})]}):i.jsx("div",{className:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg h-full flex items-center justify-center",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Kamu belum menyelesaikan misi apapun. Ayo mulai petualanganmu!"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[i.jsx(Mt,{className:"w-6 h-6 text-yellow-500"}),"Bonus Koding"]}),y.length>0?i.jsx("ul",{className:"space-y-2",children:y.map(g=>i.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/40 flex items-center justify-center text-yellow-600 dark:text-yellow-300 flex-shrink-0",children:i.jsx(Mt,{className:"w-5 h-5"})}),i.jsxs("div",{className:"overflow-hidden",children:[i.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 truncate",title:g.name,children:g.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:"Kode disetujui oleh Master"})]})]}),i.jsx("div",{className:"text-right flex-shrink-0 ml-4",children:i.jsxs("p",{className:"font-bold text-lg text-yellow-500 dark:text-yellow-400",children:["+",g.bonusXp," XP"]})})]},g.id))}):i.jsx("div",{className:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg h-full flex items-center justify-center",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Belum ada bonus XP dari review kode."})})]})]})]}),l&&i.jsx(dD,{isOpen:l,onClose:()=>o(!1),ranks:s,user:t})]})},Ym=t=>{var l;if(!t||t.length===0)return[];const e=new Map(t.map(o=>[o.id,o])),n=new Map,a=new Map;for(const o of t)n.set(o.id,0),a.set(o.id,[]);for(const o of t)o.requiredQuestId&&e.has(o.requiredQuestId)&&(n.set(o.id,(n.get(o.id)||0)+1),(l=a.get(o.requiredQuestId))==null||l.push(o.id));const s=t.filter(o=>n.get(o.id)===0).sort((o,c)=>(o.order??999)-(c.order??999)),r=[];for(;s.length>0;){const o=s.shift();r.push(o);const u=(a.get(o.id)||[]).map(f=>e.get(f)).filter(Boolean).sort((f,d)=>(f.order??999)-(d.order??999));for(const f of u){const d=f.id;n.set(d,(n.get(d)||1)-1),n.get(d)===0&&s.push(f)}}if(r.length!==t.length){console.warn("Terdeteksi dependensi sirkular atau prasyarat yang rusak pada misi. Misi yang tidak terurut akan ditambahkan di akhir.");const o=new Set(r.map(u=>u.id)),c=t.filter(u=>!o.has(u.id));r.push(...c)}return r},mD=({user:t,challenges:e,onSelectQuest:n,showToast:a})=>i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary dark:text-indigo-400",children:"Tantangan Koding"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Asah kemampuanmu dan raih XP sebanyak-banyaknya di sini! Semua tantangan bisa dikerjakan berulang kali tanpa batas percobaan atau penalti. Tempat yang sempurna untuk berlatih dan menaikkan peringkat tanpa rasa takut."}),i.jsx("div",{className:"space-y-3",children:e.length>0?e.map(s=>{var c,u;const r=(c=t.completedQuests)==null?void 0:c[s.id],l=s.requiredQuestId?!((u=t.completedQuests)!=null&&u[s.requiredQuestId]):!1,o=()=>{l?a("Tantangan Terkunci","Selesaikan misi prasyarat terlebih dahulu untuk membuka ini.",i.jsx(Nu,{className:"w-5 h-5 text-yellow-500"})):n(s)};return i.jsx("div",{children:i.jsxs("button",{onClick:o,className:`w-full flex items-center justify-between p-4 bg-white dark:bg-gray-700/50 rounded-lg transition-colors duration-200 text-left ${l?"cursor-not-allowed opacity-60":"hover:bg-primary/5 dark:hover:bg-indigo-500/10"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[r?i.jsx(_e,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold flex-shrink-0 ${l?"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-primary/10 text-primary dark:text-indigo-400"}`,children:s.xp}),i.jsxs("div",{children:[i.jsx("p",{className:`font-semibold ${r?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:s.title}),i.jsx("p",{className:`text-sm ${r?"text-gray-500/80 dark:text-gray-500":"text-gray-600 dark:text-gray-400"}`,children:s.description})]})]}),l?i.jsx(Nu,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"}):i.jsx(tp,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})]})},s.id)}):i.jsx("div",{className:"text-center p-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Belum ada tantangan koding yang tersedia. Cek kembali nanti!"})})})]}),gD=()=>{const{currentUser:t,logout:e}=dn(),{showToast:n}=un(),{ranks:a,questsMetadata:s,rooms:r,handleUpdateUser:l}=tl(),{leaderboardEntries:o,playerCodeFiles:c,handleQuestComplete:u,handleSetActiveQuest:f}=rc(),[d,h]=p.useState([]),[m,b]=p.useState(!0),[_,w]=p.useState(null),[y,g]=p.useState(!1),[x,v]=p.useState(!1),[k,S]=p.useState(null),[C,j]=p.useState(null);p.useEffect(()=>{b(!0),t?EO(t.roomId).then(P=>{h(P||[]),b(!1)}):b(!1)},[t]);const T=p.useMemo(()=>Ym(s.filter(P=>P.category!==he.CHALLENGE)),[s]),E=p.useMemo(()=>s.filter(P=>P.category===he.CHALLENGE).sort((P,V)=>(P.order||0)-(V.order||0)),[s]),N=(P,V)=>{var se,me;for(const Xe of V){if((se=P.completedQuests)!=null&&se[Xe.id])continue;if(!(Xe.requiredQuestId?!((me=P.completedQuests)!=null&&me[Xe.requiredQuestId]):!1))return Xe}return null},D=p.useMemo(()=>t?N(t,T):null,[t,T]),U=async P=>{const V=await FC(P);V?(w(V),g(!0),v(!1)):n("Error","Gagal memuat detail misi.")},$=P=>{var V;P.category==="main"&&!((V=t==null?void 0:t.completedQuests)!=null&&V[P.id])?j(P):U(P.id)},W=()=>{C&&(f(C.id),U(C.id),j(null))},I=()=>{v(!0),setTimeout(()=>{g(!1),w(null)},300)},H=P=>{I(),setTimeout(()=>{P.category==="main"&&f(P.id),U(P.id)},350)};p.useEffect(()=>{if(t!=null&&t.activeQuestId&&!y&&s.length>0){const P=s.find(V=>V.id===t.activeQuestId);P&&P.category==="main"?U(P.id):P&&f(null)}},[t,s,y]);const O=(P,V,se)=>{u(P,V,se)},z=P=>{const V=d.find(se=>se.id===P);V&&V.role===We.PLAYER&&S(V)},B=()=>{S(t)},Y=()=>{S(null)},ee=P=>{l(P),S(P)};return!t||m?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Memuat data pengguna..."}):y&&_&&(t==null?void 0:t.activeQuestId)===_.id?i.jsx("div",{className:"fixed inset-0 z-30",children:i.jsx(Cb,{quest:_,onClose:I,onComplete:O,nextQuest:D,onStartNextQuest:H})}):i.jsxs(i.Fragment,{children:[i.jsxs(vm,{user:t,onLogout:e,onProfileClick:B,fullWidth:!0,children:[i.jsx("div",{className:"mb-6",children:i.jsx(_5,{})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-2xl shadow-sm animate-fade-in",children:i.jsxs(kd,{children:[i.jsx(He,{index:!0,element:i.jsx(Zs,{to:"beranda",replace:!0})}),i.jsx(He,{path:"beranda",element:i.jsx(fD,{user:t,nextQuest:D,quests:s,onSelectQuest:$,ranks:a,playerCodeFiles:c})}),i.jsx(He,{path:"misi",element:i.jsx(uD,{user:t,allQuests:T,onSelectQuest:$,showToast:n})}),i.jsx(He,{path:"tantangan",element:i.jsx(mD,{user:t,challenges:E,onSelectQuest:$,showToast:n})}),i.jsx(He,{path:"peringkat",element:i.jsx(nD,{entries:o,onSelectUser:z,rooms:r,users:d,currentUser:t})}),i.jsx(He,{path:"playground",element:i.jsx(oD,{})})]})})]}),y&&_&&i.jsx("div",{className:`fixed inset-0 z-30 ${x?"animate-slide-out-to-right":"animate-slide-in-from-right"}`,children:i.jsx(Cb,{quest:_,onClose:I,onComplete:O,nextQuest:D,onStartNextQuest:H})}),k&&i.jsx(QC,{user:k,quests:s,onClose:Y,isEditable:k.id===t.id,onUpdateProfile:ee}),C&&i.jsx(Rt,{isOpen:!!C,onClose:()=>j(null),onConfirm:W,title:"Konfirmasi Memulai Latihan",message:"Anda akan memulai misi utama. Anda tidak akan bisa kembali atau keluar dari latihan ini sampai selesai. Lanjutkan?",confirmText:"Ya, Mulai Latihan",confirmIcon:i.jsx(Fo,{className:"w-5 h-5"}),confirmButtonClass:"bg-primary hover:bg-primary/90"})]})},Eb=[{id:"dashboard",label:"Beranda",icon:Z1},{id:"mission-management",label:"Kelola Misi",icon:uo,children:[{id:"chapters",label:"Kelola Struktur",icon:q1},{id:"quests",label:"Kelola Misi",icon:uo},{id:"challenges",label:"Kelola Tantangan",icon:ew}]},{id:"user-management",label:"Kelola Pengguna",icon:bm,children:[{id:"players",label:"Kelola Pemain",icon:bm},{id:"arsipPemain",label:"Arsip Kode Pemain",icon:ep},{id:"rooms",label:"Kelola Room",icon:a5}]},{id:"ranks",label:"Kelola Peringkat",icon:Mt}],pD=({group:t})=>{const[e,n]=p.useState(!1),a=Ba(),s=p.useRef(null),r=t.children.some(o=>a.pathname.includes(`/dashboard/${o.id}`));p.useEffect(()=>{const o=c=>{s.current&&!s.current.contains(c.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const l=t.icon;return i.jsxs("div",{className:"relative",ref:s,children:[i.jsxs("button",{onClick:()=>n(!e),className:`flex items-center justify-center gap-2 font-semibold p-3 w-full h-full rounded-lg transition-colors duration-200 ${r?"bg-primary text-white shadow":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[i.jsx(l,{className:"w-5 h-5"}),i.jsx("span",{children:t.label}),i.jsx(Ho,{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`})]}),e&&i.jsx("div",{className:"absolute top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-xl border dark:border-gray-700 z-20 animate-fade-in-down",children:i.jsx("div",{className:"p-2 space-y-1",children:t.children.map(o=>{const c=o.icon;return i.jsxs(Ul,{to:o.id,onClick:()=>n(!1),className:({isActive:u})=>`flex items-center gap-3 w-full p-3 rounded-md text-sm transition-colors ${u?"bg-primary/10 text-primary dark:bg-indigo-500/20 dark:text-indigo-300 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsx(c,{className:"w-5 h-5"}),i.jsx("span",{children:o.label})]},o.id)})})})]})},jb=()=>{const[t,e]=p.useState(!1),[n,a]=p.useState(null),s=Ba();p.useEffect(()=>{e(!1)},[s]);const r=o=>{a(c=>c===o?null:o)},l=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`fixed inset-0 bg-black/60 z-40 transition-opacity md:hidden ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>e(!1),"aria-hidden":"true"}),i.jsxs("div",{className:`fixed top-0 left-0 h-full w-72 bg-white dark:bg-gray-800 shadow-xl z-50 transform transition-transform md:hidden ${t?"translate-x-0":"-translate-x-full"}`,children:[i.jsxs("div",{className:"p-4 flex justify-between items-center border-b dark:border-gray-700",children:[i.jsx("h2",{className:"font-bold text-lg text-primary dark:text-indigo-400",children:"Navigasi Master"}),i.jsx("button",{onClick:()=>e(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:i.jsx(lt,{className:"w-6 h-6"})})]}),i.jsx("nav",{className:"p-4",children:i.jsx("ul",{className:"space-y-2",children:Eb.map(o=>{if("children"in o){const u=o.children.some(h=>s.pathname.includes(`/dashboard/${h.id}`)),f=n===o.id,d=o.icon;return i.jsxs("li",{children:[i.jsxs("button",{onClick:()=>r(o.id),className:`flex items-center justify-between w-full p-3 rounded-lg text-left transition-colors ${u?"bg-gray-100 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 font-semibold text-gray-700 dark:text-gray-200",children:[i.jsx(d,{className:"w-5 h-5"}),i.jsx("span",{children:o.label})]}),i.jsx(Ho,{className:`w-5 h-5 transition-transform ${f?"rotate-180":""}`})]}),f&&i.jsx("ul",{className:"pl-6 mt-2 space-y-1 border-l-2 dark:border-gray-600 ml-2",children:o.children.map(h=>{const m=h.icon;return i.jsx("li",{children:i.jsxs(Ul,{to:h.id,className:({isActive:b})=>`flex items-center gap-3 w-full p-2 rounded-md text-sm transition-colors ${b?"bg-primary/10 text-primary dark:text-indigo-300 font-semibold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsx(m,{className:"w-4 h-4"}),i.jsx("span",{children:h.label})]})},h.id)})})]},o.id)}const c=o.icon;return i.jsx("li",{children:i.jsxs(Ul,{to:o.id,end:!0,className:({isActive:u})=>`flex items-center gap-3 w-full p-3 rounded-lg font-semibold transition-colors ${u?"bg-primary text-white":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsx(c,{className:"w-5 h-5"}),i.jsx("span",{children:o.label})]})},o.id)})})})]})]});return i.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900/50 p-2 rounded-xl mb-6",children:[i.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[i.jsx("button",{onClick:()=>e(!0),className:"p-2 text-gray-600 dark:text-gray-300","aria-label":"Buka navigasi",children:i.jsx(J1,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Menu"})]}),i.jsx("nav",{className:"hidden md:grid md:grid-flow-col md:auto-cols-fr md:gap-2",children:Eb.map(o=>{if("children"in o)return i.jsx(pD,{group:o},o.id);const c=o.icon;return i.jsxs(Ul,{to:o.id,end:o.id==="dashboard",className:({isActive:u})=>`flex items-center justify-center gap-2 font-semibold p-3 rounded-lg transition-colors duration-200 ${u?"bg-primary text-white shadow":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[i.jsx(c,{className:"w-5 h-5"}),i.jsx("span",{children:o.label})]},o.id)})}),l()]})},Tb=({quests:t,allQuests:e,questChapters:n,onAddNew:a,onEdit:s,onDelete:r,title:l,showAlert:o,showToast:c})=>{const{handleGenerateQuestsMetadata:u}=tl(),[f,d]=p.useState(null),[h,m]=p.useState(new Set),[b,_]=p.useState(!1),[w,y]=p.useState(!1),g=p.useMemo(()=>{const N=n.filter(U=>!U.parentId).sort((U,$)=>U.order-$.order),D=t;return N.map(U=>{const $=n.filter(W=>W.parentId===U.id).sort((W,I)=>W.order-I.order);return{...U,quests:D.filter(W=>W.chapterId===U.id),subChapters:$.map(W=>({...W,quests:D.filter(I=>I.chapterId===W.id)}))}})},[t,n]),x=p.useMemo(()=>t.filter(N=>!N.chapterId),[t]),v=N=>{m(D=>{const U=new Set(D);return U.has(N)?U.delete(N):U.add(N),U})},k=N=>{if(e.some(U=>U.requiredQuestId===N.id)){o("Aksi Ditolak",`Misi "${N.title}" tidak dapat dihapus karena menjadi prasyarat untuk misi lain.`);return}d(N)},S=()=>{f&&(r(f.id),c("Berhasil",`Misi "${f.title}" telah dihapus.`,i.jsx(_e,{className:"w-5 h-5 text-green-500"})),d(null))},C=async()=>{y(!1),_(!0);try{await u(),c("Berhasil","Metadata misi telah berhasil disinkronkan.",i.jsx(_e,{className:"w-5 h-5 text-green-500"}))}catch(N){o("Gagal Sinkronisasi",`Terjadi kesalahan: ${N.message}`)}finally{_(!1)}},j=({quest:N})=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700/50 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex-grow w-2/5 min-w-0",children:[i.jsx("p",{className:"font-semibold text-primary dark:text-indigo-400 truncate",title:N.title,children:N.title}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",title:N.description,children:N.description})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 mx-4",children:[i.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${N.category===he.TUTORIAL?"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300":"bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300"}`,children:N.category===he.TUTORIAL?"Pembelajaran":"Latihan"}),i.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${N.type===Ae.QUIZ?"bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300":"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300"}`,children:N.type===Ae.QUIZ?"Kuis":"Koding"})]}),i.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[i.jsxs("span",{className:"font-bold text-accent dark:text-amber-400 w-16 text-center",children:[N.xp," XP"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>s(N),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:i.jsx(Fi,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>k(N),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",title:"Hapus",children:i.jsx(Sn,{className:"w-4 h-4"})})]})]})]}),T=({quests:N})=>i.jsx("div",{className:"space-y-2",children:N.length>0?N.map(D=>i.jsx(j,{quest:D},D.id)):i.jsx("p",{className:"text-sm italic text-gray-400 dark:text-gray-500 py-2 px-3",children:"Belum ada misi di bagian ini."})}),E=N=>{const D=h.has(N.id);return i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl overflow-hidden border dark:border-gray-700/50",children:[i.jsxs("button",{onClick:()=>v(N.id),className:"w-full flex justify-between items-center p-4 text-left hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[i.jsx("h4",{className:"font-bold text-lg text-primary dark:text-indigo-400",children:N.title}),i.jsx(Ho,{className:`w-6 h-6 text-gray-500 dark:text-gray-400 transition-transform ${D?"rotate-180":""}`})]}),D&&i.jsxs("div",{className:"px-4 pb-4 animate-fade-in-down space-y-4",children:[N.description&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 border-b dark:border-gray-700 pb-3 mb-3",children:N.description}),N.quests.length>0&&i.jsx(T,{quests:N.quests}),N.subChapters.length>0&&i.jsx("div",{className:"space-y-3 mt-4 ml-4 pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:N.subChapters.map(U=>i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:U.title}),U.description&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:U.description}),i.jsx(T,{quests:U.quests})]},U.id))})]})]},N.id)};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold",children:l}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>y(!0),disabled:b,className:"flex items-center gap-2 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-900 text-blue-700 dark:text-blue-300 font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",title:"Buat ulang metadata misi untuk optimisasi",children:[i.jsx(mr,{className:`w-5 h-5 ${b?"animate-spin":""}`}),i.jsx("span",{children:b?"Menyinkronkan...":"Sinkronkan Metadata"})]}),i.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[i.jsx(Kn,{className:"w-5 h-5"}),i.jsx("span",{children:"Tambah Misi Baru"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[g.length>0?g.map(E):x.length===0&&i.jsx("div",{className:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg border dark:border-gray-700",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Belum ada bab atau misi yang dibuat."})}),x.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"font-bold text-lg text-gray-600 dark:text-gray-400 mb-3 border-b dark:border-gray-700 pb-2",children:"Misi Tanpa Bab"}),i.jsx("div",{className:"space-y-3 pt-3",children:i.jsx(T,{quests:x})})]})]}),i.jsx(Rt,{isOpen:!!f,onClose:()=>d(null),onConfirm:S,title:"Konfirmasi Hapus Misi",message:`Apakah Anda yakin ingin menghapus misi "${f==null?void 0:f.title}"? Aksi ini tidak dapat diurungkan.`}),i.jsx(Rt,{isOpen:w,onClose:()=>y(!1),onConfirm:C,title:"Konfirmasi Sinkronisasi Metadata",message:"Aksi ini akan membaca semua data misi lengkap dari '/quests' dan membuat/menimpa data di '/quests_metadata'. Ini berguna untuk migrasi data awal atau memperbaiki metadata yang rusak. Lanjutkan?",confirmText:"Ya, Sinkronkan",confirmIcon:i.jsx(mr,{className:"w-5 h-5"}),confirmButtonClass:"bg-blue-600 hover:bg-blue-700"})]})},yD=({user:t,quests:e,onClose:n,onResetQuestProgress:a,onUnlockPlayer:s})=>{const[r,l]=p.useState(null),[o,c]=p.useState(!1),u=p.useMemo(()=>{if(!t.completedQuests)return[];const b=new Map(e.map(_=>[_.id,_]));return Object.keys(t.completedQuests).map(_=>{const w=b.get(_),y=t.completedQuests[_];return w&&y&&typeof y.score=="number"?{quest:w,score:y.score}:null}).filter(_=>_!==null)},[t.completedQuests,e]),f=p.useMemo(()=>t.activeQuestId?e.find(b=>b.id===t.activeQuestId):null,[t.activeQuestId,e]),d=Us(t.avatarId),h=async()=>{r&&(await a(t.id,r.id),l(null))},m=async()=>{await s(t.id),c(!1)};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:n,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg transform transition-all flex flex-col",onClick:b=>b.stopPropagation(),children:[i.jsxs("div",{className:"p-6 pt-10",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-grow flex flex-col sm:flex-row items-center sm:items-start text-center sm:text-left gap-6",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center p-2 flex-shrink-0 border-4 border-white dark:border-gray-700 shadow-md -mt-16",children:i.jsx(d,{className:"w-20 h-20"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h2",{className:"text-2xl font-bold text-primary dark:text-indigo-400",children:Je(t.name)}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:t.rank}),i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-accent/10 text-accent dark:text-amber-400 font-bold text-lg py-1 px-4 rounded-full",children:[i.jsx(Mt,{className:"w-5 h-5"}),i.jsxs("span",{children:[t.xp," XP"]})]})]})]}),i.jsx("button",{onClick:n,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:i.jsx(lt,{className:"w-6 h-6"})})]}),f&&i.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[i.jsx("h4",{className:"font-bold text-yellow-800 dark:text-yellow-200",children:"Pemain Terkunci"}),i.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:["Pemain ini sedang terkunci di misi utama: ",i.jsx("strong",{children:f.title}),"."]}),i.jsxs("button",{onClick:()=>c(!0),className:"mt-3 w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx(rx,{className:"w-5 h-5"}),"Buka Kunci Pemain"]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:[i.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-3",children:["Misi Selesai (",u.length,")"]}),i.jsx("div",{className:"max-h-80 overflow-y-auto pr-2 space-y-2",children:u.length>0?u.map(({quest:b,score:_})=>i.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-green-50 dark:bg-green-900/50 rounded-md group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(_e,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-green-800 dark:text-green-200",children:b.title}),i.jsxs("p",{className:"text-sm text-green-700/80 dark:text-green-300/80",children:["Skor: ",_," XP"]})]})]}),i.jsx("button",{onClick:()=>l(b),className:"p-1.5 bg-red-100 text-red-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900",title:`Reset progres ${b.title}`,children:i.jsx(Sn,{className:"w-4 h-4"})})]},b.id)):i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Belum ada misi yang diselesaikan."})})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-3 flex justify-end rounded-b-2xl border-t border-gray-200 dark:border-gray-700 mt-auto",children:i.jsx("button",{onClick:n,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Tutup"})})]})}),i.jsx(Rt,{isOpen:!!r,onClose:()=>l(null),onConfirm:h,title:"Konfirmasi Reset Progres",message:`Anda yakin ingin mereset progres "${r==null?void 0:r.title}" untuk pemain ${Je(t.name)}? Tindakan ini akan menghapus skor dan mengembalikan XP yang didapat.`,confirmText:"Ya, Reset",confirmIcon:i.jsx(Sn,{className:"w-5 h-5"}),confirmButtonClass:"bg-red-600 hover:bg-red-700"}),i.jsx(Rt,{isOpen:o,onClose:()=>c(!1),onConfirm:m,title:"Konfirmasi Buka Kunci",message:`Anda yakin ingin membuka kunci pemain ${Je(t.name)}? Ini akan memungkinkan mereka keluar dari misi utama yang sedang berjalan.`,confirmText:"Ya, Buka Kunci",confirmIcon:i.jsx(rx,{className:"w-5 h-5"}),confirmButtonClass:"bg-yellow-500 hover:bg-yellow-600"})]})},xD=({players:t,rooms:e,quests:n,onAdd:a,onEdit:s,onDeactivate:r,onReactivate:l,onImportClick:o,onLoadMore:c,hasNextPage:u,isLoadingMore:f,onResetQuestProgress:d,onUnlockPlayer:h,onRefresh:m})=>{const[b,_]=p.useState("active"),[w,y]=p.useState(null),[g,x]=p.useState(!1),v=p.useMemo(()=>w&&t.find(j=>j.id===w)||null,[w,t]),k=async()=>{x(!0),await m(),x(!1)},S=j=>{var T;return j?((T=e.find(E=>E.id===j))==null?void 0:T.name)||"N/A":"Tanpa Room"},C=p.useMemo(()=>b==="active"?t.filter(j=>!j.disabled):t.filter(j=>j.disabled),[t,b]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Data Pemain"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:k,disabled:g,className:"flex items-center gap-2 bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg transition-colors border border-gray-300 dark:border-gray-600 shadow-sm disabled:opacity-50",title:"Muat ulang data pemain",children:[i.jsx(mr,{className:`w-5 h-5 ${g?"animate-spin":""}`}),i.jsx("span",{className:"hidden sm:inline",children:g?"Memuat...":"Refresh"})]}),i.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[i.jsx(Y1,{className:"w-5 h-5"}),i.jsx("span",{children:"Impor dari Excel"})]}),i.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[i.jsx(Kn,{className:"w-5 h-5"}),i.jsx("span",{children:"Tambah Pemain"})]})]})]}),i.jsx("div",{className:"mb-4 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>_("active"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${b==="active"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-500"}`,children:"Pemain Aktif"}),i.jsx("button",{onClick:()=>_("inactive"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${b==="inactive"?"border-primary text-primary dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-500"}`,children:"Pemain Nonaktif"})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 rounded-l-md",children:"Nama Pemain"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Room"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"Progress"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"XP"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center rounded-r-md",children:"Aksi"})]})}),i.jsx("tbody",{children:C.length>0?C.map((j,T)=>{const E=Us(j.avatarId),N=Object.keys(j.completedQuests||{}).length;return i.jsxs("tr",{className:`${T%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/30"} border-t dark:border-gray-700`,children:[i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center flex-shrink-0",children:i.jsx(E,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-primary dark:text-indigo-400",children:Je(j.name)}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:j.username})]})]})}),i.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:S(j.roomId)}),i.jsxs("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400 font-medium",children:[N," / ",n.length]}),i.jsx("td",{className:"p-3 text-center font-bold text-accent dark:text-amber-400",children:j.xp}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>y(j.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",title:"Lihat Detail",children:i.jsx(ps,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>s(j),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:i.jsx(Fi,{className:"w-4 h-4"})}),b==="active"?i.jsx("button",{onClick:()=>r(j),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",title:"Nonaktifkan",children:i.jsx(X1,{className:"w-4 h-4"})}):i.jsx("button",{onClick:()=>l(j),className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-full",title:"Aktifkan Kembali",children:i.jsx(K1,{className:"w-4 h-4"})})]})})]},j.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:b==="active"?"Belum ada data pemain aktif.":"Tidak ada pemain yang dinonaktifkan."})})})]})})}),u&&i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:c,disabled:f,className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-2 px-6 rounded-lg transition-colors disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-wait",children:f?"Memuat...":"Muat Lebih Banyak"})})]}),v&&i.jsx(yD,{user:v,quests:n,onClose:()=>y(null),onResetQuestProgress:d,onUnlockPlayer:h})]})},Br="text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200",zr="block text-base font-semibold text-gray-800 dark:text-gray-200",bD=({onClose:t,onSave:e,playerToEdit:n,rooms:a,ranks:s})=>{const[r,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(""),[d,h]=p.useState(""),[m,b]=p.useState(""),[_,w]=p.useState(Fn.MALE),[y,g]=p.useState("knight"),[x,v]=p.useState(null),k=!!n;p.useEffect(()=>{n?(l(n.name),c(n.nisn||""),f(n.email||""),h(n.username||""),w(n.gender||Fn.MALE),g(n.avatarId),b("")):(l(""),c(""),f(""),h(""),b(""),w(Fn.MALE),g("knight")),v(null)},[n]);const S=p.useMemo(()=>{const T=_===Fn.MALE?"male":"female";return sp.filter(E=>E.gender===T||E.gender==="unisex")},[_]);p.useEffect(()=>{var E;S.some(N=>N.id===y)||g(((E=S[0])==null?void 0:E.id)||"knight")},[_,y,S]);const C=T=>{if(T.preventDefault(),v(null),!r.trim()||!o.trim()||!u.trim()||!d.trim()){v("Semua field wajib diisi (kecuali password saat edit).");return}if(!n&&(!m.trim()||m.length<6)){v("Password wajib diisi dan minimal 6 karakter untuk pemain baru.");return}e({id:n==null?void 0:n.id,name:r,nisn:o,email:u,username:d,gender:_,avatarId:y,questAttempts:(n==null?void 0:n.questAttempts)||{}},m)},j=T=>E=>{T(E.target.value),x&&v(null)};return i.jsx("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900","aria-modal":"true",role:"dialog",children:i.jsxs("form",{onSubmit:C,className:"flex flex-col h-full",children:[i.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("button",{type:"button",onClick:t,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[i.jsx(gr,{className:"w-5 h-5"}),"Batal"]}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n?"Edit Data Pemain":"Tambah Pemain Baru"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[x&&i.jsx("p",{className:"text-red-500 text-sm font-semibold",children:x}),i.jsxs("button",{type:"submit",className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[i.jsx(Ca,{className:"w-5 h-5"})," Simpan Pemain"]})]})]}),i.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:i.jsxs("div",{className:"w-full space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700 space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Informasi Pribadi"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"player-name",className:zr,children:"Nama Lengkap Pemain"}),i.jsx("input",{id:"player-name",type:"text",value:r,onChange:j(l),required:!0,className:Br})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"player-nisn",className:zr,children:"NISN"}),i.jsx("input",{id:"player-nisn",type:"text",value:o,onChange:j(c),required:!0,className:Br})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"player-gender",className:zr,children:"Gender"}),i.jsxs("select",{id:"player-gender",value:_,onChange:T=>w(T.target.value),className:Br,children:[i.jsx("option",{value:Fn.MALE,children:"Pria"}),i.jsx("option",{value:Fn.FEMALE,children:"Wanita"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700 space-y-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Informasi Akun"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"player-email",className:zr,children:"Email"}),i.jsx("input",{id:"player-email",type:"email",value:u,onChange:j(f),required:!0,className:Br})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"player-username",className:zr,children:"Username"}),i.jsx("input",{id:"player-username",type:"text",value:d,onChange:j(h),required:!0,className:Br})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"player-password",className:zr,children:k?"Password Baru (opsional)":"Password"}),i.jsx("input",{id:"player-password",type:"password",value:m,onChange:j(b),required:!k,className:Br,placeholder:k?"Kosongkan jika tidak ingin diubah":"Minimal 6 karakter"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Avatar"}),i.jsx("div",{className:"flex items-center gap-3 flex-wrap bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg max-h-48 overflow-y-auto",children:S.map(T=>{const E=y===T.id;return i.jsx("button",{type:"button",onClick:()=>g(T.id),className:`p-1.5 rounded-full transition-all duration-200 ${E?"bg-primary/20 ring-2 ring-primary":"bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500"}`,title:T.name,children:i.jsx(T.component,{className:"w-10 h-10"})},T.id)})})]})]})})]})})},vD=({rooms:t,players:e,onAdd:n,onEdit:a,onDelete:s})=>{const r=l=>e.filter(o=>o.roomId===l).length;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Room"}),i.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[i.jsx(Kn,{className:"w-5 h-5"}),i.jsx("span",{children:"Tambah Room"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full min-w-[600px] text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Nama Room"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"Jumlah Pemain"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center rounded-r-md",children:"Aksi"})]})}),i.jsx("tbody",{children:t.length>0?t.map((l,o)=>i.jsxs("tr",{className:`${o%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/30"} border-t dark:border-gray-700`,children:[i.jsx("td",{className:"p-3 font-semibold text-primary dark:text-indigo-400",children:l.name}),i.jsx("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400",children:r(l.id)}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>a(l),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:i.jsx(Fi,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>s(l),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",title:"Hapus",children:i.jsx(Sn,{className:"w-4 h-4"})})]})})]},l.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:"Belum ada data room. Silakan tambahkan room baru."})})})]})})})]})},_D="text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200",wD="block text-base font-semibold text-gray-800 dark:text-gray-200",Ab=({player:t,onAction:e,actionIcon:n,actionTitle:a})=>{const s=Us(t.avatarId);return i.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-700 p-2 rounded shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center flex-shrink-0",children:i.jsx(s,{className:"w-7 h-7"})}),i.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-sm",children:Je(t.name)})]}),i.jsx("button",{type:"button",onClick:e,title:a,className:"p-1 text-primary dark:text-indigo-400 hover:bg-primary/10 dark:hover:bg-primary/20 rounded-full",children:n})]})},kD=({onClose:t,onSave:e,roomToEdit:n,allPlayers:a})=>{const[s,r]=p.useState(""),[l,o]=p.useState([]),[c,u]=p.useState(""),[f,d]=p.useState("");p.useEffect(()=>{n?(r(n.name),o(a.filter(y=>y.roomId===n.id).map(y=>y.id))):(r(""),o([]))},[n,a]);const h=y=>{l.includes(y)||o([...l,y])},m=y=>{o(l.filter(g=>g!==y))},b=p.useMemo(()=>a.filter(y=>l.includes(y.id)).filter(y=>y.name.toLowerCase().includes(c.toLowerCase())),[l,a,c]),_=p.useMemo(()=>a.filter(y=>(!y.roomId||y.roomId===(n==null?void 0:n.id))&&!l.includes(y.id)).filter(y=>y.name.toLowerCase().includes(f.toLowerCase())),[a,n,l,f]),w=y=>{y.preventDefault(),s.trim()&&e({id:n==null?void 0:n.id,name:s},l)};return i.jsx("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900","aria-modal":"true",role:"dialog",children:i.jsxs("form",{onSubmit:w,className:"flex flex-col h-full",children:[i.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("button",{type:"button",onClick:t,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[i.jsx(gr,{className:"w-5 h-5"}),"Batal"]}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n?"Edit Room":"Tambah Room Baru"})]}),i.jsxs("button",{type:"submit",className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[i.jsx(Ca,{className:"w-5 h-5"})," Simpan Perubahan"]})]}),i.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("label",{htmlFor:"room-name",className:wD,children:"Nama Room"}),i.jsx("input",{id:"room-name",type:"text",value:s,onChange:y=>r(y.target.value),required:!0,autoFocus:!0,className:_D,placeholder:"Contoh: Grup Ksatria"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Kelola Anggota Room"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-md border dark:border-gray-700",children:[i.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:['Anggota di "',s||"Room Baru",'" (',b.length,")"]}),i.jsx("input",{type:"text",placeholder:"Cari anggota...",value:c,onChange:y=>u(y.target.value),className:"w-full text-sm px-3 py-2 mb-3 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50"}),i.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:b.length>0?b.map(y=>i.jsx(Ab,{player:y,onAction:()=>m(y.id),actionTitle:"Keluarkan",actionIcon:i.jsx(i5,{className:"w-5 h-5"})},y.id)):i.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 italic py-4 text-sm",children:"Pindahkan pemain dari kanan ke sini."})})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-md border dark:border-gray-700",children:[i.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:["Pemain Tersedia (",_.length,")"]}),i.jsx("input",{type:"text",placeholder:"Cari pemain...",value:f,onChange:y=>d(y.target.value),className:"w-full text-sm px-3 py-2 mb-3 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50"}),i.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:_.length>0?_.map(y=>i.jsx(Ab,{player:y,onAction:()=>h(y.id),actionTitle:"Tambahkan",actionIcon:i.jsx(gr,{className:"w-5 h-5"})},y.id)):i.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 italic py-4 text-sm",children:"Tidak ada pemain yang tersedia."})})]})]})]})]})})]})})},CD=({isOpen:t,onClose:e,onSave:n,rankToEdit:a})=>{const[s,r]=p.useState(""),[l,o]=p.useState(0);if(p.useEffect(()=>{t&&a?(r(a.name),o(a.xpThreshold)):t&&(r(""),o(0))},[a,t]),!t)return null;const c=u=>{u.preventDefault(),s.trim()&&l>=0&&n({name:s.trim(),xpThreshold:Number(l)})};return i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in","aria-modal":"true",role:"dialog",onClick:e,children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md transform transition-all",onClick:u=>u.stopPropagation(),children:i.jsxs("form",{onSubmit:c,children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a?"Edit Peringkat":"Tambah Peringkat Baru"}),i.jsx("button",{type:"button",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Tutup",children:i.jsx(lt,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"rank-name",className:"block text-base font-semibold text-gray-800 dark:text-gray-200",children:"Nama Peringkat"}),i.jsx("input",{id:"rank-name",type:"text",value:s,onChange:u=>r(u.target.value),required:!0,autoFocus:!0,className:"text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200 disabled:bg-gray-100 dark:disabled:bg-gray-600",placeholder:"Contoh: Master Kode"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"rank-xp",className:"block text-base font-semibold text-gray-800 dark:text-gray-200",children:"Ambang Batas XP"}),i.jsx("input",{id:"rank-xp",type:"number",value:l,onChange:u=>o(Number(u.target.value)),required:!0,min:"0",disabled:(a==null?void 0:a.xpThreshold)===0,className:"text-base px-4 py-2.5 mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-2 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border transition-shadow duration-200 disabled:bg-gray-100 dark:disabled:bg-gray-600"}),(a==null?void 0:a.xpThreshold)===0&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Ambang batas 0 XP untuk peringkat awal tidak dapat diubah."})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-4 flex justify-end gap-3 rounded-b-2xl border-t dark:border-gray-700",children:[i.jsx("button",{type:"button",onClick:e,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors",children:"Batal"}),i.jsxs("button",{type:"submit",className:"flex items-center gap-2 font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[i.jsx(Ca,{className:"w-5 h-5"}),"Simpan"]})]})]})})})},ND=({ranks:t,quests:e,onUpdateRanks:n,onShowAlert:a,showToast:s})=>{const[r,l]=p.useState(!1),[o,c]=p.useState(!1),[u,f]=p.useState(null),[d,h]=p.useState(null),m=[...t].sort((v,k)=>v.xpThreshold-k.xpThreshold),b=p.useMemo(()=>e.reduce((v,k)=>v+k.xp,0),[e]),_=()=>{f(null),l(!0)},w=v=>{f(v),l(!0)},y=v=>{if(v.xpThreshold===0){a("Aksi Ditolak","Peringkat awal dengan 0 XP tidak dapat dihapus.");return}h(v),c(!0)},g=()=>{d&&(n(t.filter(v=>v.name!==d.name)),s("Berhasil Dihapus",`Peringkat "${d.name}" telah dihapus.`,i.jsx(_e,{className:"w-5 h-5 text-green-500"})),c(!1),h(null))},x=v=>{let k;if(u)k=t.map(j=>j.name===u.name?v:j);else{if(t.some(j=>j.name.toLowerCase()===v.name.toLowerCase().trim())){a("Nama Duplikat",`Peringkat dengan nama "${v.name}" sudah ada.`);return}k=[...t,v]}n(k);const S=u?"Berhasil Diperbarui":"Berhasil Ditambahkan",C=u?`Peringkat "${v.name}" berhasil diperbarui.`:`Peringkat "${v.name}" berhasil ditambahkan.`;s(S,C,i.jsx(_e,{className:"w-5 h-5 text-green-500"})),l(!1)};return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg border border-blue-200 dark:border-blue-700 flex items-start gap-4",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full text-blue-600 dark:text-blue-300 flex-shrink-0",children:i.jsx(Mt,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg text-blue-900 dark:text-blue-100",children:"Informasi XP Misi"}),i.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:["Total XP maksimal yang bisa didapat pemain adalah: ",i.jsxs("strong",{className:"text-2xl",children:[b," XP"]})]}),i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Gunakan angka ini sebagai acuan untuk menentukan rentang XP pada setiap gelar peringkat."})]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Peringkat"}),i.jsxs("button",{onClick:_,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:[i.jsx(Kn,{className:"w-5 h-5"}),i.jsx("span",{children:"Tambah Peringkat"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full min-w-[600px] text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Nama Peringkat"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center",children:"Rentang XP"}),i.jsx("th",{className:"p-3 font-semibold text-gray-700 dark:text-gray-300 text-center rounded-r-md",children:"Aksi"})]})}),i.jsx("tbody",{children:m.length>0?m.map((v,k)=>{const S=m[k+1];return i.jsxs("tr",{className:`${k%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/30"} border-t dark:border-gray-700`,children:[i.jsx("td",{className:"p-3 font-semibold text-primary dark:text-indigo-400",children:v.name}),i.jsx("td",{className:"p-3 text-center",children:S?i.jsxs("div",{children:[i.jsx("div",{className:"w-3/4 max-w-xs mx-auto bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-primary h-2 rounded-full"})}),i.jsxs("span",{className:"text-xs font-mono mt-1.5 block text-gray-600 dark:text-gray-400",children:[v.xpThreshold,"  ",S.xpThreshold-1," XP"]})]}):i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Mt,{className:"w-4 h-4 text-accent dark:text-amber-400"}),i.jsxs("span",{className:"font-bold text-accent dark:text-amber-400",children:[v.xpThreshold,"+ XP"]})]})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>w(v),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",title:"Edit",children:i.jsx(Fi,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>y(v),disabled:v.xpThreshold===0,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full disabled:opacity-50 disabled:cursor-not-allowed",title:v.xpThreshold===0?"Tidak dapat dihapus":"Hapus",children:i.jsx(Sn,{className:"w-4 h-4"})})]})})]},v.name)}):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:"Belum ada data peringkat."})})})]})})}),i.jsx(CD,{isOpen:r,onClose:()=>l(!1),onSave:x,rankToEdit:u}),i.jsx(Rt,{isOpen:o,onClose:()=>c(!1),onConfirm:g,title:"Konfirmasi Hapus Peringkat",message:`Apakah Anda yakin ingin menghapus peringkat "${d==null?void 0:d.name}"? Aksi ini akan mempengaruhi semua pemain.`})]})},SD=({isOpen:t,onClose:e,onImport:n,existingUsers:a})=>{const[s,r]=p.useState([]),[l,o]=p.useState(null),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(!1),[b,_]=p.useState(null),w=()=>{r([]),o(null),u(null),d(!1),m(!1),_(null)},y=()=>{h||(w(),e())},g=async()=>{const C=window.XLSX||await kn(()=>import("./xlsx-D_0l8YDs.js"),[]),j=["name","nisn","email","username","password"],T=[{name:"Budi Santoso",nisn:"1234567890",email:"budi.s@email.com",username:"budisan",password:"password123"}],E=C.utils.json_to_sheet(T,{header:j}),N=C.utils.book_new();C.utils.book_append_sheet(N,E,"Pemain"),C.writeFile(N,"Template_Import_Pemain.xlsx")},x=async C=>{var T;w();const j=(T=C.target.files)==null?void 0:T[0];if(j){o(j.name),d(!0);try{const E=window.XLSX||await kn(()=>import("./xlsx-D_0l8YDs.js"),[]),N=new FileReader;N.onload=D=>{var U;try{const $=new Uint8Array((U=D.target)==null?void 0:U.result),W=E.read($,{type:"array"}),I=W.Sheets[W.SheetNames[0]],H=E.utils.sheet_to_json(I);if(H.length===0){u("File Excel kosong atau format tidak sesuai."),d(!1);return}const O=H.map((z,B)=>{const{name:Y,nisn:ee,email:P,username:V,password:se}=z;return!Y||!ee||!P||!V||!se?{...z,_status:"error",_error:"Semua kolom (name, nisn, email, username, password) wajib diisi."}:String(se).length<6?{...z,_status:"error",_error:"Password harus minimal 6 karakter."}:a.some(me=>me.email===P)||H.slice(0,B).some(me=>me.email===P)?{...z,_status:"error",_error:`Email "${P}" sudah digunakan.`}:a.some(me=>me.username===V)||H.slice(0,B).some(me=>me.username===V)?{...z,_status:"error",_error:`Username "${V}" sudah digunakan.`}:{name:Y,nisn:String(ee),email:P,username:V,password:String(se),_status:"valid"}});r(O)}catch($){console.error($),u("Gagal memproses file. Pastikan format file benar.")}finally{d(!1)}},N.onerror=()=>{u("Gagal membaca file."),d(!1)},N.readAsArrayBuffer(j)}catch(E){console.error("Failed to load XLSX library:",E),u("Gagal memuat pustaka pemrosesan Excel."),d(!1)}}},v=p.useMemo(()=>s.filter(C=>C._status==="valid"),[s]),k=async()=>{if(v.length>0){m(!0);try{const C=await n(v);_(C)}catch(C){_(`Terjadi kesalahan saat impor: ${C.message}`)}finally{m(!1)}}};if(!t)return null;const S=()=>i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("header",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center flex-shrink-0",children:i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Hasil Impor"})}),i.jsxs("main",{className:"flex-grow flex flex-col items-center justify-center text-center p-6",children:[i.jsx(_e,{className:"w-16 h-16 text-green-500 mb-4"}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Proses Selesai"}),i.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300 max-w-md whitespace-pre-wrap",children:b})]}),i.jsx("footer",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t dark:border-gray-700 flex-shrink-0 flex justify-end",children:i.jsx("button",{onClick:y,className:"font-bold py-2 px-6 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:"Selesai"})})]});return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 animate-fade-in",onClick:y,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 w-screen h-screen flex flex-col relative",onClick:C=>C.stopPropagation(),children:[h&&i.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm flex flex-col items-center justify-center z-10 transition-opacity duration-300",children:[i.jsxs("svg",{className:"animate-spin h-10 w-10 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("p",{className:"mt-4 text-lg font-semibold text-primary dark:text-indigo-400 animate-pulse",children:"Mengimpor pemain, mohon tunggu..."})]}),b?i.jsx(S,{}):i.jsxs(i.Fragment,{children:[i.jsxs("header",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center flex-shrink-0",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Impor Pemain dari Excel"}),i.jsx("button",{onClick:y,disabled:h,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:i.jsx(lt,{className:"w-6 h-6"})})]}),i.jsxs("main",{className:"p-6 flex-grow overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg dark:text-gray-100",children:"Langkah 1: Unduh dan Isi Templat"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-3",children:"Gunakan templat ini untuk memastikan format data Anda benar. Semua kolom wajib diisi."}),i.jsxs("button",{onClick:g,className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[i.jsx(Jg,{className:"w-5 h-5"}),i.jsx("span",{children:"Unduh Templat Excel"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg dark:text-gray-100",children:"Langkah 2: Unggah File"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-3",children:"Pilih file Excel (.xlsx) yang sudah Anda isi untuk memulai proses validasi."}),i.jsxs("label",{className:"flex items-center justify-center w-full px-4 py-3 bg-gray-50 dark:bg-gray-700/50 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[i.jsx(Y1,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"}),i.jsx("span",{className:"ml-2 font-semibold text-gray-600 dark:text-gray-300",children:l||"Pilih File untuk Diunggah"}),i.jsx("input",{type:"file",className:"hidden",accept:".xlsx, .xls",onChange:x})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"font-bold text-lg dark:text-gray-100",children:"Langkah 3: Pratinjau dan Validasi"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-3",children:'Periksa data di bawah ini. Hanya baris dengan status "Valid" yang akan diimpor.'}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg border dark:border-gray-700 max-h-80 overflow-y-auto",children:f?i.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Memproses file..."}):c?i.jsx("p",{className:"p-4 text-center text-red-600",children:c}):s.length>0?i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-200 dark:bg-gray-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Nama"}),i.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Email"}),i.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Username"}),i.jsx("th",{className:"p-2 text-left font-semibold text-gray-900 dark:text-gray-100",children:"Status"})]})}),i.jsx("tbody",{children:s.map((C,j)=>i.jsxs("tr",{className:j%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-800/50",children:[i.jsx("td",{className:"p-2 text-gray-800 dark:text-gray-200",children:C.name}),i.jsx("td",{className:"p-2 text-gray-800 dark:text-gray-200",children:C.email}),i.jsx("td",{className:"p-2 text-gray-800 dark:text-gray-200",children:C.username}),i.jsx("td",{className:"p-2",children:C._status==="valid"?i.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-full",children:"Valid"}):i.jsx("span",{className:"px-2 py-1 text-xs font-medium text-red-800 bg-red-100 rounded-full",title:C._error,children:"Error"})})]},j))})]}):i.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Pratinjau data akan muncul di sini setelah file diunggah."})})]})]}),i.jsxs("footer",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t dark:border-gray-700 flex-shrink-0 flex justify-end items-center gap-3",children:[i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mr-auto",children:[v.length," dari ",s.length," pemain siap untuk diimpor."]}),i.jsx("button",{onClick:y,disabled:h,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Batal"}),i.jsx("button",{onClick:k,disabled:v.length===0||f||h,className:"flex items-center gap-2 font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",children:h?"Mengimpor...":`Impor ${v.length} Pemain`})]})]})]})})},ED={submitted:{text:"Menunggu Penilaian",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",icon:Cd},approved:{text:"Disetujui",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-200",icon:_e},rejected:{text:"Ditolak",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-200",icon:lt},none:{text:"Belum Diajukan",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",icon:()=>null}},jD=({file:t,user:e,showToast:n,handleUpdatePlayerCodeFile:a})=>{const{isPyodideLoading:s,isExecuting:r,outputLines:l,runCode:o,...c}=x0(),[u,f]=p.useState(t.masterComment||""),[d,h]=p.useState(t.bonusXp||0),[m,b]=p.useState(!1),[_,w]=p.useState(null),y=p.useMemo(()=>t.reviewStatus==="approved"||t.reviewStatus==="rejected",[t]);p.useEffect(()=>{f(t.masterComment||""),h(t.bonusXp||0),c.clearOutput()},[t]);const g=async S=>{const C={masterComment:u,reviewStatus:S};let j=0;S==="approved"&&d>0&&(C.bonusXp=d,j=d),await a(e.id,t.id,C,j)},x=()=>{_&&(g(_.action),w(null))},v=async()=>{const S={reviewStatus:"submitted",masterComment:""};try{await a(e.id,t.id,S,0),h(0),b(!1)}catch{n("Gagal","Gagal mereset penilaian.",i.jsx(lt,{className:"w-5 h-5 text-red-500"})),b(!1)}},k=ED[t.reviewStatus||"none"];return i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-3",children:[i.jsx("input",{type:"text",value:t.name,readOnly:!0,className:"flex-grow w-full px-3 py-2 bg-gray-200 dark:bg-gray-600 border rounded-md font-mono text-sm dark:text-gray-400 text-gray-500"}),i.jsx("button",{onClick:()=>o(t.code),disabled:r||s,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-secondary text-white font-bold py-2 px-4 rounded-lg hover:bg-secondary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:s?"Memuat...":r?"Menjalankan...":"Jalankan Kode"})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsx("div",{className:"lg:w-3/5 min-h-[420px]",children:i.jsx(Os,{code:t.code,readOnly:!0,height:"min-h-[420px]"})}),i.jsx("div",{className:"lg:w-2/5 flex flex-col gap-4 min-h-[420px]",children:i.jsx("div",{className:"flex-grow min-h-0 h-full",children:i.jsx(b0,{outputLines:l,...c,height:"min-h-[420px]"})})})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-gray-700 flex-shrink-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Komentar & Penilaian"}),(t==null?void 0:t.reviewStatus)!=="none"&&i.jsxs("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 ${k.color}`,children:[i.jsx(k.icon,{className:"w-4 h-4"}),k.text]})]}),i.jsx("textarea",{value:u,onChange:S=>f(S.target.value),disabled:y,placeholder:"Tulis feedback...",className:"w-full h-24 p-2 text-sm rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 disabled:bg-gray-200 dark:disabled:bg-gray-600"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300",children:"XP Tambahan"}),i.jsx("input",{type:"number",value:d,onChange:S=>h(Math.max(0,Number(S.target.value))),disabled:y,min:"0",className:"mt-1 w-full p-2 text-sm rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-gray-200 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 disabled:bg-gray-200 dark:disabled:bg-gray-600"})]}),y&&(t==null?void 0:t.bonusXp)>0&&i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1 font-semibold",children:["+",t.bonusXp," XP telah diberikan."]}),i.jsx("div",{className:"mt-2",children:y?i.jsx("div",{className:"pt-2 border-t dark:border-gray-600",children:i.jsxs("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-center gap-2 bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-600 transition",children:[i.jsx(mr,{className:"w-5 h-5"}),"Reset Penilaian"]})}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>w({isOpen:!0,action:"approved"}),className:"flex-1 flex items-center justify-center gap-2 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition",children:[i.jsx(_e,{className:"w-5 h-5"}),"Setujui"]}),i.jsxs("button",{onClick:()=>w({isOpen:!0,action:"rejected"}),className:"flex-1 flex items-center justify-center gap-2 bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition",children:[i.jsx(lt,{className:"w-5 h-5"}),"Tolak"]})]})})]}),(_==null?void 0:_.isOpen)&&i.jsx(Rt,{isOpen:_.isOpen,onClose:()=>w(null),onConfirm:x,title:_.action==="approved"?"Konfirmasi Persetujuan":"Konfirmasi Penolakan",message:_.action==="approved"?`Setujui file ini ${d>0?`dan berikan ${d} XP tambahan. `:""}Pastikan komentar final.`:"Yakin ingin menolak file ini? Pastikan komentar final.",confirmText:_.action==="approved"?"Ya, Setujui":"Ya, Tolak",confirmIcon:_.action==="approved"?i.jsx(_e,{className:"w-5 h-5"}):i.jsx(lt,{className:"w-5 h-5"}),confirmButtonClass:_.action==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}),i.jsx(Rt,{isOpen:m,onClose:()=>b(!1),onConfirm:v,title:"Konfirmasi Reset Penilaian",message:"Ini akan mengembalikan status file ke 'Menunggu Penilaian' dan menarik kembali bonus XP yang telah diberikan.",confirmText:"Ya, Reset",confirmIcon:i.jsx(mr,{className:"w-5 h-5"}),confirmButtonClass:"bg-yellow-500 hover:bg-yellow-600"})]})},TD={submitted:{icon:Cd,text:"Menunggu Penilaian",color:"text-yellow-500"},approved:{icon:_e,text:"Disetujui",color:"text-green-500"},rejected:{icon:lt,text:"Ditolak",color:"text-red-500"},none:{icon:()=>null,text:"",color:""}},AD=({players:t,showToast:e,handleUpdatePlayerCodeFile:n})=>{const[a,s]=p.useState(null),[r,l]=p.useState(null),[o,c]=p.useState([]),[u,f]=p.useState([]),[d,h]=p.useState(!0);p.useEffect(()=>{h(!0),zO().then(w=>{c(w),h(!1)}).catch(w=>{console.error("Gagal mengambil ID pemain:",w),h(!1)})},[]),p.useEffect(()=>{if(!a){f([]);return}f([]);const w=VC(a.id,y=>{const g=y.filter(x=>x.reviewStatus&&x.reviewStatus!=="none");g.sort((x,v)=>x.reviewStatus==="submitted"&&v.reviewStatus!=="submitted"?-1:x.reviewStatus!=="submitted"&&v.reviewStatus==="submitted"?1:x.name.localeCompare(v.name)),f(g)});return()=>w()},[a]);const m=p.useMemo(()=>{const w=new Set(o);return t.filter(y=>w.has(y.id)).sort((y,g)=>Je(y.name).localeCompare(Je(g.name)))},[t,o]),b=w=>{s(w),l(null)},_=p.useMemo(()=>!a||!r?null:u.find(w=>w.id===r)??null,[a,r,u]);return _&&a?i.jsxs("div",{className:"animate-fade-in flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[i.jsxs("button",{onClick:()=>l(null),className:"flex items-center gap-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:[i.jsx(gr,{className:"w-5 h-5"}),"Kembali"]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Melihat file dari:"}),i.jsx("p",{className:"text-primary dark:text-indigo-400 font-bold",children:Je(a.name)})]})]}),i.jsx("div",{className:"flex-grow min-h-0",children:i.jsx(jD,{file:_,user:a,handleUpdatePlayerCodeFile:n,showToast:e})})]}):d?i.jsx("div",{className:"text-center p-8",children:"Memuat data file kode..."}):i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Arsip Kode Pemain"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800/50 p-4 rounded-lg border dark:border-gray-700 h-full max-h-[75vh] overflow-y-auto",children:[i.jsx("h4",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200 mb-3",children:"Pilih Pemain"}),m.length>0?i.jsx("ul",{className:"space-y-2",children:m.map(w=>{const y=Us(w.avatarId);return i.jsx("li",{children:i.jsxs("button",{onClick:()=>b(w),className:`w-full text-left p-2 rounded-md flex items-center gap-3 transition-colors relative ${(a==null?void 0:a.id)===w.id?"bg-primary text-white shadow":"bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border dark:border-gray-600"}`,children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center flex-shrink-0",children:i.jsx(y,{className:"w-8 h-8"})}),i.jsx("div",{children:i.jsx("p",{className:"font-semibold",children:Je(w.name)})})]})},w.id)})}):i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Belum ada pemain yang mengajukan file kode."})]}),i.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800/50 p-4 rounded-lg border dark:border-gray-700 h-full max-h-[75vh] overflow-y-auto",children:a?i.jsxs(i.Fragment,{children:[i.jsxs("h4",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200 mb-3",children:["File milik ",i.jsx("span",{className:"text-primary dark:text-indigo-400",children:Je(a.name)})]}),u.length>0?i.jsx("ul",{className:"space-y-2",children:u.map(w=>{const y=w.reviewStatus&&w.reviewStatus!=="none"?TD[w.reviewStatus]:null;return i.jsx("li",{children:i.jsxs("button",{onClick:()=>l(w.id),className:"w-full text-left p-3 rounded-md bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border dark:border-gray-600 flex items-center justify-between gap-3 transition-shadow hover:shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Jg,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"font-mono font-medium text-gray-800 dark:text-gray-200",children:w.name})]}),y&&(()=>{const g=y.icon;return i.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-semibold ${y.color}`,children:[i.jsx(g,{className:"w-4 h-4"}),i.jsx("span",{children:y.text})]})})()]})},w.id)})}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Pemain ini tidak memiliki file yang diajukan."})})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic text-center py-4",children:"Pilih seorang pemain untuk melihat arsip kode mereka."})})})]})]})},ID=({isOpen:t,onClose:e,onSave:n,chapterToEdit:a,allChapters:s})=>{const[r,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(null);p.useEffect(()=>{a?(l(a.title),c(a.description||""),f(a.parentId||null)):(l(""),c(""),f(null))},[a,t]);const d=m=>{m.preventDefault(),r.trim()&&(n({id:(a==null?void 0:a.id)||`new_${Date.now()}`,title:r.trim(),description:o.trim(),parentId:u||null}),e())},h=s.filter(m=>!m.parentId&&m.id!==(a==null?void 0:a.id));return t?i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:e,children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg",onClick:m=>m.stopPropagation(),children:i.jsxs("form",{onSubmit:d,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a?"Edit Bab":"Tambah Bab Baru"}),i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Judul Bab/Sub-bab"}),i.jsx("input",{type:"text",value:r,onChange:m=>l(m.target.value),required:!0,autoFocus:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Deskripsi (Opsional)"}),i.jsx("textarea",{value:o,onChange:m=>c(m.target.value),rows:3,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Jadikan sebagai Sub-bab dari (Opsional)"}),i.jsxs("select",{value:u||"",onChange:m=>f(m.target.value||null),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",children:[i.jsx("option",{value:"",children:"-- Bab Utama --"}),h.map(m=>i.jsx("option",{value:m.id,children:m.title},m.id))]})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-3 flex justify-end gap-3 rounded-b-2xl",children:[i.jsx("button",{type:"button",onClick:e,className:"font-semibold py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200",children:"Batal"}),i.jsx("button",{type:"submit",className:"font-bold py-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white",children:"Simpan"})]})]})})}):null},RD=()=>{const{showToast:t}=un(),{questChapters:e,handleSaveQuestChapter:n,handleDeleteQuestChapter:a}=tl(),[s,r]=p.useState(!1),[l,o]=p.useState(null),[c,u]=p.useState(null),f=p.useMemo(()=>e.filter(x=>!x.parentId).sort((x,v)=>x.order-v.order).map(x=>({...x,subChapters:e.filter(v=>v.parentId===x.id).sort((v,k)=>v.order-k.order)})),[e]),d=()=>{o(null),r(!0)},h=g=>{o(g),r(!0)},m=g=>{u(g)},b=async()=>{c&&await a(c.id)&&u(null)},_=g=>{if(g.id.startsWith("new_")){const v=e.filter(k=>k.parentId===g.parentId).reduce((k,S)=>Math.max(k,S.order),-1);n({...g,order:v+1})}else{const x=e.find(v=>v.id===g.id);n({...x,...g})}t("Berhasil","Data bab telah disimpan.",i.jsx(_e,{className:"w-5 h-5 text-green-500"}))},w=(g,x)=>{const v=e.filter(S=>S.parentId===g.parentId).sort((S,C)=>S.order-C.order),k=v.findIndex(S=>S.id===g.id);if(x==="up"&&k>0){const S=v[k-1];n({...g,order:S.order}),n({...S,order:g.order})}else if(x==="down"&&k<v.length-1){const S=v[k+1];n({...g,order:S.order}),n({...S,order:g.order})}},y=(g,x,v,k)=>i.jsxs("tr",{className:x?"bg-gray-50/50 dark:bg-gray-700/30":"bg-white dark:bg-gray-800",children:[i.jsxs("td",{className:`p-3 ${x?"pl-8":""}`,children:[i.jsx("p",{className:`font-semibold ${x?"text-gray-700 dark:text-gray-300":"text-primary dark:text-indigo-400"}`,children:g.title}),g.description&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.description})]}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-1",children:[i.jsx("button",{onClick:()=>w(g,"up"),disabled:!v,className:"p-2 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full disabled:opacity-30 disabled:cursor-not-allowed",children:i.jsx(l5,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>w(g,"down"),disabled:!k,className:"p-2 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full disabled:opacity-30 disabled:cursor-not-allowed",children:i.jsx(o5,{className:"w-4 h-4"})})]})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>h(g),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full",children:i.jsx(Fi,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>m(g),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full",children:i.jsx(Sn,{className:"w-4 h-4"})})]})})]},g.id);return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Manajemen Bab Misi"}),i.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg",children:[i.jsx(Kn,{className:"w-5 h-5"}),i.jsx("span",{children:"Tambah Bab"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 font-semibold text-left text-gray-700 dark:text-gray-300 w-3/5",children:"Judul Bab"}),i.jsx("th",{className:"p-3 font-semibold text-center text-gray-700 dark:text-gray-300",children:"Urutan"}),i.jsx("th",{className:"p-3 font-semibold text-center text-gray-700 dark:text-gray-300",children:"Aksi"})]})}),i.jsx("tbody",{children:f.length>0?f.map((g,x)=>i.jsxs(td.Fragment,{children:[y(g,!1,x>0,x<f.length-1),g.subChapters.map((v,k)=>y(v,!0,k>0,k<g.subChapters.length-1))]},g.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"text-center p-6 text-gray-500 dark:text-gray-400 italic",children:"Belum ada bab."})})})]})})}),i.jsx(ID,{isOpen:s,onClose:()=>r(!1),onSave:_,chapterToEdit:l,allChapters:e}),i.jsx(Rt,{isOpen:!!c,onClose:()=>u(null),onConfirm:b,title:"Konfirmasi Hapus Bab",message:`Yakin ingin menghapus bab "${c==null?void 0:c.title}"? ${c&&!c.parentId?"Semua sub-bab di dalamnya juga akan dihapus. ":""}Pastikan tidak ada misi yang terikat pada bab ini.`})]})},Ib=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e},GC=p.memo(({previewResult:t,title:e,description:n,xp:a,material:s,type:r,quizContent:l,codeContent:o,category:c,onPreviewComplete:u,shuffleQuestions:f=!1,shuffleOptions:d=!1,showToast:h})=>{const[m,b]=p.useState(c===he.TUTORIAL&&s?"material":"challenge");p.useEffect(()=>{b(c===he.TUTORIAL&&s?"material":"challenge")},[s,c]);const _=p.useMemo(()=>{let g=[...l];return f&&(g=Ib(g)),d&&(g=g.map(x=>{if(!x.options||x.options.length===0)return x;const v=x.options[x.answerIndex],k=Ib(x.options),S=k.indexOf(v);return{...x,options:k,answerIndex:S}})),g},[l,f,d]),w=()=>{u(),c===he.TUTORIAL&&s&&b("material")},y=g=>{g&&u()};return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t&&i.jsxs("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-r-lg flex items-center gap-3",role:"alert",children:[i.jsx(_e,{className:"w-6 h-6"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:"Uji Coba Berhasil"}),i.jsx("p",{children:t})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[i.jsx("header",{className:"p-4 sm:p-6 flex flex-col sm:flex-row justify-between items-start gap-4 sm:items-center border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-indigo-400",children:e||"[Judul Misi Anda]"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:n||"[Deskripsi singkat misi Anda akan muncul di sini.]"}),i.jsxs("span",{className:"mt-2 inline-block bg-accent/20 text-accent font-bold text-sm px-3 py-1 rounded-full",children:[a||0," XP"]})]})}),i.jsx("main",{className:"px-6 pb-6 sm:px-8 sm:pb-8",children:m==="material"?s?i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 sm:p-6 rounded-lg",children:i.jsx(Na,{content:s})}),i.jsx("button",{type:"button",onClick:()=>b("challenge"),className:"mt-6 w-full bg-primary text-white font-bold py-3 px-4 rounded-lg hover:bg-primary/90 transition transform hover:scale-105",children:"Mulai Tantangan"})]}):null:i.jsxs("div",{className:"pt-6",children:[r===Ae.QUIZ&&i.jsx(p0,{quiz:_,onComplete:w,questCategory:c,userId:"preview-user",questId:"preview-quest"}),r===Ae.CODE&&i.jsx(lh,{challenge:o,onCheckComplete:y,onSuccessSubmit:()=>{},isPreviewMode:!0,showToast:h})]})})]})]})}),ot="text-base px-3 py-2 mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border",mt="block text-sm font-semibold text-gray-800 dark:text-gray-200",MD=({questToEdit:t,defaultCategory:e,onSave:n,onClose:a,existingQuests:s,questChapters:r,showAlert:l,showToast:o})=>{const[c,u]=p.useState(""),[f,d]=p.useState(""),[h,m]=p.useState(50),[b,_]=p.useState(""),[w,y]=p.useState(e),[g,x]=p.useState(Ae.QUIZ),[v,k]=p.useState([]),[S,C]=p.useState({description:"",starterCode:"",solution:"",testCases:[]}),[j,T]=p.useState(void 0),[E,N]=p.useState(void 0),[D,U]=p.useState(void 0),[$,W]=p.useState(Js.ANY_COMPLETION),[I,H]=p.useState(3),[O,z]=p.useState(10),[B,Y]=p.useState(!1),[ee,P]=p.useState(!1),[V,se]=p.useState(0),[me,Xe]=p.useState("edit"),[Tt,At]=p.useState(null),qe=!!t;p.useEffect(()=>{t?(u(t.title),d(t.description),m(t.xp),_(t.material||""),y(t.category),x(t.type),T(t.requiredQuestId),N(t.chapterId),U(t.timeLimit),W(t.passingCriteria||Js.ANY_COMPLETION),H(t.maxAttempts),z(t.xpPenaltyPerAttempt),Y(t.shuffleQuestions||!1),P(t.shuffleOptions||!1),se(t.order||0),t.type===Ae.QUIZ?k(t.content):C(t.content)):(u(""),d(""),m(50),_(""),y(e),x(Ae.QUIZ),k([{question:"",options:["",""],answerIndex:0,points:10}]),C({description:"",starterCode:`def solve():
  # Tulis kodemu di sini
  pass`,solution:"",testCases:[{input:"",expectedOutput:""}]}),T(void 0),N(void 0))},[t,e]);const q=()=>{if(!c.trim()){l("Validasi Gagal","Judul misi tidak boleh kosong.");return}let L;if(g===Ae.QUIZ){if(v.length===0){l("Validasi Gagal","Kuis harus memiliki setidaknya satu pertanyaan.");return}for(const Z of v)if(!Z.question.trim()||Z.options.some(we=>!we.trim())||Z.options.length<2){l("Validasi Gagal","Setiap pertanyaan harus diisi, memiliki setidaknya 2 pilihan, dan semua pilihan harus diisi.");return}L=v}else{if(!S.description.trim()||!S.starterCode.trim()||!S.solution.trim()||S.testCases.length===0){l("Validasi Gagal","Deskripsi, kode awal, solusi, dan setidaknya satu test case harus diisi untuk tantangan koding.");return}L=S}const ne={id:(t==null?void 0:t.id)||`new_${Date.now()}`,title:c,description:f,xp:h,material:b||null,category:w,type:g,content:L,requiredQuestId:j||null,chapterId:E||null,timeLimit:D??null,passingCriteria:$,maxAttempts:I??null,xpPenaltyPerAttempt:O??null,shuffleQuestions:B,shuffleOptions:ee,order:V};n(ne)},je=(L,ne,Z)=>{const we=[...v];we[L][ne]=Z,k(we)},zn=()=>k([...v,{question:"",options:["",""],answerIndex:0,points:10}]),tt=L=>k(v.filter((ne,Z)=>Z!==L)),ft=(L,ne,Z)=>{const we=[...v];we[L].options[ne]=Z,k(we)},An=L=>{const ne=[...v];ne[L].options.push(""),k(ne)},In=(L,ne)=>{const Z=[...v];if(Z[L].options.length<=2){l("Aksi Ditolak","Pertanyaan harus memiliki minimal 2 pilihan jawaban.");return}Z[L].options.splice(ne,1),Z[L].answerIndex===ne?Z[L].answerIndex=0:Z[L].answerIndex>ne&&(Z[L].answerIndex-=1),k(Z)},kt=(L,ne)=>C({...S,[L]:ne}),Va=(L,ne,Z)=>{const we=[...S.testCases];we[L][ne]=Z,kt("testCases",we)},ic=()=>kt("testCases",[...S.testCases,{input:"",expectedOutput:""}]),Fs=L=>kt("testCases",S.testCases.filter((ne,Z)=>Z!==L)),Vs=p.useMemo(()=>s.filter(L=>L.id!==(t==null?void 0:t.id)),[s,t]),Dr=p.useMemo(()=>{const L=r.filter(Z=>!Z.parentId).sort((Z,we)=>Z.order-we.order),ne=[];return L.forEach(Z=>{ne.push({label:Z.title,value:Z.id,isSub:!1}),r.filter(we=>we.parentId===Z.id).sort((we,al)=>we.order-al.order).forEach(we=>{ne.push({label:we.title,value:we.id,isSub:!0})})}),ne},[r]),nl=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Informasi Umum"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:mt,children:"Judul Misi"}),i.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),className:ot})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:mt,children:"Deskripsi Singkat"}),i.jsx("textarea",{value:f,onChange:L=>d(L.target.value),className:ot,rows:2})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Kategori"}),i.jsxs("select",{value:w,onChange:L=>y(L.target.value),className:ot,children:[i.jsx("option",{value:he.TUTORIAL,children:"Pembelajaran (Tutorial)"}),i.jsx("option",{value:he.MAIN,children:"Latihan (Utama)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Tipe Tantangan"}),i.jsxs("select",{value:g,onChange:L=>x(L.target.value),className:ot,children:[i.jsx("option",{value:Ae.QUIZ,children:"Kuis Pilihan Ganda"}),i.jsx("option",{value:Ae.CODE,children:"Tantangan Koding"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"XP Diberikan"}),i.jsx("input",{type:"number",value:h,onChange:L=>m(Number(L.target.value)),min:"0",className:ot})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Urutan Misi"}),i.jsx("input",{type:"number",value:V,onChange:L=>se(Number(L.target.value)),className:ot})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Konten Tantangan"}),g===Ae.QUIZ?i.jsxs("div",{className:"space-y-4",children:[v.map((L,ne)=>i.jsxs("div",{className:"p-4 border rounded-md dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("h4",{className:"font-semibold",children:["Pertanyaan ",ne+1]}),i.jsx("button",{type:"button",onClick:()=>tt(ne),className:"text-red-500 hover:text-red-700",children:i.jsx(Sn,{className:"w-5 h-5"})})]}),i.jsx("textarea",{value:L.question,onChange:Z=>je(ne,"question",Z.target.value),placeholder:"Tulis pertanyaan di sini...",className:ot,rows:2}),i.jsx("div",{className:"grid grid-cols-2 gap-4 my-2",children:i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Poin"}),i.jsx("input",{type:"number",value:L.points,onChange:Z=>je(ne,"points",Number(Z.target.value)),min:"0",className:ot})]})}),i.jsx("h5",{className:"text-sm font-semibold mt-3 mb-1",children:"Pilihan Jawaban"}),L.options.map((Z,we)=>i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("input",{type:"radio",name:`answer_${ne}`,checked:L.answerIndex===we,onChange:()=>je(ne,"answerIndex",we),className:"h-5 w-5 text-primary focus:ring-primary"}),i.jsx("input",{type:"text",value:Z,onChange:al=>ft(ne,we,al.target.value),className:ot+" flex-grow",placeholder:`Pilihan ${we+1}`}),i.jsx("button",{type:"button",onClick:()=>In(ne,we),className:"text-red-500 hover:text-red-700",children:i.jsx(lt,{className:"w-5 h-5"})})]},we)),i.jsxs("button",{type:"button",onClick:()=>An(ne),className:"text-sm flex items-center gap-1 text-primary hover:underline",children:[i.jsx(Kn,{className:"w-4 h-4"})," Tambah Pilihan"]}),i.jsx("label",{className:`${mt} mt-3`,children:"Penjelasan Jawaban (Opsional)"}),i.jsx("textarea",{value:L.explanation,onChange:Z=>je(ne,"explanation",Z.target.value),className:ot,rows:2})]},ne)),i.jsxs("button",{type:"button",onClick:zn,className:"w-full text-center py-2 px-4 bg-primary/10 text-primary font-semibold rounded-md hover:bg-primary/20 transition",children:[i.jsx(Kn,{className:"w-5 h-5 inline-block mr-1"})," Tambah Pertanyaan"]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Deskripsi Tantangan (mendukung Markdown)"}),i.jsx("textarea",{value:S.description,onChange:L=>kt("description",L.target.value),className:ot,rows:4})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Kode Awal"}),i.jsx(Os,{code:S.starterCode,setCode:L=>kt("starterCode",L),height:"h-48"})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Solusi Optimal"}),i.jsx(Os,{code:S.solution,setCode:L=>kt("solution",L),height:"h-48"})]}),i.jsx("h4",{className:"font-semibold pt-2",children:"Test Case"}),S.testCases.map((L,ne)=>i.jsxs("div",{className:"p-4 border rounded-md dark:border-gray-700 grid grid-cols-1 md:grid-cols-2 gap-4 relative bg-gray-50 dark:bg-gray-800/50",children:[i.jsx("button",{type:"button",onClick:()=>Fs(ne),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:i.jsx(Sn,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Input (jika ada)"}),i.jsx("textarea",{value:L.input,onChange:Z=>Va(ne,"input",Z.target.value),className:ot+" font-mono",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Output yang Diharapkan"}),i.jsx("textarea",{value:L.expectedOutput,onChange:Z=>Va(ne,"expectedOutput",Z.target.value),className:ot+" font-mono",rows:3})]})]},ne)),i.jsxs("button",{type:"button",onClick:ic,className:"w-full text-center py-2 px-4 bg-primary/10 text-primary font-semibold rounded-md hover:bg-primary/20 transition",children:[i.jsx(Kn,{className:"w-5 h-5 inline-block mr-1"})," Tambah Test Case"]})]})]}),w===he.TUTORIAL&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Materi Pembelajaran (mendukung Markdown)"}),i.jsx("textarea",{value:b,onChange:L=>_(L.target.value),className:ot,rows:10})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Pengaturan Lanjutan"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Prasyarat Misi"}),i.jsxs("select",{value:j||"",onChange:L=>T(L.target.value||void 0),className:ot,children:[i.jsx("option",{value:"",children:"Tidak ada"}),Vs.map(L=>i.jsx("option",{value:L.id,children:L.title},L.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Bab Misi"}),i.jsxs("select",{value:E||"",onChange:L=>N(L.target.value||void 0),className:ot,children:[i.jsx("option",{value:"",children:"Tanpa Bab"}),Dr.map(L=>i.jsxs("option",{value:L.value,children:[L.isSub?" ":"",L.label]},L.value))]})]}),w===he.TUTORIAL&&i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Kriteria Kelulusan"}),i.jsxs("select",{value:$,onChange:L=>W(L.target.value),className:ot,children:[i.jsx("option",{value:Js.ANY_COMPLETION,children:"Selesaikan Latihan"}),i.jsx("option",{value:Js.PERFECT_SCORE,children:"Selesaikan Tanpa Kesalahan"})]})]}),w===he.MAIN&&g===Ae.CODE&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Maksimum Percobaan"}),i.jsx("input",{type:"number",value:I,onChange:L=>H(Number(L.target.value)),min:"1",className:ot})]}),i.jsxs("div",{children:[i.jsx("label",{className:mt,children:"Penalti XP per Percobaan Gagal"}),i.jsx("input",{type:"number",value:O,onChange:L=>z(Number(L.target.value)),min:"0",className:ot})]})]}),g===Ae.QUIZ&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"shuffleQ",checked:B,onChange:L=>Y(L.target.checked),className:"h-4 w-4 rounded text-primary focus:ring-primary"}),i.jsx("label",{htmlFor:"shuffleQ",children:"Acak Urutan Pertanyaan"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"shuffleO",checked:ee,onChange:L=>P(L.target.checked),className:"h-4 w-4 rounded text-primary focus:ring-primary"}),i.jsx("label",{htmlFor:"shuffleO",children:"Acak Urutan Pilihan"})]})]})]})]})]}),oh=()=>{At("Uji coba selesai. Anda dapat kembali ke mode edit untuk melanjutkan atau menyimpan perubahan."),Xe("preview")};return i.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[i.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("button",{type:"button",onClick:a,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[i.jsx(gr,{className:"w-5 h-5"}),"Kembali"]}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:qe?"Edit Misi":"Buat Misi Baru"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-1 rounded-lg flex items-center gap-1",children:[i.jsx("button",{type:"button",onClick:()=>Xe("edit"),className:`px-3 py-1 text-sm font-semibold rounded-md ${me==="edit"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:"Edit"}),i.jsxs("button",{type:"button",onClick:()=>{Xe("preview"),At(null)},className:`px-3 py-1 text-sm font-semibold rounded-md flex items-center gap-1 ${me==="preview"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:[i.jsx(Nd,{className:"w-4 h-4"})," Uji Coba"]})]}),i.jsxs("button",{type:"button",onClick:q,className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[i.jsx(Ca,{className:"w-5 h-5"})," ",qe?"Simpan Perubahan":"Simpan Misi"]})]})]}),i.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:me==="edit"?nl():i.jsx(GC,{previewResult:Tt,title:c,description:f,xp:h,material:b,type:g,quizContent:v,codeContent:S,category:w,onPreviewComplete:oh,shuffleQuestions:B,shuffleOptions:ee,showToast:o})})]})},Gs="text-base px-3 py-2 mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border",la="block text-sm font-semibold text-gray-800 dark:text-gray-200",OD=({questToEdit:t,onSave:e,onClose:n,showAlert:a,showToast:s})=>{const[r,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(100),[d,h]=p.useState({description:"",starterCode:"",solution:"",testCases:[]}),[m,b]=p.useState(0),[_,w]=p.useState("edit"),[y,g]=p.useState(null),x=!!t;p.useEffect(()=>{t?(l(t.title),c(t.description),f(t.xp),h(t.content),b(t.order||0)):(l(""),c(""),f(100),h({description:"",starterCode:`def solve():
  # Tulis kodemu di sini
  pass`,solution:"",testCases:[{input:"",expectedOutput:""}]}),b(0))},[t]);const v=()=>{if(!r.trim()){a("Validasi Gagal","Judul tantangan tidak boleh kosong.");return}if(!d.description.trim()||!d.starterCode.trim()||!d.solution.trim()||d.testCases.length===0){a("Validasi Gagal","Deskripsi, kode awal, solusi, dan setidaknya satu test case harus diisi.");return}const N={id:(t==null?void 0:t.id)||`new_${Date.now()}`,title:r,description:o,xp:u,category:he.CHALLENGE,type:Ae.CODE,content:d,order:m,material:null,requiredQuestId:null,chapterId:null,timeLimit:null,passingCriteria:null,maxAttempts:null,xpPenaltyPerAttempt:null,shuffleQuestions:!1,shuffleOptions:!1};e(N)},k=(N,D)=>h({...d,[N]:D}),S=(N,D,U)=>{const $=[...d.testCases];$[N][D]=U,k("testCases",$)},C=()=>k("testCases",[...d.testCases,{input:"",expectedOutput:""}]),j=N=>k("testCases",d.testCases.filter((D,U)=>U!==N)),T=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Informasi Tantangan"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:la,children:"Judul Tantangan"}),i.jsx("input",{type:"text",value:r,onChange:N=>l(N.target.value),className:Gs})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:la,children:"Deskripsi Singkat"}),i.jsx("textarea",{value:o,onChange:N=>c(N.target.value),className:Gs,rows:2})]}),i.jsxs("div",{children:[i.jsx("label",{className:la,children:"XP Diberikan"}),i.jsx("input",{type:"number",value:u,onChange:N=>f(Number(N.target.value)),min:"0",className:Gs})]}),i.jsxs("div",{children:[i.jsx("label",{className:la,children:"Urutan"}),i.jsx("input",{type:"number",value:m,onChange:N=>b(Number(N.target.value)),className:Gs})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Konten Tantangan Koding"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:la,children:"Deskripsi Lengkap (mendukung Markdown)"}),i.jsx("textarea",{value:d.description,onChange:N=>k("description",N.target.value),className:Gs,rows:4})]}),i.jsxs("div",{children:[i.jsx("label",{className:la,children:"Kode Awal"}),i.jsx(Os,{code:d.starterCode,setCode:N=>k("starterCode",N),height:"h-48"})]}),i.jsxs("div",{children:[i.jsx("label",{className:la,children:"Solusi Optimal"}),i.jsx(Os,{code:d.solution,setCode:N=>k("solution",N),height:"h-48"})]}),i.jsx("h4",{className:"font-semibold pt-2",children:"Test Case"}),d.testCases.map((N,D)=>i.jsxs("div",{className:"p-4 border rounded-md dark:border-gray-700 grid grid-cols-1 md:grid-cols-2 gap-4 relative bg-gray-50 dark:bg-gray-800/50",children:[i.jsx("button",{type:"button",onClick:()=>j(D),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:i.jsx(Sn,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("label",{className:la,children:"Input (jika ada)"}),i.jsx("textarea",{value:N.input,onChange:U=>S(D,"input",U.target.value),className:Gs+" font-mono",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:la,children:"Output yang Diharapkan"}),i.jsx("textarea",{value:N.expectedOutput,onChange:U=>S(D,"expectedOutput",U.target.value),className:Gs+" font-mono",rows:3})]})]},D)),i.jsxs("button",{type:"button",onClick:C,className:"w-full text-center py-2 px-4 bg-primary/10 text-primary font-semibold rounded-md hover:bg-primary/20 transition",children:[i.jsx(Kn,{className:"w-5 h-5 inline-block mr-1"})," Tambah Test Case"]})]})]})]}),E=()=>{g("Uji coba selesai. Anda dapat kembali ke mode edit untuk melanjutkan atau menyimpan perubahan."),w("preview")};return i.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[i.jsxs("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-between items-center gap-4 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-50 font-semibold bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-lg transition-colors",children:[i.jsx(gr,{className:"w-5 h-5"}),"Kembali"]}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:x?"Edit Tantangan":"Buat Tantangan Baru"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-1 rounded-lg flex items-center gap-1",children:[i.jsx("button",{type:"button",onClick:()=>w("edit"),className:`px-3 py-1 text-sm font-semibold rounded-md ${_==="edit"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:"Edit"}),i.jsxs("button",{type:"button",onClick:()=>{w("preview"),g(null)},className:`px-3 py-1 text-sm font-semibold rounded-md flex items-center gap-1 ${_==="preview"?"bg-white dark:bg-gray-900 shadow text-primary":"text-gray-600 dark:text-gray-300"}`,children:[i.jsx(Nd,{className:"w-4 h-4"})," Uji Coba"]})]}),i.jsxs("button",{type:"button",onClick:v,className:"flex items-center gap-2 font-bold py-2 px-5 rounded-lg bg-primary hover:bg-primary/90 text-white transition-colors",children:[i.jsx(Ca,{className:"w-5 h-5"})," ",x?"Simpan Perubahan":"Simpan Tantangan"]})]})]}),i.jsx("main",{className:"flex-grow p-6 md:p-8 overflow-y-auto",children:_==="edit"?T():i.jsx(GC,{previewResult:y,title:r,description:o,xp:u,material:"",type:Ae.CODE,quizContent:[],codeContent:d,category:he.CHALLENGE,onPreviewComplete:E,showToast:s})})]})},gf=({title:t,value:e,icon:n,description:a})=>i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg flex items-start gap-4",children:[i.jsx("div",{className:"bg-primary/10 text-primary dark:text-indigo-400 p-3 rounded-full",children:n}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t}),i.jsx("p",{className:"text-2xl font-bold text-primary dark:text-indigo-400",children:e}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:a})]})]}),pf=t=>{const e=[...t.quests];return t.subChapters.forEach(n=>e.push(...n.quests)),e},DD=({title:t,players:e,quests:n,questChapters:a})=>{const[s,r]=p.useState(new Set),{chapterTree:l,uncategorizedQuests:o,questShortNameMap:c}=p.useMemo(()=>{const d=new Map;let h=1,m=1;n.forEach(g=>{g.category===he.TUTORIAL?d.set(g.id,`T${h++}`):g.category===he.MAIN&&d.set(g.id,`M${m++}`)});const _=a.filter(g=>!g.parentId).sort((g,x)=>g.order-x.order).map(g=>({...g,quests:n.filter(x=>x.chapterId===g.id),subChapters:a.filter(x=>x.parentId===g.id).sort((x,v)=>x.order-v.order).map(x=>({...x,quests:n.filter(v=>v.chapterId===x.id)}))})),w=new Set(n.filter(g=>g.chapterId).map(g=>g.id)),y=n.filter(g=>!w.has(g.id));return{chapterTree:_,uncategorizedQuests:y,questShortNameMap:d}},[n,a]),u=d=>{r(h=>{const m=new Set(h);return m.has(d)?m.delete(d):m.add(d),m})},f=n.length;return n.length===0?i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:t}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-6 text-center text-gray-500 italic border dark:border-gray-700",children:"Belum ada misi pembelajaran atau latihan yang dibuat."})]}):i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:t}),i.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700",children:i.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[i.jsx("th",{className:"p-2 font-semibold text-gray-800 dark:text-gray-200 sticky left-0 bg-gray-100 dark:bg-gray-700 z-10 w-48 border-r dark:border-gray-600",children:"Nama Pemain"}),l.map(d=>{const h=s.has(d.id);if(h){const b=pf(d);return n.filter(w=>b.some(y=>y.id===w.id)).map(w=>i.jsx("th",{className:"p-2 font-semibold text-gray-800 dark:text-gray-200 text-center",title:w.title,children:c.get(w.id)},w.id))}const m=pf(d);return i.jsx("th",{className:"p-0 text-center align-middle",colSpan:1,children:i.jsxs("button",{onClick:()=>u(d.id),className:"w-full h-full p-2 flex items-center justify-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200 truncate",title:d.title,children:d.title}),i.jsx("span",{className:"text-xs font-mono bg-gray-300 dark:bg-gray-500 px-1.5 py-0.5 rounded-full",children:m.length}),i.jsx(Ho,{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform ${h?"rotate-180":""}`})]})},d.id)}),o.map(d=>i.jsx("th",{className:"p-2 font-semibold text-gray-800 dark:text-gray-200 text-center",title:d.title,children:c.get(d.id)},d.id)),i.jsx("th",{className:"p-2 font-semibold text-gray-800 dark:text-gray-200 text-center",children:"Selesai"})]})}),i.jsx("tbody",{children:e.map((d,h)=>{const m=h%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-800/50";let b=0;return i.jsxs("tr",{className:m,children:[i.jsx("td",{className:`p-2 font-semibold text-primary dark:text-indigo-400 sticky left-0 z-10 w-48 border-r dark:border-gray-600 ${m}`,children:Je(d.name)}),l.map(_=>{const w=s.has(_.id),y=pf(_),g=y.filter(x=>{var v;return(v=d.completedQuests)==null?void 0:v[x.id]}).length;return b+=g,w?n.filter(v=>y.some(k=>k.id===v.id)).map(v=>{var S;const k=!!((S=d.completedQuests)!=null&&S[v.id]);return i.jsx("td",{className:"p-1.5 text-center align-middle",children:i.jsx("div",{className:`w-6 h-6 rounded-sm mx-auto ${k?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,title:`${v.title}
Status: ${k?"Selesai":"Belum Selesai"}`})},v.id)}):i.jsxs("td",{className:"p-2 text-center align-middle font-mono font-semibold text-gray-600 dark:text-gray-400",children:[g,"/",y.length]},_.id)}),o.map(_=>{var y;const w=!!((y=d.completedQuests)!=null&&y[_.id]);return w&&b++,i.jsx("td",{className:"p-1.5 text-center align-middle",children:i.jsx("div",{className:`w-6 h-6 rounded-sm mx-auto ${w?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,title:`${_.title}
Status: ${w?"Selesai":"Belum Selesai"}`})},_.id)}),i.jsxs("td",{className:"p-2 text-center font-bold text-gray-800 dark:text-gray-200",children:[b,"/",f]})]},d.id)})})]})})]})},LD=({players:t,quests:e,allQuestsSorted:n,questChapters:a,onRefresh:s,showToast:r,showAlert:l})=>{var g,x;const[o,c]=p.useState(!1),[u,f]=p.useState(!0),[d,h]=p.useState(!1),[m,b]=p.useState(!1);p.useEffect(()=>{const v=WO(f);return()=>v()},[]);const _=async()=>{c(!0),await s(),c(!1)},w=async()=>{b(!1),h(!0);try{await $O(),r("Berhasil","Migrasi data solusi lama telah selesai.",i.jsx(_e,{className:"w-5 h-5 text-green-500"}))}catch(v){l("Gagal Migrasi",`Terjadi kesalahan: ${v.message}`)}finally{h(!1)}},y=p.useMemo(()=>{const v=e.filter(N=>N.category===he.TUTORIAL||N.category===he.MAIN);if(t.length===0||v.length===0)return{mostActivePlayer:null,mostDifficultQuest:null,avgCompletion:0};const k=[...t].sort((N,D)=>D.xp-N.xp)[0],S=v.reduce((N,D)=>(N[D.id]=0,N),{});let C=0;t.forEach(N=>{N.completedQuests&&Object.keys(N.completedQuests).forEach(D=>{S[D]!==void 0&&(S[D]++,C++)})});const j=Object.keys(S).sort((N,D)=>S[N]-S[D])[0],T=e.find(N=>N.id===j),E=C/(t.length*v.length)*100;return{mostActivePlayer:k,mostDifficultQuest:T,avgCompletion:isNaN(E)?0:Math.round(E)}},[t,e]);return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard Master"}),i.jsxs("div",{className:"flex items-center gap-2",children:[!u&&i.jsxs("button",{onClick:()=>b(!0),disabled:d,className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors shadow-sm disabled:opacity-50",children:[i.jsx(ax,{className:`w-5 h-5 ${d?"animate-spin":""}`}),i.jsx("span",{children:d?"Memigrasi...":"Migrasi Data Solusi"})]}),i.jsxs("button",{onClick:_,disabled:o,className:"flex items-center gap-2 bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg transition-colors border border-gray-300 dark:border-gray-600 shadow-sm disabled:opacity-50",children:[i.jsx(mr,{className:`w-5 h-5 ${o?"animate-spin":""}`}),i.jsx("span",{children:o?"Memuat Ulang...":"Refresh Data"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(gf,{icon:i.jsx(ew,{className:"w-6 h-6"}),title:"Pemain Paling Aktif",value:y.mostActivePlayer?Je(y.mostActivePlayer.name):"N/A",description:`dengan ${((g=y.mostActivePlayer)==null?void 0:g.xp)||0} XP`}),i.jsx(gf,{icon:i.jsx(bm,{className:"w-6 h-6"}),title:"Misi Paling Sulit",value:((x=y.mostDifficultQuest)==null?void 0:x.title)||"N/A",description:"Misi inti yang paling jarang diselesaikan"}),i.jsx(gf,{icon:i.jsx(c5,{className:"w-6 h-6"}),title:"Penyelesaian Rata-Rata",value:`${y.avgCompletion}%`,description:"Dari semua misi pembelajaran & utama"})]}),i.jsx(DD,{title:"Grid Kemajuan Pemain",players:t,quests:n,questChapters:a}),i.jsx(Rt,{isOpen:m,onClose:()=>b(!1),onConfirm:w,title:"Konfirmasi Migrasi Data",message:"Aksi ini akan memindahkan semua data 'solution' dari dalam profil pengguna ke lokasi baru ('/playerSolutions') untuk mengoptimalkan performa. Ini hanya perlu dijalankan sekali. Lanjutkan?",confirmText:"Ya, Jalankan Migrasi",confirmIcon:i.jsx(ax,{className:"w-5 h-5"}),confirmButtonClass:"bg-yellow-600 hover:bg-yellow-700"})]})},PD=()=>i.jsxs("tr",{className:"border-t dark:border-gray-700",children:[i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),i.jsxs("div",{children:[i.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-1.5"}),i.jsx("div",{className:"h-3 w-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})}),i.jsx("td",{className:"p-3",children:i.jsx("div",{className:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})}),i.jsx("td",{className:"p-3 text-center",children:i.jsx("div",{className:"h-4 w-12 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mx-auto"})}),i.jsx("td",{className:"p-3 text-center",children:i.jsx("div",{className:"h-4 w-10 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mx-auto"})}),i.jsx("td",{className:"p-3 text-center",children:i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),i.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),i.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"})]})})]}),UD=({rows:t=8})=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsx("div",{className:"h-7 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-10 w-24 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),i.jsx("div",{className:"h-10 w-36 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),i.jsx("div",{className:"h-10 w-32 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]})]}),i.jsx("div",{className:"mb-4 border-b border-gray-200 dark:border-gray-700 h-10"}),i.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-lg overflow-hidden border dark:border-gray-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 w-2/5",children:i.jsx("div",{className:"h-4 w-24 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"})}),i.jsx("th",{className:"p-3",children:i.jsx("div",{className:"h-4 w-16 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"})}),i.jsx("th",{className:"p-3 text-center",children:i.jsx("div",{className:"h-4 w-16 bg-gray-300 dark:bg-gray-600 rounded animate-pulse mx-auto"})}),i.jsx("th",{className:"p-3 text-center",children:i.jsx("div",{className:"h-4 w-8 bg-gray-300 dark:bg-gray-600 rounded animate-pulse mx-auto"})}),i.jsx("th",{className:"p-3 text-center",children:i.jsx("div",{className:"h-4 w-12 bg-gray-300 dark:bg-gray-600 rounded animate-pulse mx-auto"})})]})}),i.jsx("tbody",{children:Array.from({length:t}).map((e,n)=>i.jsx(PD,{},n))})]})})})]}),Rb=50,BD=()=>{const{currentUser:t,logout:e}=dn(),{showAlert:n,showToast:a}=un(),{ranks:s,questsMetadata:r,questChapters:l,rooms:o,handleUpdateUser:c,handleUpdateRanks:u,handleSaveQuest:f,handleDeleteQuest:d,handleSavePlayer:h,handleBatchImportPlayers:m,handleTogglePlayerStatus:b,handleSaveRoom:_,handleDeleteRoom:w}=tl(),{handleUpdatePlayerCodeFile:y,handleResetPlayerQuestProgress:g,handleUnlockPlayer:x}=rc(),[v,k]=p.useState([]),[S,C]=p.useState(!0),[j,T]=p.useState(!0),[E,N]=p.useState(!1),[D,U]=p.useState(null),[$,W]=p.useState(!1),[I,H]=p.useState(null),[O,z]=p.useState(!1),[B,Y]=p.useState(null),[ee,P]=p.useState(!1),[V,se]=p.useState({title:"",message:"",onConfirm:()=>{},confirmText:"",confirmIcon:i.jsx(i.Fragment,{}),confirmButtonClass:""}),[me,Xe]=p.useState(!1),[Tt,At]=p.useState(!1);p.useEffect(()=>{(async()=>{C(!0),await qe(),C(!1)})()},[]);const qe=async()=>{try{const{players:F,hasNextPage:ke}=await vb(Rb);k(F),T(ke)}catch(F){console.error("Failed to fetch players:",F),n("Gagal Memuat","Tidak dapat memuat data pemain.")}},q=async()=>{if(!(E||!j)){N(!0);try{const F=v[v.length-1];if(!F){N(!1);return}const{players:ke,hasNextPage:Hn}=await vb(Rb,{name:F.name,id:F.id});k(JC=>[...JC,...ke]),T(Hn)}catch(F){console.error("Failed to fetch more players:",F),n("Gagal Memuat","Tidak dapat memuat data pemain selanjutnya.")}finally{N(!1)}}},je=async(F,ke)=>{await g(F,ke),await qe()},zn=async F=>{await x(F),await qe()},tt=p.useMemo(()=>v.filter(F=>F.role===We.PLAYER),[v]),ft=p.useMemo(()=>tt.filter(F=>!F.disabled),[tt]),An=p.useMemo(()=>{const F=r.filter(ke=>ke.category===he.TUTORIAL);return Ym(F)},[r]),In=p.useMemo(()=>{const F=r.filter(ke=>ke.category===he.MAIN);return Ym(F)},[r]),kt=p.useMemo(()=>r.filter(F=>F.category===he.CHALLENGE).sort((F,ke)=>(F.order??999)-(ke.order??999)),[r]),Va=p.useMemo(()=>[...An,...In],[An,In]),ic=F=>{const ke=!!(D!=null&&D.quest);f(F),U(null),a("Berhasil",ke?"Misi Berhasil Diubah":"Data misi telah berhasil disimpan.",i.jsx(_e,{className:"w-5 h-5 text-green-500"}))},Fs=F=>U({quest:null,type:F}),Vs=async F=>{try{const ke=await FC(F.id);ke?U({quest:ke,type:ke.category}):n("Gagal Memuat",`Tidak dapat menemukan data lengkap untuk misi "${F.title}".`)}catch(ke){n("Gagal Memuat",`Terjadi kesalahan saat mengambil data misi: ${ke.message}`)}},Dr=()=>U(null),nl=()=>{H(null),W(!0)},oh=F=>{H(F),W(!0)},L=async(F,ke)=>{W(!1);try{const{message:Hn}=await h(F,ke);a("Berhasil",Hn,i.jsx(_e,{className:"w-5 h-5 text-green-500"})),qe()}catch(Hn){n("Gagal Menyimpan Pemain",`Terjadi kesalahan: ${Hn.message}`)}},ne=async F=>{const ke=await m(F);return qe(),ke},Z=F=>{se({title:"Konfirmasi Nonaktifkan Pemain",message:`Menonaktifkan pemain "${Je(F.name)}". Mereka tidak akan bisa login lagi dan akan dihapus dari papan peringkat. Lanjutkan?`,onConfirm:()=>{b(F,!0),qe(),P(!1)},confirmText:"Ya, Nonaktifkan",confirmIcon:i.jsx(X1,{className:"w-5 h-5"}),confirmButtonClass:"bg-red-600 hover:bg-red-700"}),P(!0)},we=F=>{se({title:"Konfirmasi Aktifkan Pemain",message:`Aktifkan kembali "${Je(F.name)}"? Mereka akan bisa login dan kembali muncul di papan peringkat.`,onConfirm:()=>{b(F,!1),qe(),P(!1)},confirmText:"Ya, Aktifkan",confirmIcon:i.jsx(K1,{className:"w-5 h-5"}),confirmButtonClass:"bg-green-600 hover:bg-green-700"}),P(!0)},al=()=>{Y(null),z(!0)},YC=F=>{Y(F),z(!0)},KC=async(F,ke)=>{z(!1);try{await _(F,ke),await qe(),a("Berhasil",`Data room "${F.name}" telah disimpan.`,i.jsx(_e,{className:"w-5 h-5 text-green-500"}))}catch(Hn){n("Gagal Menyimpan Room",`Terjadi kesalahan: ${Hn.message}`)}},XC=F=>{const ke=v.filter(Hn=>Hn.roomId===F.id).length;if(ke>0){n("Aksi Ditolak",`Tidak dapat menghapus room "${F.name}" karena masih ada ${ke} pemain di dalamnya.`);return}se({title:"Konfirmasi Hapus Room",message:`Yakin ingin menghapus room "${F.name}"?`,onConfirm:()=>{w(F.id),P(!1)},confirmText:"Ya, Hapus",confirmIcon:i.jsx(Sn,{className:"w-5 h-5"}),confirmButtonClass:"bg-red-600 hover:bg-red-700"}),P(!0)},v0=()=>At(!0),qC=()=>At(!1),ZC=F=>{c(F),At(!1),a("Berhasil","Profil Anda telah diperbarui.",i.jsx(_e,{className:"w-5 h-5 text-green-500"}))};if(!t)return null;if(S)return i.jsxs(vm,{user:t,onLogout:e,fullWidth:!0,onProfileClick:v0,children:[i.jsx(jb,{}),i.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-2xl shadow-sm mt-6",children:i.jsx(UD,{})})]});if(D){const F={questToEdit:D.quest,onSave:ic,onClose:Dr,showAlert:n,showToast:a};return D.type===he.CHALLENGE?i.jsx(OD,{...F}):i.jsx(MD,{...F,defaultCategory:D.type,existingQuests:r,questChapters:l})}return O?i.jsx(kD,{onClose:()=>z(!1),onSave:KC,roomToEdit:B,allPlayers:ft}):$?i.jsx(bD,{onClose:()=>W(!1),onSave:L,playerToEdit:I,rooms:o,ranks:s}):i.jsxs(i.Fragment,{children:[i.jsxs(vm,{user:t,onLogout:e,fullWidth:!0,onProfileClick:v0,children:[i.jsx(jb,{}),i.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-2xl shadow-sm mt-6",children:i.jsxs(kd,{children:[i.jsx(He,{index:!0,element:i.jsx(Zs,{to:"dashboard",replace:!0})}),i.jsx(He,{path:"dashboard",element:i.jsx(LD,{players:ft,quests:r,allQuestsSorted:Va,questChapters:l,onRefresh:qe,showToast:a,showAlert:n})}),i.jsx(He,{path:"chapters",element:i.jsx(RD,{})}),i.jsx(He,{path:"quests",element:i.jsx(Tb,{quests:Va,allQuests:r,questChapters:l,onDelete:d,onAddNew:()=>Fs(he.TUTORIAL),onEdit:Vs,title:"Manajemen Misi Pembelajaran & Utama",showAlert:n,showToast:a})}),i.jsx(He,{path:"challenges",element:i.jsx(Tb,{quests:kt,allQuests:r,questChapters:[],onDelete:d,onAddNew:()=>Fs(he.CHALLENGE),onEdit:Vs,title:"Manajemen Tantangan Koding",showAlert:n,showToast:a})}),i.jsx(He,{path:"players",element:i.jsx(xD,{players:tt,rooms:o,quests:r,onAdd:nl,onEdit:oh,onDeactivate:Z,onReactivate:we,onImportClick:()=>Xe(!0),onLoadMore:q,hasNextPage:j,isLoadingMore:E,onResetQuestProgress:je,onUnlockPlayer:zn,onRefresh:qe})}),i.jsx(He,{path:"arsipPemain",element:i.jsx(AD,{players:ft,showToast:a,handleUpdatePlayerCodeFile:y})}),i.jsx(He,{path:"rooms",element:i.jsx(vD,{rooms:o,players:ft,onAdd:al,onEdit:YC,onDelete:XC})}),i.jsx(He,{path:"ranks",element:i.jsx(ND,{ranks:s,quests:r,onUpdateRanks:u,onShowAlert:n,showToast:a})})]})})]}),i.jsx(Rt,{isOpen:ee,onClose:()=>P(!1),...V}),i.jsx(SD,{isOpen:me,onClose:()=>Xe(!1),onImport:ne,existingUsers:tt}),Tt&&t&&i.jsx(QC,{user:t,quests:r,onClose:qC,isEditable:!0,onUpdateProfile:ZC})]})},zD=()=>{const{signIn:t}=dn(),{theme:e,toggleTheme:n}=un(),[a,s]=p.useState(""),[r,l]=p.useState(""),[o,c]=p.useState(!1),[u,f]=p.useState(null),[d,h]=p.useState(!1),m=async b=>{b.preventDefault(),h(!0),f(null);try{await t(a,r)}catch(_){f(_.message)}finally{h(!1)}};return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center font-sans p-4",children:i.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg animate-fade-in-down relative",children:[i.jsx("button",{type:"button",onClick:n,className:"absolute top-4 right-4 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Ganti tema",children:e==="light"?i.jsx(Eu,{className:"w-6 h-6"}):i.jsx(Su,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl font-display text-primary dark:text-indigo-400 mb-2",children:"Selamat Datang!"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Masuk untuk melanjutkan petualangan Python Quest."})]}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"identifier",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email atau Username"}),i.jsx("input",{id:"identifier",type:"text",value:a,onChange:b=>s(b.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",autoComplete:"username",placeholder:"Masukkan email atau username",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx("input",{id:"password",type:o?"text":"password",value:r,onChange:b=>l(b.target.value),required:!0,className:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",placeholder:"Masukkan password",autoComplete:"current-password"}),i.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":o?"Sembunyikan password":"Tampilkan password",children:o?i.jsx(u5,{className:"h-5 w-5"}):i.jsx(Nd,{className:"h-5 w-5"})})]})]}),u&&i.jsx("p",{className:"text-red-500 text-sm text-center pt-2",children:u}),i.jsx("div",{className:"pt-2",children:i.jsx("button",{type:"submit",disabled:d,className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:scale-100",children:d?"Memproses...":"Masuk"})})]})]})})},HD=()=>{const{handleMasterSetup:t}=dn(),[e,n]=p.useState(""),[a,s]=p.useState(""),[r,l]=p.useState(""),[o,c]=p.useState(""),[u,f]=p.useState(""),[d,h]=p.useState("wizard"),[m,b]=p.useState(null),[_,w]=p.useState(!1),y=async g=>{if(g.preventDefault(),b(null),o!==u){b("Password dan konfirmasi password tidak cocok.");return}if(o.length<6){b("Password harus terdiri dari minimal 6 karakter.");return}w(!0),await t({name:e,email:a,username:r,password:o,avatarId:d,gender:Fn.MALE}),w(!1)};return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center font-sans p-4",children:i.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg animate-fade-in-down",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl font-display text-primary dark:text-indigo-400 mb-2",children:"Setup Akun Master"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:'Selamat datang! Silakan buat akun "Master" pertama untuk mengelola Python Quest.'})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nama Lengkap"}),i.jsx("input",{id:"name",type:"text",value:e,onChange:g=>n(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),i.jsx("input",{id:"username",type:"text",value:r,onChange:g=>l(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),i.jsx("input",{id:"email",type:"email",value:a,onChange:g=>s(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),i.jsx("input",{id:"password",type:"password",value:o,onChange:g=>c(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Konfirmasi Password"}),i.jsx("input",{id:"confirm-password",type:"password",value:u,onChange:g=>f(g.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-primary focus:border-primary"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pilih Avatar"}),i.jsx("div",{className:"mt-2 flex items-center gap-2 flex-wrap bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg max-h-32 overflow-y-auto",children:sp.map(g=>{const x=d===g.id;return i.jsx("button",{type:"button",onClick:()=>h(g.id),className:`p-1.5 rounded-full transition-all duration-200 ${x?"bg-primary/20 ring-2 ring-primary":"bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500"}`,title:g.name,children:i.jsx(g.component,{className:"w-10 h-10"})},g.id)})})]}),m&&i.jsx("p",{className:"text-red-500 text-sm text-center pt-2",children:m}),i.jsx("div",{className:"pt-2",children:i.jsx("button",{type:"submit",disabled:_,className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-4 rounded-lg transition duration-300 transform hover:scale-105 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:scale-100",children:_?"Membuat Akun...":"Buat Akun & Mulai"})})]})]})})},FD=({children:t,currentUser:e})=>e?i.jsx(i.Fragment,{children:t}):i.jsx(Zs,{to:"/login",replace:!0}),VD=()=>{const{currentUser:t,authChecked:e,needsMasterSetup:n}=dn(),a=Ba();if(!e)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});if(n&&a.pathname!=="/master-setup")return i.jsx(Zs,{to:"/master-setup",replace:!0});const s=()=>i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen text-gray-900 dark:text-gray-100 font-sans",children:(t==null?void 0:t.role)===We.PLAYER?i.jsx(gD,{}):i.jsx(BD,{})});return i.jsxs(kd,{children:[i.jsx(He,{path:"/login",element:t?i.jsx(Zs,{to:"/dashboard",replace:!0}):i.jsx(zD,{})}),i.jsx(He,{path:"/master-setup",element:n?i.jsx(HD,{}):i.jsx(Zs,{to:"/login",replace:!0})}),i.jsx(He,{path:"/dashboard/*",element:i.jsx(FD,{currentUser:t,children:s()})}),i.jsx(He,{path:"*",element:i.jsx(Zs,{to:t?"/dashboard":"/login",replace:!0})})]})},$C=()=>{const[t,e]=p.useState(!1),[n,a]=p.useState(()=>{if(typeof window<"u"&&window.localStorage){const r=window.localStorage.getItem("theme");if(r)return r;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"});p.useEffect(()=>{const r=window.document.documentElement;n==="dark"?r.classList.add("dark"):r.classList.remove("dark"),localStorage.setItem("theme",n)},[n]);const s=()=>{a(r=>r==="light"?"dark":"light")};return i.jsxs("header",{className:"bg-white dark:bg-gray-800 sticky top-0 z-40 shadow-sm",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Vn,{to:"/",className:"text-2xl font-bold text-primary dark:text-indigo-400",children:"Python Quest"})}),i.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[i.jsx(Vn,{to:"/playground",className:"text-base font-semibold text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 transition-colors",children:"Coba Arena Koding"}),i.jsx(Vn,{to:"/login",className:"bg-primary hover:bg-primary/90 text-white font-bold py-2 px-5 rounded-full transition duration-300",children:"Masuk"}),i.jsx("button",{onClick:s,className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:n==="light"?i.jsx(Eu,{className:"w-6 h-6"}):i.jsx(Su,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[i.jsx("button",{onClick:s,className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:n==="light"?i.jsx(Eu,{className:"w-5 h-5"}):i.jsx(Su,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:()=>e(!t),className:"p-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary","aria-expanded":t,children:[i.jsx("span",{className:"sr-only",children:"Buka menu"}),t?i.jsx(lt,{className:"h-6 w-6"}):i.jsx(J1,{className:"h-6 w-6"})]})]})]})}),t&&i.jsx("div",{className:"md:hidden",children:i.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t border-gray-200 dark:border-gray-700",children:[i.jsx(Vn,{to:"/playground",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-semibold text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-indigo-400 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Coba Arena Koding"}),i.jsx(Vn,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-bold text-primary dark:text-indigo-400 hover:text-primary dark:hover:text-indigo-300 hover:bg-primary/10 dark:hover:bg-indigo-500/20",children:"Masuk"})]})})]})},QD=()=>i.jsxs("div",{className:"relative mt-12 lg:mt-0 lg:ml-12",children:[i.jsx("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm p-4 rounded-xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50",children:i.jsxs("div",{className:"bg-gray-800 dark:bg-black/50 rounded-lg p-6 font-mono text-sm text-left text-white/80 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),i.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),i.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),i.jsx("pre",{children:i.jsxs("code",{className:"whitespace-pre-wrap",children:[i.jsx("span",{className:"text-sky-400",children:"def"})," ",i.jsx("span",{className:"text-purple-400",children:"sapa"}),"(nama):",`
`,"  ",i.jsx("span",{className:"text-gray-500",children:"# Sebuah fungsi untuk menyapa petualang"}),`
`,"  pesan = ",i.jsx("span",{className:"text-amber-400",children:'f"Halo, '}),i.jsx("span",{className:"text-pink-400",children:"{"}),i.jsx("span",{className:"text-white",children:"nama"}),i.jsx("span",{className:"text-pink-400",children:"}"}),i.jsx("span",{className:"text-amber-400",children:'! Selamat datang di Python Quest."'}),`
`,"  ",i.jsx("span",{className:"text-sky-400 font-semibold",children:"return"})," pesan",`
`,`
`,"petualang = ",i.jsx("span",{className:"text-green-400",children:'"Kamu"'}),`
`,i.jsx("span",{className:"text-pink-400",children:"print"}),"(sapa(petualang))"]})})]})}),i.jsx("div",{className:"absolute -inset-8 bg-primary/20 rounded-full blur-3xl -z-10"})]}),yf=({icon:t,title:e,children:n,delay:a="0s"})=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 text-center transform hover:-translate-y-2 transition-transform duration-300",children:[i.jsx("div",{className:"inline-block p-4 bg-primary/10 text-primary dark:text-indigo-400 rounded-full mb-5",children:t}),i.jsx("h3",{className:"text-2xl font-bold mb-3 text-gray-900 dark:text-white",children:e}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:n})]}),xf=({number:t,title:e,children:n,delay:a="0s"})=>i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"bg-primary text-white w-16 h-16 rounded-full flex items-center justify-center font-bold text-2xl border-4 border-white dark:border-gray-800 shadow-md mb-4",children:t}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n})]}),GD=()=>i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans text-gray-800 dark:text-gray-200",children:[i.jsx($C,{}),i.jsxs("main",{children:[i.jsxs("section",{className:"relative overflow-hidden pt-16 pb-24 sm:pt-24 sm:pb-32 px-4 bg-gray-100/50 dark:bg-gray-900",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent -z-1"}),i.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 items-center gap-12",children:[i.jsxs("div",{className:"text-center lg:text-left",children:[i.jsx("h1",{className:"text-4xl sm:text-6xl font-display text-primary dark:text-indigo-400",children:"Python Quest"}),i.jsx("p",{className:"mt-6 text-lg sm:text-xl text-gray-700 dark:text-gray-300 max-w-2xl mx-auto lg:mx-0",children:"Belajar dasar-dasar algoritma dan pemrograman Python melalui sistem gamifikasi quest yang menyenangkan dan memotivasi."}),i.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row justify-center lg:justify-start items-center gap-4",children:[i.jsx(Vn,{to:"/login",className:"w-full sm:w-auto bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-lg",children:"Mulai Petualangan"}),i.jsx(Vn,{to:"/playground",className:"w-full sm:w-auto bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-primary dark:text-indigo-400 font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-lg border border-gray-200 dark:border-gray-600",children:"Coba Arena Koding"})]})]}),i.jsx(QD,{})]})]}),i.jsx("section",{className:"py-20 px-4",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Mengapa Python Quest?"}),i.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 text-center max-w-2xl mx-auto mb-12",children:"Platform kami dirancang khusus untuk membuat proses belajar koding menjadi sebuah petualangan yang seru dan efektif."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx(yf,{icon:i.jsx(Fo,{className:"w-8 h-8"}),title:"Misi Interaktif",delay:"0.2s",children:"Selesaikan misi tutorial dan tantangan koding untuk menguasai konsep Python dari dasar hingga mahir."}),i.jsx(yf,{icon:i.jsx(Mt,{className:"w-8 h-8"}),title:"Sistem Gamifikasi",delay:"0.4s",children:"Dapatkan XP, naik peringkat, dan bersaing dengan teman-temanmu di papan peringkat untuk jadi yang terbaik."}),i.jsx(yf,{icon:i.jsx(ep,{className:"w-8 h-8"}),title:"Arena Koding",delay:"0.6s",children:"Bereksperimen bebas dengan kode Python di lingkungan yang aman dan interaktif untuk mengasah kreativitasmu."})]})]})}),i.jsx("section",{className:"py-20 px-4 bg-gray-100/50 dark:bg-gray-800/20",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Langkah Petualanganmu"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 text-center",children:[i.jsx(xf,{number:1,title:"Daftar & Pilih Avatar",delay:"0.2s",children:"Mulai petualanganmu dengan membuat akun dan memilih karakter unikmu."}),i.jsx(xf,{number:2,title:"Selesaikan Misi",delay:"0.4s",children:"Pelajari konsep melalui tutorial interaktif dan uji kemampuanmu dengan tantangan koding."}),i.jsx(xf,{number:3,title:"Naik Peringkat",delay:"0.6s",children:"Dapatkan XP, raih peringkat baru, dan lihat namamu di puncak papan peringkat!"})]})]})}),i.jsxs("section",{className:"relative py-20 px-4 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary to-secondary opacity-80"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22%3E%3Cpath%20d=%22M0%200h100v100H0z%22%20fill=%22none%22/%3E%3Cpath%20d=%22M10%2010h80v80H10z%22%20fill=%22none%22%20stroke=%22%23fff%22%20stroke-width=%22.2%22%20stroke-dasharray=%222%202%22/%3E%3C/svg%3E')] opacity-10"}),i.jsxs("div",{className:"relative max-w-3xl mx-auto text-center z-10",children:[i.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Siap Memulai Petualangan Kodemu?"}),i.jsx("p",{className:"text-lg text-white/90 mb-8",children:"Bergabunglah dengan para petualang lainnya dan jadilah master Python berikutnya. Perjalananmu dimulai sekarang!"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(Vn,{to:"/login",className:"bg-white text-primary hover:bg-gray-200 font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-2xl",children:"Daftar & Mulai Belajar"})})]})]})]}),i.jsx("footer",{className:"text-center py-6 border-t border-gray-200 dark:border-gray-800",children:i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," Python Quest. Belajar Koding Jadi Seru."]})})]}),$D=()=>{const t=`# Coba gunakan fungsi input()!
nama = input("Masukkan namamu: ")
print("Halo, " + nama + "!")`,[e,n]=p.useState(t),{isPyodideLoading:a,isExecuting:s,outputLines:r,runCode:l,...o}=x0(),c=u=>{const f=u.currentTarget;if(u.key==="Enter"){u.preventDefault();const{value:h,selectionStart:m,selectionEnd:b}=f,_=h.lastIndexOf(`
`,m-1)+1,w=h.substring(_,m),y=w.match(/^\s*/);let x=y?y[0]:"";w.trim().endsWith(":")&&(x+="  ");const v=`
`+x,k=h.substring(0,m)+v+h.substring(b);f.value=k;const S=m+v.length;f.selectionStart=f.selectionEnd=S,n(k);return}if(u.key==="Tab"){u.preventDefault();const{value:h,selectionStart:m,selectionEnd:b}=f,_="  ",w=h.substring(0,m)+_+h.substring(b);f.value=w,f.selectionStart=f.selectionEnd=m+_.length,n(w);return}const d={"(":")","[":"]","{":"}",'"':'"',"'":"'"};if(d[u.key]&&f.selectionStart===f.selectionEnd){u.preventDefault();const{value:h,selectionStart:m}=f,b=u.key,_=d[b],w=h.substring(0,m)+b+_+h.substring(m);f.value=w,f.selectionStart=f.selectionEnd=m+1,n(w);return}};return i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm h-full flex flex-col",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-3 flex-shrink-0",children:[i.jsx("h2",{className:"flex-grow font-semibold text-lg dark:text-gray-200",children:"Arena Koding Publik"}),i.jsx("button",{onClick:()=>l(e),disabled:s||a,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-secondary text-white font-bold py-2 px-4 rounded-lg hover:bg-secondary/90 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition",children:a?"Memuat...":s?"Menjalankan...":"Jalankan"})]}),i.jsxs("div",{className:"flex-grow flex flex-col lg:flex-row gap-4 min-h-0",children:[i.jsx("div",{className:"lg:w-3/5",children:i.jsx(Os,{code:e,setCode:n,onKeyDown:c,height:"min-h-[420px]"})}),i.jsx("div",{className:"lg:w-2/5 flex flex-col gap-4",children:i.jsx(b0,{outputLines:r,...o,height:"min-h-[420px]"})})]})]})},WD=()=>i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans flex flex-col",children:[i.jsx($C,{}),i.jsx("main",{className:"flex-grow p-4 sm:p-6 lg:p-8 flex flex-col",children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full flex flex-col flex-grow",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 text-blue-700 dark:text-blue-300 p-4 rounded-md mb-6",role:"alert",children:[i.jsx("h3",{className:"font-bold",children:"Arena Koding Publik"}),i.jsxs("p",{children:["Selamat datang di Arena Koding! Coba jalankan kode Python langsung di browsermu. Untuk menyimpan hasil pekerjaanmu, silakan ",i.jsx(Vn,{to:"/login",className:"font-bold underline hover:text-blue-800 dark:hover:text-blue-200",children:"masuk"})," atau daftar."]})]}),i.jsx("div",{className:"flex-grow",children:i.jsx($D,{})})]})})]}),Mb=50,YD=({children:t})=>{const[e,n]=p.useState(null),[a,s]=p.useState(null),[r,l]=p.useState(()=>{if(typeof window<"u"&&window.localStorage){const m=window.localStorage.getItem("theme");if(m)return m;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"}),o=p.useCallback(()=>{l(m=>{const b=m==="light"?"dark":"light";return localStorage.setItem("theme",b),b})},[]);p.useEffect(()=>{const m=window.document.documentElement;r==="dark"?m.classList.add("dark"):m.classList.remove("dark")},[r]);const c=p.useCallback((m,b)=>{n({title:m,message:b})},[]),u=p.useCallback(()=>n(null),[]),f=p.useCallback((m,b,_)=>{s({title:m,message:b,icon:_||i.jsx(ps,{className:"w-5 h-5"})})},[]);p.useEffect(()=>{if(a){const m=setTimeout(()=>s(null),4e3);return()=>clearTimeout(m)}},[a]);const d=p.useCallback(()=>s(null),[]),h={theme:r,toggleTheme:o,alertModalContent:e,toastContent:a,showAlert:c,closeAlert:u,showToast:f,closeToast:d};return i.jsx(Bw.Provider,{value:h,children:t})},KD=({children:t})=>{const[e,n]=p.useState(null),[a,s]=p.useState(!1),[r,l]=p.useState(!1),{showAlert:o}=un();p.useEffect(()=>{_O(m=>{l(!m)});const h=yO(m=>{n(m),s(!0)},()=>{o("Akses Ditolak","Akun Anda telah dinonaktifkan oleh Master. Silakan hubungi pengelola untuk informasi lebih lanjut.")});return()=>h()},[o]);const c=p.useCallback(()=>xO(),[]),u=p.useCallback(async(h,m)=>{try{await bO(h,m)}catch(b){const w={"auth/user-not-found":"Email/username atau password salah.","auth/wrong-password":"Email/username atau password salah.","auth/invalid-credential":"Email/username atau password salah.","auth/invalid-email":"Format email tidak valid."}[b.code||b.message]||"Terjadi kesalahan. Silakan coba lagi.";throw new Error(w)}},[]),f=p.useCallback(async h=>{try{await vO(h),l(!1)}catch(m){o("Gagal Membuat Akun Master",m.message)}},[o]),d={currentUser:e,authChecked:a,needsMasterSetup:r,logout:c,signIn:u,handleMasterSetup:f};return i.jsx(Uw.Provider,{value:d,children:t})},XD=({children:t})=>{const{currentUser:e,authChecked:n}=dn(),{showAlert:a,showToast:s}=un(),[r,l]=p.useState([]),[o,c]=p.useState([]),[u,f]=p.useState([]),[d,h]=p.useState([]);p.useEffect(()=>{if(!n||!e){l([]),c([]),f([]),h([]);return}const E=jc("ranks",$=>l($||[])),N=jc("quests_metadata",$=>c($||[])),D=jc("questChapters",$=>f($||[])),U=jc("rooms",$=>h($));return()=>{E(),N(),D(),U()}},[n,e]);const m=p.useCallback(E=>NO(E),[]),b=p.useCallback(async E=>{const N=await bb();PO(E,N)},[]),_=p.useCallback(E=>RO(E),[]),w=p.useCallback(E=>MO(E),[]),y=p.useCallback(async()=>{if((e==null?void 0:e.role)===We.MASTER){const E=await wO("quests");await OO(E)}else throw new Error("Hanya Master yang dapat melakukan aksi ini.")},[e]),g=p.useCallback(E=>DO(E),[]),x=p.useCallback(async E=>{const N=u.find(W=>W.id===E);if(!N)return!1;const D=u.filter(W=>W.parentId===E).map(W=>W.id),U=[E,...D];if(o.some(W=>W.chapterId&&U.includes(W.chapterId)))return a("Aksi Ditolak",`Tidak dapat menghapus bab "${N.title}" karena masih ada misi yang terikat padanya atau pada sub-babnya. Pindahkan misi terlebih dahulu.`),!1;for(const W of U)LO(W);return s("Berhasil",`Bab "${N.title}" dan sub-babnya telah dihapus.`,i.jsx(_e,{className:"w-5 h-5 text-green-500"})),!0},[u,o,a,s]),v=p.useCallback(async(E,N)=>kO(E,r,N),[r]),k=p.useCallback(async E=>CO(E,r),[r]),S=p.useCallback((E,N)=>SO(E,N),[]),C=p.useCallback(async(E,N)=>{const D=await bb();await UO(E,N,D)},[]),j=p.useCallback(E=>BO(E),[]),T={ranks:r,questsMetadata:o,questChapters:u,rooms:d,handleUpdateUser:m,handleUpdateRanks:b,handleSaveQuest:_,handleDeleteQuest:w,handleGenerateQuestsMetadata:y,handleSaveQuestChapter:g,handleDeleteQuestChapter:x,handleSavePlayer:v,handleBatchImportPlayers:k,handleTogglePlayerStatus:S,handleSaveRoom:C,handleDeleteRoom:j};return i.jsx(zw.Provider,{value:T,children:t})},qD=({children:t})=>{const{currentUser:e,authChecked:n}=dn(),{ranks:a}=tl(),{showAlert:s,showToast:r}=un(),[l,o]=p.useState([]),[c,u]=p.useState(!0),[f,d]=p.useState(!1),[h,m]=p.useState([]);p.useEffect(()=>{if(!n||!e){o([]),m([]),u(!0);return}(async()=>{const{entries:N,hasNextPage:D}=await _b(Mb);o(N),u(D)})();let E=()=>{};return e.role===We.PLAYER?E=VC(e.id,N=>m(N)):m([]),()=>{E()}},[n,e==null?void 0:e.id,e==null?void 0:e.role]);const b=p.useCallback(async()=>{if(!(f||!c)){d(!0);try{const T=l[l.length-1];if(!T){d(!1);return}const{entries:E,hasNextPage:N}=await _b(Mb,{xp:T.xp,id:T.userId});o(D=>[...D,...E]),u(N)}catch(T){console.error("Failed to load more leaderboard entries:",T),s("Gagal Memuat","Tidak dapat memuat data peringkat selanjutnya.")}finally{d(!1)}}},[f,c,l,s]),_=p.useRef([]);p.useEffect(()=>{if(!e||e.role!==We.PLAYER||_.current.length===0){_.current=h;return}const T=_.current;h.forEach(E=>{const N=T.find(D=>D.id===E.id);if(N&&N.reviewStatus!==E.reviewStatus)if(E.reviewStatus==="approved"){let D=`Kerja bagus! File "${E.name}" Anda telah disetujui.`;E.bonusXp&&E.bonusXp>0&&(D+=` Anda mendapat ${E.bonusXp} XP tambahan!`),r("File Disetujui",D,i.jsx(_e,{className:"w-5 h-5 text-green-500"}))}else E.reviewStatus==="rejected"&&r("File Ditolak",`File "${E.name}" Anda ditolak. Cek komentar dari Master.`,i.jsx(lt,{className:"w-5 h-5 text-red-500"}))}),_.current=h},[h,r,e]);const w=p.useCallback(async(T,E,N)=>{var D;if(e&&!((D=e.completedQuests)!=null&&D[T.id])){const U=await jO(e,T,E,a,N);U&&r("Naik Pangkat!",`Selamat! Kamu telah mencapai peringkat ${U.name}.`,i.jsx(Mt,{className:"w-6 h-6 text-yellow-500"}))}},[e,a,r]),y=p.useCallback(T=>{e&&AO(e.id,T)},[e]),g=p.useCallback(T=>{e&&wb(e.id,T)},[e]),x=p.useCallback(async(T,E)=>{try{await IO(T,E,a),r("Berhasil","Progres pemain untuk misi ini telah direset.")}catch(N){s("Gagal Mereset",N.message)}},[a,s,r]),v=p.useCallback(async T=>{try{await wb(T,null),r("Berhasil","Pemain telah berhasil dibuka kuncinya.",i.jsx(_e,{className:"w-5 h-5 text-green-500"}))}catch(E){s("Gagal Membuka Kunci",E.message)}},[s,r]),k=p.useCallback(async T=>e?HO(e.id,T):null,[e]),S=p.useCallback(T=>{e&&FO(e.id,T)},[e]),C=p.useCallback(async(T,E,N,D=0)=>{try{let U="File berhasil diperbarui.";if(N.reviewStatus==="approved"&&D>0&&(e==null?void 0:e.role)===We.MASTER){const $=await QO(T,E,N,D,a);$&&r("Pemain Naik Pangkat!",`Selamat! Pemain telah mencapai peringkat ${$.name}.`,i.jsx(Mt,{className:"w-6 h-6 text-yellow-500"})),U=`File telah disetujui dan ${D} XP bonus diberikan.`}else N.reviewStatus==="submitted"&&(e==null?void 0:e.role)===We.MASTER?(await GO(T,E,a),U="Penilaian telah direset dan XP bonus (jika ada) telah dikembalikan."):(await VO(T,E,N),N.reviewStatus==="submitted"&&(e==null?void 0:e.role)===We.PLAYER?U="File berhasil diajukan untuk penilaian.":N.reviewStatus==="approved"?U="File telah disetujui (tanpa bonus XP).":N.reviewStatus==="rejected"&&(U="File telah ditolak."));r("Berhasil",U,i.jsx(_e,{className:"w-5 h-5 text-green-500"}))}catch(U){throw s("Gagal Memperbarui File",U.message),U}},[a,s,r,e]),j={leaderboardEntries:l,hasNextPage:c,isLoadingMore:f,handleLoadMoreLeaderboard:b,playerCodeFiles:h,handleQuestComplete:w,handleRecordAttempt:y,handleSetActiveQuest:g,handleResetPlayerQuestProgress:x,handleUnlockPlayer:v,handleSavePlayerCodeFile:k,handleDeletePlayerCodeFile:S,handleUpdatePlayerCodeFile:C};return i.jsx(Hw.Provider,{value:j,children:t})},ZD=({children:t})=>i.jsx(YD,{children:i.jsx(KD,{children:i.jsx(XD,{children:i.jsx(qD,{children:t})})})}),JD=()=>{const{alertModalContent:t,closeAlert:e,toastContent:n,closeToast:a}=un();return i.jsxs(i.Fragment,{children:[i.jsx(VD,{}),i.jsx(h5,{isOpen:!!t,onClose:e,title:(t==null?void 0:t.title)||"",children:t==null?void 0:t.message}),n&&i.jsx(f5,{title:n.title,message:n.message,icon:n.icon,onClose:a})]})},eL=()=>i.jsxs(kd,{children:[i.jsx(He,{path:"/",element:i.jsx(GD,{})}),i.jsx(He,{path:"/playground",element:i.jsx(WD,{})}),i.jsx(He,{path:"/*",element:i.jsx(ZD,{children:i.jsx(JD,{})})})]}),WC=document.getElementById("root");if(!WC)throw new Error("Could not find root element to mount to");const tL=JE.createRoot(WC);tL.render(i.jsx(td.StrictMode,{children:i.jsx(Kj,{children:i.jsx(eL,{})})}));export{Ru as D,Bs as F,Gi as S,kn as _,fx as a,nL as b,br as c,sL as d,po as e,jd as f,ak as g,Ve as h,YT as i,Si as j,aL as k,go as l,ZT as m,rk as n,iL as o,qT as p,rL as q,xs as r,lL as s,oL as t};
